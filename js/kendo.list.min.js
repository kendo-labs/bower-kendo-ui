/**
 * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(define){define("kendo.list.min",["kendo.data.min","kendo.popup.min"],function(){var e={id:"list",name:"List",category:"framework",depends:["data","popup"],hidden:true},v=window.kendo.jQuery,h=void 0,p=window.kendo,a=p.ui,o=p._outerHeight,b=/^\d+(\.\d+)?%$/i,s=a.Widget,_=p.keys,n=p.support,x=p.htmlEncode,w=p._activeElement,u=p._outerWidth,t=p.data.ObservableArray,r="id",g="change",d="k-focus",f="k-hover",m="k-selected",i="k-i-loading k-input-loading-icon",I="k-list",S="k-table",y="k-data-table",k="k-table-md",C="k-list-ul",T="k-table-list",F=".k-list-group-sticky-header",V=".k-list-item-group-label",D=".k-list-item",H=".k-table-row",B="open",E="close",L="cascade",P="select",A="click",G="mouseleave",W="mouseenter",q="activate",N="deactivate",O="dataBinding",z="dataBound",M="selectedItemChange",R="selected",U="requestStart",j="requestEnd",$="blur",Q="focus",Y="focusout",K=v.extend,X=Array.isArray,J=n.browser,Z="k-hidden",ee="width",te="text",ie="value",ae=J.msie,re=/"/g,se={ComboBox:["DropDownList","MultiColumnComboBox"],DropDownList:["ComboBox","MultiColumnComboBox"],MultiColumnComboBox:["ComboBox","DropDownList"]},ne='<ul unselectable="on"/>',le="<div class='k-list'/>",oe='<div class="k-no-data" style="display: none;"></div>',ue='<div class="k-list-footer"></div>',de='<div class="k-table-footer">'+'<span class="k-table-td"></span>'+"</div>",ce="mousedown",fe="-list",he="_listbox",pe="aria-labelledby",ve="aria-label",_e="aria-activedescendant",ge="aria-autocomplete",me="aria-controls",be="aria-live",xe="aria-expanded",we="aria-hidden",Ie="aria-busy",Se="aria-multiselectable",ye="aria-selected",ke=".k-table-group-row",Ce=p.ui.DataBoundWidget.extend({init:function(e,t){var i=this,a;s.fn.init.call(i,e,t);e=i.element;t=i.options;i._isSelect=e.is(P);if(i._isSelect&&i.element[0].length)if(!t.dataSource){t.dataTextField=t.dataTextField||te;t.dataValueField=t.dataValueField||ie}i._listSize=p.cssProperties.getValidClass({widget:"List",propName:"size",value:t.size});i.ul=v(ne).attr({tabIndex:-1,"aria-hidden":true});i.list=v(le).addClass(i._listSize).append(i.ul);a=e.attr(r);if(!a)a=p.guid();i.list.attr(r,a+fe);i.ul.attr(r,a+he);if(t.columns&&t.columns.length){i.list.removeClass(I).addClass(y);i.list.removeClass(i._listSize).addClass(k);i.ul.removeClass(C).addClass(S);i._columnsHeader()}i._header();i._noData();i._footer();i._accessors();i._initValue()},options:{valuePrimitive:false,footerTemplate:"",headerTemplate:"",noDataTemplate:true,size:"medium",messages:{noData:"No data found.",clear:"clear"}},setOptions:function(e){s.fn.setOptions.call(this,e);if(e&&e.enable!==h)e.enabled=e.enable;if(e.columns&&e.columns.length)this._columnsHeader();this._header();this._noData();this._footer();this._renderFooter();this._renderNoData()},focus:function(){this._focused.trigger(Q)},readonly:function(e){this._editable({readonly:e===h?true:e,disable:false})},enable:function(e){this._editable({readonly:false,disable:!(e=e===h?true:e)})},_header:function(){var e=this;var t=v(e.header);var i=e.options.headerTemplate;this._angularElement(t,"cleanup");p.destroy(t);t.remove();if(!i){e.header=null;return}var a=typeof i!=="function"?p.template(i):i;t=v(a({}));e.header=t[0]?t:null;if(e.list.parent.length>0)e.list.before(t);this._angularElement(e.header,"compile")},_columnsHeader:function(){var e=this;var t=v(e.columnsHeader);this._angularElement(t,"cleanup");p.destroy(t);t.remove();var i="<div class='k-table-header'><div class='k-table-header-wrap'><table class='k-table' role='presentation'>";var a="<colgroup>";var r="<tr class='k-table-row'>";for(var s=0;s<this.options.columns.length;s++){var n=this.options.columns[s];var d=n.title||n.field||"";var l=n.headerTemplate||d;var c=typeof l!=="function"?p.template(l):l;var o=n.width;var f=parseInt(o,10);var u="";if(o&&!isNaN(f)){u+="style='width:";u+=f;u+=b.test(o)?"%":"px";u+=";'"}a+="<col "+u+"/>";r+="<th class='k-table-th'>";r+=c(n);r+="</th>"}a+="</colgroup>";r+="</tr>";i+=a;i+="<thead class='k-table-thead'>";i+=r;i+="</thead></table></div></div>";e.columnsHeader=t=v(i);e.list.prepend(t);this._angularElement(e.columnsHeader,"compile")},_noData:function(){var e=this;var t=v(e.noData);var i=e.options.noDataTemplate===true?e.options.messages.noData:e.options.noDataTemplate;e.angular("cleanup",function(){return{elements:t}});p.destroy(t);t.remove();if(!i){e.noData=null;return}e.noData=v(oe).appendTo(e.list);e.noDataTemplate=typeof i!=="function"?p.template(i):i},_footer:function(){var e=this;var t=v(e.footer);var i=e.options.footerTemplate;var a=this.options.columns&&this.options.columns.length?de:ue;this._angularElement(t,"cleanup");p.destroy(t);t.remove();if(!i){e.footer=null;return}e.footer=v(a).appendTo(e.list);e.footerTemplate=typeof i!=="function"?p.template(i):i},_listOptions:function(e){var t=this;var i=t.options;var a=i.virtual;var r={change:t._listChange.bind(t)};var s=t._listBound.bind(t);var n=t._focused;var l=t.element.attr("id");var o=v('label[for="'+t.element.attr("id")+'"]');var u=n.attr(pe);if(!u&&o.length)u=o.attr("id")||t._generateLabelId(o,l||p.guid());a=typeof a==="object"?a:{};e=v.extend({autoBind:false,selectable:true,dataSource:t.dataSource,click:t._click.bind(t),activate:t._activateItem.bind(t),columns:i.columns,deactivate:t._deactivateItem.bind(t),dataBinding:function(){t.trigger(O)},dataBound:s,height:i.height,dataValueField:i.dataValueField,dataTextField:i.dataTextField,groupTemplate:i.groupTemplate,fixedGroupTemplate:i.fixedGroupTemplate,template:i.template,ariaLabel:n.attr(ve),ariaLabelledBy:u,listSize:t._listSize},e,a,r);if(!e.template)e.template="#:"+p.expr(e.dataTextField,"data")+"#";if(i.$angular)e.$angular=i.$angular;return e},_initList:function(){var e=this;var t=e._listOptions({selectedItemChange:e._listChange.bind(e)});if(!e.options.virtual)e.listView=new p.ui.StaticList(e.ul,t);else{e.listView=new p.ui.VirtualList(e.ul,t);e.list.addClass("k-virtual-list")}e.listView.bind("listBound",e._listBound.bind(e));e._setListValue()},_setListValue:function(e){e=e||this.options.value;if(e!==h)this.listView.value(e).done(this._updateSelectionState.bind(this))},_updateSelectionState:v.noop,_listMousedown:function(e){if(!this.filterInput||this.filterInput[0]!==e.target)e.preventDefault()},_isFilterEnabled:function(){var e=this.options.filter;return e&&e!=="none"},_hideClear:function(){var e=this;if(e._clear)e._clear.addClass(Z)},_showClear:function(){if(this._clear)this._clear.removeClass(Z)},_clearValue:function(){this._clearText();this._accessor("");this.listView.value([]);if(this._isSelect)this._customOption=h;if(this._isFilterEnabled()&&!this.options.enforceMinLength){this._filter({word:"",open:false});if(this.options.highlightFirst)this.listView.focus(0)}this._change()},_clearText:function(){this.text("")},_clearFilter:function(){if(!this.options.virtual)this.listView.bound(false);this._filterSource()},_filterSource:function(e,t){var i=this;var a=i.options;var r=a.filterFields&&e&&e.logic&&e.filters&&e.filters.length;var s=i.dataSource;var n=K({},s.filter()||{});var l=e||n.filters&&n.filters.length&&!e;var o=Be(n,a.dataTextField);this._clearFilterExpressions(n);if((e||o)&&i.trigger("filtering",{filter:e}))return v.Deferred().reject().promise();var u={filters:[],logic:"and"};if(r)u.filters.push(e);else this._pushFilterExpression(u,e);if(He(n))if(u.logic===n.logic)u.filters=u.filters.concat(n.filters);else u.filters.push(n);if(i._cascading)this.listView.setDSFilter(u);var d=K({},{page:l?1:s.page(),pageSize:l?s.options.pageSize:s.pageSize(),sort:s.sort(),filter:s.filter(),group:s.group(),aggregate:s.aggregate()},{filter:u});return s[t?"read":"query"](s._mergeState(d))},_pushFilterExpression:function(e,t){if(He(t)&&t.value!=="")e.filters.push(t)},_clearFilterExpressions:function(e){if(!e.filters)return;var t;for(var i=0;i<e.filters.length;i++)if("fromFilter"in e.filters[i])t=i;if(!isNaN(t))e.filters.splice(t,1)},_angularElement:function(e,t){if(!e)return;this.angular(t,function(){return{elements:e}})},_renderNoData:function(){var e=this;var t=e.noData;if(!t)return;this._angularElement(t,"cleanup");t.html(e.noDataTemplate({instance:e}));this._angularElement(t,"compile")},_toggleNoData:function(e){v(this.noData).toggle(e)},_toggleHeader:function(e){var t=this.listView.content.prev(F);t.toggle(e)},_renderFooter:function(){var e=this,t=e.footer?this.options.columns&&this.options.columns.length?e.footer.children().first():e.footer:null;if(!t)return;this._angularElement(t,"cleanup");t.html(e.footerTemplate({instance:e}));this._angularElement(t,"compile")},_allowOpening:function(){return this.options.noDataTemplate||this.dataSource.flatView().length},_initValue:function(){var e=this,t=e.options.value;if(t!==null)e.element.val(t);else{t=e._accessor();e.options.value=t}e._old=t},_ignoreCase:function(){var e=this,t=e.dataSource.reader.model,i;if(t&&t.fields){i=t.fields[e.options.dataTextField];if(i&&i.type&&i.type!=="string")e.options.ignoreCase=false}},_focus:function(e){return this.listView.focus(e)},_filter:function(e){var t=this;var i=t.options;var a=e.word;var r=i.filterFields;var s=i.dataTextField;var n;if(r&&r.length){n={logic:"or",filters:[],fromFilter:true};for(var l=0;l<r.length;l++)this._pushFilterExpression(n,t._buildExpression(a,r[l]))}else n=t._buildExpression(a,s);t._open=e.open;t._filterSource(n)},_buildExpression:function(e,t){var i=this;var a=i.options;var r=a.ignoreCase;var s=i.dataSource.options.accentFoldingFiltering;return{value:r?s?e.toLocaleLowerCase(s):e.toLowerCase():e,field:t,operator:a.filter,ignoreCase:r}},_clearButton:function(){var e=this;var t=e.options.messages.clear;if(!e._clear)e._clear=v('<span unselectable="on" class="k-clear-value" title="'+t+'"><span class="k-icon k-i-x"></span></span>').attr({role:"button",tabIndex:-1});if(!e.options.clearButton)e._clear.remove();this._hideClear()},search:function(e){var t=this.options;e=typeof e==="string"?e:this._inputValue();clearTimeout(this._typingTimeout);if(!t.enforceMinLength&&!e.length||e.length>=t.minLength){this._state="filter";if(this.listView)this.listView._emptySearch=!p.trim(e).length;if(!this._isFilterEnabled())this._searchByWord(e);else this._filter({word:e,open:true})}},current:function(e){return this._focus(e)},items:function(){return this.ul[0].children},destroy:function(){var e=this;var t=e.ns;s.fn.destroy.call(e);e._unbindDataSource();e.listView.destroy();e.list.off(t);e.popup.destroy();if(e._form)e._form.off("reset",e._resetHandler)},dataItem:function(e){var t=this;if(e===h)return t.listView.selectedDataItems()[0];if(typeof e!=="number"){if(t.options.virtual)return t.dataSource.getByUid(v(e).data("uid"));e=v(t.items()).index(e)}return t.dataSource.flatView()[e]},_activateItem:function(){var e=this.listView.focus();if(e&&this.popup.visible())this._focused.add(this.filterInput).attr(_e,e.attr("id"))},_deactivateItem:function(){this._focused.add(this.filterInput).removeAttr(_e)},_accessors:function(){var e=this;var t=e.element;var i=e.options;var a=p.getter;var r=t.attr(p.attr("text-field"));var s=t.attr(p.attr("value-field"));if(!i.dataTextField&&r)i.dataTextField=r;if(!i.dataValueField&&s)i.dataValueField=s;e._text=a(i.dataTextField);e._value=a(i.dataValueField)},_aria:function(e){var t=this,i=t.options,a=t._focused,r;if(i.suggest!==h){if(i.filter==="none")if(i.suggest===true)r="inline";else r="none";else if(i.suggest===true)r="both";else r="list";a.attr(ge,r)}e=e?e+" "+t.ul[0].id:t.ul[0].id;a.attr({"aria-controls":e});if(t.filterInput&&t.filterInput.length>0)t.filterInput.attr(me,e);t.ul.attr(be,!t._isFilterEnabled()?"off":"polite");t._ariaLabel(t._focused)},_blur:function(){var e=this;e._change();e.close();e._userTriggered=false},_isValueChanged:function(e){return e!==l(this._old,typeof e)},_change:function(){var e=this;var t=e.selectedIndex;var i=e.options.value;var a=e.value();var r;if(e._isSelect&&!e.listView.bound()&&i)a=i;if(e._isValueChanged(a))r=true;else if(e._valueBeforeCascade!==h&&e._valueBeforeCascade!==l(e._old,typeof e._valueBeforeCascade)&&e._userTriggered)r=true;else if(t!==h&&t!==e._oldIndex&&!e.listView.isFiltered())r=true;if(r){if(e._old===null||e._old===""||a==="")e._valueBeforeCascade=e._old=a;else if(e.dataItem())e._valueBeforeCascade=e._old=e.options.dataValueField?e.dataItem()[e.options.dataValueField]:e.dataItem();else e._valueBeforeCascade=e._old=null;e._oldIndex=t;if(!e._typing)e.element.trigger(g);e.trigger(g)}e.typing=false},_data:function(){return this.dataSource.view()},_enable:function(){var e=this,t=e.options,i=e.element.is("[disabled]");if(t.enable!==h)t.enabled=t.enable;if(!t.enabled||i)e.enable(false);else e.readonly(e.element.is("[readonly]"))},_dataValue:function(e){var t=this._value(e);if(t===h)t=this._text(e);return t},_offsetHeight:function(){var t=0;var e=this.listView.content.parent().prevAll(":visible");e.each(function(){var e=v(this);t+=o(e,true)});return t},_height:function(e){var t=this;var i=t.list;var a=t.options.height;var r=t.popup.visible();var s=this.options.columns&&this.options.columns.length;var n,l;if(e||t.options.noDataTemplate){l=i.parent().add(i.closest(".k-animation-container")).show();if(!i.parent().is(":visible")){l.hide();return}a=t.listView.content[0].scrollHeight>a?a:"auto";l.height(a);if(a!=="auto"){n=t._offsetHeight();a=a-n;if(s)a=a-(o(v(t.footer))||0)-(o(v(t.columnsHeader))||0)}if(s)t.listView.content.outerHeight(a);else t.listView.content.parent().outerHeight(a);if(!r)i.parent().hide()}return a},_openHandler:function(e){var t;this._adjustListWidth();if(this.trigger(B))e.preventDefault();else{this._focused.attr(xe,true);this.ul.attr(we,false);t=this.listView.focus();if(t)this._focused.add(this.filterInput).attr(_e,t.attr("id"))}},_adjustListWidth:function(){var e=this,t=e.list.parent(),i=t[0].style.width,a=e.wrapper,r,s;if(!t.data(ee)&&i)return;r=window.getComputedStyle?window.getComputedStyle(a[0],null):0;s=parseFloat(r&&r.width)||u(a);if(r&&J.msie)s+=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth);if(t.css("box-sizing")!=="border-box")i=s-(u(t)-t.width());else i=s;t.css({fontFamily:a.css("font-family"),width:e.options.autoWidth?"auto":i,minWidth:i,whiteSpace:e.options.autoWidth?"nowrap":"normal"}).data(ee,i);return true},_closeHandler:function(e){if(this.trigger(E))e.preventDefault();else{this._focused.attr(xe,false);this.ul.attr(we,true);this._focused.add(this.filterInput).removeAttr(_e)}},_focusItem:function(){var e=this.listView;var t=!e.focus();var i=c(e.select());if(i===h&&this.options.highlightFirst&&t)i=0;if(i!==h)e.focus(i);else if(t)e.scrollToIndex(0)},_calculateGroupPadding:function(e){var t=this.ul.children(".k-first").first();var i=this.listView.content.prev(F);var a=0;var r="right";if(i[0]&&i[0].style.display!=="none"){if(e!=="auto")a=p.support.scrollbar();if(this.element.parents(".k-rtl").length)r="left";a+=parseFloat(t.css("border-"+r+"-width"),10)+parseFloat(t.children(V).css("padding-"+r),10);i.css("padding-"+r,a)}},_calculatePopupHeight:function(e){var t=this._height(this.dataSource.flatView().length||e);this._calculateGroupPadding(t);this._calculateColumnsHeaderPadding(t)},_calculateColumnsHeaderPadding:function(e){if(this.options.columns&&this.options.columns.length){var t=this;var i=n.isRtl(t.wrapper);var a=p.support.scrollbar();t.columnsHeader.css(i?"padding-left":"padding-right",e!=="auto"?a:0)}},_refreshScroll:function(){var e=this.listView;var t=e.element.height()>e.content.height();if(this.options.autoWidth)e.content.css({overflowX:"hidden",overflowY:t?"scroll":"auto"})},_resizePopup:function(e){if(this.options.virtual)return;if(!this.popup.element.is(":visible")){this.popup.one("open",function(e){return function(){this._calculatePopupHeight(e)}.bind(this)}.call(this,e));this.popup.one(q,this._refreshScroll.bind(this))}else this._calculatePopupHeight(e)},_popup:function(){var e=this;e.list.wrap("<div>");e.popup=new a.Popup(e.list.parent(),K({},e.options.popup,{anchor:e.wrapper,open:e._openHandler.bind(e),close:e._closeHandler.bind(e),animation:e.options.animation,isRtl:n.isRtl(e.wrapper),autosize:e.options.autoWidth}));e.popup.element.prepend(e.header).on(ce+this.ns,this._listMousedown.bind(this))},_toggleHover:function(e){v(e.currentTarget).toggleClass(f,e.type===W)},_toggle:function(e,t){var i=this;var a=n.mobileOS&&(n.touch||n.MSPointers||n.pointers);e=e!==h?e:!i.popup.visible();if(!t&&!a&&i._focused[0]!==w()){i._prevent=true;i._focused.trigger(Q);i._prevent=false}i[e?B:E]()},_triggerCascade:function(){var e=this;if(!e._cascadeTriggered||e.value()!==l(e._cascadedValue,typeof e.value())){e._cascadedValue=e.value();e._cascadeTriggered=true;e.trigger(L,{userTriggered:e._userTriggered})}},_triggerChange:function(){if(this._valueBeforeCascade!==this.value())this.trigger(g)},_unbindDataSource:function(){var e=this;e.dataSource.unbind(U,e._requestStartHandler).unbind(j,e._requestEndHandler).unbind("error",e._errorHandler)},requireValueMapper:function(e,t){var i=(e.value instanceof Array?e.value.length:e.value)||(t instanceof Array?t.length:t);if(i&&e.virtual&&typeof e.virtual.valueMapper!=="function")throw new Error("ValueMapper is not provided while the value is being set. See http://docs.telerik.com/kendo-ui/controls/editors/combobox/virtualization#the-valuemapper-function")}});function l(e,t){if(e!==h&&e!==""&&e!==null)if(t==="boolean"){if(typeof e!=="boolean")e=e.toString().toLowerCase()==="true";e=Boolean(e)}else if(t==="number")e=Number(e);else if(t==="string")e=e.toString();return e}K(Ce,{inArray:function(e,t){var i,a,r=t.children;if(!e||e.parentNode!==t)return-1;for(i=0,a=r.length;i<a;i++)if(e===r[i])return i;return-1},unifyType:l}),a.Select=(p.ui.List=Ce).extend({init:function(e,t){Ce.fn.init.call(this,e,t);this._initial=this.element.val()},setDataSource:function(e){var t=this;var i;t.options.dataSource=e;t._dataSource();if(t.listView.bound()){t._initialIndex=null;t.listView._current=null}t.listView.setDataSource(t.dataSource);if(t.options.autoBind)t.dataSource.fetch();i=t._parentWidget();if(i)t._cascadeSelect(i)},close:function(){this.popup.close()},select:function(e){var t=this;if(e===h)return t.selectedIndex;else return t._select(e).done(function(){t._cascadeValue=t._old=t._accessor();t._oldIndex=t.selectedIndex})},_accessor:function(e,t){return this[this._isSelect?"_accessorSelect":"_accessorInput"](e,t)},_accessorInput:function(e){var t=this.element[0];if(e===h)return t.value;else{if(e===null)e="";t.value=e}},_accessorSelect:function(e,t){var i=this.element[0];var a;if(e===h)return Ve(i).value||"";Ve(i).selected=false;if(t===h)t=-1;a=e!==null&&e!=="";if(a&&t==-1)this._custom(e);else if(e)i.value=e;else i.selectedIndex=t},_syncValueAndText:function(){return true},_custom:function(e){var t=this;var i=t.element;var a=t._customOption;if(!a){a=v("<option/>");t._customOption=a;i.append(a)}a.text(e);a[0].selected=true},_hideBusy:function(){var e=this;clearTimeout(e._busy);e._arrowIcon.removeClass(i);e._focused.attr(Ie,false);e._busy=null;e._showClear()},_showBusy:function(e){var t=this;if(e.isDefaultPrevented())return;t._request=true;if(t._busy)return;t._busy=setTimeout(function(){if(t._arrowIcon){t._focused.attr(Ie,true);t._arrowIcon.addClass(i);t._hideClear()}},100)},_requestEnd:function(){this._request=false;this._hideBusy()},_dataSource:function(){var e=this,t=e.element,i=e.options,a=i.dataSource||{},r;a=Array.isArray(a)?{data:a}:a;if(e._isSelect){r=t[0].selectedIndex;if(r>-1)i.index=r;a.select=t;a.fields=[{field:i.dataTextField},{field:i.dataValueField}]}if(e.dataSource)e._unbindDataSource();else{e._requestStartHandler=e._showBusy.bind(e);e._requestEndHandler=e._requestEnd.bind(e);e._errorHandler=e._hideBusy.bind(e)}e.dataSource=p.data.DataSource.create(a).bind(U,e._requestStartHandler).bind(j,e._requestEndHandler).bind("error",e._errorHandler)},_firstItem:function(){this.listView.focusFirst()},_lastItem:function(){this.listView.focusLast()},_nextItem:function(){return this.listView.focusNext()},_prevItem:function(){return this.listView.focusPrev()},_getNormalizedDataItem:function(e){var t=this,i=t.listView,a=typeof e==="number",r=t.optionLabel&&t.optionLabel.length,s;if(a)s=r?--e:e;else s=i.getElementIndex(e);return i.dataItemByIndex(s)},_getNormalizedSelectCandidate:function(e){var t=this,i=t.optionLabel&&t.optionLabel.length,a=typeof e==="number",r=e;if(i&&a)r++;return r},_move:function(e){var t=this;var i=t.listView;var a=e.keyCode;var r=a===_.DOWN;var d=t.options.virtual;var s;var n;var l;var o;var c;if(a===_.UP||r){if(e.altKey)t.toggle(r);else{if(!i.bound()&&!t.ul[0].firstChild){if(!t._fetch){t.dataSource.one(g,function(){t._fetch=false;t._move(e)});t._fetch=true;t._filterSource()}e.preventDefault();return true}l=t._focus();if(!t._fetch&&(!l||l.hasClass(m)))if(r){o=t._nextItem();if(d&&o<=0||!t._focus()&&!o)t._lastItem()}else{o=t._prevItem();if(d&&o>=i.dataSource.total()-1||!t._focus()&&!o)t._firstItem()}c=t._getNormalizedSelectCandidate(t._get(t._focus())||o||0);t._select(c,true).done(function(){var e=function(){if(!t.popup.visible())t._blur();if(t._cascadedValue===null)t._cascadedValue=t.value();else t._cascadedValue=t.dataItem()?t.dataItem()[t.options.dataValueField]||t.dataItem():null};if(t.trigger(P,{dataItem:t._getNormalizedDataItem(c),item:t._focus()}))t._select(l).done(e);else e()})}e.preventDefault();n=true}else if(a===_.ENTER||a===_.TAB){if(t.popup.visible())e.preventDefault();l=t._focus();s=t.dataItem();if(!t.popup.visible()&&(!s||t.text()!==t._text(s)))l=null;var f=t.filterInput&&t.filterInput[0]===w();var u;if(l){s=i.dataItemByIndex(i.getElementIndex(l));var h=true;if(s)h=t._value(s)!==Ce.unifyType(t.value(),typeof t._value(s));if(h&&t.trigger(P,{dataItem:s,item:l}))return;u=t._select(l)}else if(t.input){if(t._syncValueAndText()||t._isSelect)t._accessor(t.input.val());t.listView.value(t.input.val())}if(t._focusElement)t._focusElement(t.wrapper);if(f&&a===_.TAB)t.wrapper.focusout();else if(u&&typeof u.done==="function")u.done(function(){t._blur()});else t._blur();t.close();n=true}else if(a===_.ESC){if(t.popup.visible())e.preventDefault();t.close();n=true}else if(t.popup.visible()&&(a===_.PAGEDOWN||a===_.PAGEUP)){e.preventDefault();var p=a===_.PAGEDOWN?1:-1;i.scrollWith(p*i.screenHeight());n=true}return n},_fetchData:function(){var e=this;var t=!!e.dataSource.view().length;if(e._request||e.options.cascadeFrom)return;if(!e.listView.bound()&&!e._fetch&&!t){e._fetch=true;e.dataSource.fetch().done(function(){e._fetch=false})}},_options:function(e,d,t){var i=this,c=i.element,a=c[0],f=e.length,r="",s,n,l,o,u=0;if(d)r=d;for(;u<f;u++){s="<option";n=e[u];l=i._text(n);o=i._value(n);if(o!==h){o+="";if(o.indexOf('"')!==-1)o=o.replace(re,"&quot;");s+=' value="'+o+'"'}s+=">";if(l!==h)s+=x(l);s+="</option>";r+=s}c.html(r);if(t!==h){a.value=t;if(a.value&&!t)a.selectedIndex=-1}if(a.selectedIndex!==-1){s=Ve(a);if(s)s.setAttribute(R,R)}},_reset:function(){var e=this,t=e.element,i=t.attr("form"),a=i?v("#"+i):t.closest("form");if(a[0]){e._resetHandler=function(){setTimeout(function(){e.value(e._initial)})};e._form=a.on("reset",e._resetHandler)}},_parentWidget:function(){var e=this.options.name;if(!this.options.cascadeFrom)return;var t=v("#"+this.options.cascadeFrom);var i=t.data("kendo"+e);if(!i)for(var a=0;a<se[e].length;a+=1){i=t.data("kendo"+se[e][a]);if(!!i)break}return i},_cascade:function(){var t=this;var e=t.options;var i=e.cascadeFrom;var a;if(i){a=t._parentWidget();if(!a)return;t._cascadeHandlerProxy=t._cascadeHandler.bind(t);t._cascadeFilterRequests=[];e.autoBind=false;a.bind("set",function(){t.one("set",function(e){t._selectedValue=e.value||t._accessor()})});a.first(L,t._cascadeHandlerProxy);if(a.listView.bound()){t._toggleCascadeOnFocus();t._cascadeSelect(a)}else{a.one(z,function(){t._toggleCascadeOnFocus();if(a.popup.visible())a._focused.trigger(Q)});if(!a.value())t.enable(false)}}},_toggleCascadeOnFocus:function(){var e=this;var t=e._parentWidget();var i=ae&&t instanceof a.DropDownList?$:Y;t._focused.add(t.filterInput).on(Q,function(){t.unbind(L,e._cascadeHandlerProxy);t.unbind(g,e._cascadeHandlerProxy);t.first(g,e._cascadeHandlerProxy)});t._focused.add(t.filterInput).on(i,function(){t.unbind(g,e._cascadeHandlerProxy);t.unbind(L,e._cascadeHandlerProxy);t.first(L,e._cascadeHandlerProxy)})},_cascadeHandler:function(e){var t=this._parentWidget();var i=this.value();this._userTriggered=e.userTriggered||t._userTriggered;if(this.listView.bound())this._clearSelection(t,true);this._cascadeSelect(t,i)},_cascadeChange:function(e){var t=this;var i=t._accessor()||t._selectedValue;if(!t._cascadeFilterRequests.length)t._selectedValue=null;if(t._userTriggered)t._clearSelection(e,true);else if(i){if(i!==l(t.listView.value()[0],typeof i))t.value(i);if(!t.dataSource.view()[0]||t.selectedIndex===-1)t._clearSelection(e,true)}else if(t.dataSource.flatView().length)t.select(t.options.index);t.enable();t._triggerCascade();t._triggerChange();t._userTriggered=false},_cascadeSelect:function(t,e){var i=this;var a=t.dataItem();var r=a?a[i.options.cascadeFromParentField]||t._value(a):null;var s=i.options.cascadeFromField||t.options.dataValueField;var n;i._valueBeforeCascade=e!==h?e:i.value();if(r||r===0){n=i.dataSource.filter()||{};Be(n,s);var l=function(){var e=i._cascadeFilterRequests.shift();if(e)i.unbind("dataBound",e);e=i._cascadeFilterRequests[0];if(e)i.first("dataBound",e);i._cascadeChange(t)};i._cascadeFilterRequests.push(l);if(i._cascadeFilterRequests.length===1)i.first("dataBound",l);i._cascading=true;i._filterSource({field:s,operator:"eq",value:r});i._cascading=false}else{i.enable(false);i._clearSelection(t);i._triggerCascade();i._triggerChange();i._userTriggered=false}}});var Te=".StaticList",Fe=p.ui.DataBoundWidget.extend({init:function(e,t){s.fn.init.call(this,e,t);this.element.attr("role","listbox").on(A+Te,"li",this._click.bind(this)).on(W+Te,"li",function(){v(this).addClass(f)}).on(G+Te,"li",function(){v(this).removeClass(f)});if(t&&t.ariaLabel)this.element.attr(ve,t.ariaLabel);else if(t&&t.ariaLabelledBy)this.element.attr(pe,t.ariaLabelledBy);if(n.touch)this._touchHandlers();if(this.options.selectable==="multiple")this.element.attr(Se,true);if(this.options.columns&&this.options.columns.length){var i=this.element.parent().find(".k-table-thead");var a=v('<tr class="k-table-group-row">'+'<th class="k-table-th" colspan="'+this.options.columns.length+'"></th>'+"</tr>");i.append(a);this.header=a.find(".k-table-th");this.content=this.element.wrap("<div class='k-table-body k-table-scroller' unselectable='on'></div>").parent();this.element.addClass(T)}else{this.content=this.element.wrap("<div class='k-list-content k-list-scroller' unselectable='on'></div>").parent();this.header=this.content.before('<div class="k-list-group-sticky-header" style="display:none"></div>').prev();this.element.addClass(C)}this.bound(false);this._optionID=p.guid();this._selectedIndices=[];this._view=[];this._dataItems=[];this._values=[];var r=this.options.value;if(r)this._values=Array.isArray(r)?r.slice(0):[r];this._getter();this._templates();this.setDataSource(this.options.dataSource);this._createOnScrollProxy()},options:{name:"StaticList",dataValueField:null,valuePrimitive:false,selectable:true,template:null,groupTemplate:null,fixedGroupTemplate:null,ariaLabel:null,ariaLabelledBy:null},events:[A,g,q,N,O,z,M],setDataSource:function(e){var t=this;var i=e||{};var a;i=Array.isArray(i)?{data:i}:i;i=p.data.DataSource.create(i);if(t.dataSource){t.dataSource.unbind(g,t._refreshHandler);a=t.value();t.value([]);t.bound(false);t.value(a)}else t._refreshHandler=t.refresh.bind(t);t.setDSFilter(i.filter());t.dataSource=i.bind(g,t._refreshHandler);t._fixedHeader()},_touchHandlers:function(){var t=this,i=this.options.columns&&this.options.columns.length?H:D,a,r,s=function(e){return(e.originalEvent||e).changedTouches[0].pageY};t.element.on("touchstart"+Te,function(e){a=s(e)});t.element.on("touchend"+Te,function(e){if(e.isDefaultPrevented())return;r=s(e);if(Math.abs(r-a)<10){t._touchTriggered=true;t._triggerClick(v(e.target).closest(i).get(0))}})},skip:function(){return this.dataSource.skip()},setOptions:function(e){s.fn.setOptions.call(this,e);this._getter();this._templates();this._render()},destroy:function(){this.element.off(Te);if(this._refreshHandler)this.dataSource.unbind(g,this._refreshHandler);clearTimeout(this._scrollId);s.fn.destroy.call(this)},dataItemByIndex:function(e){return this.dataSource.flatView()[e]},screenHeight:function(){return this.content[0].clientHeight},scrollToIndex:function(e){var t=this.element[0].children[e];if(t)this.scroll(t)},scrollWith:function(e){this.content.scrollTop(this.content.scrollTop()+e)},scroll:function(e){if(!e)return;if(e[0])e=e[0];var t=this.content[0],i=e.offsetTop,a=e.offsetHeight,r=t.scrollTop,s=t.clientHeight,n=i+a;if(r>i)r=i;else if(n>r+s)r=n-s;t.scrollTop=r},selectedDataItems:function(e){if(e===h)return this._dataItems.slice();this._dataItems=e;this._values=this._getValues(e)},_getValues:function(e){var t=this._valueGetter;return v.map(e,function(e){return t(e)})},focusNext:function(){var e=this.focus();if(!e)e=0;else e=e.next();this.focus(e)},focusPrev:function(){var e=this.focus();if(!e)e=this.element[0].children.length-1;else e=e.prev();this.focus(e)},focusFirst:function(){this.focus(this.element[0].children[0])},focusLast:function(){this.focus(c(this.element[0].children))},focus:function(e){var t=this;var i=t._optionID;var a;if(e===h)return t._current;e=c(t._get(e));e=v(this.element[0].children[e]);if(t._current){t._current.removeClass(d).removeAttr(r);t.trigger(N)}a=!!e[0];if(a){e.addClass(d);t.scroll(e);e.attr("id",i)}t._current=a?e:null;t.trigger(q)},focusIndex:function(){return this.focus()?this.focus().index():h},skipUpdate:function(e){this._skipUpdate=e},select:function(e){var t=this;var i=t.options.selectable;var a=i!=="multiple"&&i!==false;var r=t._selectedIndices;var d=[this.element.find(".k-selected").index()];var s=[];var n=[];var l;if(e===h)return r.slice();e=t._get(e);if(e.length===1&&e[0]===-1)e=[];var o=v.Deferred().resolve();var u=t.isFiltered();if(u&&!a&&t._deselectFiltered(e))return o;if(a&&!u&&v.inArray(c(e),r)!==-1&&v.inArray(c(e),d)!==-1){if(t._dataItems.length&&t._view.length)t._dataItems=[t._view[r[0]].item];return o}l=t._deselect(e);n=l.removed;e=l.indices;if(e.length){if(a)e=[c(e)];s=t._select(e)}if(s.length||n.length){t._valueComparer=null;t.trigger(g,{added:s,removed:n})}return o},removeAt:function(e){this._selectedIndices.splice(e,1);this._values.splice(e,1);this._valueComparer=null;return{position:e,dataItem:this._dataItems.splice(e,1)[0]}},setValue:function(e){e=Array.isArray(e)||e instanceof t?e.slice(0):[e];this._values=e;this._valueComparer=null},value:function(e){var t=this;var i=t._valueDeferred;var a;if(e===h)return t._values.slice();t.setValue(e);if(!i||i.state()==="resolved")t._valueDeferred=i=v.Deferred();if(t.bound()){a=t._valueIndices(t._values);if(t.options.selectable==="multiple")t.select(-1);t.select(a);i.resolve()}t._skipUpdate=false;return i},items:function(){return this.element.children(D)},_click:function(e){if(this._touchTriggered){this._touchTriggered=false;return}if(!e.isDefaultPrevented())this._triggerClick(e.currentTarget)},_createOnScrollProxy:function(){var e=function(){var e=this;clearTimeout(e._scrollId);e._scrollId=setTimeout(function(){e._renderHeader()},50)};this._onScroll=e.bind(this)},_triggerClick:function(e){if(!this.trigger(A,{item:v(e)}))this.select(e)},_valueExpr:function(e,t){var i=this;var a=0;var r;var s;var n=[];if(!i._valueComparer||i._valueType!==e){i._valueType=e;for(;a<t.length;a++)n.push(l(t[a],e));r="for (var idx = 0; idx < "+n.length+"; idx++) {"+" if (current === values[idx]) {"+"   return idx;"+" }"+"} "+"return -1;";s=new Function("current","values",r);i._valueComparer=function(e){return s(e,n)}}return i._valueComparer},_dataItemPosition:function(e,t){var i=this._valueGetter(e);var a=this._valueExpr(typeof i,t);return a(i)},_getter:function(){this._valueGetter=p.getter(this.options.dataValueField)},_deselect:function(e){var t=this;var i=t.element[0].children;var a=t.options.selectable;var r=t._selectedIndices;var d=t._dataItems;var c=t._values;var s=[];var n=0;var l;var o,u;var f=0;e=e.slice();if(a===true||!e.length){for(;n<r.length;n++){v(i[r[n]]).removeClass(m).attr(ye,false);s.push({position:n,dataItem:d[n]})}t._values=[];t._dataItems=[];t._selectedIndices=[]}else if(a==="multiple")for(;n<e.length;n++){o=e[n];if(!v(i[o]).hasClass(m))continue;for(l=0;l<r.length;l++){u=r[l];if(u===o){v(i[u]).removeClass(m).attr(ye,false);var h=this._view[o].item;var p=this._dataItemPosition(h,this._values);s.push({position:p,dataItem:h});d.splice(l,1);r.splice(l,1);e.splice(n,1);c.splice(l,1);f+=1;n-=1;l-=1;break}}}return{indices:e,removed:s}},_deselectFiltered:function(e){var t=this.element[0].children;var i,a,r;var s=[];var n=0;for(;n<e.length;n++){a=e[n];i=this._view[a].item;r=this._dataItemPosition(i,this._values);if(r>-1){s.push(this.removeAt(r));v(t[a]).removeClass(m)}}if(s.length){this.trigger(g,{added:[],removed:s});return true}return false},_select:function(e){var t=this;var i=t.element[0].children;var a=t._view;var r,s;var n=[];var l=0;if(c(e)!==-1)t.focus(e);for(;l<e.length;l++){s=e[l];r=a[s];if(s===-1||!r)continue;r=r.item;t._selectedIndices.push(s);t._dataItems.push(r);t._values.push(t._valueGetter(r));v(i[s]).addClass(m).attr(ye,true);n.push({dataItem:r})}return n},getElementIndex:function(e){return v(e).data("offset-index")},_get:function(e){if(typeof e==="number")e=[e];else if(!X(e)){e=this.getElementIndex(e);e=[e!==h?e:-1]}return e},_template:function(){var e=this;var t=e.options;var i=t.template;if(!i)i=p.template('<li tabindex="-1" role="option" unselectable="on" class="k-list-item"><span class="k-list-item-text">${'+p.expr(t.dataTextField,"data")+"}</span></li>",{useWithBlock:false});else{i=p.template(i);i=function(e){return'<li tabindex="-1" role="option" unselectable="on" class="k-list-item">'+i(e)+"</li>"}}return i},_templates:function(){var e;var t=this.options;var i={template:t.template,groupTemplate:t.groupTemplate,fixedGroupTemplate:t.fixedGroupTemplate};if(t.columns)for(var a=0;a<t.columns.length;a++){var r=t.columns[a];var s=r.field?r.field.toString():te;i["column"+a]=r.template||"#: "+s+"#"}for(var n in i){e=i[n];if(e&&typeof e!=="function")i[n]=p.template(e)}this.templates=i},_normalizeIndices:function(e){var t=[];var i=0;for(;i<e.length;i++)if(e[i]!==h)t.push(e[i]);return t},_valueIndices:function(e,t){var i=this._view;var a=0;var r;t=t?t.slice():[];if(!e.length)return[];for(;a<i.length;a++){r=this._dataItemPosition(i[a].item,e);if(r!==-1)t[r]=a}return this._normalizeIndices(t)},_firstVisibleItem:function(){var e=this.element[0];var t=this.content[0];var i=t.scrollTop;var a=v(e.children[0]).height();var r=Math.floor(i/a)||0;var s=e.children[r]||e.lastChild;var n=s.offsetTop<i;while(s)if(n){if(s.offsetTop+a>i||!s.nextSibling)break;s=s.nextSibling}else{if(s.offsetTop<=i||!s.previousSibling)break;s=s.previousSibling}return this._view[v(s).data("offset-index")]},_fixedHeader:function(){if(this.isGrouped()&&this.templates.fixedGroupTemplate){if(this.header.closest(ke).length)this.header.closest(ke).show();else this.header.show();this.content.scroll(this._onScroll)}else{if(this.header.closest(ke).length)this.header.closest(ke).hide();else this.header.hide();this.content.off("scroll",this._onScroll)}},_renderHeader:function(){var e=this.templates.fixedGroupTemplate;if(!e)return;var t=this._firstVisibleItem();if(t&&t.group.toString().length)this.header.html(e(t.group))},_renderItem:function(e){var t='<li tabindex="-1" role="option" unselectable="on" ';var i=e.item;var a=e.index!==0;var r=e.selected;var s=this.isGrouped();var n=this.options.columns&&this.options.columns.length;var l=e.index%2===1?" k-table-alt-row":"";if(n)t+='class="k-table-row'+l;else t+='class="k-list-item';if(a&&e.newGroup)t+=" k-first";if(e.isLastGroupedItem&&n)t+=" k-last";if(r)t+=" k-selected";t+='" aria-selected="'+(r?"true":"false")+'" data-offset-index="'+e.index+'">';if(n)t+=this._renderColumns(i);else{t+='<span class="k-list-item-text">';t+=this.templates.template(i);t+="</span>"}if(a&&e.newGroup)if(n)t+='<span class="k-table-td k-table-group-td"><span>'+this.templates.groupTemplate(e.group)+"</span></span>";else t+='<div class="k-list-item-group-label">'+this.templates.groupTemplate(e.group)+"</div>";else if(s&&n)t+='<span class="k-table-td k-table-spacer-td"></span>';return t+"</li>"},_renderColumns:function(e){var t="";for(var i=0;i<this.options.columns.length;i++){var a=this.options.columns[i].width;var r=parseInt(a,10);var s="";if(a&&!isNaN(r)){s+="style='width:";s+=r;s+=b.test(a)?"%":"px";s+=";'"}t+="<span class='k-table-td' "+s+">";t+=this.templates["column"+i](e);t+="</span>"}return t},_render:function(){var e="";var t=0;var i=0;var a;var r=[];var s=this.dataSource.view();var n=this.value();var l,o,u;var d=this.isGrouped();if(d)for(t=0;t<s.length;t++){l=s[t];o=true;for(u=0;u<l.items.length;u++){a={selected:this._selected(l.items[u],n),item:l.items[u],group:l.value,newGroup:o,isLastGroupedItem:u===l.items.length-1,index:i};r[i]=a;i+=1;e+=this._renderItem(a);o=false}}else for(t=0;t<s.length;t++){a={selected:this._selected(s[t],n),item:s[t],index:t};r[t]=a;e+=this._renderItem(a)}this._view=r;this.element[0].innerHTML=e;if(d&&r.length)this._renderHeader()},_selected:function(e,t){var i=!this.isFiltered()||this.options.selectable==="multiple";return i&&this._dataItemPosition(e,t)!==-1},setDSFilter:function(e){this._lastDSFilter=K({},e)},isFiltered:function(){if(!this._lastDSFilter)this.setDSFilter(this.dataSource.filter());return!p.data.Query.compareFilters(this.dataSource.filter(),this._lastDSFilter)},refresh:function(e){var t=this;var i=e&&e.action;var a=t.options.skipUpdateOnBind;var r=i==="itemchange";var s;t.trigger(O);t._angularItems("cleanup");t._fixedHeader();t._render();t.bound(true);if(r||i==="remove"){s=De(t._dataItems,e.items);if(s.changed.length)if(r)t.trigger(M,{items:s.changed});else t.value(t._getValues(s.unchanged))}else if(t.isFiltered()||t._skipUpdate||t._emptySearch){t.focus(0);if(t._skipUpdate){t._skipUpdate=false;t._selectedIndices=t._valueIndices(t._values,t._selectedIndices)}}else if(!a&&(!i||i==="add"))t.value(t._values);if(t._valueDeferred)t._valueDeferred.resolve();t._angularItems("compile");t.trigger(z)},bound:function(e){if(e===h)return this._bound;this._bound=e},isGrouped:function(){return(this.dataSource.group()||[]).length}});function c(e){return e[e.length-1]}function Ve(e){var t=e.selectedIndex;return t>-1?e.options[t]:{}}function De(e,t){var i=t.length;var a=e.length;var r;var s;var n,l;var o=[];var u=[];if(a)for(n=0;n<a;n++){r=e[n];s=false;for(l=0;l<i;l++)if(r===t[l]){s=true;o.push({index:n,item:r});break}if(!s)u.push(r)}return{changed:o,unchanged:u}}function He(e){if(!e||v.isEmptyObject(e))return false;if(e.filters&&!e.filters.length)return false;return true}function Be(e,t){var i;var a=false;if(e.filters){i=v.grep(e.filters,function(e){a=Be(e,t);if(e.filters)return e.filters.length;else return e.field!=t});if(!a&&e.filters.length!==i.length)a=true;e.filters=i}return a}return a.plugin(Fe),p.cssProperties.registerPrefix("List","k-list-"),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()});
//# sourceMappingURL=kendo.list.min.js.map
