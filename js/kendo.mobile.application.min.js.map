{"version":3,"file":"kendo.mobile.application.min.js","sources":["kendo.mobile.application.js"],"sourcesContent":["(function(f, define){\n    define('kendo.mobile.application',[ \"kendo.mobile.pane\", \"kendo.router\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"mobile.application\",\n    name: \"Application\",\n    category: \"mobile\",\n    description: \"The Mobile application provides a framework to build native looking web applications on mobile devices.\",\n    depends: [ \"mobile.pane\", \"router\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        mobile = kendo.mobile,\n        support = kendo.support,\n        Widget = mobile.ui.Widget,\n        Pane = mobile.ui.Pane,\n\n        DEFAULT_OS = \"ios7\",\n        OS = support.mobileOS,\n        BERRYPHONEGAP = OS.device == \"blackberry\" && OS.flatVersion >= 600 && OS.flatVersion < 1000 && OS.appMode,\n        FONT_SIZE_COEF = 0.93,\n        VERTICAL = \"km-vertical\",\n        CHROME =  OS.browser === \"chrome\",\n        BROKEN_WEBVIEW_RESIZE = OS.ios && OS.flatVersion >= 700 && OS.flatVersion < 800 && (OS.appMode || CHROME),\n        INITIALLY_HORIZONTAL = (Math.abs(window.orientation) / 90 == 1),\n        HORIZONTAL = \"km-horizontal\",\n\n        MOBILE_PLATFORMS = {\n            ios7: { ios: true, browser: \"default\", device: \"iphone\", flatVersion: \"700\", majorVersion: \"7\", minorVersion: \"0.0\", name: \"ios\", tablet: false },\n            ios: { ios: true, browser: \"default\", device: \"iphone\", flatVersion: \"612\", majorVersion: \"6\", minorVersion: \"1.2\", name: \"ios\", tablet: false },\n            android: { android: true, browser: \"default\", device: \"android\", flatVersion: \"442\", majorVersion: \"4\", minorVersion: \"4.2\", name: \"android\", tablet: false },\n            blackberry: { blackberry: true, browser: \"default\", device: \"blackberry\", flatVersion: \"710\", majorVersion: \"7\", minorVersion: \"1.0\", name: \"blackberry\", tablet: false },\n            meego: { meego: true, browser: \"default\", device: \"meego\", flatVersion: \"850\", majorVersion: \"8\", minorVersion: \"5.0\", name: \"meego\", tablet: false },\n            wp: { wp: true, browser: \"default\", device: \"wp\", flatVersion: \"800\", majorVersion: \"8\", minorVersion: \"0.0\", name: \"wp\", tablet: false }\n        },\n\n        viewportTemplate = kendo.template('<meta content=\"initial-scale=#: data.scale #, maximum-scale=#: data.scale #, user-scalable=no#=data.height#\" name=\"viewport\" />', {usedWithBlock: false}),\n        systemMeta = kendo.template('<meta name=\"apple-mobile-web-app-capable\" content=\"#= data.webAppCapable === false ? \\'no\\' : \\'yes\\' #\" /> ' +\n                     '<meta name=\"apple-mobile-web-app-status-bar-style\" content=\"#=data.statusBarStyle#\" /> ' +\n                     '<meta name=\"msapplication-tap-highlight\" content=\"no\" /> ', {usedWithBlock: false}),\n        clipTemplate = kendo.template('<style>.km-view { clip: rect(0 #= data.width #px #= data.height #px 0); }</style>', {usedWithBlock: false}),\n        ENABLE_CLIP = OS.android && OS.browser != \"chrome\" || OS.blackberry,\n\n        iconMeta = kendo.template('<link rel=\"apple-touch-icon' + (OS.android ? '-precomposed' : '') + '\" # if(data.size) { # sizes=\"#=data.size#\" #}# href=\"#=data.icon#\" />', {usedWithBlock: false}),\n\n        HIDEBAR = (OS.device == \"iphone\" || OS.device == \"ipod\") && OS.majorVersion < 7,\n        SUPPORT_SWIPE_TO_GO_BACK = (OS.device == \"iphone\" || OS.device == \"ipod\") && OS.majorVersion >= 7,\n        HISTORY_TRANSITION = SUPPORT_SWIPE_TO_GO_BACK ? \"none\" : null,\n        BARCOMPENSATION = OS.browser == \"mobilesafari\" ? 60 : 0,\n        STATUS_BAR_HEIGHT = 20,\n        WINDOW = $(window),\n        SCREEN = window.screen,\n        HEAD = $(\"head\"),\n\n        // mobile app events\n        INIT = \"init\";\n\n    function osCssClass(os, options) {\n        var classes = [];\n\n        if (OS) {\n            classes.push(\"km-on-\" + OS.name);\n        }\n\n        if (os.skin) {\n            classes.push(\"km-\" + os.skin);\n        } else {\n            if (os.name == \"ios\" && os.majorVersion > 6) {\n                classes.push(\"km-ios7\");\n            } else {\n                classes.push(\"km-\" + os.name);\n            }\n        }\n        if ((os.name == \"ios\" && os.majorVersion < 7) || os.name != \"ios\") {\n            classes.push(\"km-\" + os.name + os.majorVersion);\n        }\n        classes.push(\"km-\" + os.majorVersion);\n        classes.push(\"km-m\" + (os.minorVersion ? os.minorVersion[0] : 0));\n\n        if (os.variant && ((os.skin && os.skin === os.name) || !os.skin || os.setDefaultPlatform === false)) {\n            classes.push(\"km-\" + (os.skin ? os.skin : os.name) + \"-\" + os.variant);\n        }\n\n        if (os.cordova) {\n            classes.push(\"km-cordova\");\n        }\n        if (os.appMode) {\n            classes.push(\"km-app\");\n        } else {\n            classes.push(\"km-web\");\n        }\n\n        if (options && options.statusBarStyle) {\n            classes.push(\"km-\" + options.statusBarStyle + \"-status-bar\");\n        }\n\n        return classes.join(\" \");\n    }\n\n    function wp8Background(os) {\n        return 'km-wp-' + (os.noVariantSet ?\n                            (parseInt($(\"<div style='background: Background' />\").css(\"background-color\").split(\",\")[1], 10) === 0 ? 'dark' : 'light') :\n                            os.variant + \" km-wp-\" + os.variant + \"-force\");\n    }\n\n    function isOrientationHorizontal(element) {\n        return OS.wp ? element.css(\"animation-name\") == \"-kendo-landscape\" : (Math.abs(window.orientation) / 90 == 1);\n    }\n\n    function getOrientationClass(element) {\n        return isOrientationHorizontal(element) ? HORIZONTAL : VERTICAL;\n    }\n\n    function setMinimumHeight(pane) {\n        pane.parent().addBack()\n               .css(\"min-height\", window.innerHeight);\n    }\n\n    function applyViewportHeight() {\n        $(\"meta[name=viewport]\").remove();\n            HEAD.append(viewportTemplate({\n            height: \", width=device-width\" +  // width=device-width was removed for iOS6, but this should stay for BB PhoneGap.\n                        (isOrientationHorizontal() ?\n                            \", height=\" + window.innerHeight + \"px\"  :\n                            (support.mobileOS.flatVersion >= 600 && support.mobileOS.flatVersion < 700) ?\n                                \", height=\" + window.innerWidth + \"px\" :\n                                \", height=device-height\")\n        }));\n    }\n\n    var Application = Widget.extend({\n        init: function(element, options) {\n            // global reference to current application\n            mobile.application = this;\n            $(this.bootstrap.bind(this, element, options));\n        },\n\n        bootstrap: function(element, options) {\n            element = $(element);\n\n            if (!element[0]) {\n                element = $(document.body);\n            }\n\n            Widget.fn.init.call(this, element, options);\n            this.element.removeAttr(\"data-\" + kendo.ns + \"role\");\n\n            this._setupPlatform();\n            this._attachMeta();\n            this._setupElementClass();\n            this._attachHideBarHandlers();\n            var paneOptions = $.extend({}, this.options);\n            delete paneOptions.name;\n\n            var that = this,\n                startHistory = function() {\n                    that.pane = new Pane(that.element, paneOptions);\n                    that.pane.navigateToInitial();\n\n                    if (that.options.updateDocumentTitle) {\n                        that._setupDocumentTitle();\n                    }\n\n                    that._startHistory();\n                    that.trigger(INIT);\n                };\n\n            if (this.options.$angular) {\n                setTimeout(startHistory);\n            } else {\n                startHistory();\n            }\n        },\n\n        options: {\n            name: \"Application\",\n            hideAddressBar: true,\n            browserHistory: true,\n            historyTransition: HISTORY_TRANSITION,\n            modelScope: window,\n            statusBarStyle: \"black\",\n            transition: \"\",\n            retina: false,\n            platform: null,\n            skin: null,\n            updateDocumentTitle: true,\n            useNativeScrolling: false\n        },\n\n        events: [\n            INIT\n        ],\n\n        navigate: function(url, transition) {\n            this.pane.navigate(url, transition);\n        },\n\n        replace: function(url, transition) {\n            this.pane.replace(url, transition);\n        },\n\n        scroller: function() {\n            return this.view().scroller;\n        },\n\n        hideLoading: function() {\n            if (this.pane) {\n                this.pane.hideLoading();\n            } else {\n                throw new Error(\"The mobile application instance is not fully instantiated. Please consider activating loading in the application init event handler.\");\n            }\n        },\n\n        showLoading: function() {\n            if (this.pane) {\n                this.pane.showLoading();\n            } else {\n                throw new Error(\"The mobile application instance is not fully instantiated. Please consider activating loading in the application init event handler.\");\n            }\n        },\n\n        changeLoadingMessage: function(message) {\n            if (this.pane) {\n                this.pane.changeLoadingMessage(message);\n            } else {\n                throw new Error(\"The mobile application instance is not fully instantiated. Please consider changing the message in the application init event handler.\");\n            }\n        },\n\n        view: function() {\n            return this.pane.view();\n        },\n\n        skin: function(skin) {\n            var that = this;\n\n            if (!arguments.length) {\n                return that.options.skin;\n            }\n\n            that.options.skin = skin || \"\";\n            that.element[0].className = \"km-pane\";\n            that._setupPlatform();\n            that._setupElementClass();\n\n            return that.options.skin;\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n            this.pane.destroy();\n            if (this.options.browserHistory) {\n                this.router.destroy();\n            }\n        },\n\n        _setupPlatform: function() {\n            var that = this,\n                platform = that.options.platform,\n                skin = that.options.skin,\n                split = [],\n                os = OS || MOBILE_PLATFORMS[DEFAULT_OS],\n                refreshBackgroundFn = function () {\n                    if (that.os.variant && (that.os.skin && that.os.skin === that.os.name) || !that.os.skin) {\n                        that.element.removeClass(\"km-wp-dark km-wp-light km-wp-dark-force km-wp-light-force\").addClass(wp8Background(that.os));\n                    }\n                };\n\n            if (platform) {\n                os.setDefaultPlatform = true;\n                if (typeof platform === \"string\") {\n                    split = platform.split(\"-\");\n                    os = $.extend({ variant: split[1] }, os, MOBILE_PLATFORMS[split[0]]);\n                } else {\n                    os = platform;\n                }\n            }\n\n            if (skin) {\n                split = skin.split(\"-\");\n                if (!OS) {\n                    os.setDefaultPlatform = false;\n                }\n                os = $.extend({}, os, { skin: split[0], variant: split[1] });\n            }\n\n            if (!os.variant) {\n                os.noVariantSet = true;\n                os.variant = \"dark\";\n            }\n\n            that.os = os;\n\n            that.osCssClass = osCssClass(that.os, that.options);\n\n            if (os.name == \"wp\") {\n                if (!that.refreshBackgroundColorProxy) {\n                    that.refreshBackgroundColorProxy = refreshBackgroundFn.bind(that);\n                }\n\n                $(document).off(\"visibilitychange\", that.refreshBackgroundColorProxy);\n                $(document).off(\"resume\", that.refreshBackgroundColorProxy);\n\n                if (!os.skin) {\n                    that.element.parent().css(\"overflow\", \"hidden\");\n\n                    $(document).on(\"visibilitychange\", that.refreshBackgroundColorProxy); // Restore theme on browser focus (using the Visibility API).\n                    $(document).on(\"resume\", that.refreshBackgroundColorProxy); // PhoneGap fires resume.\n\n                    that.refreshBackgroundColorProxy();\n                }\n            }\n        },\n\n        _startHistory: function() {\n            if (this.options.browserHistory) {\n                this.router = new kendo.Router({ pushState: this.options.pushState, root: this.options.root, hashBang: this.options.hashBang });\n                this.pane.bindToRouter(this.router);\n                this.router.start();\n            } else {\n                if (!this.options.initial) {\n                    this.pane.navigate(\"\");\n                }\n            }\n        },\n\n        _resizeToScreenHeight: function() {\n            var includeStatusBar = $(\"meta[name=apple-mobile-web-app-status-bar-style]\").attr(\"content\").match(/black-translucent|hidden/),\n                element = this.element,\n                height;\n\n            if (CHROME) {\n                height = window.innerHeight;\n            } else {\n                if (isOrientationHorizontal(element)) {\n                    if (includeStatusBar) {\n                        if (INITIALLY_HORIZONTAL) {\n                            height = SCREEN.availWidth + STATUS_BAR_HEIGHT;\n                        } else {\n                            height = SCREEN.availWidth;\n                        }\n                    } else {\n                        if (INITIALLY_HORIZONTAL) {\n                            height = SCREEN.availWidth;\n                        } else {\n                            height = SCREEN.availWidth - STATUS_BAR_HEIGHT;\n                        }\n                    }\n                } else {\n                    if (includeStatusBar) {\n                        if (INITIALLY_HORIZONTAL) {\n                            height = SCREEN.availHeight;\n                        } else {\n                            height = SCREEN.availHeight + STATUS_BAR_HEIGHT;\n                        }\n                    } else {\n                        if (INITIALLY_HORIZONTAL) {\n                            height = SCREEN.availHeight - STATUS_BAR_HEIGHT;\n                        } else {\n                            height = SCREEN.availHeight;\n                        }\n                    }\n                }\n            }\n\n            element.height(height);\n        },\n\n        _setupElementClass: function() {\n            var that = this, size,\n                element = that.element;\n\n            element.parent().addClass(\"km-root km-\" + (that.os.tablet ? \"tablet\" : \"phone\"));\n            element.addClass(that.osCssClass + \" \" + getOrientationClass(element));\n            if (this.options.useNativeScrolling) {\n                element.parent().addClass(\"km-native-scrolling\");\n            }\n\n            if (CHROME) {\n                element.addClass(\"km-ios-chrome\");\n            }\n\n            if (support.wpDevicePixelRatio) {\n                element.parent().css(\"font-size\", support.wpDevicePixelRatio + \"em\");\n            }\n\n            if (this.options.retina) {\n                element.parent().addClass(\"km-retina\");\n                element.parent().css(\"font-size\", (support.devicePixelRatio * FONT_SIZE_COEF) + \"em\");\n            }\n\n            if (BERRYPHONEGAP) {\n                applyViewportHeight();\n            }\n            if (that.options.useNativeScrolling) {\n                element.parent().addClass(\"km-native-scrolling\");\n            } else if (ENABLE_CLIP) {\n                size = (screen.availWidth > screen.availHeight ? screen.availWidth : screen.availHeight) + 200;\n                $(clipTemplate({ width: size, height: size })).appendTo(HEAD);\n            }\n\n            if (BROKEN_WEBVIEW_RESIZE) {\n                that._resizeToScreenHeight();\n            }\n\n            kendo.onResize(function() {\n                element\n                    .removeClass(\"km-horizontal km-vertical\")\n                    .addClass(getOrientationClass(element));\n\n                if (that.options.useNativeScrolling) {\n                    setMinimumHeight(element);\n                }\n\n                if (BROKEN_WEBVIEW_RESIZE) {\n                    that._resizeToScreenHeight();\n                }\n\n                if (BERRYPHONEGAP) {\n                    applyViewportHeight();\n                }\n\n                kendo.resize(element);\n            });\n        },\n\n        _clearExistingMeta: function() {\n            HEAD.find(\"meta\")\n                .filter(\"[name|='apple-mobile-web-app'],[name|='msapplication-tap'],[name='viewport']\")\n                .remove();\n        },\n\n        _attachMeta: function() {\n            var options = this.options,\n                icon = options.icon, size;\n\n            this._clearExistingMeta();\n\n            if (!BERRYPHONEGAP) {\n                HEAD.prepend(viewportTemplate({ height: \"\", scale : this.options.retina ? 1 / support.devicePixelRatio : \"1.0\" }));\n            }\n\n            HEAD.prepend(systemMeta(options));\n\n            if (icon) {\n                if (typeof icon === \"string\") {\n                    icon = { \"\" : icon };\n                }\n\n                for(size in icon) {\n                    HEAD.prepend(iconMeta({ icon: icon[size], size: size }));\n                }\n            }\n\n            if (options.useNativeScrolling) {\n                setMinimumHeight(this.element);\n            }\n        },\n\n        _attachHideBarHandlers: function() {\n            var that = this,\n                hideBar = that._hideBar.bind(that);\n\n            if (support.mobileOS.appMode || !that.options.hideAddressBar || !HIDEBAR || that.options.useNativeScrolling) {\n                return;\n            }\n\n            that._initialHeight = {};\n\n            WINDOW.on(\"load\", hideBar);\n\n            kendo.onResize(function() {\n                setTimeout(window.scrollTo, 0, 0, 1);\n            });\n        },\n\n        _setupDocumentTitle: function() {\n            var that = this,\n                defaultTitle = document.title;\n\n            that.pane.bind(\"viewShow\", function(e) {\n                var title = e.view.title;\n                document.title = title !== undefined ? title : defaultTitle;\n            });\n        },\n\n        _hideBar: function() {\n            var that = this,\n                element = that.element;\n\n            element.height(kendo.support.transforms.css + \"calc(100% + \" + BARCOMPENSATION + \"px)\");\n            $(window).trigger(kendo.support.resize);\n        }\n    });\n\n    kendo.mobile.Application = Application;\n    kendo.ui.plugin(Application, kendo.mobile, 'Mobile');\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n"],"names":["define","__meta__","id","name","category","description","depends","$","window","kendo","jQuery","undefined","mobile","support","Widget","ui","Pane","DEFAULT_OS","OS","mobileOS","BERRYPHONEGAP","device","flatVersion","appMode","FONT_SIZE_COEF","VERTICAL","CHROME","browser","BROKEN_WEBVIEW_RESIZE","ios","INITIALLY_HORIZONTAL","Math","abs","orientation","HORIZONTAL","MOBILE_PLATFORMS","ios7","majorVersion","minorVersion","tablet","android","blackberry","meego","wp","viewportTemplate","template","usedWithBlock","systemMeta","clipTemplate","ENABLE_CLIP","iconMeta","HIDEBAR","SUPPORT_SWIPE_TO_GO_BACK","HISTORY_TRANSITION","BARCOMPENSATION","STATUS_BAR_HEIGHT","WINDOW","SCREEN","screen","HEAD","INIT","osCssClass","os","options","classes","push","skin","variant","setDefaultPlatform","cordova","statusBarStyle","join","wp8Background","noVariantSet","parseInt","css","split","isOrientationHorizontal","element","getOrientationClass","setMinimumHeight","pane","parent","addBack","innerHeight","applyViewportHeight","remove","append","height","innerWidth","Application","extend","init","application","this","bootstrap","bind","document","body","fn","call","removeAttr","ns","_setupPlatform","_attachMeta","_setupElementClass","_attachHideBarHandlers","paneOptions","that","startHistory","navigateToInitial","updateDocumentTitle","_setupDocumentTitle","_startHistory","trigger","$angular","setTimeout","hideAddressBar","browserHistory","historyTransition","modelScope","transition","retina","platform","useNativeScrolling","events","navigate","url","replace","scroller","view","hideLoading","Error","showLoading","changeLoadingMessage","message","arguments","length","className","destroy","router","refreshBackgroundFn","removeClass","addClass","refreshBackgroundColorProxy","off","on","Router","pushState","root","hashBang","bindToRouter","start","initial","_resizeToScreenHeight","includeStatusBar","attr","match","availWidth","availHeight","size","wpDevicePixelRatio","devicePixelRatio","width","appendTo","onResize","resize","_clearExistingMeta","find","filter","icon","prepend","scale","","hideBar","_hideBar","_initialHeight","scrollTo","defaultTitle","title","e","transforms","plugin","amd","a1","a2","a3"],"mappings":"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"}