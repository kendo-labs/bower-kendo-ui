/** 
 * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      
 *                                                                                                                                                                                                      
 * Licensed under the Apache License, Version 2.0 (the "License");                                                                                                                                      
 * you may not use this file except in compliance with the License.                                                                                                                                     
 * You may obtain a copy of the License at                                                                                                                                                              
 *                                                                                                                                                                                                      
 *     http://www.apache.org/licenses/LICENSE-2.0                                                                                                                                                       
 *                                                                                                                                                                                                      
 * Unless required by applicable law or agreed to in writing, software                                                                                                                                  
 * distributed under the License is distributed on an "AS IS" BASIS,                                                                                                                                    
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                                                                                                                             
 * See the License for the specific language governing permissions and                                                                                                                                  
 * limitations under the License.                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       

*/
!function(define){define("kendo.mobile.scrollview.min",["./kendo.fx.min","./kendo.data.min","./kendo.draganddrop.min"],function(){var t={id:"mobile.scrollview",name:"ScrollView",category:"mobile",description:"The Kendo Mobile ScrollView widget is used to scroll content wider than the device screen.",depends:["fx","data","draganddrop"]},l=window.kendo.jQuery,s=void 0,p=window.kendo,i,n=p.mobile.ui,o=l.proxy,c=p.effects.Transition,u=p.ui.Pane,d=p.ui.PaneDimensions,m=n.DataBoundWidget,a=p.data.DataSource,v=p.data.Buffer,_=p.data.BatchBuffer,e=Math,w=e.abs,P=e.ceil,b=e.round,y=e.max,x=e.min,S=e.floor,f="change",T="changing",r="refresh",C="current-page",z="virtual-page",E="function",O="itemChange",k="cleanup",R=3,V=-1,M=0,D=1,W=-1,B=0,H=1;function h(e){return"k-"+e+" km-"+e}var I=p.Class.extend({init:function(e){var t=this,i=l("<ol class='"+h("pages")+"'/>");e.element.append(i);this._changeProxy=o(t,"_change");this._refreshProxy=o(t,"_refresh");e.bind(f,this._changeProxy);e.bind(r,this._refreshProxy);l.extend(t,{element:i,scrollView:e})},items:function(){return this.element.children()},_refresh:function(e){var t="";for(var i=0;i<e.pageCount;i++)t+="<li></li>";this.element.html(t);this.items().eq(e.page).addClass(h(C))},_change:function(e){this.items().removeClass(h(C)).eq(e.page).addClass(h(C))},destroy:function(){this.scrollView.unbind(f,this._changeProxy);this.scrollView.unbind(r,this._refreshProxy);this.element.remove()}}),A=(p.mobile.ui.ScrollViewPager=I,"transitionEnd"),U="dragStart",j="dragEnd",q=p.Observable.extend({init:function(e,t){var i=this;p.Observable.fn.init.call(this);this.element=e;this.container=e.parent();var n,s,a,o,r,h;n=new p.ui.Movable(i.element);s=new c({axis:"x",movable:n,onEnd:function(){i.trigger(A)}});a=new p.UserEvents(e,{fastTap:true,start:function(e){if(w(e.x.velocity)*2>=w(e.y.velocity))a.capture();else a.cancel();i.trigger(U,e);s.cancel()},allowSelection:true,end:function(e){i.trigger(j,e)}});o=new d({element:i.element,container:i.container});r=o.x;r.bind(f,function(){i.trigger(f)});h=new u({dimensions:o,userEvents:a,movable:n,elastic:true});l.extend(i,{duration:t&&t.duration||1,movable:n,transition:s,userEvents:a,dimensions:o,dimension:r,pane:h});this.bind([A,U,j,f],t)},size:function(){return{width:this.dimensions.x.getSize(),height:this.dimensions.y.getSize()}},total:function(){return this.dimension.getTotal()},offset:function(){return-this.movable.x},updateDimension:function(){this.dimension.update(true)},refresh:function(){this.dimensions.refresh()},moveTo:function(e){this.movable.moveAxis("x",-e)},transitionTo:function(e,t,i){if(i)this.moveTo(-e);else this.transition.moveTo({location:e,duration:this.duration,ease:t})}}),F=(p.mobile.ui.ScrollViewElasticPane=q,p.Observable.extend({init:function(e,t,i){var n=this;p.Observable.fn.init.call(this);n.element=e;n.pane=t;n._getPages();this.page=0;this.pageSize=i.pageSize||1;this.contentHeight=i.contentHeight;this.enablePager=i.enablePager;this.pagerOverlay=i.pagerOverlay},scrollTo:function(e,t){this.page=e;this.pane.transitionTo(-e*this.pane.size().width,c.easeOutExpo,t)},paneMoved:function(e,t,i,n){var s=this,a=s.pane,o=a.size().width*s.pageSize,r=b,f=t?c.easeOutBack:c.easeOutExpo,h,l;if(e===W)r=P;else if(e===H)r=S;l=r(a.offset()/o);h=y(s.minSnap,x(-l*o,s.maxSnap));if(l!=s.page)if(i&&i({currentPage:s.page,nextPage:l}))h=-s.page*a.size().width;a.transitionTo(h,f,n)},updatePage:function(){var e=this.pane,t=b(e.offset()/e.size().width);if(t!=this.page){this.page=t;return true}return false},forcePageUpdate:function(){return this.updatePage()},resizeTo:function(e){var t=this.pane,i=e.width;this.pageElements.width(i);if(this.contentHeight==="100%"){var n=this.element.parent().height();if(this.enablePager===true){var s=this.element.parent().find("ol.km-pages");if(!this.pagerOverlay&&s.length)n-=p._outerHeight(s,true)}this.element.css("height",n);this.pageElements.css("height",n)}t.updateDimension();if(!this._paged)this.page=S(t.offset()/i);this.scrollTo(this.page,true);this.pageCount=P(t.total()/i);this.minSnap=-(this.pageCount-1)*i;this.maxSnap=0},_getPages:function(){this.pageElements=this.element.find(p.roleSelector("page"));this._paged=this.pageElements.length>0}})),g=(p.mobile.ui.ScrollViewContent=F,p.Observable.extend({init:function(e,t,i){var n=this;p.Observable.fn.init.call(this);n.element=e;n.pane=t;n.options=i;n._templates();n.page=i.page||0;n.pages=[];n._initPages();n.resizeTo(n.pane.size());n.pane.dimension.forceEnabled()},setDataSource:function(e){this.dataSource=a.create(e);this._buffer();this._pendingPageRefresh=false;this._pendingWidgetRefresh=false},_viewShow:function(){var e=this;if(e._pendingWidgetRefresh){setTimeout(function(){e._resetPages()},0);e._pendingWidgetRefresh=false}},_buffer:function(){var e=this.options.itemsPerPage;if(this.buffer)this.buffer.destroy();if(e>1)this.buffer=new _(this.dataSource,e);else this.buffer=new v(this.dataSource,e*3);this._resizeProxy=o(this,"_onResize");this._resetProxy=o(this,"_onReset");this._endReachedProxy=o(this,"_onEndReached");this.buffer.bind({resize:this._resizeProxy,reset:this._resetProxy,endreached:this._endReachedProxy})},_templates:function(){var e=this.options.template,t=this.options.emptyTemplate,i={},n={};if(typeof e===E){i.template=e;e="#=this.template(data)#"}this.template=o(p.template(e),i);if(typeof t===E){n.emptyTemplate=t;t="#=this.emptyTemplate(data)#"}this.emptyTemplate=o(p.template(t),n)},_initPages:function(){var e=this.pages,t=this.element,i;for(var n=0;n<R;n++){i=new K(t);e.push(i)}this.pane.updateDimension()},resizeTo:function(e){var t=this.pages,i=this.pane;for(var n=0;n<t.length;n++)t[n].setWidth(e.width);if(this.options.contentHeight==="auto")this.element.css("height",this.pages[1].element.height());else if(this.options.contentHeight==="100%"){var s=this.element.parent().height();if(this.options.enablePager===true){var a=this.element.parent().find("ol.km-pages");if(!this.options.pagerOverlay&&a.length)s-=p._outerHeight(a,true)}this.element.css("height",s);t[0].element.css("height",s);t[1].element.css("height",s);t[2].element.css("height",s)}i.updateDimension();this._repositionPages();this.width=e.width},scrollTo:function(e){var t=this.buffer,i;t.syncDataSource();i=t.at(e);if(!i)return;this._updatePagesContent(e);this.page=e},paneMoved:function(e,f,t,i){var n=this,s=n.pane,c=s.size().width,a=s.offset(),o=Math.abs(a)>=c/3,g=f?p.effects.Transition.easeOutBack:p.effects.Transition.easeOutExpo,r=n.page+2>n.buffer.total(),h,l=0;if(e===H){if(n.page!==0)l=-1}else if(e===W&&!r)l=1;else if(a>0&&(o&&!r))l=1;else if(a<0&&o)if(n.page!==0)l=-1;h=n.page;if(l)h=l>0?h+1:h-1;if(t&&t({currentPage:n.page,nextPage:h}))l=0;if(l===0)n._cancelMove(g,i);else if(l===-1)n._moveBackward(i);else if(l===1)n._moveForward(i)},updatePage:function(){var e=this.pages;if(this.pane.offset()===0)return false;if(this.pane.offset()>0){e.push(this.pages.shift());this.page++;this.setPageContent(e[2],this.page+1)}else{e.unshift(this.pages.pop());this.page--;this.setPageContent(e[0],this.page-1)}this._repositionPages();this._resetMovable();return true},forcePageUpdate:function(){var e=this.pane.offset(),t=this.pane.size().width*3/4;if(w(e)>t)return this.updatePage();return false},_resetMovable:function(){this.pane.moveTo(0)},_moveForward:function(e){this.pane.transitionTo(-this.width,p.effects.Transition.easeOutExpo,e)},_moveBackward:function(e){this.pane.transitionTo(this.width,p.effects.Transition.easeOutExpo,e)},_cancelMove:function(e,t){this.pane.transitionTo(0,e,t)},_resetPages:function(){this.page=this.options.page||0;this._updatePagesContent(this.page);this._repositionPages();this.trigger("reset")},_onResize:function(){this.pageCount=P(this.dataSource.total()/this.options.itemsPerPage);if(this._pendingPageRefresh){this._updatePagesContent(this.page);this._pendingPageRefresh=false}this.trigger("resize")},_onReset:function(){this.pageCount=P(this.dataSource.total()/this.options.itemsPerPage);this._resetPages()},_onEndReached:function(){this._pendingPageRefresh=true},_repositionPages:function(){var e=this.pages;e[0].position(V);e[1].position(M);e[2].position(D)},_updatePagesContent:function(e){var t=this.pages,i=e||0;this.setPageContent(t[0],i-1);this.setPageContent(t[1],i);this.setPageContent(t[2],i+1)},setPageContent:function(e,t){var i=this.buffer,n=this.template,s=this.emptyTemplate,a=null;if(t>=0){a=i.at(t);if(Array.isArray(a)&&!a.length)a=null}this.trigger(k,{item:e.element});if(a!==null)e.content(n(a));else e.content(s({}));p.mobile.init(e.element);this.trigger(O,{item:e.element,data:a,ns:p.mobile.ui})}})),K=(p.mobile.ui.VirtualScrollViewContent=g,p.Class.extend({init:function(e){this.element=l("<div class='"+h(z)+"'></div>");this.width=e.width();this.element.width(this.width);e.append(this.element)},content:function(e){this.element.html(e)},position:function(e){this.element.css("transform","translate3d("+this.width*e+"px, 0, 0)")},setWidth:function(e){this.width=e;this.element.width(e)}})),Q=(p.mobile.ui.VirtualPage=K,m.extend({init:function(e,t){var i=this;m.fn.init.call(i,e,t);t=i.options;e=i.element;p.stripWhitespace(e[0]);e.wrapInner("<div/>").addClass("k-widget "+h("scrollview"));if(this.options.enablePager){this.pager=new I(this);if(this.options.pagerOverlay)e.addClass(h("scrollview-overlay"))}i.inner=e.children().first();i.page=0;i.inner.css("height",t.contentHeight);i.pane=new q(i.inner,{duration:this.options.duration,transitionEnd:o(this,"_transitionEnd"),dragStart:o(this,"_dragStart"),dragEnd:o(this,"_dragEnd"),change:o(this,r)});i.bind("resize",function(){i.pane.refresh()});i.page=t.page;var n=this.inner.children().length===0;var s=n?new g(i.inner,i.pane,t):new F(i.inner,i.pane,t);s.page=i.page;s.bind("reset",function(){this._pendingPageRefresh=false;i._syncWithContent();i.trigger(r,{pageCount:s.pageCount,page:s.page})});s.bind("resize",function(){i.trigger(r,{pageCount:s.pageCount,page:s.page})});s.bind(O,function(e){i.trigger(O,e);i.angular("compile",function(){return{elements:e.item,data:[{dataItem:e.data}]}})});s.bind(k,function(e){i.angular("cleanup",function(){return{elements:e.item}})});i._content=s;i.setDataSource(t.dataSource);var a=i.container();if(a.nullObject){i.viewInit();i.viewShow()}else a.bind("show",o(this,"viewShow")).bind("init",o(this,"viewInit"))},options:{name:"ScrollView",page:0,duration:400,velocityThreshold:.8,contentHeight:"auto",pageSize:1,itemsPerPage:1,bounceVelocityThreshold:1.6,enablePager:true,pagerOverlay:false,autoBind:true,template:"",emptyTemplate:""},events:[T,f,r],destroy:function(){m.fn.destroy.call(this);p.destroy(this.element)},viewInit:function(){if(this.options.autoBind)this._content.scrollTo(this._content.page,true)},viewShow:function(){this.pane.refresh()},refresh:function(){var e=this._content;e.resizeTo(this.pane.size());this.page=e.page;this.trigger(r,{pageCount:e.pageCount,page:e.page})},content:function(e){this.element.children().first().html(e);this._content._getPages();this.pane.refresh()},value:function(e){var t=this.dataSource;if(e)this.scrollTo(t.indexOf(e),true);else return t.at(this.page)},scrollTo:function(e,t){this._content.scrollTo(e,t);this._syncWithContent()},prev:function(){var t=this,e=t.page-1;if(t._content instanceof g)t._content.paneMoved(H,s,function(e){return t.trigger(T,e)});else if(e>-1)t.scrollTo(e)},next:function(){var t=this,e=t.page+1;if(t._content instanceof g)t._content.paneMoved(W,s,function(e){return t.trigger(T,e)});else if(e<t._content.pageCount)t.scrollTo(e)},setDataSource:function(e){if(!(this._content instanceof g))return;var t=!e;this.dataSource=a.create(e);this._content.setDataSource(this.dataSource);if(this.options.autoBind&&!t)this.dataSource.fetch()},items:function(){return this.element.find(".km-"+z)},_syncWithContent:function(){var e=this._content.pages,t=this._content.buffer,i,n;this.page=this._content.page;i=t?t.at(this.page):s;if(!(i instanceof Array))i=[i];n=e?e[1].element:s;this.trigger(f,{page:this.page,element:n,data:i})},_dragStart:function(){if(this._content.forcePageUpdate())this._syncWithContent()},_dragEnd:function(e){var t=this,i=e.x.velocity,n=this.options.velocityThreshold,s=B,a=w(i)>this.options.bounceVelocityThreshold;if(i>n)s=H;else if(i<-n)s=W;this._content.paneMoved(s,a,function(e){return t.trigger(T,e)})},_transitionEnd:function(){if(this._content.updatePage())this._syncWithContent()}}));return n.plugin(Q),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()});
//# sourceMappingURL=kendo.mobile.scrollview.min.js.map
