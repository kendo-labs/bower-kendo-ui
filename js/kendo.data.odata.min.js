/**
 * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(define){define("kendo.data.odata.min",["kendo.core.min"],function(){var e={id:"data.odata",name:"OData",category:"framework",depends:["core"],hidden:true},a=window.kendo.jQuery,g=void 0,c=window.kendo,d=a.extend,f="\r\n",u="\r\n\r\n",l=c.isFunction,m={eq:"eq",neq:"ne",gt:"gt",gte:"ge",lt:"lt",lte:"le",contains:"substringof",doesnotcontain:"substringof",endswith:"endswith",startswith:"startswith",isnull:"eq",isnotnull:"ne",isnullorempty:"eq",isnotnullorempty:"ne",isempty:"eq",isnotempty:"ne"},v=d({},m,{contains:"contains"}),s={pageSize:a.noop,page:a.noop,filter:function(e,t,n){if(t){t=j(t,n);if(t)e.$filter=t}},sort:function(e,t){var n=a.map(t,function(e){var t=e.field.replace(/\./g,"/");if(e.dir==="desc")t+=" desc";return t}).join(",");if(n)e.$orderby=n},skip:function(e,t){if(t)e.$skip=t},take:function(e,t){if(t)e.$top=t}},T={read:{dataType:"jsonp"}};function j(e,t){var n=[],u=e.logic||"and",a,r,o,i,s,d,f,l,p=e.filters;for(a=0,r=p.length;a<r;a++){e=p[a];o=e.field;f=e.value;d=e.operator;if(e.filters)e=j(e,t);else{l=e.ignoreCase;o=o.replace(/\./g,"/");e=m[d];if(t)e=v[d];if(d==="isnullorempty")e=c.format("{0} {1} null or {0} {1} ''",o,e);else if(d==="isnotnullorempty")e=c.format("{0} {1} null and {0} {1} ''",o,e);else if(d==="isnull"||d==="isnotnull")e=c.format("{0} {1} null",o,e);else if(d==="isempty"||d==="isnotempty")e=c.format("{0} {1} ''",o,e);else if(e&&f!==g){i=c.type(f);if(i==="string"){s="'{1}'";f=f.replace(/'/g,"''");if(l===true)o="tolower("+o+")"}else if(i==="date")if(t){s="{1:yyyy-MM-ddTHH:mm:ss+00:00}";f=c.timezone.apply(f,"Etc/UTC")}else s="datetime'{1:yyyy-MM-ddTHH:mm:ss}'";else s="{1}";if(e.length>3)if(e!=="substringof")s="{0}({2},"+s+")";else{s="{0}("+s+",{2})";if(d==="doesnotcontain")if(t){s="{0}({2},'{1}') eq -1";e="indexof"}else s+=" eq false"}else s="{2} {0} "+s;e=c.format(s,e,f,o)}}n.push(e)}e=n.join(" "+u+" ");if(n.length>1)e="("+e+")";return e}function n(e){for(var t in e)if(t.indexOf("@odata")===0)delete e[t]}function t(){return Math.floor((1+Math.random())*65536).toString(16).substr(1)}function p(e){return e+t()+"-"+t()+"-"+t()}function y(e,t){var n=f+"--"+e;if(t)n+="--";return n}function b(e,t,n,a){var r=e.options[a].url;var o=c.format("{0} ",n);if(l(r))return o+r(t);else return o+r}function E(e,t){var n="";n+=y(e,false);n+=f+"Content-Type: application/http";n+=f+"Content-Transfer-Encoding: binary";n+=f+"Content-ID: "+t;return n}function w(e){var t="";t+=f+"Content-Type: application/json;odata=minimalmetadata";t+=f+"Prefer: return=representation";t+=u+c.stringify(e);return t}function $(e,t,n,a,r,o){var i="";for(var s=0;s<e.length;s++){i+=E(t,n);i+=u+b(r,e[s],r.options[a].type,a)+" HTTP/1.1";if(!o)i+=w(e[s]);i+=f;n++}return i}function h(e,t,n,a,r,o,i){var s="";s+=x(t,n);s+=$(e,n,a,o,r,i);s+=y(n,true);s+=f;return s}function x(e,t){var n="";n+="--"+e+f;n+="Content-Type: multipart/mixed; boundary="+t+f;return n}function i(e,t){var n=d({},e.options.batch);var a=p("sf_batch_");var r="";var o=0;var i=e.options.batch.url;var s=p("sf_changeset_");n.type=e.options.batch.type;n.url=l(i)?i():i;n.headers=d(n.headers||{},{"Content-Type":"multipart/mixed; boundary="+a});if(t.updated.length){r+=h(t.updated,a,s,o,e,"update",false);o+=t.updated.length;s=p("sf_changeset_")}if(t.destroyed.length){r+=h(t.destroyed,a,s,o,e,"destroy",true);o+=t.destroyed.length;s=p("sf_changeset_")}if(t.created.length)r+=h(t.created,a,s,o,e,"create",false);r+=y(a,true);n.data=r;return n}function O(e){var t=e.match(/--changesetresponse_[a-z0-9-]+$/gm);var n=0;var a=[];var r;var o;var i;var s;var d;a.push({models:[],passed:true});for(var f=0;f<t.length;f++){s=t[f];if(s.lastIndexOf("--",s.length-1)){if(f<t.length-1)a.push({models:[],passed:true});continue}if(!n)n=e.indexOf(s);else n=e.indexOf(s,n+s.length);r=e.substring(n,e.indexOf("--",n+1));o=r.match(/^HTTP\/1\.\d (\d{3}) (.*)$/gm).pop();i=c.parseFloat(o.match(/\d{3}/g).pop());if(i>=200&&i<=299){d=r.match(/\{.*\}/gm);if(d)a[a.length-1].models.push(JSON.parse(d[0]))}else a[a.length-1].passed=false}return a}return d(true,c.data,{schemas:{odata:{type:"json",data:function(e){return e.d.results||[e.d]},total:"d.__count"}},transports:{odata:{read:{cache:true,dataType:"jsonp",jsonp:"$callback"},update:{cache:true,dataType:"json",contentType:"application/json",type:"PUT"},create:{cache:true,dataType:"json",contentType:"application/json",type:"POST"},destroy:{cache:true,dataType:"json",type:"DELETE"},parameterMap:function(e,t,n){var a,r,o,i;e=e||{};t=t||"read";i=(this.options||T)[t];i=i?i.dataType:"json";if(t==="read"){a={$inlinecount:"allpages"};if(i!="json")a.$format="json";for(o in e)if(s[o])s[o](a,e[o],n);else a[o]=e[o]}else{if(i!=="json")throw new Error("Only json dataType can be used for "+t+" operation.");if(t!=="destroy"){for(o in e){r=e[o];if(typeof r==="number")e[o]=r+""}a=c.stringify(e)}}return a}}}}),d(true,c.data,{schemas:{"odata-v4":{type:"json",data:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)n(e[t]);return e}else{e=a.extend({},e);n(e);if(e.value)return e.value;return[e]}},total:function(e){return e["@odata.count"]}}},transports:{"odata-v4":{batch:{type:"POST"},read:{cache:true,dataType:"json"},update:{cache:true,dataType:"json",contentType:"application/json;IEEE754Compatible=true",type:"PUT"},create:{cache:true,dataType:"json",contentType:"application/json;IEEE754Compatible=true",type:"POST"},destroy:{cache:true,dataType:"json",type:"DELETE"},parameterMap:function(e,t){var n=c.data.transports.odata.parameterMap(e,t,true);if(t=="read"){n.$count=true;delete n.$inlinecount}if(n&&n.$filter)n.$filter=n.$filter.replace(/('[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}')/gi,function(e){return e.substring(1,e.length-1)});return n},submit:function(r){var e=this;var t=i(e,r.data);var o=r.data;if(!o.updated.length&&!o.destroyed.length&&!o.created.length)return;a.ajax(d(true,{},{success:function(e){var t=O(e);var n=0;var a;if(o.updated.length){a=t[n];if(a.passed)r.success(a.models.length?a.models:[],"update");n++}if(o.destroyed.length){a=t[n];if(a.passed)r.success([],"destroy");n++}if(o.created.length){a=t[n];if(a.passed)r.success(a.models,"create")}},error:function(e,t,n){r.error(e,t,n)}},t))}}}}),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,n){(n||t)()});
//# sourceMappingURL=kendo.data.odata.min.js.map
