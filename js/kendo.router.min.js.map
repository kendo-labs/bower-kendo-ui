{"version":3,"file":"kendo.router.min.js","sources":["kendo.router.js"],"sourcesContent":["(function(f, define){\n    define('kendo.router',[ \"kendo.core\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"router\",\n    name: \"Router\",\n    category: \"framework\",\n    description: \"The Router class is responsible for tracking the application state and navigating between the application states.\",\n    depends: [ \"core\" ],\n    hidden: false\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        CHANGE = \"change\",\n        BACK = \"back\",\n        SAME = \"same\",\n        support = kendo.support,\n        location = window.location,\n        history = window.history,\n        CHECK_URL_INTERVAL = 50,\n        BROKEN_BACK_NAV = kendo.support.browser.msie,\n        hashStrip = /^#*/,\n        document = window.document;\n\n    function absoluteURL(path, pathPrefix) {\n        if (!pathPrefix) {\n            return path;\n        }\n\n        if (path + \"/\" === pathPrefix) {\n            path = pathPrefix;\n        }\n\n        var regEx = new RegExp(\"^\" + pathPrefix, \"i\");\n\n        if (!regEx.test(path)) {\n            path = pathPrefix + \"/\" + path;\n        }\n\n        return location.protocol + '//' + (location.host + \"/\" + path).replace(/\\/\\/+/g, '/');\n    }\n\n    function hashDelimiter(bang) {\n        return bang ? \"#!\" : \"#\";\n    }\n\n    function locationHash(hashDelimiter) {\n        var href = location.href;\n\n        // ignore normal anchors if in hashbang mode - however, still return \"\" if no hash present\n        if (hashDelimiter === \"#!\" && href.indexOf(\"#\") > -1 && href.indexOf(\"#!\") < 0) {\n            return null;\n        }\n\n        return href.split(hashDelimiter)[1] || \"\";\n    }\n\n    function stripRoot(root, url) {\n        if (url.indexOf(root) === 0) {\n            return (url.substr(root.length)).replace(/\\/\\//g, '/');\n        } else {\n            return url;\n        }\n    }\n\n    var HistoryAdapter = kendo.Class.extend({\n        back: function() {\n            if (BROKEN_BACK_NAV) {\n                setTimeout(function() { history.back(); });\n            } else {\n                history.back();\n            }\n        },\n\n        forward: function() {\n            if (BROKEN_BACK_NAV) {\n                setTimeout(function() { history.forward(); });\n            } else {\n                history.forward();\n            }\n        },\n\n        length: function() {\n            return history.length;\n        },\n\n        replaceLocation: function(url) {\n            location.replace(url);\n        }\n    });\n\n    var PushStateAdapter = HistoryAdapter.extend({\n        init: function(root) {\n            this.root = root;\n        },\n\n        navigate: function(to) {\n            history.pushState({}, document.title, absoluteURL(to, this.root));\n        },\n\n        replace: function(to) {\n            history.replaceState({}, document.title, absoluteURL(to, this.root));\n        },\n\n        normalize: function(url) {\n            return stripRoot(this.root, url);\n        },\n\n        current: function() {\n            var current = location.pathname;\n\n            if (location.search) {\n                current += location.search;\n            }\n\n            return stripRoot(this.root, current);\n        },\n\n        change: function(callback) {\n            $(window).bind(\"popstate.kendo\", callback);\n        },\n\n        stop: function() {\n            $(window).unbind(\"popstate.kendo\");\n        },\n\n        normalizeCurrent: function(options) {\n            var fixedUrl,\n                root = options.root,\n                pathname = location.pathname,\n                hash = locationHash(hashDelimiter(options.hashBang));\n\n            if (root === pathname + \"/\") {\n                fixedUrl = root;\n            }\n\n            if (root === pathname && hash) {\n                fixedUrl = absoluteURL(hash.replace(hashStrip, ''), root);\n            }\n\n            if (fixedUrl) {\n                history.pushState({}, document.title, fixedUrl);\n            }\n        }\n    });\n\n    function fixHash(url) {\n        return url.replace(/^(#)?/, \"#\");\n    }\n\n    function fixBang(url) {\n        return url.replace(/^(#(!)?)?/, \"#!\");\n    }\n\n    var HashAdapter = HistoryAdapter.extend({\n        init: function(bang) {\n            this._id = kendo.guid();\n            this.prefix = hashDelimiter(bang);\n            this.fix = bang ? fixBang : fixHash;\n        },\n\n        navigate: function(to) {\n            location.hash = this.fix(to);\n        },\n\n        replace: function(to) {\n            this.replaceLocation(this.fix(to));\n        },\n\n        normalize: function(url) {\n            if (url.indexOf(this.prefix) < 0) {\n               return url;\n            } else {\n                return url.split(this.prefix)[1];\n            }\n        },\n\n        change: function(callback) {\n            if (support.hashChange) {\n                $(window).on(\"hashchange.\" + this._id, callback);\n            } else {\n                this._interval = setInterval(callback, CHECK_URL_INTERVAL);\n            }\n        },\n\n        stop: function() {\n            $(window).off(\"hashchange.\" + this._id);\n            clearInterval(this._interval);\n        },\n\n        current: function() {\n            return locationHash(this.prefix);\n        },\n\n        normalizeCurrent: function(options) {\n            var pathname = location.pathname,\n                root = options.root;\n\n            if (options.pushState && root !== pathname) {\n                this.replaceLocation(root + this.prefix + stripRoot(root, pathname));\n                return true; // browser will reload at this point.\n            }\n\n            return false;\n        }\n    });\n\n    var History = kendo.Observable.extend({\n        start: function(options) {\n            options = options || {};\n\n            this.bind([CHANGE, BACK, SAME], options);\n\n            if (this._started) {\n                return;\n            }\n\n            this._started = true;\n\n            options.root = options.root || \"/\";\n\n            var adapter = this.createAdapter(options),\n                current;\n\n            // adapter may reload the document\n            if (adapter.normalizeCurrent(options)) {\n                return;\n            }\n\n            current = adapter.current();\n\n            $.extend(this, {\n                adapter: adapter,\n                root: options.root,\n                historyLength: adapter.length(),\n                current: current,\n                locations: [current]\n            });\n\n            adapter.change(this._checkUrl.bind(this));\n        },\n\n        createAdapter:function(options) {\n           return support.pushState && options.pushState ? new PushStateAdapter(options.root) : new HashAdapter(options.hashBang);\n        },\n\n        stop: function() {\n            if (!this._started) {\n                return;\n            }\n            this.adapter.stop();\n            this.unbind(CHANGE);\n            this._started = false;\n        },\n\n        change: function(callback) {\n            this.bind(CHANGE, callback);\n        },\n\n        replace: function(to, silent) {\n\n            this._navigate(to, silent, function(adapter) {\n                adapter.replace(to);\n                this.locations[this.locations.length - 1] = this.current;\n            });\n        },\n\n        navigate: function(to, silent) {\n            if (to === \"#:back\") {\n                this.backCalled = true;\n                this.adapter.back();\n                return;\n            }\n\n            this._navigate(to, silent, function(adapter) {\n                adapter.navigate(to);\n                this.locations.push(this.current);\n            });\n        },\n\n        _navigate: function(to, silent, callback) {\n            var adapter = this.adapter;\n\n            to = adapter.normalize(to);\n\n            if (this.current === to || this.current === decodeURIComponent(to)) {\n                this.trigger(SAME);\n                return;\n            }\n\n            if (!silent) {\n                if (this.trigger(CHANGE, { url: to, decode: false })) {\n                    return;\n                }\n            }\n\n            this.current = to;\n\n            callback.call(this, adapter);\n\n            this.historyLength = adapter.length();\n        },\n\n        _checkUrl: function() {\n            var adapter = this.adapter,\n                current = adapter.current(),\n                newLength = adapter.length(),\n                navigatingInExisting = this.historyLength === newLength,\n                back = current === this.locations[this.locations.length - 2] && navigatingInExisting,\n                backCalled = this.backCalled,\n                prev = this.current;\n\n            if (current === null || this.current === current || this.current === decodeURIComponent(current)) {\n                return true;\n            }\n\n            this.historyLength = newLength;\n            this.backCalled = false;\n\n            this.current = current;\n\n            if (back && this.trigger(\"back\", { url: prev, to: current })) {\n                adapter.forward();\n                this.current = prev;\n                return;\n            }\n\n            if (this.trigger(CHANGE, { url: current, backButtonPressed: !backCalled })) {\n                if (back) {\n                    adapter.forward();\n                } else {\n                    adapter.back();\n                    this.historyLength --;\n                }\n                this.current = prev;\n                return;\n            }\n\n            if (back) {\n                this.locations.pop();\n            } else {\n                this.locations.push(current);\n            }\n        }\n    });\n\n    kendo.History = History;\n    kendo.History.HistoryAdapter = HistoryAdapter;\n    kendo.History.HashAdapter = HashAdapter;\n    kendo.History.PushStateAdapter = PushStateAdapter;\n    kendo.absoluteURL = absoluteURL;\n    kendo.history = new History();\n})(window.kendo.jQuery);\n\n(function() {\n    var kendo = window.kendo,\n        history = kendo.history,\n        Observable = kendo.Observable,\n        INIT = \"init\",\n        ROUTE_MISSING = \"routeMissing\",\n        CHANGE = \"change\",\n        BACK = \"back\",\n        SAME = \"same\",\n        optionalParam = /\\((.*?)\\)/g,\n        namedParam = /(\\(\\?)?:\\w+/g,\n        splatParam = /\\*\\w+/g,\n        escapeRegExp = /[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g;\n\n    function namedParamReplace(match, optional) {\n        return optional ? match : '([^\\/]+)';\n    }\n\n    function routeToRegExp(route, ignoreCase) {\n        return new RegExp('^' + route\n            .replace(escapeRegExp, '\\\\$&')\n            .replace(optionalParam, '(?:$1)?')\n            .replace(namedParam, namedParamReplace)\n            .replace(splatParam, '(.*?)') + '$', ignoreCase ? \"i\" : \"\");\n    }\n\n    function stripUrl(url) {\n        return url.replace(/(\\?.*)|(#.*)/g, \"\");\n    }\n\n    var Route = kendo.Class.extend({\n        init: function(route, callback, ignoreCase) {\n            if (!(route instanceof RegExp)) {\n                route = routeToRegExp(route, ignoreCase);\n            }\n\n            this.route = route;\n            this._callback = callback;\n        },\n\n        callback: function(url, back, decode) {\n            var params,\n                idx = 0,\n                length,\n                queryStringParams = kendo.parseQueryStringParams(url);\n                queryStringParams._back = back;\n\n            url = stripUrl(url);\n            params = this.route.exec(url).slice(1);\n            length = params.length;\n\n            if (decode) {\n                for (; idx < length; idx ++) {\n                    if (typeof params[idx] !== 'undefined') {\n                        params[idx] = decodeURIComponent(params[idx]);\n                    }\n                }\n            }\n\n            params.push(queryStringParams);\n\n            this._callback.apply(null, params);\n        },\n\n        worksWith: function(url, back, decode) {\n            if (this.route.test(stripUrl(url))) {\n                this.callback(url, back, decode);\n                return true;\n            } else {\n                return false;\n            }\n        }\n    });\n\n    var Router = Observable.extend({\n        init: function(options) {\n            if (!options) {\n                options = {};\n            }\n\n            Observable.fn.init.call(this);\n\n            this.routes = [];\n            this.pushState = options.pushState;\n            this.hashBang = options.hashBang;\n            this.root = options.root;\n            this.ignoreCase = options.ignoreCase !== false;\n\n            this.bind([INIT, ROUTE_MISSING, CHANGE, SAME, BACK], options);\n        },\n\n        destroy: function() {\n            history.unbind(CHANGE, this._urlChangedProxy);\n            history.unbind(SAME, this._sameProxy);\n            history.unbind(BACK, this._backProxy);\n            this.unbind();\n        },\n\n        start: function() {\n            var that = this,\n                sameProxy = function() { that._same(); },\n                backProxy = function(e) { that._back(e); },\n                urlChangedProxy = function(e) { that._urlChanged(e); };\n\n            history.start({\n                same: sameProxy,\n                change: urlChangedProxy,\n                back: backProxy,\n                pushState: that.pushState,\n                hashBang: that.hashBang,\n                root: that.root\n            });\n\n            var initEventObject = { url: history.current || \"/\", preventDefault: $.noop };\n\n            if (!that.trigger(INIT, initEventObject)) {\n                that._urlChanged(initEventObject);\n            }\n\n            this._urlChangedProxy = urlChangedProxy;\n            this._backProxy = backProxy;\n        },\n\n        route: function(route, callback) {\n            this.routes.push(new Route(route, callback, this.ignoreCase));\n        },\n\n        navigate: function(url, silent) {\n            kendo.history.navigate(url, silent);\n        },\n\n        replace: function(url, silent) {\n            kendo.history.replace(url, silent);\n        },\n\n        _back: function(e) {\n            if (this.trigger(BACK, { url: e.url, to: e.to })) {\n                e.preventDefault();\n            }\n        },\n\n        _same: function() {\n            this.trigger(SAME);\n        },\n\n        _urlChanged: function(e) {\n            var url = e.url;\n            var decode = !!e.decode;\n            var back = e.backButtonPressed;\n\n            if (!url) {\n                url = \"/\";\n            }\n\n            if (this.trigger(CHANGE, { url: e.url, params: kendo.parseQueryStringParams(e.url), backButtonPressed: back })) {\n                e.preventDefault();\n                return;\n            }\n\n            var idx = 0,\n                routes = this.routes,\n                route,\n                length = routes.length;\n\n            for (; idx < length; idx ++) {\n                 route = routes[idx];\n\n                 if (route.worksWith(url, back, decode)) {\n                    return;\n                 }\n            }\n\n            if (this.trigger(ROUTE_MISSING, { url: url, params: kendo.parseQueryStringParams(url), backButtonPressed: back })) {\n                e.preventDefault();\n            }\n        }\n    });\n\n    kendo.Router = Router;\n})();\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n"],"names":["define","__meta__","id","name","category","description","depends","hidden","$","window","kendo","jQuery","undefined","CHANGE","BACK","SAME","support","location","history","CHECK_URL_INTERVAL","BROKEN_BACK_NAV","browser","msie","hashStrip","document","absoluteURL","path","pathPrefix","regEx","RegExp","test","protocol","host","replace","hashDelimiter","bang","locationHash","href","indexOf","split","stripRoot","root","url","substr","length","HistoryAdapter","Class","extend","back","setTimeout","forward","replaceLocation","PushStateAdapter","init","this","navigate","to","pushState","title","replaceState","normalize","current","pathname","search","change","callback","bind","stop","unbind","normalizeCurrent","options","fixedUrl","hash","hashBang","fixHash","fixBang","HashAdapter","_id","guid","prefix","fix","hashChange","on","_interval","setInterval","off","clearInterval","History","Observable","start","_started","adapter","createAdapter","historyLength","locations","_checkUrl","silent","_navigate","backCalled","push","decodeURIComponent","trigger","decode","call","newLength","navigatingInExisting","prev","backButtonPressed","pop","INIT","ROUTE_MISSING","optionalParam","namedParam","splatParam","escapeRegExp","namedParamReplace","match","optional","routeToRegExp","route","ignoreCase","stripUrl","Route","_callback","params","idx","queryStringParams","parseQueryStringParams","_back","exec","slice","apply","worksWith","Router","fn","routes","destroy","_urlChangedProxy","_sameProxy","_backProxy","that","sameProxy","_same","backProxy","e","urlChangedProxy","_urlChanged","same","initEventObject","preventDefault","noop","amd","a1","a2","a3"],"mappings":"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"}