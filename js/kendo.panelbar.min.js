/**
 * Copyright 2023 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("kendo.data.js"),require("kendo.icons.js")):"function"==typeof define&&define.amd?define(["kendo.data.min","kendo.icons.min"],t):((e="undefined"!=typeof globalThis?globalThis:e||self).kendopanelbar=e.kendopanelbar||{},e.kendopanelbar.js=t())}(this,(function(){return function(e,t){var n,a=window.kendo,r=a.ui,i=a.keys,s=e.extend,l=a.htmlEncode,o=e.each,d=Array.isArray,p=a.template,c=r.Widget,u=a.data.HierarchicalDataSource,h=/^(ul|a|div)$/i,f=".kendoPanelBar",m="href",g="k-last",v="k-link",k="."+v,_="error",b=".k-panelbar-item",C=".k-group:visible",x="k-image",y="k-first",w="change",I="expand",A="select",S="click",U="k-content",B="activate",D="collapse",E="dataBound",O="mouseenter",G="contentLoad",T="k-active",q="k-expanded",H="> .k-panel",F="> .k-content",R="k-focus",W="k-disabled",j="k-selected",L="."+j,M="k-highlight",N=b+":not(.k-disabled)",P="> "+N+" > "+k+", .k-panel > "+N+" > "+k,K=b+".k-disabled > .k-link",Q="> li > "+L+", .k-panel > li > "+L,V="aria-disabled",$="aria-expanded",z="aria-hidden",J="aria-selected",X=":visible",Y="single",Z={text:"dataTextField",url:"dataUrlField",spriteCssClass:"dataSpriteCssClassField",imageUrl:"dataImageUrlField"},ee={aria:function(e){var t="";return(e.items||e.content||e.contentUrl||e.expanded)&&(t+=$+"='"+(e.expanded?"true":"false")+"' "),!1===e.enabled&&(t+=V+"='true'"),t},wrapperCssClass:function(e,t){var n="k-panelbar-item",a=t.index;return e.firstLevel&&(n+=" k-panelbar-header"),!1===t.enabled?n+=" "+W:!0===t.expanded&&(n+=" "+T,n+=" "+q),0===a&&(n+=" k-first"),a==e.length-1&&(n+=" k-last"),t.cssClass&&(n+=" "+t.cssClass),t.level&&(n+=" k-level-"+t.level()),n},textClass:function(e){var t=v;return e.selected&&(t+=" "+j),t},textAttributes:function(e){return e?" href='"+e+"'":""},arrowIconOptions:function(e){return{icon:e.expanded?"chevron-up":"chevron-down",iconClass:"k-panelbar-toggle k-panelbar-"+(e.expanded?"collapse":"expand")}},text:function(e){return!1===e.encoded?e.text:a.htmlEncode(e.text)},groupAttributes:function(e){return!0!==e.expanded?" "+a.attr("style-display")+'="none"':""},ariaHidden:function(e){return!0!==e.expanded},groupCssClass:function(){return"k-panelbar-group k-group k-panel"},contentAttributes:function(e){return!0!==e.item.expanded?" "+a.attr("style-display")+'="none"':""},content:function(e){return e.content?e.content:e.contentUrl?"":"&nbsp;"},contentUrl:function(e){return e.contentUrl?'href="'+e.contentUrl+'"':""}};function te(t){(t=e(t)).filter(".k-first:not(:first-child)").removeClass(y),t.filter(".k-last:not(:last-child)").removeClass(g),t.filter(":first-child").addClass(y),t.filter(":last-child").addClass(g)}function ne(t){(t=e(t)).addClass("k-level-"+t.parentsUntil(".k-panelbar","ul").length)}n=function(e){return e.children("span").children(".k-panelbar-toggle")};var ae=a.ui.DataBoundWidget.extend({init:function(e,t){var n,r,i=this;d(t)&&(t={dataSource:t}),r=t&&!!t.dataSource,c.fn.init.call(i,e,t),e=i.wrapper=i.element.addClass("k-panelbar k-pos-relative"),t=i.options,e[0].id&&(i._itemId=e[0].id+"_pb_active"),i._tabindex(),i._accessors(),i._dataSource(),i._templates(),i._initData(r),i._updateClasses(),i._animations(t),e.on(S+f,P,i._click.bind(i)).on(O+f+" mouseleave"+f,P,i._toggleHover).on(S+f,K,!1).on(S+f,".k-request-retry",i._retryRequest.bind(i)).on("keydown"+f,i._keydown.bind(i)).on("focus"+f,(function(){var e=i.select();i._current(e[0]?e:i._first())})).on("blur"+f,(function(){i._current(null)})).attr("role","tree"),(n=e.find("li."+T+" > ."+U))[0]&&i.expand(n.parent(),!1),a.notify(i),i._showWatermarkOverlay&&i._showWatermarkOverlay(i.wrapper[0])},events:[I,D,A,B,w,_,E,G],options:{name:"PanelBar",dataSource:{},animation:{expand:{effects:"expand:vertical",duration:200},collapse:{duration:200}},messages:{loading:"Loading...",requestFailed:"Request failed.",retry:"Retry"},autoBind:!0,loadOnDemand:!0,expandMode:"multiple",template:null,dataTextField:null},destroy:function(){c.fn.destroy.call(this),this.element.off(f),a.destroy(this.element)},_initData:function(e){var t=this;e&&(t.element.empty(),t.options.autoBind&&(t._progress(!0),t.dataSource.fetch()))},_templates:function(){var e=this,t=e.options,n=e._fieldAccessor.bind(e);t.template&&"string"==typeof t.template?t.template=p(t.template):t.template||(t.template=p((function(e){var t=n("text")(e.item);return void 0!==e.item.encoded&&!1===e.item.encoded?"<span class='k-panelbar-item-text'>"+t+"</span>":"<span class='k-panelbar-item-text'>"+l(t)+"</span>"}))),e.templates={content:p((function(e){var t=e.data,n=e.item,a=e.contentAttributes,r=e.content;return"<div class='k-panelbar-content k-content'"+a({data:t,item:n,contentAttributes:a,content:r})+">"+r(n)+"</div>"})),group:p((function(e){var t=e.data,n=e.items,a=e.group,r=e.renderItems,i=e.panelBar,s=e.ariaHidden,l=e.groupCssClass,o=e.groupAttributes;return"<ul role='group' aria-hidden='"+s(a)+"' class='"+l(a)+"' "+o(a)+">"+r({data:t,items:n,group:a,renderItems:r,panelBar:i,ariaHidden:s,groupCssClass:l,groupAttributes:o})+"</ul>"})),itemWrapper:p((function(e){var t=e.panelBar,a=e.item,r=e.arrow,i=e.textClass,s=e.arrowIconOptions,l=e.textAttributes,o=e.contentUrl,d=n("url")(a),p=n("imageUrl")(a),c=n("spriteCssClass")(a),u=(o=o(a),d||o?"a":"span");return"<"+u+" class='"+i(a)+"' "+o+l(d)+">"+(p?"<img class='k-panelbar-item-icon k-image' alt='' src='"+p+"' />":"")+(c?"<span class='k-sprite "+c+"'></span>":"")+t.options.template({panelBar:t,item:a,arrow:r,textClass:i,textAttributes:l,contentUrl:o})+r({panelBar:t,item:a,arrow:r,textClass:i,arrowIconOptions:s,textAttributes:l,contentUrl:o})+"</"+u+">"})),item:p((function(e){var t=e.data,n=e.group,r=e.item,i=e.panelBar,s=e.itemWrapper,l=e.renderContent,o=e.arrow,d=e.arrowIconOptions,p=e.subGroup,c=e.aria,u=e.wrapperCssClass,h=e.contentUrl,f=e.textClass,m=e.textAttributes;return"<li aria-selected='false' role='treeitem' "+c(r)+"class='"+u(n,r)+"' "+a.attr("uid")+"='"+r.uid+"'>"+s({data:t,group:n,item:r,panelBar:i,itemWrapper:s,renderContent:l,arrow:o,arrowIconOptions:d,subGroup:p,aria:c,wrapperCssClass:u,contentUrl:h,textClass:f,textAttributes:m})+(r.items&&r.items.length>0?p({items:r.items,panelBar:i,group:{expanded:r.expanded}}):r.content||r.contentUrl?l({data:t,group:n,item:r,panelBar:i,itemWrapper:s,renderContent:l,arrow:o,arrowIconOptions:d,subGroup:p,aria:c,wrapperCssClass:u,contentUrl:h,textClass:f,textAttributes:m}):"")+"</li>"})),loading:p((function(e){var t=e.messages;return"<li class='k-panelbar-item'><span class='k-icon k-i-loading'></span> "+l(t.loading)+"</li>"})),retry:p((function(e){var t=e.messages;return"<li class='k-panelbar-item'>"+l(t.requestFailed)+" <button class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-request-retry'><span class='k-button-text'>"+l(t.retry)+"</span></button></li>"})),arrow:p((function(e){var t=e.item,n=e.arrowIconOptions;return a.ui.icon(n(t))})),empty:p((function(){return""}))}},setOptions:function(e){var t=this.options.animation;this._animations(e),e.animation=s(!0,t,e.animation),"dataSource"in e&&this.setDataSource(e.dataSource),c.fn.setOptions.call(this,e)},expand:function(t,n){var a=this,r={};if(t=this.element.find(t),!a._animating||!t.find("ul").is(":visible"))return a._animating=!0,n=!1!==n,t.each((function(i,s){s=e(s);var l=t.children(".k-group,.k-content");l.length||(l=a._addGroupElement(t));var o=l.add(s.find(F));if(!s.hasClass(W)&&o.length>0){if(a.options.expandMode==Y&&a._collapseAllExpanded(s))return a;t.find("."+M).removeClass(M),s.addClass(M),n||(r=a.options.animation,a.options.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}}),a._triggerEvent(I,s)||a._toggleItem(s,!1,!1),n||(a.options.animation=r)}})),a;a.one("complete",(function(){setTimeout((function(){a.expand(t)}))}))},collapse:function(t,n){var a=this,r={};return a._animating=!0,n=!1!==n,(t=a.element.find(t)).each((function(t,i){var s=(i=e(i)).find(H).add(i.find(F));!i.hasClass(W)&&s.is(X)&&(i.removeClass(M),n||(r=a.options.animation,a.options.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}}),a._triggerEvent(D,i)||a._toggleItem(i,!0),n||(a.options.animation=r))})),a},updateArrow:function(t){var n=this;(t=e(t)).children(k).children(".k-panelbar-collapse, .k-panelbar-expand").remove(),t.filter((function(){var t=n.dataItem(this);return t?t.hasChildren||t.content||t.contentUrl:e(this).find(".k-panel").length>0||e(this).find(".k-content").length>0})).children(".k-link:not(:has([class*=-i-chevron]))").each((function(){var t=e(this),n=t.parent(),r=a.ui.icon({icon:n.hasClass(T)?"chevron-up":"chevron-down",iconClass:"k-panelbar-toggle k-panelbar-"+(n.hasClass(T)?"collapse":"expand")});t.append(r)}))},_accessors:function(){var e,t,n,r=this.options,i=this.element;for(e in Z)t=r[Z[e]],n=i.attr(a.attr(e+"-field")),!t&&n&&(t=n),t||(t=e),d(t)||(t=[t]),r[Z[e]]=t},_progress:function(e,t){var a=this.element,r=this.templates.loading({messages:this.options.messages});1==arguments.length?(t=e)?a.html(r):a.empty():n(e).empty().removeClass("k-i-arrow-rotate-cw k-svg-i-arrow-rotate-cw").toggleClass("k-i-loading",t)},_refreshRoot:function(t){var n=this,i={firstLevel:!0,expanded:!0,length:n.element.children().length};this.element.empty();var l=e.map(t,(function(t,r){if("string"==typeof t)return e(t);t.items=[];var l=e(n.renderItem({group:i,item:s(t,{index:r})}));return a.applyStylesFromKendoAttributes(l,["display"]),l}));this.element.append(l);for(var o=this.element.children(".k-panelbar-item"),d=0;d<t.length;d++)this.trigger("itemChange",{item:o.eq(d).find(".k-link").first(),data:t[d],ns:r})},_refreshChildren:function(t,n){var a,i,s;if(n.children(".k-group").empty(),t.children.data().length)for(this.append(t.children,n),this.options.loadOnDemand&&this._toggleGroup(n.children(".k-group"),!1),i=n.children(".k-group").children("li"),a=0;a<i.length;a++)s=i.eq(a),this.trigger("itemChange",{item:s.find(".k-link").first(),data:this.dataItem(s),ns:r});else!function(t){var n=t,a=t.children("ul"),r=n.children(".k-link").children(".k-panelbar-toggle");t.hasClass("k-panelbar")||(!r.length&&a.length?r=e("<span class='k-panelbar-toggle' />").appendTo(n):a.length&&a.children().length||(r.remove(),a.remove()))}(n),i=n.children(".k-group").children("li")},findByUid:function(t){for(var n,r=this.element.find(".k-panelbar-item"),i=a.attr("uid"),s=0;s<r.length;s++)if(r[s].getAttribute(i)==t){n=r[s];break}return e(n)},refresh:function(e){var n=this.options,a=e.node,r=e.action,i=e.items,s=this.wrapper,l=n.loadOnDemand;if(e.field){if(!i[0]||!i[0].level)return;return this._updateItems(i,e.field)}if(a&&(s=this.findByUid(a.uid),this._progress(s,!1)),"add"==r?this._appendItems(e.index,i,s):"remove"==r?this.remove(this.findByUid(i[0].uid)):"itemchange"==r?this._updateItems(i):"itemloaded"==r?this._refreshChildren(a,s):this._refreshRoot(i),"remove"!=r)for(var o=0;o<i.length;o++)if(!l||i[o].expanded){var d=i[o];this._hasChildItems(d)&&d.load()}this.trigger(E,{node:a?s:t})},_error:function(e){var t=e.node&&this.findByUid(e.node.uid),r=this.templates.retry({messages:this.options.messages});t?(this._progress(t,!1),this._expanded(t,!1),a.ui.icon(n(t),{icon:"arrow-rotate-cw"}),e.node.loaded(!1)):(this._progress(!1),this.element.html(r))},_retryRequest:function(e){e.preventDefault(),this.dataSource.fetch()},items:function(){return this.element.find(".k-panelbar-item > span:first-child")},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&(this._progress(!0),this.dataSource.fetch())},_bindDataSource:function(){this._refreshHandler=this.refresh.bind(this),this._errorHandler=this._error.bind(this),this.dataSource.bind(w,this._refreshHandler),this.dataSource.bind(_,this._errorHandler)},_unbindDataSource:function(){var e=this.dataSource;e&&(e.unbind(w,this._refreshHandler),e.unbind(_,this._errorHandler))},_fieldAccessor:function(t){var n=this.options[Z[t]]||[],r=n.length;return 0===r?function(e){return e[t]}:function(t){var i=e.map(n,a.getter);return t.level?i[Math.min(t.level(),r-1)](t):i[r-1](t)}},_dataSource:function(){var e=this,t=e.options.dataSource;t&&(t=d(t)?{data:t}:t,e._unbindDataSource(),t.fields||(t.fields=[{field:"text"},{field:"url"},{field:"spriteCssClass"},{field:"imageUrl"}]),e.dataSource=u.create(t),e._bindDataSource())},_appendItems:function(t,n,r){var i,l,o=this;r.hasClass("k-panelbar")?(i=r.children("li"),l=r):((l=r.children(".k-group")).length||(l=o._addGroupElement(r)),i=l.children("li"));var d={firstLevel:r.hasClass("k-panelbar"),expanded:!0,length:i.length},p=e.map(n,(function(t,n){if("string"==typeof t)return e(t);var r=e(o.renderItem({group:d,item:s(t,{index:n})}));return a.applyStylesFromKendoAttributes(r,["display"]),r}));void 0===t&&(t=i.length);for(var c=0;c<p.length;c++)0===i.length||0===t?l.append(p[c]):p[c].insertAfter(i[t-1]);o.dataItem(r)&&(o.dataItem(r).hasChildren=!0,o.updateArrow(r))},_updateItems:function(t,n){var a,i,l,o,d=this,p={panelBar:d.options,item:o,group:{}},c="expanded"!=n;if("selected"==n)if(t[0][n]){var u=d.findByUid(t[0].uid);u.hasClass(W)||d.select(u,!0)}else d.clearSelection();else{var h=e.map(t,(function(e){return d.findByUid(e.uid)}));for(a=0;a<t.length;a++)p.item=o=t[a],p.panelBar=d,i=(l=h[a]).parent(),c&&(p.group={firstLevel:i.hasClass("k-panelbar"),expanded:l.parent().hasClass(T),length:l.children().length},l.children(".k-link").remove(),l.prepend(d.templates.itemWrapper(s(p,{arrow:o.hasChildren||o.content||o.contentUrl?d.templates.arrow:d.templates.empty},ee)))),"expanded"==n?d._toggleItem(l,!o[n],!o[n]||"true"):"enabled"==n&&(d.enable(l,o[n]),o[n]||o.selected&&o.set("selected",!1)),l.length&&this.trigger("itemChange",{item:l.find(".k-link").first(),data:o,ns:r})}},_toggleDisabled:function(e,t){(e=this.element.find(e)).toggleClass(W,!t).attr(V,!t)},dataItem:function(t){var n=e(t).closest(b).attr(a.attr("uid")),r=this.dataSource;return r&&r.getByUid(n)},select:function(n,a){var r=this;return n===t?r.element.find(Q).parent():((n=r.element.find(n)).length?n.each((function(){var t=e(this),n=t.children(k);if(t.hasClass(W))return r;r._updateSelected(n,a)})):this._updateSelected(n),r)},clearSelection:function(){this.select(e())},enable:function(e,t){return this._toggleDisabled(e,!1!==t),this},disable:function(e){return this._toggleDisabled(e,!1),this},append:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.length?t.find(H):null);return o(n.items,(function(){n.group.append(this),te(this),ne(this)})),this.updateArrow(t),te(n.group.find(".k-first, .k-last")),n.group.height("auto"),this},insertBefore:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.parent());return o(n.items,(function(){t.before(this),te(this),ne(this)})),te(t),n.group.height("auto"),this},insertAfter:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.parent());return o(n.items,(function(){t.after(this),te(this),ne(this)})),te(t),n.group.height("auto"),this},remove:function(e){var t=this,n=(e=this.element.find(e)).parentsUntil(t.element,b),a=e.parent("ul");return e.remove(),!a||a.hasClass("k-panelbar")||a.children(b).length||a.remove(),n.length&&(n=n.eq(0),t.updateArrow(n),te(n)),t},reload:function(t){var n=this;(t=n.element.find(t)).each((function(){var t=e(this);n._ajaxRequest(t,t.children("."+U),!t.is(X))}))},_first:function(){return this.element.children(N).first()},_last:function(){var e=this.element.children(N).last(),t=e.children(C);return t[0]?t.children(N).last():e},_current:function(n){var a=this,r=a._focused,i=a._itemId;if(n===t)return r;a.element.removeAttr("aria-activedescendant"),r&&r.length&&(r[0].id===i&&r.removeAttr("id"),r.children(k).removeClass(R)),e(n).length&&(i=n[0].id||i,n.attr("id",i).children(k).addClass(R),a.element.attr("aria-activedescendant",i)),a._focused=n},_keydown:function(e){var t=this,n=e.keyCode,a=t._current();e.target==e.currentTarget&&(n==i.DOWN||n==i.RIGHT?(t._current(t._nextItem(a)),e.preventDefault()):n==i.UP||n==i.LEFT?(t._current(t._prevItem(a)),e.preventDefault()):n==i.ENTER||n==i.SPACEBAR?(t._click(e),e.preventDefault()):n==i.HOME?(t._current(t._first()),e.preventDefault()):n==i.END&&(t._current(t._last()),e.preventDefault()))},_nextItem:function(e){if(!e)return this._first();var t=e.children(C),n=e.nextAll(":visible").first();return t[0]&&(n=t.children("."+y)),n[0]||(n=e.parent(C).parent(b).next()),n[0]||(n=this._first()),n},_prevItem:function(e){if(!e)return this._last();var t,n=e.prevAll(":visible").first();if(n[0])for(t=n;t[0];)(t=t.children(C).children("."+g))[0]&&(n=t);else(n=e.parent(C).parent(b))[0]||(n=this._last());return n},_insert:function(t,n,r){var i,l,o=this,d=e.isPlainObject(t),p=n&&n[0];if(p||(r=o.element),l={firstLevel:r.hasClass("k-panelbar"),expanded:e(n).hasClass(T),length:r.children().length},p&&!r.length&&(r=e(o.renderGroup({group:l,options:o.options})),a.applyStylesFromKendoAttributes(r,["display"]),r.appendTo(n)),d||Array.isArray(t)||t instanceof u){if(t instanceof u&&(t=t.data()),i=e.map(d?[t]:t,(function(t,n){if("string"==typeof t)return e(t);var r=e(o.renderItem({group:l,item:s(t,{index:n})}));return a.applyStylesFromKendoAttributes(r,["display"]),r})),p){var c=o.dataItem(n);c?(c.hasChildren=!0,n.attr($,c.expanded).not("."+T).children("ul").attr(z,!c.expanded)):n.attr($,!1)}}else i="string"==typeof t&&"<"!=t.charAt(0)?o.element.find(t):e(t),o._updateItemsClasses(i);return t.length||(t=[t]),{items:i,group:r}},_toggleHover:function(t){var n=e(t.currentTarget);n.parents("li."+W).length||n.toggleClass("k-hover",t.type==O)},_updateClasses:function(){var t,n,a,r,i,s=this;r=(t=s.element.find("li > ul").not((function(){return e(this).parentsUntil(".k-panelbar","div").length})).addClass("k-panelbar-group k-group k-panel").attr("role","group")).parent(),a=(i=s.dataItem(r))&&i.expanded||!1,t.parent().not("["+$+"]").attr($,a).not("."+T).children("ul").attr(z,!a).hide(),n=s.element.add(t).children(),s._updateItemsClasses(n),s.updateArrow(n),te(n)},_updateItemsClasses:function(e){for(var t=e.length,n=0;n<t;n++)this._updateItemClasses(e[n],n)},_updateItemClasses:function(t,n){var r,i,s=this._selected,l=this.options.contentUrls,o=l&&l[n],d=this.element[0];t=e(t).addClass("k-panelbar-item").attr({role:"treeitem","aria-selected":!1}),a.support.browser.msie&&t.css("list-style-position","inside").css("list-style-position",""),t.children("img").addClass(x),(i=t.children("a").addClass(v))[0]&&(i.attr("href",o),i.children("img").addClass(x)),t.filter("li[disabled]").addClass("k-disabled").attr(V,!0).prop("disabled",!1),t.children("div").addClass(U+" k-panelbar-content").attr(z,!0).hide().parent().attr($,!1),(i=t.children(L))[0]&&(s&&s.attr(J,!1).children(L).removeClass(j),i.addClass(j),this._selected=t.attr(J,!0)),t.children(k)[0]||(r="<span class='"+v+"'><span class='k-panelbar-item-text'></span></span>",l&&l[n]&&t[0].parentNode==d&&(r='<a class="k-link" href="'+l[n]+'"></a>'),t.contents().filter((function(){return!(this.nodeName.match(h)||3==this.nodeType&&!a.trim(this.nodeValue.trim))})).wrapAll(r)),t.parent(".k-panelbar")[0]?t.addClass("k-panelbar-header"):t.addClass("k-panelbar-item"),/k\-level\-\d+/i.test(t.attr("class"))||t.addClass("k-level-"+t.parentsUntil(this.element,"ul").length)},_click:function(t){var n,a,r,i=this,s=t.type==S?e(t.target):i._current().children(k),l=i.element;if(!s.parents("li."+W).length&&s.closest(".k-panelbar")[0]==l[0]&&(!s.is(":kendoFocusable")||s.hasClass(v))){var o=s.closest(k),d=o.closest(b);i._updateSelected(o);var p=d.children(".k-group,.k-content"),c=this.dataItem(d);if(!p.length&&(i.options.loadOnDemand&&c&&c.hasChildren||this._hasChildItems(d)||d.content||d.contentUrl)&&(p=i._addGroupElement(d)),a=d.find(H).add(d.find(F)),n=!(!((r=o.attr(m))&&("#"==r.charAt(r.length-1)||-1!=r.indexOf("#"+i.element[0].id+"-")))&&!a.length),a.data("animating")&&n)t.preventDefault();else if(i._triggerEvent(A,d)&&(n=!0),!1!==n)if(i.options.expandMode==Y&&i._collapseAllExpanded(d)&&n)t.preventDefault();else{if(a.length){var u=a.is(X);i._triggerEvent(u?D:I,d)||(n=i._toggleItem(d,u))}n&&t.preventDefault()}}},_hasChildItems:function(e){return e.items&&e.items.length>0||e.hasChildren},_toggleItem:function(e,n,a){var r,i,s=this,l=e.find(H),o=e.find(k).attr(m),d=s.dataItem(e),p=!n,c=d&&d.loaded();return d&&!a&&d.expanded!==p?(d.set("expanded",p),r=d.hasChildren||!!d.content||!!d.contentUrl):(!d||a&&"true"!==a||c||d.content||d.contentUrl?l.length?(this._toggleGroup(l,n),r=!0):(i=e.children("."+U)).length&&(r=!0,i.is(":empty")&&o!==t?s._ajaxRequest(e,i,n):s._toggleGroup(i,n)):(s.options.loadOnDemand&&this._progress(e,!0),e.children(".k-group,.k-content").remove(),r=d.hasChildren,d.load()),r)},_toggleGroup:function(t,n){var r=this,i=r.options.animation,l=i.expand,o=i.collapse&&"effects"in i.collapse,d=s({},i.expand,i.collapse);t.hasClass("k-hidden")&&t.removeClass("k-hidden"),o||(d=s(d,{reverse:!0})),t.is(X)==n?(t.attr(z,!!n),t.parent().attr($,!n).toggleClass(T,!n).toggleClass(q,!n).find("> .k-link > .k-panelbar-collapse,> .k-link > .k-panelbar-expand").each((function(t,r){var i=e(r);i.removeClass("k-panelbar-expand k-panelbar-collapse"),a.ui.icon(i,{icon:n?"chevron-down":"chevron-up",iconClass:n?"k-panelbar-expand":"k-panelbar-collapse"})})),n?(l=s(d,{hide:!0})).complete=function(){r._animationCallback()}:l=s({complete:function(e){r._triggerEvent(B,e.closest(b)),r._animationCallback()}},l),t.toggle(0).kendoStop(!0,!0).kendoAnimate(l)):r._animating=!1},_animationCallback:function(){this.trigger("complete"),this._animating=!1},_addGroupElement:function(t){var n=e('<ul role="group" aria-hidden="true" class="k-panelbar-group k-group k-panel"></ul>').hide();return t.append(n),n},_collapseAllExpanded:function(t){var n,a=this,r=!1,i=t.find(H).add(t.find(F));return i.is(X)&&(r=!0),i.is(X)||0===i.length||((n=t.siblings()).find(H).add(n.find(F)).filter((function(){return e(this).is(X)})).each((function(t,n){n=e(n),(r=a._triggerEvent(D,n.closest(b)))||a._toggleGroup(n,!0)})),a.one("complete",(function(){setTimeout((function(){n.each((function(e,t){var n=a.dataItem(t);n&&n.set("expanded",!1)}))}))}))),r},_ajaxRequest:function(t,n,r){var i=this,s=t.find(".k-panelbar-collapse, .k-panelbar-expand"),l=t.find(k),o=setTimeout((function(){s.empty().removeClass("k-i-chevron-up k-i-chevron-down k-svg-i-chevron-up k-svg-i-chevron-down").addClass("k-i-loading")}),100),d=l.attr(m);e.ajax({type:"GET",cache:!1,url:d,dataType:"html",data:{},error:function(e,t){s.removeClass("k-i-loading"),a.ui.icon(s,{icon:s.hasClass("k-panelbar-expand")?"chevron-down":"chevron-up"}),i.trigger(_,{xhr:e,status:t})&&this.complete()},complete:function(){clearTimeout(o),a.ui.icon(s,{icon:s.hasClass("k-panelbar-expand")?"chevron-down":"chevron-up"}),s.removeClass("k-i-loading")},success:function(e){try{n.html(e)}catch(e){var a=window.console;a&&a.error&&a.error(e.name+": "+e.message+" in "+d),this.error(this.xhr,"error")}i._toggleGroup(n,r),i.trigger(G,{item:t[0],contentElement:n[0]})}})},_triggerEvent:function(e,t){return this.trigger(e,{item:t[0]})},_updateSelected:function(e,t){var n=this,a=n.element,r=e.parent(b),i=n._selected,s=n.dataItem(r);i&&i.attr(J,!1),n._selected=r.attr(J,!0),a.find(Q).removeClass(j),a.find("> ."+M+", .k-panel > ."+M).removeClass(M),e.addClass(j),e.parentsUntil(a,b).filter(":has(.k-link)").addClass(M),n._current(r[0]?r:null),s&&s.set("selected",!0),t||n.trigger(w)},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}})},renderItem:function(e){var t=this;e=s({panelBar:t,group:{}},e);var n=t.templates.empty,a=e.item;return t.templates.item(s(e,{itemWrapper:t.templates.itemWrapper,renderContent:t.renderContent,arrow:t._hasChildItems(a)||a.content||a.contentUrl?t.templates.arrow:n,subGroup:!e.loadOnDemand||a.expanded?t.renderGroup:n},ee))},renderGroup:function(e){return(this.templates||e.panelBar.templates).group(s({renderItems:function(e){for(var t="",n=0,a=e.items,r=a?a.length:0,i=s({length:r},e.group);n<r;n++)t+=e.panelBar.renderItem(s(e,{group:i,item:s({index:n},a[n])}));return t}},e,ee))},renderContent:function(e){return e.panelBar.templates.content(s(e,ee))}});a.ui.plugin(ae)}(window.kendo.jQuery),kendo}));
//# sourceMappingURL=kendo.panelbar.min.js.map
