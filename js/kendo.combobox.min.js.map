{"version":3,"file":"kendo.combobox.min.js","sources":["kendo.combobox.js"],"sourcesContent":["(function(f, define){\n    define('kendo.combobox',[ \"kendo.list\", \"kendo.mobile.scroller\", \"kendo.virtuallist\", \"kendo.html.button\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"combobox\",\n    name: \"ComboBox\",\n    category: \"web\",\n    description: \"The ComboBox widget allows the selection from pre-defined values or entering a new value.\",\n    depends: [ \"list\", \"html.button\" ],\n    features: [ {\n        id: \"mobile-scroller\",\n        name: \"Mobile scroller\",\n        description: \"Support for kinetic scrolling in mobile device\",\n        depends: [ \"mobile.scroller\" ]\n    }, {\n        id: \"virtualization\",\n        name: \"VirtualList\",\n        description: \"Support for virtualization\",\n        depends: [ \"virtuallist\" ]\n    } ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        html = kendo.html,\n        List = ui.List,\n        Select = ui.Select,\n        caret = kendo.caret,\n        support = kendo.support,\n        placeholderSupported = support.placeholder,\n        activeElement = kendo._activeElement,\n        keys = kendo.keys,\n        ns = \".kendoComboBox\",\n        nsFocusEvent = ns + \"FocusEvent\",\n        CLICK = \"click\" + ns,\n        MOUSEDOWN = \"mousedown\" + ns,\n        DISABLED = \"disabled\",\n        READONLY = \"readonly\",\n        CHANGE = \"change\",\n        LOADING = \"k-i-loading k-input-loading-icon\",\n        FOCUSED = \"k-focus\",\n        STATEDISABLED = \"k-disabled\",\n        ARIA_DISABLED = \"aria-disabled\",\n        ARIA_READONLY = \"aria-readonly\",\n        AUTOCOMPLETEVALUE = \"off\",\n        STATE_FILTER = \"filter\",\n        STATE_ACCEPT = \"accept\",\n        STATE_REBIND = \"rebind\",\n        HOVEREVENTS = \"mouseenter\" + ns + \" mouseleave\" + ns,\n        newLineRegEx = /(\\r\\n|\\n|\\r)/gm,\n        NON_PRINTABLE_KEYS = [16,17,18,19,20,33,34,37,39,45,91,92,144,145];\n\n    var ComboBox = Select.extend({\n        init: function(element, options) {\n            var that = this, text, disabled;\n\n            that.ns = ns;\n\n            options = Array.isArray(options) ? { dataSource: options } : options;\n\n            Select.fn.init.call(that, element, options);\n\n            options = that.options;\n            element = that.element.on(\"focus\" + ns, that._focusHandler.bind(that));\n\n            options.placeholder = options.placeholder || element.attr(\"placeholder\");\n\n            that._reset();\n\n            that._wrapper();\n\n            that._input();\n\n            that._clearButton();\n\n            that._tabindex(that.input);\n\n            that._popup();\n\n            that._dataSource();\n            that._ignoreCase();\n\n            that._enable();\n\n            that._attachFocusEvents();\n\n            that._oldIndex = that.selectedIndex = -1;\n\n            that._aria();\n\n            that._initialIndex = options.index;\n\n            that.requireValueMapper(that.options);\n            that._initList();\n\n            that._cascade();\n\n            if (options.autoBind) {\n                that._filterSource();\n            } else {\n                text = options.text;\n\n                if (!text && that._isSelect) {\n                    text = element.children(\":selected\").text();\n                }\n\n                if (text) {\n                    that._setText(text);\n                }\n            }\n\n            if (!text) {\n                that._placeholder();\n            }\n\n            disabled = $(that.element).parents(\"fieldset\").is(':disabled');\n\n            if (disabled) {\n                that.enable(false);\n            }\n\n            kendo.notify(that);\n            that._toggleCloseVisibility();\n            that._applyCssClasses();\n        },\n\n        options: {\n            name: \"ComboBox\",\n            enabled: true,\n            index: -1,\n            text: null,\n            value: null,\n            autoBind: true,\n            delay: 200,\n            dataTextField: \"\",\n            dataValueField: \"\",\n            minLength: 1,\n            enforceMinLength: false,\n            height: 200,\n            highlightFirst: true,\n            filter: \"none\",\n            placeholder: \"\",\n            suggest: false,\n            cascadeFrom: \"\",\n            cascadeFromField: \"\",\n            cascadeFromParentField: \"\",\n            ignoreCase: true,\n            animation: {},\n            virtual: false,\n            template: null,\n            groupTemplate: \"#:data#\",\n            fixedGroupTemplate: \"#:data#\",\n            clearButton: true,\n            syncValueAndText: true,\n            autoWidth: false,\n            popup: null,\n            size: \"medium\",\n            fillMode: \"solid\",\n            rounded: \"medium\"\n        },\n\n        events:[\n            \"open\",\n            \"close\",\n            CHANGE,\n            \"select\",\n            \"filtering\",\n            \"dataBinding\",\n            \"dataBound\",\n            \"cascade\",\n            \"set\"\n        ],\n\n        setOptions: function(options) {\n            var listOptions = this._listOptions(options);\n\n            Select.fn.setOptions.call(this, options);\n\n            this.listView.setOptions(listOptions);\n\n            this._accessors();\n            this._aria();\n            this._clearButton();\n        },\n\n        destroy: function() {\n            var that = this;\n\n            that.input.off(ns);\n            that.input.off(nsFocusEvent);\n            that.element.off(ns);\n            that.wrapper.off(ns);\n            clearTimeout(that._pasteTimeout);\n\n            that._arrow.off(CLICK + \" \" + MOUSEDOWN);\n            that._clear.off(CLICK + \" \" + MOUSEDOWN);\n\n            Select.fn.destroy.call(that);\n        },\n\n        _isValueChanged: function(value) {\n            return value !== List.unifyType(this._old, typeof value) &&\n                value !== List.unifyType(this._oldText, typeof value);\n        },\n\n        _change: function() {\n            var that = this;\n            var text = that.text();\n            var hasText = text && text !== that._oldText && text !== that.options.placeholder;\n            var index = that.selectedIndex;\n            var isCustom = index === -1;\n\n            if (!that.options.syncValueAndText && !that.value() && isCustom && hasText) {\n                that._old = \"\";\n                that._oldIndex = index;\n                that._oldText = text;\n\n                if (!that._typing) {\n                    // trigger the DOM change event so any subscriber gets notified\n                    that.element.trigger(CHANGE);\n                }\n\n                that.trigger(CHANGE);\n                that._typing = false;\n                return;\n            }\n\n            Select.fn._change.call(that);\n\n            that._oldText = that.text && that.text();\n\n            that._toggleCloseVisibility();\n        },\n\n        _attachFocusEvents: function() {\n            var that = this;\n            that.input.on(\"focus\" + nsFocusEvent, that._inputFocus.bind(that))\n                      .on(\"focusout\" + nsFocusEvent, that._inputFocusout.bind(that));\n        },\n\n        _focusHandler: function(e) {\n            if(e.target === this.element[0]) {\n                this.input.trigger(\"focus\");\n            }\n        },\n\n        _arrowClick: function() {\n            this._toggle();\n        },\n\n        _inputFocus: function() {\n            this.wrapper.addClass(FOCUSED);\n            this._placeholder(false);\n        },\n\n        _inputFocusout: function(e) {\n            var that = this;\n            var value = that.value();\n            var isClearButton = !$(e.relatedTarget).closest('.k-clear-value').length;\n\n            that._userTriggered = true;\n            that.wrapper.removeClass(FOCUSED);\n            clearTimeout(that._typingTimeout);\n            that._typingTimeout = null;\n\n            if (isClearButton) {\n              that.text(that.text());\n            }\n\n            var item = that._focus();\n            var dataItem = this.listView.dataItemByIndex(this.listView.getElementIndex(item));\n\n            if (value !== that.value() && that.trigger(\"select\", { dataItem: dataItem, item: item })) {\n                that.value(value);\n                return;\n            }\n\n            that._placeholder();\n            that._valueBeforeCascade = that._old;\n\n            if (isClearButton) {\n                that._blur();\n\n                that.element.trigger(\"blur\");\n            }\n        },\n\n        _inputPaste: function() {\n            var that = this;\n            clearTimeout(that._pasteTimeout);\n            that._pasteTimeout = null;\n\n            that._pasteTimeout = setTimeout(function() {\n                that.search();\n            });\n        },\n\n        _editable: function(options) {\n            var that = this,\n                disable = options.disable,\n                readonly = options.readonly,\n                wrapper = that.wrapper.off(ns),\n                input = that.element.add(that.input.off(ns)),\n                arrow = that._arrow.off(CLICK + \" \" + MOUSEDOWN),\n                clear = that._clear;\n\n            if (!readonly && !disable) {\n                wrapper\n                    .removeClass(STATEDISABLED)\n                    .on(HOVEREVENTS, that._toggleHover);\n\n                input.prop(DISABLED, false)\n                     .prop(READONLY, false)\n                     .attr(ARIA_DISABLED, false)\n                     .attr(ARIA_READONLY, false);\n\n                arrow.on(CLICK, that._arrowClick.bind(that))\n                     .on(MOUSEDOWN, function(e) { e.preventDefault(); });\n\n                clear.on(CLICK + \" touchend\" + ns, that._clearValue.bind(that));\n\n                that.input\n                    .on(\"keydown\" + ns, that._keydown.bind(that))\n                    .on(\"input\" + ns, that._search.bind(that))\n                    .on(\"paste\" + ns, that._inputPaste.bind(that));\n\n                that.wrapper.on(CLICK + ns, that._focusHandler.bind(that));\n            } else {\n                wrapper\n                    .addClass(disable ? STATEDISABLED : \"\")\n                    .removeClass(disable ? \"\" : STATEDISABLED);\n\n                input.attr(DISABLED, disable)\n                     .attr(READONLY, readonly)\n                     .attr(ARIA_DISABLED, disable)\n                     .attr(ARIA_READONLY, readonly);\n            }\n\n            that._toggleCloseVisibility();\n        },\n\n        open: function() {\n            var that = this;\n            var state = that._state;\n            var isFiltered = that.dataSource.filter() ? that.dataSource.filter().filters.length > 0 : false;\n            var reinitialized = !that.ul.find(that.listView.focus()).length;\n\n            if (that.popup.visible()) {\n                return;\n            }\n\n            if ((!that.listView.bound() && state !== STATE_FILTER) || state === STATE_ACCEPT) {\n                that._open = true;\n                that._state = STATE_REBIND;\n\n                if ((that.options.minLength !== 1 && !isFiltered) || (isFiltered && that.value() && that.selectedIndex === -1 )) {\n                    that.refresh();\n                    that._openPopup();\n                    if (!this.options.virtual) {\n                        that.listView.bound(false);\n                    }\n                } else {\n                    that._filterSource();\n                }\n            } else if (that._allowOpening()) {\n                // In some cases when the popup is opened resize is triggered which will cause it to close\n                // Setting the below flag will prevent this from happening\n                that.popup._hovered = true;\n                that._openPopup();\n                if(that.options.virtual) {\n                    that._focusItem();\n                } else if (reinitialized && that.options.highlightFirst) {\n                    that.listView.focus(0);\n                }\n            }\n        },\n\n        _scrollToFocusedItem: function() {\n            var listView = this.listView;\n\n            listView.scrollToIndex(listView.getElementIndex(listView.focus()));\n        },\n\n        _openPopup: function() {\n            this.popup.one(\"activate\", this._scrollToFocusedItem.bind(this));\n            this.popup.open();\n        },\n\n        _updateSelectionState: function() {\n            var that = this;\n            var text = that.options.text;\n            var value = that.options.value;\n\n            if (that.listView.isFiltered()) {\n                return;\n            }\n\n            if (that.selectedIndex === -1) {\n                if (text === undefined || text === null) {\n                    text = value;\n                }\n\n                that._accessor(value);\n                that.input.val(text || that.input.val());\n                that._placeholder();\n            } else if (that._oldIndex === -1) {\n                that._oldIndex = that.selectedIndex;\n            }\n        },\n\n        _buildOptions: function(data) {\n            var that = this;\n            if (!that._isSelect) {\n                return;\n            }\n\n            var custom = that._customOption;\n\n            if (that._state === STATE_REBIND) {\n                that._state = \"\";\n            }\n\n            that._customOption = undefined;\n            that._options(data, \"\", that.value());\n\n            if (custom && custom[0].selected && !that.listView._emptySearch) {\n                that._custom(custom.val());\n            }\n        },\n\n        _updateSelection: function() {\n            var that = this;\n            var listView = that.listView;\n            var initialIndex = that._initialIndex;\n            var hasInitialIndex = initialIndex !== null && initialIndex > -1;\n            var filtered = that._state === STATE_FILTER;\n\n            if (filtered) {\n                $(listView.focus()).removeClass(\"k-selected\");\n                return;\n            }\n\n            if (that._fetch) {\n                return;\n            }\n\n            if (!listView.value().length) {\n                if (hasInitialIndex) {\n                    that.select(initialIndex);\n                } else if (that._accessor()) {\n                    listView.value(that._accessor());\n                }\n            }\n\n            that._initialIndex = null;\n            var dataItem = listView.selectedDataItems()[0];\n\n            if (!dataItem) {\n                return;\n            }\n\n            if (that._value(dataItem) !== that.value()) {\n                that._custom(that._value(dataItem));\n            } else if (that._value(dataItem) !== that.element[0].value){\n                that._accessor(that._value(dataItem));\n            }\n\n            if (that.text() && that.text() !== that._text(dataItem)) {\n                that._selectValue(dataItem);\n            }\n        },\n\n        _updateItemFocus: function() {\n            var listView = this.listView;\n\n            if (!this.options.highlightFirst) {\n                listView.focus(-1);\n            } else if (!listView.focus() && !listView.focusIndex()) {\n                listView.focus(0);\n            }\n        },\n\n        _listBound: function() {\n            var that = this;\n            var isActive = that.input[0] === activeElement();\n\n            var data = that.dataSource.flatView();\n            var skip = that.listView.skip();\n            var length = data.length;\n            var groupsLength = that.dataSource._group ? that.dataSource._group.length : 0;\n            var isFirstPage = skip === undefined || skip === 0;\n\n            that._presetValue = false;\n\n            that._renderFooter();\n            that._renderNoData();\n            that._toggleNoData(!length);\n            that._toggleHeader(!!groupsLength && !!length);\n\n            that._resizePopup();\n\n            that.popup.position();\n\n            that._buildOptions(data);\n\n            that._updateSelection();\n\n            if (data.length && isFirstPage) {\n                that._updateItemFocus();\n\n                if (that.options.suggest && isActive && that.input.val()) {\n                    that.suggest(data[0]);\n                }\n            }\n\n            if (that._open) {\n                that._open = false;\n\n                if (that._typingTimeout && !isActive) {\n                    that.popup.close();\n                } else {\n                    that.toggle(that._allowOpening());\n                }\n\n                that._typingTimeout = null;\n            }\n\n            that._hideBusy();\n            that.trigger(\"dataBound\");\n        },\n\n        _listChange: function() {\n            this._selectValue(this.listView.selectedDataItems()[0]);\n\n            if (this._presetValue) {\n                this._oldIndex = this.selectedIndex;\n            }\n        },\n\n        _get: function(candidate) {\n            var data, found, idx;\n\n            if (typeof candidate === \"function\") {\n                data = this.dataSource.flatView();\n\n                for (idx = 0; idx < data.length; idx++) {\n                    if (candidate(data[idx])) {\n                        candidate = idx;\n                        found = true;\n                        break;\n                    }\n                }\n\n                if (!found) {\n                    candidate = -1;\n                }\n            }\n\n            if (!this.dataSource.total() && !candidate) {\n                candidate = -1;\n            }\n\n            return candidate;\n        },\n\n        _select: function(candidate, keepState) {\n            var that = this;\n\n            candidate = that._get(candidate);\n\n            if (candidate === -1) {\n                that.input[0].value = \"\";\n                that._accessor(\"\");\n            }\n\n            return that.listView.select(candidate).done(function() {\n                if (!keepState && that._state === STATE_FILTER) {\n                    that._state = STATE_ACCEPT;\n                }\n                that._toggleCloseVisibility();\n            });\n        },\n\n        _selectValue: function(dataItem) {\n            var idx = this.listView.select();\n            var value = \"\";\n            var text = \"\";\n\n            idx = idx[idx.length - 1];\n            if (idx === undefined) {\n                idx = -1;\n            }\n\n            this.selectedIndex = idx;\n\n            if (this.listView.isFiltered() && idx !== -1) {\n                this._valueBeforeCascade = this._old;\n            }\n\n            if (idx === -1 && !dataItem) {\n                if (this.options.syncValueAndText) {\n                    if (this.options.dataTextField === this.options.dataValueField) {\n                        text = this._accessor();\n                    } else {\n                        text = this.input[0].value;\n                    }\n                    value = text;\n                }\n                else {\n                    text = this.text();\n                }\n                this.listView.focus(-1);\n            } else {\n                if (dataItem || dataItem === 0) {\n                    value = this._dataValue(dataItem);\n                    text = this._text(dataItem);\n                }\n\n                if (value === null) {\n                    value = \"\";\n                }\n            }\n\n            this._setDomInputValue(text);\n            this._accessor(value !== undefined ? value : text, idx);\n\n            this._placeholder();\n            this._triggerCascade();\n        },\n\n        _setDomInputValue: function(text){\n            var that = this;\n            var currentCaret = caret(this.input);\n            var caretStart;\n\n            if(currentCaret && currentCaret.length){\n                caretStart = currentCaret[0];\n            }\n\n            this._prev = this.input[0].value = text;\n\n            if(caretStart && this.selectedIndex === -1){\n                var mobile = support.mobileOS;\n                if(mobile.wp || mobile.android) {// without the timeout the caret is at the end of the input\n                    setTimeout(function() { that.input[0].setSelectionRange(caretStart, caretStart); }, 0);\n                }\n                else {\n                    this.input[0].setSelectionRange(caretStart, caretStart);\n                }\n            }\n        },\n\n        refresh: function() {\n            this.listView.refresh();\n        },\n\n        _toggleCloseVisibility: function() {\n            var preventShow = this.element.is(\":disabled\") || this.element.is(\"[readonly]\");\n\n            if (this.text() && !preventShow) {\n                this._showClear();\n            } else {\n                this._hideClear();\n            }\n        },\n\n        suggest: function(word) {\n            var that = this;\n            var element = that.input[0];\n            var value = that.text();\n            var caretIdx = caret(element)[0];\n            var key = that._last;\n            var idx;\n            var accentFoldingFiltering = that.dataSource.options.accentFoldingFiltering;\n\n            if (key == keys.BACKSPACE || key == keys.DELETE) {\n                that._last = undefined;\n                return;\n            }\n\n            word = word || \"\";\n\n            if (typeof word !== \"string\") {\n                if (word[0]) {\n                    word = that.dataSource.view()[List.inArray(word[0], that.ul[0])];\n                }\n\n                word = word ? that._text(word) : \"\";\n            }\n\n            if (caretIdx <= 0) {\n                caretIdx = (accentFoldingFiltering ? value.toLocaleLowerCase(accentFoldingFiltering) : value.toLowerCase()).indexOf(accentFoldingFiltering ? word.toLocaleLowerCase(accentFoldingFiltering) : word.toLowerCase()) + 1;\n            }\n\n            if (word) {\n                word = word.toString();\n                idx = (accentFoldingFiltering ? word.toLocaleLowerCase(accentFoldingFiltering) : word.toLowerCase()).indexOf(accentFoldingFiltering ? value.toLocaleLowerCase(accentFoldingFiltering) : value.toLowerCase());\n                if (idx > -1) {\n                    value += word.substring(idx + value.length);\n                }\n            } else {\n                value = value.substring(0, caretIdx);\n            }\n\n            if (value.length !== caretIdx || !word) {\n                element.value = value;\n                if (element === activeElement()) {\n                    caret(element, caretIdx, value.length);\n                }\n            }\n        },\n\n        text: function (text) {\n            text = text === null ? \"\" : text;\n\n            var that = this;\n            var input = that.input[0];\n            var ignoreCase = that.options.ignoreCase;\n            var loweredText = text;\n            var dataItem;\n            var value;\n\n            if (text === undefined) {\n                return input.value;\n            }\n\n            if (that.options.autoBind === false && !that.listView.bound()) {\n                that._setText(text);\n                return;\n            }\n\n            dataItem = that.dataItem();\n\n            if (dataItem && that._text(dataItem).replace && that._text(dataItem).replace(newLineRegEx,\"\") === text) {\n                value = that._value(dataItem);\n\n                if (value === List.unifyType(that._old, typeof value)) {\n                    that._triggerCascade();\n                    return;\n                }\n            }\n\n            if (ignoreCase) {\n                loweredText = loweredText.toLowerCase();\n            }\n\n            if(that.dataItem() && that._text(that.dataItem()) === text){\n                return;\n            }\n\n            that._select(function(data) {\n                data = that._text(data);\n                if (ignoreCase) {\n                    data = (data + \"\").toLowerCase();\n                }\n\n                return data === loweredText;\n            }).done(function() {\n                if (that.selectedIndex < 0) {\n                    input.value = text;\n\n                    if (that.options.syncValueAndText) {\n                        that._accessor(text);\n                    }\n\n                    that._cascadeTriggered = true;\n                    that._triggerCascade();\n                }\n\n                that._prev = input.value;\n            });\n\n            that._toggleCloseVisibility();\n        },\n\n        toggle: function(toggle) {\n            this._toggle(toggle, true);\n        },\n\n        value: function(value) {\n            var that = this;\n            var options = that.options;\n            var listView = that.listView;\n\n            if (value === undefined) {\n                value = that._accessor() || that.listView.value()[0];\n                return value === undefined || value === null ? \"\" : value;\n            }\n\n            that.requireValueMapper(that.options, value);\n\n            that.trigger(\"set\", { value: value });\n\n            if (value === options.value && that.input.val() === options.text &&\n            !that.options.cascadeFrom) {\n                return;\n            }\n\n            that._accessor(value);\n\n            if (that._isFilterEnabled() && listView.bound() && listView.isFiltered()) {\n                that._clearFilter();\n            } else {\n                that._fetchData();\n            }\n\n            listView\n                .value(value)\n                .done(function() {\n                    if (that.selectedIndex === -1 && (!listView._selectedDataItems || !listView._selectedDataItems.length)) {\n                        that._accessor(value);\n                        that.input.val(value);\n                        that._placeholder(true);\n                    }\n\n                    if(that._userTriggered) {\n                         that._old = that._accessor();\n                    } else {\n                         that._old = that._valueBeforeCascade = that._accessor();\n                    }\n\n                    that._oldIndex = that.selectedIndex;\n\n                    that._prev = that._oldText = that.input.val();\n\n                    if (that._state === STATE_FILTER) {\n                        that._state = STATE_ACCEPT;\n                    }\n                    that._toggleCloseVisibility();\n                });\n        },\n\n        _hideBusy: function () {\n            var that = this;\n            clearTimeout(that._busy);\n            that._arrowIcon.removeClass(LOADING);\n            that._focused.attr(\"aria-busy\", false);\n            that._busy = null;\n            that._toggleCloseVisibility();\n        },\n\n        _click: function(e) {\n            var that = this;\n            var item = e.item;\n            var dataItem = that.listView.dataItemByIndex(that.listView.getElementIndex(item));\n            var shouldTrigger = true;\n            e.preventDefault();\n\n            if(dataItem){\n                shouldTrigger = that._value(dataItem) !==  List.unifyType(that.value(), typeof that._value(dataItem));\n\n                if(!shouldTrigger){\n                   that.input.val(that._text(dataItem));\n                }\n            }\n\n            if (shouldTrigger && that.trigger(\"select\", { dataItem: dataItem, item: item })) {\n                that.close();\n                return;\n            }\n\n            that._userTriggered = true;\n\n            that._select(item).done(function() {\n                that._blur();\n            });\n        },\n\n        _syncValueAndText: function () {\n            return this.options.syncValueAndText;\n        },\n\n        _inputValue: function() {\n            return this.text();\n        },\n\n        _searchByWord: function(word) {\n            var that = this;\n            var options = that.options;\n            var dataSource = that.dataSource;\n            var ignoreCase = options.ignoreCase;\n            var predicate = function (dataItem) {\n                var text = that._text(dataItem);\n                if (text !== undefined) {\n                    text = text + \"\";\n                    if (text !== \"\" && word === \"\") {\n                        return false;\n                    }\n\n                    if (ignoreCase) {\n                        text = text.toLowerCase();\n                    }\n\n                    return text.indexOf(word) === 0;\n                }\n            };\n\n            if (ignoreCase) {\n                word = word.toLowerCase();\n            }\n\n            if (!that.ul[0].firstChild) {\n                dataSource.one(CHANGE, function () {\n                    if (dataSource.view()[0]) {\n                        that.search(word);\n                    }\n                }).fetch();\n                return;\n            }\n\n            this.listView.focus(this._get(predicate));\n\n            var current = this.listView.focus();\n\n            if (current) {\n                if (options.suggest) {\n                    that.suggest(current);\n                }\n\n                this.open();\n            }\n\n            if (this.options.highlightFirst && !word) {\n                this.listView.focusFirst();\n            }\n        },\n\n        _input: function() {\n            var that = this,\n                element = that.element.removeClass(\"k-input-inner\")[0],\n                accessKey = element.accessKey,\n                wrapper = that.wrapper,\n                SELECTOR = \"input.k-input-inner\",\n                name = element.name || \"\",\n                options = that.options,\n                input,\n                maxLength,\n                arrowBtn;\n\n            if (name) {\n                name = 'name=\"' + name + '_input\" ';\n            }\n\n            input = wrapper.find(SELECTOR);\n\n            if (!input[0]) {\n                arrowBtn = html.renderButton('<button type=\"button\" class=\"k-input-button\" aria-label=\"expand combobox\"></button>', {\n                    icon: \"arrow-s\",\n                    size: options.size,\n                    fillMode: options.fillMode,\n                    shape: null,\n                    rounded: null,\n                });\n\n                wrapper.append('<input ' + name + 'class=\"k-input-inner\" type=\"text\" autocomplete=\"' + AUTOCOMPLETEVALUE +'\"/>')\n                    .append(arrowBtn)\n                    .append(that.element);\n\n                input = wrapper.find(SELECTOR);\n            }\n\n            input[0].style.cssText = element.style.cssText;\n            input[0].title = element.title;\n\n            maxLength = parseInt(this.element.prop(\"maxlength\") || this.element.attr(\"maxlength\"), 10);\n            if (maxLength > -1) {\n                input[0].maxLength = maxLength;\n            }\n\n            input.addClass(element.className)\n                .css({\n                    width: \"\",\n                    height: element.style.height,\n                    position: \"\"\n                })\n                .attr({\n                    \"role\": \"combobox\",\n                    \"aria-expanded\": false\n                })\n                .show();\n\n            if (placeholderSupported) {\n                input.attr(\"placeholder\", that.options.placeholder);\n            }\n\n            if (accessKey) {\n                element.accessKey = \"\";\n                input[0].accessKey = accessKey;\n            }\n\n            that._focused = that.input = input;\n            that._arrow = wrapper.find(\".k-input-button\")\n                .attr({\n                    \"role\": \"button\",\n                    \"tabIndex\": -1\n                });\n            that._arrowIcon = that._arrow.find(\".k-icon\");\n\n            if (element.id) {\n                that._arrow.attr(\"aria-controls\", that.ul[0].id);\n            }\n        },\n\n        _clearButton: function() {\n            List.fn._clearButton.call(this);\n\n            if (this.options.clearButton) {\n                this._clear.insertAfter(this.input);\n                this.wrapper.addClass(\"k-combobox-clearable\");\n            }\n        },\n\n        _keydown: function(e) {\n            var that = this,\n                key = e.keyCode,\n                textField = that.options.dataTextField || \"text\",\n                isFkey = key >= 112 && key <= 135,\n                isNonPrintableKey = NON_PRINTABLE_KEYS.indexOf(key) > -1;\n\n            that._last = key;\n\n            clearTimeout(that._typingTimeout);\n            that._typingTimeout = null;\n\n            if (key === keys.HOME) {\n                that._firstItem();\n            } else if (key === keys.END) {\n                that._lastItem();\n            } else if (key === keys.ENTER || (key === keys.TAB && that.popup.visible())) {\n                var current = that.listView.focus();\n                var dataItem = that.dataItem();\n                var shouldTrigger = true;\n\n                if (!that.popup.visible() && (!dataItem || that.text() !== that._text(dataItem))) {\n                    current = null;\n                }\n\n                if (current) {\n                    if (that.popup.visible()) {\n                        e.preventDefault();\n                    }\n\n                    dataItem = that.listView.dataItemByIndex(that.listView.getElementIndex(current));\n\n                    if(dataItem){\n                        shouldTrigger = that._value(dataItem) !==  List.unifyType(that.value(), typeof that._value(dataItem));\n                    }\n\n                    if (shouldTrigger && that.trigger(\"select\", { dataItem: dataItem, item: current })) {\n                        return;\n                    }\n\n                    that._userTriggered = true;\n\n                    that._select(current).done(function() {\n                        that._blur();\n                        that._valueBeforeCascade = that._old = that.value();\n                    });\n                } else {\n                    if(that._syncValueAndText() || that._isSelect){\n                        if(!that.dataItem() || that.dataItem()[textField] !== that.input.val()) {\n                            that._accessor(that.input.val());\n                        }\n                    }\n\n                    if (that.options.highlightFirst) {\n                        that.listView.value(that.input.val());\n                        that._blur();\n                    } else {\n                        that._oldText = that.text();\n                    }\n                }\n            } else if (key != keys.TAB && !that._move(e) && !isNonPrintableKey && !isFkey && !e.ctrlKey) {\n               that._search();\n            } else if (key === keys.ESC && !that.popup.visible() && that.text()) {\n                that._clearValue();\n            }\n        },\n\n        _placeholder: function(show) {\n            if (placeholderSupported) {\n                return;\n            }\n\n            var that = this,\n                input = that.input,\n                placeholder = that.options.placeholder,\n                value;\n\n            if (placeholder) {\n                value = that.value();\n\n                if (show === undefined) {\n                    show = !value;\n                }\n\n                input.toggleClass(\"k-readonly\", show);\n\n                if (!show) {\n                    if (!value) {\n                        placeholder = \"\";\n                    } else {\n                        return;\n                    }\n                }\n\n                input.val(placeholder);\n\n                if (!placeholder && input[0] === activeElement()) {\n                    caret(input[0], 0, 0);\n                }\n            }\n        },\n\n        _search: function() {\n            var that = this;\n\n            clearTimeout(that._typingTimeout);\n\n            that._typingTimeout = setTimeout(function() {\n                var value = that.text();\n\n                if (value !== \"\" && that._prev !== value) {\n                    that._prev = value;\n\n                    if (that.options.filter === \"none\" && that.options.virtual) {\n                        that.listView.select(-1);\n                    }\n\n                    that.search(value);\n\n                    that._toggleCloseVisibility();\n                }\n                else if (value === \"\" && that._prev !== \"\" && that._prev !== undefined) {\n                    that._clearValue();\n                    that._open = true;\n                    that._state = STATE_REBIND;\n                }\n\n                that._typingTimeout = null;\n            }, that.options.delay);\n        },\n\n        _setText: function(text) {\n            this.input.val(text);\n            this._prev = text;\n        },\n\n        _wrapper: function() {\n            var that = this,\n                element = that.element,\n                wrapper = element.parent();\n\n            if (!wrapper.is(\"span.k-input\")) {\n                wrapper = element.hide().wrap(\"<span />\").parent();\n                wrapper[0].style.cssText = element[0].style.cssText;\n            }\n\n            that.wrapper = wrapper.addClass(\"k-input k-combobox\")\n                .addClass(element[0].className)\n                .removeClass('input-validation-error')\n                .css(\"display\", \"\");\n        },\n\n        _clearSelection: function(parent, isFiltered) {\n            var that = this;\n            var hasValue = parent.value();\n            var custom = hasValue && parent.selectedIndex === -1;\n\n            if (this.selectedIndex == -1 && this.value()) {\n                return;\n            }\n\n            if (isFiltered || !hasValue || custom) {\n                that.options.value = \"\";\n                that.value(\"\");\n            }\n        },\n\n        _preselect: function(value, text) {\n            this.input.val(text);\n            this._accessor(value);\n\n            this._old = this._accessor();\n            this._oldIndex = this.selectedIndex;\n\n            this.listView.setValue(value);\n            this._placeholder();\n\n            this._initialIndex = null;\n            this._presetValue = true;\n            this._toggleCloseVisibility();\n        },\n\n        _clearText: function() {\n            this._old = this.value();\n            this.text(\"\");\n        },\n\n        _clearValue: function() {\n            Select.fn._clearValue.call(this);\n            this.input.trigger(\"focus\");\n        }\n    });\n\n    ui.plugin(ComboBox);\n\n    kendo.cssProperties.registerPrefix(\"ComboBox\", \"k-input-\");\n\n    kendo.cssProperties.registerValues(\"ComboBox\", [{\n        prop: \"rounded\",\n        values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n    }]);\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n"],"names":["define","__meta__","id","name","category","description","depends","features","$","window","kendo","jQuery","undefined","ui","html","List","Select","caret","support","placeholderSupported","placeholder","activeElement","_activeElement","keys","ns","nsFocusEvent","CLICK","MOUSEDOWN","DISABLED","READONLY","CHANGE","LOADING","FOCUSED","STATEDISABLED","ARIA_DISABLED","ARIA_READONLY","AUTOCOMPLETEVALUE","STATE_FILTER","STATE_ACCEPT","STATE_REBIND","HOVEREVENTS","newLineRegEx","NON_PRINTABLE_KEYS","ComboBox","extend","init","element","options","that","this","text","disabled","Array","isArray","dataSource","fn","call","on","_focusHandler","bind","attr","_reset","_wrapper","_input","_clearButton","_tabindex","input","_popup","_dataSource","_ignoreCase","_enable","_attachFocusEvents","_oldIndex","selectedIndex","_aria","_initialIndex","index","requireValueMapper","_initList","_cascade","autoBind","_filterSource","_isSelect","children","_setText","_placeholder","parents","is","enable","notify","_toggleCloseVisibility","_applyCssClasses","enabled","value","delay","dataTextField","dataValueField","minLength","enforceMinLength","height","highlightFirst","filter","suggest","cascadeFrom","cascadeFromField","cascadeFromParentField","ignoreCase","animation","virtual","template","groupTemplate","fixedGroupTemplate","clearButton","syncValueAndText","autoWidth","popup","size","fillMode","rounded","events","setOptions","listOptions","_listOptions","listView","_accessors","destroy","off","wrapper","clearTimeout","_pasteTimeout","_arrow","_clear","_isValueChanged","unifyType","_old","_oldText","_change","hasText","isCustom","_typing","trigger","_inputFocus","_inputFocusout","e","target","_arrowClick","_toggle","addClass","isClearButton","relatedTarget","closest","length","_userTriggered","removeClass","_typingTimeout","item","_focus","dataItem","dataItemByIndex","getElementIndex","_valueBeforeCascade","_blur","_inputPaste","setTimeout","search","_editable","disable","readonly","add","arrow","clear","_toggleHover","prop","preventDefault","_clearValue","_keydown","_search","open","state","_state","isFiltered","filters","reinitialized","ul","find","focus","visible","bound","_open","refresh","_openPopup","_allowOpening","_hovered","_focusItem","_scrollToFocusedItem","scrollToIndex","one","_updateSelectionState","_accessor","val","_buildOptions","data","custom","_customOption","_options","selected","_emptySearch","_custom","_updateSelection","initialIndex","hasInitialIndex","filtered","_fetch","select","selectedDataItems","_value","_text","_selectValue","_updateItemFocus","focusIndex","_listBound","isActive","flatView","skip","groupsLength","_group","isFirstPage","_presetValue","_renderFooter","_renderNoData","_toggleNoData","_toggleHeader","_resizePopup","position","close","toggle","_hideBusy","_listChange","_get","candidate","found","idx","total","_select","keepState","done","_dataValue","_setDomInputValue","_triggerCascade","currentCaret","caretStart","_prev","mobile","mobileOS","wp","android","setSelectionRange","preventShow","_showClear","_hideClear","word","caretIdx","key","_last","accentFoldingFiltering","BACKSPACE","DELETE","view","inArray","toLocaleLowerCase","toLowerCase","indexOf","toString","substring","loweredText","replace","_cascadeTriggered","_isFilterEnabled","_clearFilter","_fetchData","_selectedDataItems","_busy","_arrowIcon","_focused","_click","shouldTrigger","_syncValueAndText","_inputValue","_searchByWord","predicate","firstChild","fetch","current","focusFirst","accessKey","SELECTOR","maxLength","arrowBtn","renderButton","icon","shape","append","style","cssText","title","parseInt","className","css","width","role","aria-expanded","show","tabIndex","insertAfter","keyCode","textField","isFkey","isNonPrintableKey","HOME","_firstItem","END","_lastItem","ENTER","TAB","_move","ctrlKey","ESC","toggleClass","parent","hide","wrap","_clearSelection","hasValue","_preselect","setValue","_clearText","plugin","cssProperties","registerPrefix","registerValues","values","roundedValues","concat","amd","a1","a2","a3"],"mappings":"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"}