{"version":3,"file":"kendo.menu.min.js","names":["factory","define","amd","$","undefined$1","kendo","window","ui","activeElement","_activeElement","touch","support","mobileOS","isArray","Array","HierarchicalDataSource","data","MOUSEDOWN","CLICK","extend","each","encode","htmlEncode","template","keys","Widget","excludedNodesRegExp","NS","OPEN","MENU","LINK","LINK_SELECTOR","ICON_SELECTOR","LAST","CLOSE","TIMER","FIRST","IMAGE","SELECT","ZINDEX","ACTIVATE","DEACTIVATE","POINTERDOWN","pointers","msPointers","allPointers","CHANGE","ERROR","TOUCHSTART","MOUSEENTER","MOUSELEAVE","MOUSEWHEEL","RESIZE","resize","POPUP_ID_ATTR","POPUP_OPENER_ATTR","DOCUMENT_ELEMENT","document","documentElement","KENDOPOPUP","HOVERSTATE","FOCUSEDSTATE","DISABLEDSTATE","menuSelector","animationContainerSelector","childAnimationContainerSelector","popupSelector","allItemsSelector","itemSelector","availableItemsSelector","exclusionSelector","scrollButtonSelector","touchPointerTypes","DATABOUND","ARIA_EXPANDED","ROLE","bindings","text","url","spriteCssClass","imageUrl","imageAttr","content","rendering","wrapperCssClass","group","item","result","index","enabled","firstLevel","length","cssClass","attr","hasOwnProperty","selected","itemCssAttributes","attributes","imageCssAttributes","imgAttributes","toJSON","contentCssAttributes","contentAttr","defaultClasses","textClass","groupAttributes","expanded","groupCssClass","groupWrapperCssClass","contains","parent","child","e","updateItemClasses","addClass","children","filter","removeClass","empty","append","prop","contents","this","nodeName","match","nodeType","trim","nodeValue","wrapAll","idx","elm","wrap","updateArrow","updateFirstLast","find","remove","icon","getArrowIconName","iconClass","isRtl","hasClass","updateHasAriaPopup","parents","parentLi","eq","removeAttr","getParentLiItems","parentsUntil","storeItemSelectEventHandler","element","options","selectHandler","select","isFunction","getItemSelectEventHandler","setItemData","items","i","popupOpenerSelector","id","popupGroupSelector","selector","getChildPopups","currentPopup","overflowWrapper","childPopupOpener","opener","popupId","popup","push","popupParentItem","popupElement","itemPopup","parentsScroll","current","scrollDirection","scroll","parentNode","isNaN","isPointerTouch","originalEvent","pointerType","removeSpacesBetweenItems","ul","Menu","DataBoundWidget","init","that","fn","call","wrapper","_accessors","_templates","_dataSource","_updateClasses","_wrapGroups","_animations","nextItemZIndex","_tabindex","_initOverflow","_attachMenuEventsHandlers","openOnClick","clicked","_ariaId","format","guid","notify","events","name","animation","open","duration","close","orientation","direction","closeOnClick","hoverDelay","scrollable","popupCollision","_initData","dataSource","angular","elements","view","_overflowWrapper","_checkActiveProxy","_checkActiveElement","bind","on","_focusHandler","_click","_preventClose","_mouseenter","_mouseleave","_mousedown","_toggleHover","_keydown","_focus","_removeHoverItem","_mouseleavePopup","_mouseenterPopup","_documentClickHandler","_documentClick","_detachMenuEventsHandlers","off","backwardBtn","forwardBtn","isHorizontal","_openedPopups","_scrollWrapper","templates","scrollButton","add","appendTo","_initScrolling","initialWidth","outerWidth","initialCssWidth","style","width","setTimeout","_setOverflowWrapperWidth","_toggleScrollButtons","_popupsWrapper","wrapperCssWidth","css","wrapperWidth","menuWidth","borders","offsetWidth","clientWidth","Math","min","_reinitOverflow","distance","_destroyOverflow","popupWrapper","popupParentLi","unwrap","scrollElement","isNumeric","mouseWheelDistance","backward","forward","backwardDouble","forwardDouble","scrolling","touchEvents","value","scrollValue","scrollLeft","scrollTop","finish","animate","mouseenterHandler","mousedownHandler","ev","test","type","isTouch","stop","currentTarget","trigger","stopPropagation","preventDefault","eventMap","down","ctrlKey","shiftKey","altKey","wheelDelta","delta","ceil","floor","detail","round","mousewheelDelta","abs","_closeChildPopups","n","parseFloat","isFinite","horizontal","currentScroll","scrollSize","offset","toggle","setOptions","destroy","enable","_toggleDisabled","disable","attemptGetItem","candidate","referenceItem","inserted","_insert","_childPopupElement","insertBefore","before","insertAfter","after","groups","plain","isPlainObject","ObservableObject","groupData","renderGroup","ObservableArray","map","get","renderItem","charAt","parentItems","container","_openAfterLoad","dataItem","loaded","_loading","one","getByUid","ns","hasChildren","load","replace","visiblePopups","closePopup","closest","siblings","li","clearTimeout","overflowPopup","div","first","_getPopup","is","_triggerEvent","windowHeight","height","maxHeight","_outerHeight","getShadows","bottom","overflow","nextZindex","zIndex","root","parentHorizontal","directions","split","output","origin","position","reverse","join","parseDirection","effects","openEffects","getEffectDirection","kendoPopup","activate","deactivate","_closing","sender","removeData","opacity","collision","anchor","_popupOpen","hide","mouseAndTouchPresent","_configurePopupOverflow","_hovered","_initPopupScrolling","popupOpener","_wrapPopupElement","groupId","Date","getTime","autosize","display","skipMouseEvents","scrollHeight","offsetHeight","_initPopupScrollButtons","scrollButtons","timeout","p","isEmptyObject","_closeParentPopups","last","_keyTriggered","_setPopupHeight","isFixed","popups","_initialHeight","location","_location","popupOuterHeight","popupOffsetTop","max","top","bottomScrollbar","innerHeight","dontClearClose","_isRootItem","toString","_forceClose","toggleClass","target","eventTarget","isEnter","indexOf","_closurePrevented","hoverItem","_hoverItem","_findRootParent","hasFocus","oldHoverItem","_oldHoverItem","matchesSelector","end","_itemHasChildren","pointerTouch","isParentClosing","delegateTarget","rootMenuItems","subMenuItems","relatedTarget","_","sibling","$window","browser","msie","toElement","clientX","clientY","stopImmediatePropagation","_closePopups","rootPopup","groupParent","innerPopup","_innerPopup","openHandle","childGroup","childGroupVisible","shouldCloseTheRootItem","targetElement","toUpperCase","formNode","link","itemElement","href","targetHref","sampleHref","isLink","isLocalLink","isTargetLink","_lastClickedElement","handled","_triggerSelect","childPopupId","_parentsUntil","enterKey","click","context","getParents","elem","overflowMenuParents","itemSelectEventData","_getEventData","isSelectItemDefaultPrevented","isDefaultPrevented","isSelectDefaultPrevented","_defaultPrevented","active","_moveHover","belongsToVertical","key","keyCode","ESC","_itemBelongsToVertival","RIGHT","LEFT","DOWN","_itemDown","UP","_itemUp","HOME","END","_itemEsc","ENTER","SPACEBAR","_moveHoverToRoot","TAB","menuIsVertical","nextItem","_scrollToItem","_itemRight","parentItem","nextAll","prevAll","_itemLeft","itemPosition","scrollDir","getSize","_outerWidth","currentScrollOffset","itemSize","itemOffset","ulSize","scrollButtonSize","_unbindDataSource","fields","field","create","_bindDataSource","fetch","_refreshHandler","refresh","_errorHandler","_error","unbind","findByUid","uid","node","action","parentElement","itemsToUpdate","updateProxy","_updateItem","removeProxy","_removeItem","_appendItems","forEach","nextElement","next","textField","_fieldAccessor","fieldName","fieldBindings","count","levels","getter","level","this$1$1","fieldAccessor","encoded","contentHtml","renderItems","itemWrapper","tag","sprite","arrow","menu","subGroup","contentUrl","renderContent","ref","dataContentField","html","len","ContextMenu","_marker","substring","_popup","_wire","closes","_initialWidth","showOn","alignToAnchor","copyAnchorStyles","_showProxy","userEvents","mousedown","_closeProxy","x","y","visible","kendoStop","_triggerFocusOnActivate","_focusMenu","left","_configurePopupScrolling","downEvent","_mousedownProxy","visibility","_setPopupWidth","windowWidth","popupOuterWidth","popupOffsetLeft","shadow","maxWidth","right","arguments","_closeTimeoutProxy","focus","_showHandler","event","pageX","pageY","_eventOrigin","_targetChild","_closeHandler","sameTarget","containment","normalClick","which","_preventProxy","UserEvents","allowSelection","F10","contextMenuElement","_triggerProxy","noop","not","plugin","jQuery"],"sources":["kendo.menu.js"],"mappings":"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","sourcesContent":["(function (factory) {\n    typeof define === 'function' && define.amd ? define(['kendo.popup', 'kendo.data', 'kendo.icons'], factory) :\n    factory();\n})((function () {\n    var __meta__ = {\n        id: \"menu\",\n        name: \"Menu\",\n        category: \"web\",\n        description: \"The Menu widget displays hierarchical data as a multi-level menu.\",\n        depends: [ \"popup\", \"data\", \"data.odata\" ]\n    };\n\n    (function($, undefined$1) {\n        var kendo = window.kendo,\n            ui = kendo.ui,\n            activeElement = kendo._activeElement,\n            touch = (kendo.support.touch && kendo.support.mobileOS),\n            isArray = Array.isArray,\n            HierarchicalDataSource = kendo.data.HierarchicalDataSource,\n            MOUSEDOWN = \"mousedown\",\n            CLICK = \"click\",\n            DELAY = 30,\n            SCROLLSPEED = 50,\n            extend = $.extend,\n            each = $.each,\n            encode = kendo.htmlEncode,\n            template = kendo.template,\n            keys = kendo.keys,\n            Widget = ui.Widget,\n            excludedNodesRegExp = /^(ul|a|div)$/i,\n            NS = \".kendoMenu\",\n            IMG = \"img\",\n            OPEN = \"open\",\n            MENU = \"k-menu\",\n            LINK = \"k-link k-menu-link\",\n            LINK_SELECTOR = \".k-link\",\n            ICON_SELECTOR = \".k-menu-expand-arrow-icon\",\n            LAST = \"k-last\",\n            CLOSE = \"close\",\n            TIMER = \"timer\",\n            FIRST = \"k-first\",\n            IMAGE = \"k-image\",\n            SELECT = \"select\",\n            ZINDEX = \"zIndex\",\n            ACTIVATE = \"activate\",\n            DEACTIVATE = \"deactivate\",\n            POINTERDOWN = \"touchstart\" + NS + \" MSPointerDown\" + NS + \" pointerdown\" + NS,\n            pointers = kendo.support.pointers,\n            msPointers = kendo.support.msPointers,\n            allPointers = msPointers || pointers,\n            CHANGE = \"change\",\n            ERROR = \"error\",\n            TOUCHSTART = kendo.support.touch ? \"touchstart\" : \"\",\n            MOUSEENTER = pointers ? \"pointerover\" : (msPointers ? \"MSPointerOver\" : \"mouseenter\"),\n            MOUSELEAVE = pointers ? \"pointerout\" : (msPointers ? \"MSPointerOut\" : \"mouseleave\"),\n            MOUSEWHEEL = \"DOMMouseScroll\" + NS + \" mousewheel\" + NS,\n            RESIZE = kendo.support.resize + NS,\n            SCROLLWIDTH = \"scrollWidth\",\n            SCROLLHEIGHT = \"scrollHeight\",\n            OFFSETWIDTH = \"offsetWidth\",\n            OFFSETHEIGHT = \"offsetHeight\",\n            POPUP_ID_ATTR = \"group\",\n            POPUP_OPENER_ATTR = \"groupparent\",\n            DOCUMENT_ELEMENT = $(document.documentElement),\n            KENDOPOPUP = \"kendoPopup\",\n            HOVERSTATE = \"k-hover\",\n            FOCUSEDSTATE = \"k-focus\",\n            DISABLEDSTATE = \"k-disabled\",\n            SELECTEDSTATE = \"k-selected\",\n            menuSelector = \".k-menu\",\n            groupSelector = \".k-menu-group\",\n            animationContainerSelector = \".k-animation-container\",\n            childAnimationContainerSelector = \".k-child-animation-container\",\n            popupSelector = \".k-menu-popup ,\" + animationContainerSelector,\n            allItemsSelector = \":not(.k-list) > .k-item:not([role='treeitem'])\",\n            disabledSelector = \".k-item.k-disabled\",\n            itemSelector = \".k-item\",\n            availableItemsSelector = \".k-item:not(.k-disabled)\",\n            linkSelector = \".k-item:not(.k-disabled) > .k-link\",\n            exclusionSelector = \":not(.k-item.k-separator):visible\",\n            templateSelector = \"div:not(.k-animation-container,.k-list-container)\",\n            scrollButtonSelector = \".k-menu-scroll-button\",\n            touchPointerTypes = { \"2\": 1, \"touch\": 1 },\n            STRING = \"string\",\n            DATABOUND = \"dataBound\",\n            ARIA_EXPANDED = \"aria-expanded\",\n            ROLE = \"role\",\n\n            bindings = {\n                text: \"dataTextField\",\n                url: \"dataUrlField\",\n                spriteCssClass: \"dataSpriteCssClassField\",\n                imageUrl: \"dataImageUrlField\",\n                imageAttr: \"dataImageAttrField\",\n                content: \"dataContentField\"\n            },\n\n            rendering = {\n                wrapperCssClass: function(group, item) {\n                    var result = \"k-item k-menu-item\",\n                        index = item.index;\n\n                    if (item.enabled === false) {\n                        result += \" k-disabled\";\n                    }\n\n                    if (group.firstLevel && index === 0) {\n                        result += \" k-first\";\n                    }\n\n                    if (index == group.length - 1) {\n                        result += \" k-last\";\n                    }\n\n                    if (item.cssClass) {\n                        result += \" \" + item.cssClass;\n                    }\n\n                    if (item.attr && item.attr.hasOwnProperty(\"class\")) {\n                        result += \" \" + item.attr[\"class\"];\n                    }\n\n                    if (item.selected) {\n                        result += \" \" + SELECTEDSTATE;\n                    }\n\n                    return result;\n                },\n\n                itemCssAttributes: function(item) {\n                    var result = \"\";\n                    var attributes = item.attr || {};\n\n                    for (var attr in attributes) {\n                        if (attributes.hasOwnProperty(attr) && attr !== \"class\") {\n                            result += attr + \"=\\\"\" + attributes[attr] + \"\\\" \";\n                        }\n                    }\n\n                    return result;\n                },\n\n                imageCssAttributes: function(imgAttributes) {\n                    var result = \"\";\n                    var attributes = imgAttributes && imgAttributes.toJSON ? imgAttributes.toJSON() : {};\n\n                    if (!attributes['class']) {\n                        attributes['class'] = IMAGE;\n                    } else {\n                        attributes['class'] += \" \" + IMAGE;\n                    }\n\n                    for (var attr in attributes) {\n                        if (attributes.hasOwnProperty(attr)) {\n                            result += attr + \"=\\\"\" + attributes[attr] + \"\\\" \";\n                        }\n                    }\n\n                    return result;\n                },\n\n                contentCssAttributes: function(item) {\n                    var result = \"\";\n                    var attributes = item.contentAttr || {};\n                    var defaultClasses = \"k-content k-group k-menu-group k-menu-group-md\";\n\n                    if (!attributes['class']) {\n                        attributes['class'] = defaultClasses;\n                    } else {\n                        attributes['class'] += \" \" + defaultClasses;\n                    }\n\n                    for (var attr in attributes) {\n                        if (attributes.hasOwnProperty(attr)) {\n                            result += attr + \"=\\\"\" + attributes[attr] + \"\\\" \";\n                        }\n                    }\n\n                    return result;\n                },\n\n                textClass: function() {\n                    return LINK;\n                },\n\n                groupAttributes: function(group) {\n                    return group.expanded !== true ? \" style='display:none'\" : \"\";\n                },\n\n                groupCssClass: function() {\n                    return \"k-group k-menu-group k-menu-group-md\";\n                },\n\n                groupWrapperCssClass: function() {\n                    return \"k-menu-popup\";\n                },\n\n                content: function(item) {\n                    return item.content ? item.content : \"&nbsp;\";\n                }\n        };\n\n        function getEffectDirection(direction, root) {\n            direction = direction.split(\" \")[!root + 0] || direction;\n            return direction.replace(\"top\", \"up\").replace(\"bottom\", \"down\");\n        }\n\n        function parseDirection(direction, root, isRtl) {\n            direction = direction.split(\" \")[!root + 0] || direction;\n            var output = { origin: [\"bottom\", (isRtl ? \"right\" : \"left\")], position: [\"top\", (isRtl ? \"right\" : \"left\")] },\n                horizontal = /left|right/.test(direction);\n\n            if (horizontal) {\n                output.origin = [ \"top\", direction ];\n                output.position[1] = kendo.directions[direction].reverse;\n            } else {\n                output.origin[0] = direction;\n                output.position[0] = kendo.directions[direction].reverse;\n            }\n\n            output.origin = output.origin.join(\" \");\n            output.position = output.position.join(\" \");\n\n            return output;\n        }\n\n        function contains(parent, child) {\n            try {\n                return $.contains(parent, child);\n            } catch (e) {\n                return false;\n            }\n        }\n\n        function updateItemClasses(item) {\n            item = $(item);\n            var omitWrap = item.attr(kendo.attr(\"omit-wrap\"));\n\n            if (omitWrap) {\n                return;\n            }\n\n            item.addClass(\"k-item k-menu-item\")\n                .children(IMG)\n                .addClass(IMAGE);\n\n            item\n                .children(\"a\")\n                .addClass(LINK)\n                .children(IMG)\n                .addClass(IMAGE);\n\n            item\n                .filter(\":not([disabled])\");\n\n            item\n                .filter(\".k-separator\")\n                .removeClass(\"k-menu-item\")\n                .addClass(\"k-menu-separator\")\n                .empty()\n                .append(\"&nbsp;\");\n\n            item\n                .filter(\"li[disabled]\")\n                .addClass(DISABLEDSTATE)\n                .prop(\"disabled\", false)\n                .attr(\"aria-disabled\", true);\n\n            if (!item.filter(\"[role]\").length) {\n                item.attr(ROLE, \"menuitem\");\n            }\n\n            if (!item.children(LINK_SELECTOR).length) {\n                item.contents() // exclude groups, real links, templates and empty text nodes\n                    .filter(function() { return (!this.nodeName.match(excludedNodesRegExp) && !(this.nodeType === 3 && !kendo.trim(this.nodeValue))); })\n                    .wrapAll(\"<span class='\" + LINK + \"'></span>\")\n                    .filter(function(idx, elm) { return elm.nodeType === 3; })\n                    .wrap(\"<span class='k-menu-link-text'></span>\");\n            }\n\n            updateArrow(item);\n            updateFirstLast(item);\n        }\n\n        function updateArrow(item) {\n            item = $(item);\n            item.find(\"> .k-link > .k-menu-expand-arrow > [class*=k-i-caret]:not(.k-sprite),> .k-link > .k-menu-expand-arrow > [class*=k-svg-i-caret]:not(.k-sprite)\").parent().remove();\n\n            item.filter(\":has(.k-menu-group)\")\n                .children(\".k-link:not(:has([class*=k-i-caret]:not(.k-sprite))),.k-link:not(:has([class*=k-svg-i-caret]:not(.k-sprite)))\")\n                .each(function() {\n                    var item = $(this);\n\n                    item.append((\"<span aria-hidden='true' class='k-menu-expand-arrow'>\" + (kendo.ui.icon({ icon: getArrowIconName(item), iconClass: \"k-menu-expand-arrow-icon\" })) + \"</span>\"));\n                });\n        }\n\n        function getArrowIconName(item) {\n            var arrowIconName,\n                parent = item.parent().parent(),\n                isRtl = kendo.support.isRtl(parent);\n\n            if (parent.hasClass(MENU + \"-horizontal\")) {\n                arrowIconName = \"caret-alt-down\";\n            } else {\n                if (isRtl) {\n                    arrowIconName = \"caret-alt-left\";\n                }\n                else {\n                    arrowIconName = \"caret-alt-right\";\n                }\n            }\n            return arrowIconName;\n        }\n\n        function updateFirstLast(item) {\n            item = $(item);\n\n            item.filter(\".k-first:not(:first-child)\").removeClass(FIRST);\n            item.filter(\".k-last:not(:last-child)\").removeClass(LAST);\n            item.filter(\":first-child\").addClass(FIRST);\n            item.filter(\":last-child\").addClass(LAST);\n        }\n\n        function updateHasAriaPopup(parents) {\n            if (parents && parents.length) {\n                for (var index in parents) {\n                    var parentLi = parents.eq(index);\n                    if (parentLi.find(\"ul\").length) {\n                        parentLi.attr(\"aria-haspopup\", true);\n                    } else {\n                        parentLi.removeAttr(\"aria-haspopup\");\n                    }\n                }\n            }\n        }\n\n        function getParentLiItems(group) {\n            if (!group.hasClass(MENU)) {\n                return group.parentsUntil(\".\" + MENU, \"li\");\n            }\n        }\n\n        function storeItemSelectEventHandler(element, options) {\n            var selectHandler = getItemSelectEventHandler(options);\n            if (selectHandler) {\n                setItemData(element, selectHandler);\n            }\n\n            if (options.items) {\n                $(element).children(\"ul\").children(\"li\").each(function(i) {\n                    storeItemSelectEventHandler(this, options.items[i]);\n                });\n            }\n        }\n\n        function setItemData(element, selectHandler) {\n            $(element).children(\".k-link\").data({\n                selectHandler: selectHandler\n            });\n        }\n\n        function getItemSelectEventHandler(options) {\n            var selectHandler = options.select,\n                isFunction = kendo.isFunction;\n\n            if (selectHandler && isFunction(selectHandler)) {\n                return selectHandler;\n            }\n            return null;\n        }\n\n        function popupOpenerSelector(id) {\n            return id ? \"li[data-groupparent='\" + id + \"']\" : \"li[data-groupparent]\";\n        }\n        function popupGroupSelector(id) {\n            var selector = id ? \"[data-group='\" + id + \"']\" : \"[data-group]\";\n            return \"ul\" + selector + \",div\" + selector;\n        }\n        function getChildPopups(currentPopup, overflowWrapper) {\n            var childPopupOpener = currentPopup.find(popupOpenerSelector());\n            var result = [];\n            childPopupOpener.each(function(i, opener) {\n                opener = $(opener);\n                var popupId = opener.data(POPUP_OPENER_ATTR);\n                var popup = currentPopup;\n                while (popupId) {\n                    popup = overflowWrapper.find(popupGroupSelector(popupId) + \":visible\");\n                    if (popup.length) {\n                        result.push(popup);\n                    }\n                    opener = popup.find(popupOpenerSelector());\n                    popupId = opener.data(POPUP_OPENER_ATTR);\n                }\n            });\n\n            return result;\n        }\n\n        function popupParentItem(popupElement, overflowWrapper) {\n            var popupId = popupElement.data(POPUP_ID_ATTR);\n            return popupId ? overflowWrapper.find(popupOpenerSelector(popupId)) : $([]);\n        }\n\n        function itemPopup(item, overflowWrapper) {\n            var popupId = item.data(POPUP_OPENER_ATTR);\n            return popupId ? overflowWrapper.children(animationContainerSelector).find(popupGroupSelector(popupId)) : $([]);\n        }\n\n        function overflowMenuParents(current, overflowWrapper) {\n            var parents = [];\n            var getParents = function(item) {\n                while (item.parentNode && !overflowWrapper.is(item.parentNode)) {\n                    parents.push(item.parentNode);\n                    item = item.parentNode;\n                }\n            };\n            var elem = current[0] || current;\n            getParents(elem);\n            var last = parents[parents.length - 1];\n            while ($(last).is(animationContainerSelector)) {\n                var popupElement = $(last).children(\"ul\");\n                elem = popupParentItem(popupElement, overflowWrapper)[0];\n                if (!elem) {\n                    break;\n                }\n                parents.push(elem);\n                getParents(elem);\n                last = parents[parents.length - 1];\n            }\n            return parents;\n        }\n\n        function mousewheelDelta(e) {\n            var delta = 0;\n\n            if (e.wheelDelta) {\n                delta = -e.wheelDelta / 120;\n                delta = delta > 0 ? Math.ceil(delta) : Math.floor(delta);\n            }\n\n            if (e.detail) {\n                delta = Math.round(e.detail / 3);\n            }\n\n            return delta;\n        }\n\n        function parentsScroll(current, scrollDirection) {\n            var scroll = 0;\n            var parent = current.parentNode;\n            while (parent && !isNaN(parent[scrollDirection])) {\n                scroll += parent[scrollDirection];\n                parent = parent.parentNode;\n            }\n            return scroll;\n        }\n\n        function isPointerTouch(e) {\n            return allPointers && e.originalEvent && e.originalEvent.pointerType in touchPointerTypes;\n        }\n\n        function isTouch(e) {\n            var ev = e.originalEvent;\n            return touch && /touch/i.test(ev.type || \"\");\n        }\n\n        function removeSpacesBetweenItems(ul) {\n            ul.contents().filter(function() { return this.nodeName != \"LI\"; }).remove();\n        }\n\n        var Menu = kendo.ui.DataBoundWidget.extend({\n            init: function(element, options) {\n                var that = this;\n\n                Widget.fn.init.call(that, element, options);\n\n                element = that.wrapper = that.element;\n                options = that.options;\n                that._accessors();\n                that._templates();\n                that._dataSource();\n\n                that._updateClasses();\n                that._wrapGroups();\n\n                that._animations(options);\n\n                that.nextItemZIndex = 100;\n\n                that._tabindex();\n\n                that._initOverflow(options);\n\n                that._attachMenuEventsHandlers();\n\n                if (options.openOnClick) {\n                    that.clicked = false;\n                }\n\n                element.attr(ROLE, \"menubar\");\n\n                if (element[0].id) {\n                    that._ariaId = kendo.format(\"{0}_mn_active\", element[0].id);\n                } else {\n                    that._ariaId = kendo.format(\"{0}_mn_active\", kendo.guid());\n                }\n\n                kendo.notify(that);\n            },\n\n            events: [\n                OPEN,\n                CLOSE,\n                ACTIVATE,\n                DEACTIVATE,\n                SELECT,\n                DATABOUND\n            ],\n\n            options: {\n                name: \"Menu\",\n                animation: {\n                    open: {\n                        duration: 200\n                    },\n                    close: { // if close animation effects are defined, they will be used instead of open.reverse\n                        duration: 100\n                    }\n                },\n                orientation: \"horizontal\",\n                direction: \"default\",\n                openOnClick: false,\n                closeOnClick: true,\n                hoverDelay: 100,\n                scrollable: false,\n                popupCollision: undefined$1\n            },\n\n            _initData: function() {\n                var that = this;\n\n                if (that.dataSource) {\n                    that.angular(\"cleanup\", function() {\n                        return {\n                            elements: that.element.children()\n                        };\n                    });\n                    that.element.empty();\n\n                    that.append(that.dataSource.view(), that.element);\n                    that.angular(\"compile\", function() {\n                        return {\n                            elements: that.element.children()\n                        };\n                    });\n                }\n            },\n\n            _attachMenuEventsHandlers: function() {\n                var that = this;\n                var element = that.element;\n                var options = that.options;\n                var overflowWrapper = that._overflowWrapper();\n\n                that._checkActiveProxy = that._checkActiveElement.bind(that);\n\n                (overflowWrapper || element).on(POINTERDOWN, itemSelector, that._focusHandler.bind(that))\n                       .on(CLICK + NS, disabledSelector, false)\n                       .on(CLICK + NS, itemSelector, that._click.bind(that))\n                       .on(POINTERDOWN + \" \" + MOUSEDOWN + NS, \".k-content\", that._preventClose.bind(that))\n                       .on(MOUSEENTER + NS, availableItemsSelector, that._mouseenter.bind(that))\n                       .on(MOUSELEAVE + NS, availableItemsSelector, that._mouseleave.bind(that))\n                       .on(MOUSEDOWN + NS, availableItemsSelector, that._mousedown.bind(that))\n                       .on(TOUCHSTART + NS + \" \" + MOUSEENTER + NS + \" \" + MOUSELEAVE + NS + \" \" +\n                           MOUSEDOWN + NS + \" \" + CLICK + NS, linkSelector, that._toggleHover.bind(that));\n\n                element.on(\"keydown\" + NS, that._keydown.bind(that))\n                       .on(\"focus\" + NS, that._focus.bind(that))\n                       .on(\"focus\" + NS, \".k-content\", that._focus.bind(that))\n                       .on(\"blur\" + NS, that._removeHoverItem.bind(that))\n                       .on(\"blur\" + NS, \"[tabindex]\", that._checkActiveProxy);\n\n                if (overflowWrapper) {\n                    overflowWrapper\n                        .on(MOUSELEAVE + NS, popupSelector, that._mouseleavePopup.bind(that))\n                        .on(MOUSEENTER + NS, popupSelector, that._mouseenterPopup.bind(that));\n                }\n\n                if (options.openOnClick) {\n                    that._documentClickHandler = that._documentClick.bind(that);\n                    $(document).on(\"click\", that._documentClickHandler);\n                }\n            },\n\n            _detachMenuEventsHandlers: function() {\n                var that = this;\n                var overflowWrapper = that._overflowWrapper();\n\n                if (overflowWrapper) {\n                    overflowWrapper.off(NS);\n                }\n\n                that.element.off(NS);\n\n                if (that._documentClickHandler) {\n                    $(document).off(\"click\", that._documentClickHandler);\n                }\n            },\n\n            _initOverflow: function(options) {\n                var that = this;\n                var isHorizontal = options.orientation == \"horizontal\";\n                var backwardBtn, forwardBtn;\n\n                if (options.scrollable) {\n                    that._openedPopups = {};\n                    that._scrollWrapper = that.element.wrap(\"<div class='k-menu-scroll-wrapper k-\" + options.orientation + \"'></div>\").parent();\n                    if (isHorizontal) {\n                        removeSpacesBetweenItems(that.element);\n                    }\n\n                    backwardBtn = $(that.templates.scrollButton({ direction: isHorizontal ? \"left\" : \"up\" }));\n                    forwardBtn = $(that.templates.scrollButton({ direction: isHorizontal ? \"right\" : \"down\" }));\n                    backwardBtn.add(forwardBtn).appendTo(that._scrollWrapper);\n\n                    that._initScrolling(that.element, backwardBtn, forwardBtn, isHorizontal);\n\n                    var initialWidth = that.element.outerWidth();\n                    var initialCssWidth = that.element[0].style.width;\n                    initialCssWidth = initialCssWidth === \"auto\" ? \"\" : initialCssWidth;\n\n                    if (isHorizontal) {\n                        $(window).on(RESIZE, function() {\n                            setTimeout(function() {\n                                that._setOverflowWrapperWidth(initialWidth, initialCssWidth);\n                                that._toggleScrollButtons(that.element, backwardBtn, forwardBtn, isHorizontal);\n                            }, 300);\n                        });\n                    }\n\n                    that._setOverflowWrapperWidth(initialWidth, initialCssWidth);\n                    that._toggleScrollButtons(that.element, backwardBtn, forwardBtn, isHorizontal);\n                }\n            },\n\n            _overflowWrapper: function() {\n                return this._scrollWrapper || this._popupsWrapper;\n            },\n\n            _setOverflowWrapperWidth: function(initialWidth, initialCssWidth) {\n                var that = this;\n                var wrapperCssWidth = that._scrollWrapper.css(\"width\");\n\n                that._scrollWrapper.css({ width: \"\" });\n                var wrapperWidth = that._scrollWrapper.outerWidth();\n                that._scrollWrapper.css({ width: wrapperCssWidth });\n\n                var menuWidth = that.element.outerWidth();\n                var borders = that.element[0].offsetWidth - that.element[0].clientWidth;\n\n                if (menuWidth != wrapperWidth && wrapperWidth > 0) {\n                    var width = initialCssWidth ? Math.min(initialWidth, wrapperWidth) : wrapperWidth;\n                    that.element.width(width - borders);\n                    that._scrollWrapper.width(width);\n                }\n            },\n\n            _reinitOverflow: function(options) {\n                var that = this;\n                var overflowChanged = ((options.scrollable && !that.options.scrollable) || (!options.scrollable && that.options.scrollable)) ||\n                    (options.scrollable && that.options.scrollable && options.scrollable.distance != that.options.scrollable.distance) ||\n                    options.orientation != that.options.orientation;\n\n                if (overflowChanged) {\n                    that._detachMenuEventsHandlers();\n                    that._destroyOverflow();\n                    that._initOverflow(options);\n                    that._attachMenuEventsHandlers();\n                }\n            },\n\n            _destroyOverflow: function() {\n                var that = this;\n                var overflowWrapper = that._overflowWrapper();\n                if (overflowWrapper) {\n                    overflowWrapper.off(NS);\n                    overflowWrapper.find(scrollButtonSelector).off(NS).remove();\n                    overflowWrapper.children(animationContainerSelector).each(function(i, popupWrapper) {\n                        var ul = $(popupWrapper).find(\".k-child-animation-container > .k-menu-popup\");\n                        ul.off(MOUSEWHEEL);\n                        var popupParentLi = popupParentItem(ul, overflowWrapper);\n                        if (popupParentLi.length) {\n                            popupParentLi.append(popupWrapper);\n                        }\n                    });\n\n                    overflowWrapper.find(popupOpenerSelector()).removeAttr(\"data-groupparent\");\n                    overflowWrapper.find(popupGroupSelector()).removeAttr(\"data-group\");\n                    that.element.off(MOUSEWHEEL);\n                    $(window).off(RESIZE);\n                    overflowWrapper.contents().unwrap();\n\n                    that._scrollWrapper = that._popupsWrapper = that._openedPopups = undefined$1;\n                }\n            },\n\n            _initScrolling: function(scrollElement, backwardBtn, forwardBtn, isHorizontal) {\n                var that = this;\n                var scrollable = that.options.scrollable;\n                var distance = that.isNumeric(scrollable.distance) ? scrollable.distance : SCROLLSPEED;\n                var mouseWheelDistance = distance / 2;\n                var backward = \"-=\" + distance;\n                var forward = \"+=\" + distance;\n                var backwardDouble = \"-=\" + distance * 2;\n                var forwardDouble = \"+=\" + distance * 2;\n                var scrolling = false;\n                var touchEvents = false;\n\n                var scroll = function(value) {\n                    var scrollValue = isHorizontal ? { \"scrollLeft\": value } : { \"scrollTop\": value };\n                    scrollElement.finish().animate(scrollValue, \"fast\", \"linear\", function() {\n                        if (scrolling) {\n                            scroll(value);\n                        }\n                    });\n                    that._toggleScrollButtons(scrollElement, backwardBtn, forwardBtn, isHorizontal);\n                };\n\n                var mouseenterHandler = function(e) {\n                    if (!scrolling && !touchEvents) {\n                        scroll(e.data.direction);\n                        scrolling = true;\n                    }\n                };\n\n                var mousedownHandler = function(e) {\n                    var scrollValue = isHorizontal ? { \"scrollLeft\": e.data.direction } : { \"scrollTop\": e.data.direction };\n                    touchEvents = isTouch(e) || isPointerTouch(e);\n                    scrollElement.stop().animate(scrollValue, \"fast\", \"linear\", function() {\n                        if (!touchEvents) {\n                            $(e.currentTarget).trigger(MOUSEENTER);\n                        } else {\n                             that._toggleScrollButtons(scrollElement, backwardBtn, forwardBtn, isHorizontal);\n                             scrolling = true;\n                        }\n                    });\n                    scrolling = false;\n\n                    e.stopPropagation();\n                    e.preventDefault();\n                };\n\n                backwardBtn.on(MOUSEENTER + NS, { direction: backward }, mouseenterHandler)\n                    .on(kendo.eventMap.down + NS, { direction: backwardDouble }, mousedownHandler);\n\n                forwardBtn.on(MOUSEENTER + NS, { direction: forward }, mouseenterHandler)\n                    .on(kendo.eventMap.down + NS, { direction: forwardDouble }, mousedownHandler);\n\n                backwardBtn.add(forwardBtn)\n                    .on(MOUSELEAVE + NS, function() {\n                        scrollElement.stop();\n                        scrolling = false;\n                        that._toggleScrollButtons(scrollElement, backwardBtn, forwardBtn, isHorizontal);\n                    });\n\n                scrollElement.on(MOUSEWHEEL, function(e) {\n                    if (!e.ctrlKey && !e.shiftKey && !e.altKey) {\n                        var wheelDelta = mousewheelDelta(e.originalEvent);\n                        var scrollSpeed = Math.abs(wheelDelta) * mouseWheelDistance;\n                        var value = (wheelDelta > 0 ? \"+=\" : \"-=\") + scrollSpeed;\n                        var scrollValue = isHorizontal ? { \"scrollLeft\": value } : { \"scrollTop\": value };\n\n                        that._closeChildPopups(scrollElement);\n\n                        scrollElement.finish().animate(scrollValue, \"fast\", \"linear\", function() {\n                            that._toggleScrollButtons(scrollElement, backwardBtn, forwardBtn, isHorizontal);\n                        });\n                        e.preventDefault();\n                    }\n                });\n            },\n\n            isNumeric: function(n) {\n                return !isNaN(parseFloat(n)) && isFinite(n);\n            },\n\n            _toggleScrollButtons: function(scrollElement, backwardBtn, forwardBtn, horizontal) {\n                var currentScroll = horizontal ? kendo.scrollLeft(scrollElement) : scrollElement.scrollTop();\n                var scrollSize = horizontal ? SCROLLWIDTH : SCROLLHEIGHT;\n                var offset = horizontal ? OFFSETWIDTH : OFFSETHEIGHT;\n\n                backwardBtn.toggle(currentScroll !== 0);\n                forwardBtn.toggle(currentScroll < scrollElement[0][scrollSize] - scrollElement[0][offset] - 1);\n            },\n\n            setOptions: function(options) {\n                var animation = this.options.animation;\n\n                this._animations(options);\n\n                options.animation = extend(true, animation, options.animation);\n\n                if (\"dataSource\" in options) {\n                    this._dataSource(options);\n                }\n\n                this._updateClasses();\n                this._wrapGroups();\n                this._reinitOverflow(options);\n\n                Widget.fn.setOptions.call(this, options);\n            },\n\n            destroy: function() {\n                var that = this;\n\n                Widget.fn.destroy.call(that);\n\n                that._detachMenuEventsHandlers();\n\n                that._destroyOverflow();\n\n                kendo.destroy(that.element);\n            },\n\n            enable: function(element, enable) {\n                this._toggleDisabled(element, enable !== false);\n\n                return this;\n            },\n\n            disable: function(element) {\n                this._toggleDisabled(element, false);\n\n                return this;\n            },\n\n            attemptGetItem: function(candidate) {\n                candidate = candidate || this.element;\n                var item = this.element.find(candidate);\n                var overflowWrapper = this._overflowWrapper();\n\n                if (item.length || candidate === this.element) {\n                    return item;\n                } else if (overflowWrapper) {\n                    return overflowWrapper.find(candidate);\n                } else {\n                    return $();\n                }\n            },\n\n            append: function(item, referenceItem) {\n                referenceItem = this.attemptGetItem(referenceItem);\n\n                var inserted = this._insert(item, referenceItem, referenceItem.length ? this._childPopupElement(referenceItem).children().eq(0) : null);\n\n                each(inserted.items, function(i) {\n                    inserted.group.append(this);\n                    updateArrow(this);\n                    storeItemSelectEventHandler(this, item[i] || item);\n                });\n\n                updateArrow(referenceItem);\n                updateFirstLast(inserted.group.find(\".k-first, .k-last\").add(inserted.items));\n                updateHasAriaPopup(getParentLiItems(inserted.group));\n\n                return this;\n            },\n\n            insertBefore: function(item, referenceItem) {\n                referenceItem = this.attemptGetItem(referenceItem);\n\n                var inserted = this._insert(item, referenceItem, referenceItem.parent());\n\n                each(inserted.items, function(i) {\n                    referenceItem.before(this);\n                    updateArrow(this);\n                    updateFirstLast(this);\n                    storeItemSelectEventHandler(this, item[i] || item);\n                });\n\n                updateFirstLast(referenceItem);\n\n                return this;\n            },\n\n            insertAfter: function(item, referenceItem) {\n                referenceItem = this.attemptGetItem(referenceItem);\n\n                var inserted = this._insert(item, referenceItem, referenceItem.parent());\n\n                each(inserted.items, function(i) {\n                    referenceItem.after(this);\n                    updateArrow(this);\n                    updateFirstLast(this);\n                    storeItemSelectEventHandler(this, item[i] || item);\n                });\n\n                updateFirstLast(referenceItem);\n\n                return this;\n            },\n\n            _insert: function(item, referenceItem, parent) {\n                var that = this,\n                    items, groups;\n\n                if (!referenceItem || !referenceItem.length) {\n                    parent = that.element;\n                }\n\n                var plain = $.isPlainObject(item) || item instanceof kendo.data.ObservableObject,\n                    groupData = {\n                        firstLevel: parent.hasClass(MENU),\n                        horizontal: parent.hasClass(MENU + \"-horizontal\"),\n                        expanded: true,\n                        length: parent.children().length\n                    };\n\n                if (referenceItem && !parent.length) {\n                    parent = $(that.renderGroup({ group: groupData, options: that.options })).css(\"display\", \"none\").appendTo(referenceItem);\n                }\n\n                if (plain || isArray(item) || item instanceof kendo.data.ObservableArray) { // is JSON\n                    items = $($.map(plain ? [ item ] : item, function(value, idx) {\n                                if (typeof value === \"string\") {\n                                    return $(value).get();\n                                } else {\n                                    return $(that.renderItem({\n                                        group: groupData,\n                                        item: extend(value, { index: idx })\n                                    })).get();\n                                }\n                            }));\n                } else {\n                    if (typeof item == \"string\" && item.charAt(0) != \"<\") {\n                        items = that.element.find(item);\n                    } else {\n                        items = $(item);\n                    }\n\n                    groups = items.find(\"> ul\")\n                                    .addClass(\"k-menu-group k-menu-group-md\")\n                                    .attr(ROLE, \"menu\");\n\n                    items = items.filter(\"li\");\n\n                    items.add(groups.find(\"> li\")).each(function() {\n                        updateItemClasses(this);\n                    });\n                }\n\n                return { items: items, group: parent };\n            },\n\n            remove: function(element) {\n                element = this.attemptGetItem(element);\n\n                var that = this,\n                    parent = element.parentsUntil(that.element, allItemsSelector),\n                    group = element.parent(\"ul:not(.k-menu)\");\n\n                element.remove();\n\n                if (group && !group.children(allItemsSelector).length) {\n                    var parentItems = getParentLiItems(group);\n\n                    var container = group.parent(animationContainerSelector);\n\n                    if (container.length) {\n                        container.remove();\n                    } else {\n                        group.remove();\n                    }\n\n                    updateHasAriaPopup(parentItems);\n                }\n\n                if (parent.length) {\n                    parent = parent.eq(0);\n\n                    updateArrow(parent);\n                    updateFirstLast(parent);\n                }\n\n                return that;\n            },\n\n            _openAfterLoad: function(element, dataItem) {\n                var that = this;\n                if (dataItem.loaded()) {\n                    that.open(element);\n                    that._loading = false;\n                } else {\n                    dataItem.one(CHANGE, function() {\n                        element.find(ICON_SELECTOR).removeClass(\"k-i-loading\");\n                        if (that._loading) {\n                            that.open(element);\n                            that._loading = false;\n                        }\n                    });\n                }\n            },\n\n            open: function(element) {\n                var that = this;\n                var options = that.options;\n                var horizontal = options.orientation == \"horizontal\";\n                var direction = options.direction;\n                var isRtl = kendo.support.isRtl(that.wrapper);\n                var overflowWrapper = that._overflowWrapper();\n                element = (overflowWrapper || that.element).find(element);\n\n                var dataItem = that.dataSource && that.dataSource.getByUid(element.data(kendo.ns + \"uid\"));\n\n                if (dataItem && dataItem.hasChildren && !dataItem.loaded() && !that._loading) {\n                    that._loading = true;\n                    element.find(ICON_SELECTOR).addClass(\"k-i-loading\");\n                    dataItem.load();\n                    that._openAfterLoad(element, dataItem);\n                    return;\n                }\n\n                if (/^(top|bottom|default)$/.test(direction)) {\n                    if (isRtl) {\n                        direction = horizontal ? (direction + \" left\").replace(\"default\", \"bottom\") : \"left\";\n                    } else {\n                        direction = horizontal ? (direction + \" right\").replace(\"default\", \"bottom\") : \"right\";\n                    }\n                }\n\n                var visiblePopups = \">.k-popup:visible,>.k-animation-container > .k-child-animation-container > .k-menu-popup:visible\";\n                var closePopup = function() {\n                    var popup = $(this).data(KENDOPOPUP);\n                    if (popup) {\n                        // Use the built-in close method to play the hoverDelay from the options\n                        that.close($(this).closest(\"li.k-item\"), true);\n                    }\n                };\n\n                element.siblings()\n                       .find(visiblePopups)\n                       .each(closePopup);\n\n                if (overflowWrapper) {\n                    element.find(visiblePopups).each(closePopup);\n                }\n\n                if (that.options.openOnClick) {\n                    that.clicked = true;\n                }\n\n                element.each(function() {\n                    var li = $(this);\n\n                    clearTimeout(li.data(TIMER));\n\n                    li.data(TIMER, setTimeout(function() {\n                        var div = li.find(\"> .k-menu-popup, > .k-animation-container > .k-child-animation-container > .k-menu-popup\").filter(\":hidden\").first();\n                        var popup;\n                        var overflowPopup;\n\n                        if (!div[0] && overflowWrapper) {\n                            overflowPopup = that._getPopup(li);\n                            div = overflowPopup && overflowPopup.element;\n                        }\n                        if (div.is(\":visible\")) {\n                            return;\n                        }\n\n                        if (div[0] && that._triggerEvent({ item: li[0], type: OPEN }) === false) {\n\n                            if (!div.find(\".k-menu-popup\")[0] && div.children(\".k-menu-group\").children(\".k-item\").length > 1) {\n                                var windowHeight = $(window).height(),\n                                    setScrolling = function() {\n                                        div.css({ maxHeight: windowHeight - (kendo._outerHeight(div) - div.height()) - kendo.getShadows(div).bottom, overflow: \"auto\" });\n                                    };\n\n                                setScrolling();\n                            } else {\n                                div.css({ maxHeight: \"\", overflow: \"visible\" });\n                            }\n\n                            li.data(ZINDEX, li.css(ZINDEX));\n                            var nextZindex = that.nextItemZIndex++;\n                            li.css(ZINDEX, nextZindex);\n\n                            if (that.options.scrollable) {\n                                li.parent().siblings(scrollButtonSelector).css({ zIndex: ++nextZindex });\n                            }\n\n                            popup = div.data(KENDOPOPUP);\n                            var root = li.parent().hasClass(MENU),\n                                parentHorizontal = root && horizontal,\n                                directions = parseDirection(direction, root, isRtl),\n                                effects = options.animation.open.effects,\n                                openEffects = effects !== undefined$1 ? effects : \"slideIn:\" + getEffectDirection(direction, root);\n\n                            if (!popup) {\n                                popup = div.kendoPopup({\n                                    activate: function() { that._triggerEvent({ item: this.wrapper.parent(), type: ACTIVATE }); },\n                                    deactivate: function(e) {\n                                        that._closing = false;\n                                        e.sender.element // Restore opacity after fade.\n                                            .removeData(\"targetTransform\")\n                                            .css({ opacity: \"\" });\n                                        that._triggerEvent({ item: this.wrapper.parent(), type: DEACTIVATE });\n                                    },\n                                    origin: directions.origin,\n                                    position: directions.position,\n                                    collision: options.popupCollision !== undefined$1 ? options.popupCollision : (parentHorizontal ? \"fit\" : \"fit flip\"),\n                                    anchor: li,\n                                    appendTo: overflowWrapper || li,\n                                    animation: {\n                                        open: extend(true, { effects: openEffects }, options.animation.open),\n                                        close: options.animation.close\n                                    },\n                                    open: that._popupOpen.bind(that),\n                                    close: function(e) {\n                                        that._closing = e.sender.element;\n                                        var li = e.sender.wrapper.parent();\n\n                                        if (overflowWrapper) {\n                                            var popupId = e.sender.element.data(POPUP_ID_ATTR);\n                                            if (popupId) {\n                                                li = (overflowWrapper || that.element).find(popupOpenerSelector(popupId));\n                                            }\n                                            e.sender.wrapper.children(scrollButtonSelector).hide();\n                                        }\n\n                                        if (!that._triggerEvent({ item: li[0], type: CLOSE })) {\n                                            li.css(ZINDEX, li.data(ZINDEX));\n                                            li.removeData(ZINDEX);\n\n                                            if (that.options.scrollable) {\n                                                li.parent().siblings(scrollButtonSelector).css({ zIndex: \"\" });\n                                            }\n\n                                            if (touch || allPointers || kendo.support.mouseAndTouchPresent) {\n                                                li.removeClass(HOVERSTATE);\n                                                that._removeHoverItem();\n                                            }\n                                        } else {\n                                            e.preventDefault();\n                                        }\n                                    }\n                                }).data(KENDOPOPUP);\n\n                                div.closest(animationContainerSelector).removeAttr(ROLE);\n                            } else {\n                                popup = div.data(KENDOPOPUP);\n                                popup.options.origin = directions.origin;\n                                popup.options.position = directions.position;\n                                popup.options.animation.open.effects = openEffects;\n                            }\n                            div.removeAttr(\"aria-hidden\");\n                            li.attr(ARIA_EXPANDED, true);\n\n                            that._configurePopupOverflow(popup, li);\n\n                            popup._hovered = true;\n                            popup.open();\n\n                            that._initPopupScrolling(popup);\n                        }\n\n                    }, that.options.hoverDelay));\n                });\n\n                return that;\n            },\n\n            _configurePopupOverflow: function(popup, popupOpener) {\n                var that = this;\n               if (that.options.scrollable) {\n                    that._wrapPopupElement(popup);\n                    if (!popupOpener.attr(\"data-groupparent\")) {\n                        var groupId = new Date().getTime();\n                        popupOpener.attr(\"data-groupparent\", groupId);\n                        popup.element.attr(\"data-group\", groupId);\n                    }\n               }\n            },\n\n            _wrapPopupElement: function(popup) {\n                if (!popup.element.parent().is(childAnimationContainerSelector)) {\n                    popup.wrapper = kendo.wrap(popup.element, popup.options.autosize)\n                        .css({\n                            overflow: \"hidden\",\n                            display: \"block\",\n                            position: \"absolute\"\n                        });\n                }\n            },\n\n            _initPopupScrolling: function(popup, isHorizontal, skipMouseEvents) {\n                var that = this;\n\n                if (that.options.scrollable && popup.element[0].scrollHeight > popup.element[0].offsetHeight) {\n                    that._initPopupScrollButtons(popup, isHorizontal, skipMouseEvents);\n                }\n            },\n\n            _initPopupScrollButtons: function(popup, isHorizontal, skipMouseEvents) {\n                var that = this;\n                var scrollButtons = popup.wrapper.children(scrollButtonSelector);\n                var animation = that.options.animation;\n                var timeout = ((animation && animation.open && animation.open.duration) || 0) + DELAY;\n                setTimeout(function() {\n                    if (!scrollButtons.length) {\n                        var backwardBtn = $(that.templates.scrollButton({ direction: isHorizontal ? \"left\" : \"up\" }));\n                        var forwardBtn = $(that.templates.scrollButton({ direction: isHorizontal ? \"right\" : \"down\" }));\n\n                        scrollButtons = backwardBtn.add(forwardBtn).appendTo(popup.wrapper);\n\n                        that._initScrolling(popup.element, backwardBtn, forwardBtn, isHorizontal);\n                        if (!skipMouseEvents) {\n                            scrollButtons.on(MOUSEENTER + NS, function() {\n                                var overflowWrapper = that._overflowWrapper();\n                                $(getChildPopups(popup.element, overflowWrapper)).each(function(i, p) {\n                                    var popupOpener = overflowWrapper.find(popupOpenerSelector(p.data(POPUP_ID_ATTR)));\n                                    that.close(popupOpener);\n                                });\n                            })\n                            .on(MOUSELEAVE + NS, function() {\n                                setTimeout(function() {\n                                    if ($.isEmptyObject(that._openedPopups)) {\n                                        that._closeParentPopups(popup.element);\n                                    }\n                                }, DELAY);\n                            });\n                        }\n                    }\n                    that._toggleScrollButtons(popup.element, scrollButtons.first(), scrollButtons.last(), isHorizontal);\n                }, timeout);\n            },\n\n            _popupOpen: function(e) {\n                if (!this._keyTriggered) {\n                    e.sender.element.children(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                }\n                if (this.options.scrollable) {\n                    this._setPopupHeight(e.sender);\n                }\n            },\n\n            _setPopupHeight: function(popup, isFixed) {\n                var popupElement = popup.element;\n                var popups = popupElement.add(popupElement.parent(childAnimationContainerSelector));\n\n                popups.height((popupElement.hasClass(MENU) && this._initialHeight) || \"\");\n\n                var location = popup._location(isFixed);\n                var windowHeight = $(window).height();\n                var popupOuterHeight = location.height;\n                var popupOffsetTop = isFixed ? 0 : Math.max(location.top, 0);\n                var scrollTop = isFixed ? 0 : parentsScroll(this._overflowWrapper()[0], \"scrollTop\");\n                var bottomScrollbar = window.innerHeight - windowHeight;\n                var maxHeight = windowHeight - kendo.getShadows(popupElement).bottom + bottomScrollbar;\n                var canFit = maxHeight + scrollTop > popupOuterHeight + popupOffsetTop;\n\n                if (!canFit) {\n                    var height = Math.min(maxHeight, maxHeight - popupOffsetTop + scrollTop);\n                    popups.css({ overflow: \"hidden\", height: height + \"px\" });\n                }\n            },\n\n            close: function(items, dontClearClose) {\n                var that = this;\n                var overflowWrapper = that._overflowWrapper();\n                var element = (overflowWrapper || that.element);\n\n                items = element.find(items);\n\n                if (!items.length) {\n                    items = element.find(\">.k-item\");\n                }\n\n                var hasChildPopupsHovered = function(currentPopup) {\n                    var result = false;\n                    if ($.isEmptyObject(that._openedPopups)) {\n                        return result;\n                    }\n                    $(getChildPopups(currentPopup, overflowWrapper)).each(function(i, popup) {\n                        result = !!that._openedPopups[popup.data(POPUP_ID_ATTR).toString()];\n                        return !result;\n                    });\n                    return result;\n                };\n\n                var isPopupMouseLeaved = function(opener) {\n                    var groupId = opener.data(POPUP_OPENER_ATTR);\n                    return (!overflowWrapper || !groupId || !that._openedPopups[groupId.toString()]);\n                };\n\n                items.each(function() {\n                    var li = $(this);\n\n                    li.attr(ARIA_EXPANDED, false);\n\n                    if (!dontClearClose && that._isRootItem(li)) {\n                        that.clicked = false;\n                    }\n\n                    clearTimeout(li.data(TIMER));\n\n                    li.data(TIMER, setTimeout(function() {\n                        var popup = that._getPopup(li);\n                        if (popup && (isPopupMouseLeaved(li) || that._forceClose)) {\n                            if (!that._forceClose && hasChildPopupsHovered(popup.element)) {\n                                return;\n                            }\n\n                            popup.close();\n                            popup.element.attr(\"aria-hidden\", true);\n\n                            if (overflowWrapper) {\n                                if (that._forceClose && items.last().is(li[0])) {\n                                    delete that._forceClose;\n                                }\n                            }\n                        }\n                    }, that.options.hoverDelay));\n                });\n\n                return that;\n            },\n\n            _getPopup: function(li) {\n                var that = this;\n                var popup = li.find(\".k-menu-popup:not(.k-list-container):not(.k-calendar-container):visible\").first().data(KENDOPOPUP);\n                var overflowWrapper = that._overflowWrapper();\n\n                if (!popup && overflowWrapper) {\n                    var groupId = li.data(POPUP_OPENER_ATTR);\n                    if (groupId) {\n                        var popupElement = overflowWrapper.find(popupGroupSelector(groupId));\n                        popup = popupElement.data(KENDOPOPUP);\n                    }\n                }\n                return popup;\n            },\n\n            _toggleDisabled: function(items, enable) {\n                this.element.find(items).each(function() {\n                    $(this)\n                        .toggleClass(DISABLEDSTATE, !enable)\n                        .attr(\"aria-disabled\", !enable);\n                });\n            },\n\n            _toggleHover: function(e) {\n                var target = $(kendo.eventTarget(e) || e.target).closest(allItemsSelector),\n                    isEnter = e.type == MOUSEENTER || MOUSEDOWN.indexOf(e.type) !== -1;\n\n                target.siblings().removeClass(HOVERSTATE);\n\n                if (!target.parents(\"li.\" + DISABLEDSTATE).length) {\n                    target.toggleClass(HOVERSTATE, isEnter || e.type == \"mousedown\" || e.type == \"pointerover\" || e.type == TOUCHSTART);\n                }\n\n                this._removeHoverItem();\n            },\n\n            _preventClose: function() {\n                if (!this.options.closeOnClick) {\n                    this._closurePrevented = true;\n                }\n            },\n\n            _checkActiveElement: function(e) {\n                var that = this,\n                    hoverItem = $(e ? e.currentTarget : this._hoverItem()),\n                    target = that._findRootParent(hoverItem)[0];\n\n                if (!this._closurePrevented) {\n                    setTimeout(function() {\n                        if (!document.hasFocus() || (!contains(target, kendo._activeElement()) && e && !contains(target, e.currentTarget))) {\n                            that.close(target);\n                        }\n                    }, 0);\n                }\n\n                this._closurePrevented = false;\n            },\n\n            _removeHoverItem: function() {\n                var oldHoverItem = this._hoverItem();\n\n                if (oldHoverItem && oldHoverItem.hasClass(FOCUSEDSTATE)) {\n                    oldHoverItem.removeClass(FOCUSEDSTATE);\n                    this._oldHoverItem = null;\n                }\n            },\n\n            _wrapGroups: function() {\n                var that = this;\n\n                that.element.find(\"li > ul\")\n                    .filter(function() {\n                        return !$(this).parent().hasClass(\"k-menu-popup\");\n                    })\n                    .wrap(\"<div class='k-menu-popup k-popup'></div>\")\n                    .parent(\"div\")\n                    .attr(\"aria-hidden\", that.element.is(\":visible\"))\n                    .hide();\n\n                that.element.find(\"ul\").each(function() {\n                    var group = $(this);\n                    var id = kendo.guid();\n                    group.attr(\"id\", id)\n                        .closest(\"li\")\n                        .attr(\"aria-controls\", id);\n                });\n            },\n\n            _updateClasses: function() {\n                var element = this.element,\n                    nonContentGroupsSelector = \".k-menu-init div ul\",\n                    items;\n\n                element.removeClass(\"k-menu-horizontal k-menu-vertical\");\n                element.addClass(\"k-widget k-reset k-menu-init \" + MENU).addClass(MENU + \"-\" + this.options.orientation);\n\n                if (this.options.orientation === \"vertical\") {\n                    element.attr(\"aria-orientation\", \"vertical\");\n                } else {\n                    element.attr(\"aria-orientation\", \"horizontal\");\n                }\n\n                element.find(\"li > ul\")\n                       .filter(function() {\n                           return !kendo.support.matchesSelector.call(this, nonContentGroupsSelector);\n                       })\n                       .addClass(\"k-group k-menu-group k-menu-group-md\")\n                       .attr(ROLE, \"menu\")\n                       .parent(\"li\")\n                       .attr(\"aria-haspopup\", \"true\")\n                       .end()\n                       .find(\"li > div\")\n                       .addClass(\"k-content\")\n                       .attr(\"tabindex\", \"-1\"); // Capture the focus before the Menu\n\n                element.find(\"li[aria-haspopup]\").attr(ARIA_EXPANDED, false);\n\n                items = element.find(\"> li,.k-menu-group > li\");\n\n                element.removeClass(\"k-menu-init\");\n\n                items.each(function() {\n                    updateItemClasses(this);\n                });\n            },\n\n            _mouseenter: function(e) {\n                var that = this;\n                var element = $(e.currentTarget);\n                var hasChildren = that._itemHasChildren(element);\n                var popupId = element.data(POPUP_OPENER_ATTR) || element.parent().data(POPUP_ID_ATTR);\n                var pointerTouch = isPointerTouch(e);\n                var isParentClosing = false;\n\n                if (popupId) {\n                    that._openedPopups[popupId.toString()] = true;\n                }\n\n                if (that._closing) {\n                    isParentClosing = !!that._closing.find(element).length;\n                }\n\n                if (isParentClosing || (e.delegateTarget != element.parents(menuSelector)[0] && e.delegateTarget != element.parents(\".k-menu-scroll-wrapper,.k-popups-wrapper\")[0])) {\n                    return;\n                }\n\n                that._keyTriggered = false;\n\n                if ((that.options.openOnClick.rootMenuItems && that._isRootItem(element.closest(allItemsSelector))) ||\n                    (that.options.openOnClick.subMenuItems && !that._isRootItem(element.closest(allItemsSelector)))) {\n                    return;\n                }\n\n                if ((that.options.openOnClick === false ||\n                    (that.options.openOnClick.rootMenuItems === false && that._isRootItem(element.closest(allItemsSelector))) ||\n                    (that.options.openOnClick.subMenuItems === false && !that._isRootItem(element.closest(allItemsSelector))) || that.clicked) && !touch &&\n                    !(pointerTouch && that._isRootItem(element.closest(allItemsSelector)))) {\n\n                    if (!contains(e.currentTarget, e.relatedTarget) && hasChildren) {\n                        that.open(element);\n                    }\n                }\n\n                if (that.options.openOnClick === true && that.clicked || touch) {\n                    element.siblings().each(function(_, sibling) {\n                        that.close(sibling, true);\n                    });\n                }\n            },\n\n            _mousedown: function(e) {\n                var that = this;\n                var element = $(e.currentTarget);\n                // needs to close subMenuItems\n                if (that.options.openOnClick.subMenuItems && !that._isRootItem(element) || touch) {\n                    element.siblings().each(function(_, sibling) {\n                        that.close(sibling, true);\n                    });\n                }\n            },\n\n            _mouseleave: function(e) {\n                var that = this;\n                var element = $(e.currentTarget);\n                var popupOpener = element.data(POPUP_OPENER_ATTR);\n                var hasChildren = (element.children(animationContainerSelector).length || element.children(groupSelector).length) || popupOpener;\n                var $window = $(window);\n\n                if (popupOpener) {\n                    delete that._openedPopups[popupOpener.toString()];\n                }\n\n                if (element.parentsUntil(animationContainerSelector, \".k-list-container,.k-calendar-container\")[0]) {\n                    e.stopImmediatePropagation();\n                    return;\n                }\n\n                if ((that.options.openOnClick === false || (!that.options.openOnClick.rootMenuItems && that._isRootItem(element)) ||\n                    (!that.options.openOnClick.subMenuItems && !that._isRootItem(element))) && !touch && !isPointerTouch(e) &&\n                    !contains(e.currentTarget, e.relatedTarget || e.target) && hasChildren &&\n                    !contains(e.currentTarget, kendo._activeElement())) {\n                        that.close(element, true);\n                        that._loading = false;\n                        return;\n                }\n\n                // Detect if cursor goes outside the viewport of the browser\n                if ( (kendo.support.browser.msie && !e.toElement && !e.relatedTarget && !isPointerTouch(e)) ||\n                    e.clientX < 0 || e.clientY < 0 ||\n                    e.clientY > $window.height() ||\n                    e.clientX > $window.width()) {\n                    that.close(element);\n                }\n            },\n\n            _mouseenterPopup: function(e) {\n                var that = this;\n                var popupElement = $(e.currentTarget);\n\n                if (popupElement.parent().is(childAnimationContainerSelector)) {\n                     return;\n                }\n\n                popupElement = popupElement.children(\"ul\");\n                var popupId = popupElement.data(POPUP_ID_ATTR);\n\n                if (popupId) {\n                    that._openedPopups[popupId.toString()] = true;\n                }\n            },\n\n            _mouseleavePopup: function(e) {\n                var that = this;\n                var popupElement = $(e.currentTarget);\n\n                if (!isPointerTouch(e) && popupElement.is(animationContainerSelector)) {\n                    that._closePopups(popupElement.children(\"ul\"));\n                }\n            },\n\n            _closePopups: function(rootPopup) {\n                var that = this;\n                var overflowWrapper = that._overflowWrapper();\n                var popupId = rootPopup.data(POPUP_ID_ATTR);\n\n                if (popupId) {\n                    delete that._openedPopups[popupId.toString()];\n                    var groupParent = overflowWrapper.find(popupOpenerSelector(popupId));\n\n                    setTimeout(function() {\n                        if (that.options.openOnClick) {\n                            that._closeChildPopups(rootPopup);\n                        } else {\n                            if ($.isEmptyObject(that._openedPopups)) {\n                                var innerPopup = that._innerPopup(rootPopup);\n                                that._closeParentPopups(innerPopup);\n                            } else {\n                                that.close(groupParent, true);\n                            }\n                        }\n                    }, 0);\n                }\n            },\n\n            _closeChildPopups: function(current) {\n                var that = this;\n                var overflowWrapper = that._overflowWrapper();\n                $(getChildPopups(current, overflowWrapper)).each(function() {\n                    var popupOpener = overflowWrapper.find(popupOpenerSelector(this.data(POPUP_ID_ATTR)));\n                    that.close(popupOpener, true);\n                });\n            },\n\n            _innerPopup: function(current) {\n                var overflowWrapper = this._overflowWrapper();\n                var popups = getChildPopups(current, overflowWrapper);\n                return popups[popups.length - 1] || current;\n            },\n\n            _closeParentPopups: function(current) {\n                var that = this;\n                var overflowWrapper = that._overflowWrapper();\n                var popupId = current.data(POPUP_ID_ATTR);\n                var popupOpener = overflowWrapper.find(popupOpenerSelector(popupId));\n                popupId = popupOpener.parent().data(POPUP_ID_ATTR);\n                that.close(popupOpener, true);\n                while (popupId && !that._openedPopups[popupId]) {\n                    if (popupOpener.parent().is(menuSelector)) {\n                        break;\n                    }\n                    popupOpener = overflowWrapper.find(popupOpenerSelector(popupId));\n                    that.close(popupOpener, true);\n                    popupId = popupOpener.parent().data(POPUP_ID_ATTR);\n                }\n            },\n\n            _click: function(e) {\n                var that = this, openHandle,\n                    options = that.options,\n                    target = $(kendo.eventTarget(e)),\n                    targetElement = target[0],\n                    nodeName = target[0] ? target[0].nodeName.toUpperCase() : \"\",\n                    formNode = (nodeName == \"INPUT\" || nodeName == \"SELECT\" || nodeName == \"BUTTON\" || nodeName == \"LABEL\"),\n                    link = target.closest(LINK_SELECTOR),\n                    element = target.closest(allItemsSelector),\n                    itemElement = element[0],\n                    href = link.attr(\"href\"), childGroup, childGroupVisible,\n                    targetHref = target.attr(\"href\"),\n                    sampleHref = $(\"<a href='#' />\").attr(\"href\"),\n                    isLink = (!!href && href !== sampleHref),\n                    isLocalLink = isLink && !!href.match(/^#/),\n                    isTargetLink = (!!targetHref && targetHref !== sampleHref),\n                    overflowWrapper = that._overflowWrapper(),\n                    shouldCloseTheRootItem;\n\n                if (targetElement && (!targetElement.parentNode || !itemElement)) {\n                    return;\n                }\n\n                if ($(target).closest(\"span\").hasClass('k-menu-expand-arrow-icon')) {\n                    this._lastClickedElement = itemElement;\n                }\n\n                while (targetElement && targetElement.parentNode != itemElement) {\n                    targetElement = targetElement.parentNode;\n                }\n\n                if ($(targetElement).is(templateSelector)) {\n                    return;\n                }\n\n                if (element.hasClass(DISABLEDSTATE)) {\n                    e.preventDefault();\n                    return;\n                }\n\n                if (!e.handled && that._triggerSelect(target, itemElement) && !formNode) { // We shouldn't stop propagation and shoudn't prevent form elements.\n                    e.preventDefault();\n                }\n\n                e.handled = true;\n\n                childGroup = element.children(popupSelector);\n                if (overflowWrapper) {\n                    var childPopupId = element.data(POPUP_OPENER_ATTR);\n                    if (childPopupId) {\n                        childGroup = overflowWrapper.find(popupGroupSelector(childPopupId));\n                    }\n                }\n                childGroupVisible = childGroup.is(\":visible\");\n                shouldCloseTheRootItem = options.openOnClick && childGroupVisible && that._isRootItem(element);\n\n                if (options.closeOnClick && (!isLink || isLocalLink) && (!childGroup.length || shouldCloseTheRootItem)) {\n                    element.removeClass(HOVERSTATE).css(\"height\"); // Force refresh for Chrome\n                    that._oldHoverItem = that._findRootParent(element);\n                    var item = that._parentsUntil(link, that.element, allItemsSelector);\n                    that._forceClose = !!overflowWrapper;\n                    that.close(item);\n                    that.clicked = false;\n                    if (\"MSPointerUp\".indexOf(e.type) != -1) {\n                        e.preventDefault();\n                    }\n                    return;\n                }\n\n                if (isLink && e.enterKey) {\n                    link[0].click();\n                }\n\n                if (((!that._isRootItem(element) || options.openOnClick === false) && !options.openOnClick.subMenuItems) && !kendo.support.touch && !(isPointerTouch(e) && that._isRootItem(element.closest(allItemsSelector)))) {\n                    return;\n                }\n\n                if (!isLink && !formNode && !isTargetLink) {\n                    e.preventDefault();\n                }\n\n                that.clicked = true;\n                openHandle = childGroup.is(\":visible\") ? CLOSE : OPEN;\n                if (!options.closeOnClick && openHandle == CLOSE) {\n                    return;\n                }\n                that[openHandle](element);\n            },\n\n            _parentsUntil: function(context, top, selector) {\n                var overflowWrapper = this._overflowWrapper();\n                if (!overflowWrapper) {\n                    return context.parentsUntil(top, selector);\n                } else {\n                    var parents = overflowMenuParents(context, overflowWrapper);\n                    var result = [];\n                    $(parents).each(function() {\n                        var parent = $(this);\n                        if (parent.is(top)) {\n                            return false;\n                        }\n                        if (parent.is(selector)) {\n                            result.push(this);\n                        }\n                    });\n                    return $(result);\n                }\n            },\n\n            _triggerSelect: function(target, itemElement) {\n                target = target.is(\".k-link\") ? target : target.closest(\".k-link\");\n\n                var selectHandler = target.data(\"selectHandler\"),\n                    itemSelectEventData;\n\n                if (selectHandler) {\n                    itemSelectEventData = this._getEventData(target);\n                    selectHandler.call(this, itemSelectEventData);\n                }\n\n                var isSelectItemDefaultPrevented = itemSelectEventData && itemSelectEventData.isDefaultPrevented();\n                var isSelectDefaultPrevented = this._triggerEvent({ item: itemElement, type: SELECT });\n                return isSelectItemDefaultPrevented || isSelectDefaultPrevented;\n            },\n\n            _getEventData: function(target) {\n                var eventData = {\n                    sender: this,\n                    target: target,\n                    _defaultPrevented: false,\n                    preventDefault: function() {\n                        this._defaultPrevented = true;\n                    },\n                    isDefaultPrevented: function() {\n                        return this._defaultPrevented;\n                    }\n                };\n                return eventData;\n            },\n\n            _documentClick: function(e) {\n                var that = this;\n                var target = $(e.target).closest(\"span\").hasClass('k-menu-expand-arrow-icon') ? that._lastClickedElement : e.target;\n\n                if (contains((that._overflowWrapper() || that.element)[0], target)) {\n                    that._lastClickedElement = undefined$1;\n                    return;\n                }\n\n                that.clicked = false;\n            },\n\n            _focus: function(e) {\n                var that = this,\n                    target = e.target,\n                    hoverItem = that._hoverItem(),\n                    active = activeElement();\n\n                if (target != that.wrapper[0] && !$(target).is(\":kendoFocusable\")) {\n                    e.stopPropagation();\n                    $(target).closest(\".k-content\").closest(\".k-menu-popup\").closest(\".k-item\").addClass(FOCUSEDSTATE);\n                    that.wrapper.trigger(\"focus\");\n                    return;\n                }\n\n                if (active === e.currentTarget) {\n                    if (hoverItem.length) {\n                        that._moveHover([], hoverItem);\n                    } else if (!that._oldHoverItem) {\n                        that._moveHover([], that.wrapper.children().first());\n                    }\n                }\n            },\n\n            _keydown: function(e) {\n                var that = this,\n                    key = e.keyCode,\n                    hoverItem = that._oldHoverItem,\n                    target,\n                    belongsToVertical,\n                    hasChildren,\n                    isRtl = kendo.support.isRtl(that.wrapper);\n\n                if (e.target != e.currentTarget && key != keys.ESC) {\n                    return;\n                }\n\n                if (!hoverItem) {\n                    hoverItem = that._oldHoverItem = that._hoverItem();\n                }\n\n                belongsToVertical = that._itemBelongsToVertival(hoverItem);\n                hasChildren = that._itemHasChildren(hoverItem);\n                that._keyTriggered = true;\n\n                if (key == keys.RIGHT) {\n                    target = that[isRtl ? \"_itemLeft\" : \"_itemRight\"](hoverItem, belongsToVertical, hasChildren);\n                } else if (key == keys.LEFT) {\n                    target = that[isRtl ? \"_itemRight\" : \"_itemLeft\"](hoverItem, belongsToVertical, hasChildren);\n                } else if (key == keys.DOWN) {\n                    target = that._itemDown(hoverItem, belongsToVertical, hasChildren);\n                } else if (key == keys.UP) {\n                    target = that._itemUp(hoverItem, belongsToVertical, hasChildren);\n                } else if (key == keys.HOME) {\n                    that._moveHover(hoverItem, hoverItem.parent().children(\":visible\").first());\n                    e.preventDefault();\n                } else if (key == keys.END) {\n                    that._moveHover(hoverItem, hoverItem.parent().children(\":visible\").last());\n                    e.preventDefault();\n                } else if (key == keys.ESC) {\n                    target = that._itemEsc(hoverItem, belongsToVertical);\n                } else if (key == keys.ENTER || key == keys.SPACEBAR) {\n                    target = hoverItem.children(\".k-link\");\n                    if (target.length > 0) {\n                        that._click({ target: target[0], preventDefault: function() {}, enterKey: true });\n                        if (hasChildren && !hoverItem.hasClass(DISABLEDSTATE)) {\n                            that.open(hoverItem);\n                            that._moveHover(hoverItem, that._childPopupElement(hoverItem).children().find(\"li\").first());\n                        } else if (hoverItem.is(\"li\") && hoverItem.attr(\"role\") === \"menuitemcheckbox\") {\n                            hoverItem.find(\".k-checkbox\").attr(\"checked\", true);\n                        } else {\n                            that._moveHoverToRoot(hoverItem, that._findRootParent(hoverItem));\n                        }\n                    }\n                } else if (key == keys.TAB) {\n                    target = that._findRootParent(hoverItem);\n                    that._moveHover(hoverItem, target);\n                    that._checkActiveElement();\n                    return;\n                }\n\n                if (target && target[0]) {\n                    e.preventDefault();\n                    e.stopPropagation(); // needed to handle ESC in column menu only when a root item is focused\n                }\n            },\n\n            _hoverItem: function() {\n                return this.wrapper.find(\".k-item.k-hover,.k-item.k-focus\").filter(\":visible\");\n            },\n\n            _itemBelongsToVertival: function(item) {\n                var menuIsVertical = this.wrapper.hasClass(\"k-menu-vertical\");\n\n                if (!item.length) {\n                    return menuIsVertical;\n                }\n                return item.parent().hasClass(\"k-menu-group\") || menuIsVertical;\n            },\n\n            _itemHasChildren: function(item) {\n                if (!item || !item.length || !item[0].nodeType) {\n                    return false;\n                }\n                return item.children(\".k-menu-group, .k-menu-popup, div.k-animation-container\").length > 0 ||\n                    (!!item.data(POPUP_OPENER_ATTR) && !!this._overflowWrapper().children(popupGroupSelector(item.data(POPUP_OPENER_ATTR))));\n            },\n\n            _moveHover: function(item, nextItem) {\n                var that = this,\n                    id = that._ariaId;\n\n                if (item.length && nextItem.length) {\n                    item.removeClass(FOCUSEDSTATE);\n                }\n\n                if (nextItem.length) {\n                    if (nextItem[0].id) {\n                        id = nextItem[0].id;\n                    }\n\n                    nextItem.addClass(FOCUSEDSTATE);\n                    that._oldHoverItem = nextItem;\n\n                    if (id) {\n                        that.element.removeAttr(\"aria-activedescendant\");\n                        $(\"#\" + id).removeAttr(\"id\");\n                        nextItem.attr(\"id\", id);\n                        that.element.attr(\"aria-activedescendant\", id);\n                    }\n                    that._scrollToItem(nextItem);\n                }\n            },\n\n            _moveHoverToRoot: function(item, nextItem) {\n                this._moveHover(item, nextItem);\n            },\n\n            _findRootParent: function(item) {\n                if (this._isRootItem(item)) {\n                    return item;\n                } else {\n                    return this._parentsUntil(item, menuSelector, \"li.k-item\").last();\n                }\n            },\n\n            _isRootItem: function(item) {\n                return item.parent().hasClass(MENU);\n            },\n\n            _itemRight: function(item, belongsToVertical, hasChildren) {\n                var that = this,\n                    nextItem,\n                    parentItem,\n                    overflowWrapper;\n\n                if (!belongsToVertical) {\n                    nextItem = item.nextAll(itemSelector + exclusionSelector).eq(0);\n                    if (!nextItem.length) {\n                        nextItem = item.prevAll(itemSelector + exclusionSelector).last();\n                    }\n                    that.close(item);\n                } else if (hasChildren && !item.hasClass(DISABLEDSTATE)) {\n                    that.open(item);\n                    nextItem = that._childPopupElement(item).children().find(\"li\").first();\n                } else if (that.options.orientation == \"horizontal\") {\n                    parentItem = that._findRootParent(item);\n                    overflowWrapper = that._overflowWrapper();\n                    if (overflowWrapper) {\n                        var rootPopup = itemPopup(parentItem, overflowWrapper);\n                        that._closeChildPopups(rootPopup);\n                    }\n                    that.close(parentItem);\n                    nextItem = parentItem.nextAll(itemSelector + exclusionSelector).eq(0);\n                }\n\n                if (nextItem && !nextItem.length) {\n                    nextItem = that.wrapper.children(\".k-item\").first();\n                } else if (!nextItem) {\n                    nextItem = [];\n                }\n\n                that._moveHover(item, nextItem);\n                return nextItem;\n            },\n\n            _itemLeft: function(item, belongsToVertical) {\n                var that = this,\n                    nextItem,\n                    overflowWrapper;\n\n                if (!belongsToVertical) {\n                    nextItem = item.prevAll(itemSelector + exclusionSelector).eq(0);\n                    if (!nextItem.length) {\n                        nextItem = item.nextAll(itemSelector + exclusionSelector).last();\n                    }\n                    that.close(item);\n                } else {\n                    nextItem = item.parent().closest(\".k-item\");\n                    overflowWrapper = that._overflowWrapper();\n                    if (!nextItem.length && overflowWrapper) {\n                        nextItem = popupParentItem(item.parent(), overflowWrapper);\n                    }\n                    that.close(nextItem);\n                    if (that._isRootItem(nextItem) && that.options.orientation == \"horizontal\") {\n                        nextItem = nextItem.prevAll(itemSelector + exclusionSelector).eq(0);\n                    }\n                }\n\n                if (!nextItem.length) {\n                    nextItem = that.wrapper.children(\".k-item\").last();\n                }\n\n                that._moveHover(item, nextItem);\n                return nextItem;\n            },\n\n            _itemDown: function(item, belongsToVertical, hasChildren) {\n                var that = this,\n                    nextItem;\n\n                if (!belongsToVertical) {\n                    if (!hasChildren || item.hasClass(DISABLEDSTATE)) {\n                        return;\n                    } else {\n                        that.open(item);\n                        nextItem = that._childPopupElement(item).children().find(\"li\").first();\n                    }\n                } else {\n                    nextItem = item.nextAll(itemSelector + exclusionSelector).eq(0);\n                }\n\n                if (!nextItem.length && item.length) {\n                    nextItem = item.parent().children(\":visible\").first();\n                } else if (!item.length) {\n                    nextItem = that.wrapper.children(\".k-item\").first();\n                }\n\n                that._moveHover(item, nextItem);\n                return nextItem;\n            },\n\n            _itemUp: function(item, belongsToVertical) {\n                var that = this,\n                    nextItem;\n\n                if (!belongsToVertical) {\n                    return;\n                } else {\n                    nextItem = item.prevAll(itemSelector + exclusionSelector).eq(0);\n                }\n\n                if (!nextItem.length && item.length) {\n                    nextItem = item.parent().children(\":visible\").last();\n                } else if (!item.length) {\n                    nextItem = that.wrapper.children(\".k-item\").last();\n                }\n\n                that._moveHover(item, nextItem);\n                return nextItem;\n            },\n\n            _scrollToItem: function(item) {\n                var that = this;\n                if (that.options.scrollable && item && item.length) {\n                    var ul = item.parent();\n                    var isHorizontal = ul.hasClass(MENU) ? that.options.orientation == \"horizontal\" : false;\n                    var scrollDir = isHorizontal ? \"scrollLeft\" : \"scrollTop\";\n                    var getSize = isHorizontal ? kendo._outerWidth : kendo._outerHeight;\n                    var currentScrollOffset = ul[scrollDir]();\n                    var itemSize = getSize(item);\n                    var itemOffset = item[0][isHorizontal ? \"offsetLeft\" : \"offsetTop\"];\n                    var ulSize = getSize(ul);\n                    var scrollButtons = ul.siblings(scrollButtonSelector);\n                    var scrollButtonSize = scrollButtons.length ? getSize(scrollButtons.first()) : 0;\n                    var itemPosition;\n\n                    if (currentScrollOffset + ulSize < itemOffset + itemSize + scrollButtonSize) {\n                        itemPosition = itemOffset + itemSize - ulSize + scrollButtonSize;\n                    } else if (currentScrollOffset > itemOffset - scrollButtonSize) {\n                        itemPosition = itemOffset - scrollButtonSize;\n                    }\n\n                    if (!isNaN(itemPosition)) {\n                        var scrolling = {};\n                        scrolling[scrollDir] = itemPosition;\n                        ul.finish().animate(scrolling, \"fast\", \"linear\", function() {\n                            that._toggleScrollButtons(ul, scrollButtons.first(), scrollButtons.last(), isHorizontal);\n                        });\n                    }\n                }\n            },\n\n            _itemEsc: function(item, belongsToVertical) {\n                var that = this,\n                    nextItem, groupId;\n\n                if (!belongsToVertical) {\n                    return item;\n                } else {\n                    nextItem = item.parent().closest(\".k-item\");\n\n                    if (nextItem.length === 0) {\n                        groupId = item.closest(\".k-menu-popup\").data(\"group\");\n                        nextItem = that.wrapper.find(\".k-item[data-groupparent='\" + groupId + \"']\");\n                    }\n\n                    that.close(nextItem);\n                    that._moveHover(item, nextItem);\n                }\n\n                return nextItem;\n            },\n\n            _childPopupElement: function(item) {\n                var popupElement = item.find(\".k-menu-popup\");\n                var wrapper = this._overflowWrapper();\n                if (!popupElement.length && wrapper) {\n                    popupElement = itemPopup(item, wrapper);\n                }\n                return popupElement;\n            },\n\n            _triggerEvent: function(e) {\n                var that = this;\n\n                return that.trigger(e.type, { type: e.type, item: e.item });\n            },\n\n            _focusHandler: function(e) {\n                var that = this,\n                    item = $(kendo.eventTarget(e)).closest(allItemsSelector);\n\n                if (item.hasClass(DISABLEDSTATE)) {\n                    return;\n                }\n\n                setTimeout(function() {\n                    that._moveHover([], item);\n                    if (item.children(\".k-content\")[0]) {\n                        item.parent().closest(\".k-item\").removeClass(FOCUSEDSTATE);\n                    }\n                }, 200);\n            },\n\n            _animations: function(options) {\n                if (options && (\"animation\" in options) && !options.animation) {\n                    options.animation = { open: { effects: {} }, close: { hide: true, effects: {} } };\n                }\n            },\n            _dataSource: function(options) {\n                var that = this,\n                    dataSource = options ? options.dataSource : that.options.dataSource;\n\n                if (!dataSource) {\n                    return;\n                }\n\n                dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n\n                that._unbindDataSource();\n\n                if (!dataSource.fields) {\n                    dataSource.fields = [\n                        { field: \"uid\" },\n                        { field: \"text\" },\n                        { field: \"url\" },\n                        { field: \"cssClass\" },\n                        { field: \"spriteCssClass\" },\n                        { field: \"imageUrl\" },\n                        { field: \"imageAttr\" },\n                        { field: \"attr\" },\n                        { field: \"contentAttr\" },\n                        { field: \"content\" },\n                        { field: \"encoded\" },\n                        { field: \"items\" },\n                        { field: \"select\" }\n                    ];\n                }\n\n                that.dataSource = HierarchicalDataSource.create(dataSource);\n\n                that._bindDataSource();\n\n                that.dataSource.fetch();\n            },\n\n            _bindDataSource: function() {\n                this._refreshHandler = this.refresh.bind(this);\n                this._errorHandler = this._error.bind(this);\n\n                this.dataSource.bind(CHANGE, this._refreshHandler);\n                this.dataSource.bind(ERROR, this._errorHandler);\n            },\n\n            _unbindDataSource: function() {\n                var dataSource = this.dataSource;\n\n                if (dataSource) {\n                    dataSource.unbind(CHANGE, this._refreshHandler);\n                    dataSource.unbind(ERROR, this._errorHandler);\n                }\n            },\n\n            _error: function() {\n\n            },\n\n            findByUid: function(uid) {\n                var wrapperElement = this._overflowWrapper() || this.element;\n                return wrapperElement.find(\"[\" + kendo.attr(\"uid\") + \"=\" + uid + \"]\");\n            },\n\n            refresh: function(ev) {\n                var that = this;\n                var node = ev.node;\n                var action = ev.action;\n                var parentElement = node ? that.findByUid(node.uid) : that.element;\n                var itemsToUpdate = ev.items;\n                var index = ev.index;\n                var updateProxy = that._updateItem.bind(that);\n                var removeProxy = that._removeItem.bind(that);\n\n                if (action == \"add\") {\n                    that._appendItems(itemsToUpdate, index, parentElement);\n                } else if (action == \"remove\") {\n                    itemsToUpdate.forEach(removeProxy);\n                } else if (action == \"itemchange\") {\n                    itemsToUpdate.forEach(updateProxy);\n                } else if (action === \"itemloaded\") {\n                    that.append(ev.items, parentElement);\n                } else {\n                    this._initData();\n                }\n\n                this.trigger(DATABOUND, { item: parentElement, dataItem: node });\n            },\n\n            _appendItems: function(items, index, parent) {\n                var that = this;\n                var referenceItem = parent.find(itemSelector).eq(index);\n\n                if (referenceItem.length) {\n                    that.insertBefore(items, referenceItem);\n                } else {\n                    that.append(items, parent);\n                }\n            },\n\n            _removeItem: function(item) {\n                var that = this;\n                var element = that.findByUid(item.uid);\n                that.remove(element);\n            },\n\n            _updateItem: function(item) {\n                var that = this;\n                var element = that.findByUid(item.uid);\n                var nextElement = element.next();\n                var parentNode = item.parentNode();\n\n                that.remove(element);\n\n                if (nextElement.length) {\n                    that.insertBefore(item, nextElement);\n                } else {\n                    that.append(item, parentNode && that.findByUid(parentNode.uid));\n                }\n            },\n\n            _accessors: function() {\n                var that = this,\n                    options = that.options,\n                    i, field, textField,\n                    element = that.element;\n\n                for (i in bindings) {\n                    field = options[bindings[i]];\n                    textField = element.attr(kendo.attr(i + \"-field\"));\n\n                    if (!field && textField) {\n                        field = textField;\n                    }\n\n                    if (!field) {\n                        field = i;\n                    }\n\n                    if (!isArray(field)) {\n                        field = [field];\n                    }\n\n                    options[bindings[i]] = field;\n                }\n            },\n\n            _fieldAccessor: function(fieldName) {\n                var fieldBindings = this.options[bindings[fieldName]] || [],\n                    count = fieldBindings.length;\n\n                if (count === 0) {\n                    return (function(item) { return item[fieldName]; });\n                } else {\n                    return (function(item) {\n                        var levels = $.map(fieldBindings, kendo.getter);\n                        if (item.level) {\n                            return levels[Math.min(item.level(), count - 1)](item);\n                        } else {\n                            return levels[count - 1](item);\n                        }\n                    });\n                }\n            },\n\n            _templates: function() {\n                var this$1$1 = this;\n\n                var that = this,\n                    options = that.options,\n                    fieldAccessor = that._fieldAccessor.bind(that);\n\n                if (options.template && typeof options.template == STRING) {\n                    options.template = template(options.template);\n                } else if (!options.template) {\n                    options.template = template(function (data) {\n                        var text = fieldAccessor(\"text\")(data.item);\n                        if (!(typeof data.item.encoded != 'undefined' && data.item.encoded === false)) {\n                            text = encode(text);\n                        }\n\n                        return (\"<span class='k-menu-link-text'>\" + text + \"</span>\");\n                    });\n                }\n\n                that.templates = {\n                    content: template(function (data) {\n                        var item = data.item;\n                        var contentHtml = fieldAccessor(\"content\")(item);\n                        var contCssAttributes = data.contentCssAttributes(item.toJSON ? item.toJSON() : item);\n                        return (\"<div \" + contCssAttributes + \" tabindex='-1'>\" + (contentHtml || '') + \"</div>\");\n                    }),\n                    group: template(function (data) { return \"<div class='\" + (data.groupWrapperCssClass(data.group)) + \"' \" + (data.groupAttributes(data.group)) + \">\" +\n                        \"<ul class='\" + (data.groupCssClass(data.group)) + \"' id='\" + (data.groupId) + \"' role='menu'>\" +\n                        \"\" + (data.renderItems(data)) +\n                        \"</ul>\" +\n                        \"</div>\"; }\n                    ),\n                    itemWrapper: template(function (data) {\n                        var item = data.item;\n                        var url = fieldAccessor(\"url\")(item);\n                        var imageUrl = fieldAccessor(\"imageUrl\")(item);\n                        var imgAttributes = fieldAccessor(\"imageAttr\")(item);\n                        var tag = url ? 'a' : 'span';\n\n                        return \"<\" + tag + \" class='\" + (rendering.textClass(item)) + \"' \" + (url ? (\"href='\" + url + \"'\") : '') + \" >\" +\n                            (imageUrl ? (\"<img \" + (rendering.imageCssAttributes(imgAttributes)) + \"  alt='' src='\" + imageUrl + \"' />\") : '') +\n                            this$1$1.templates.sprite(item) +\n                            this$1$1.options.template(data) +\n                            data.arrow(data) +\n                            \"</\" + tag + \">\";\n                    }),\n                    item: template(function (data) {\n                        var item = data.item,\n                            menu = data.menu,\n                            group = data.group,\n                            subGroup = data.subGroup;\n                        var contentHtml = fieldAccessor(\"content\")(item);\n                        var groupId = kendo.guid();\n                        return \"<li class='\" + (rendering.wrapperCssClass(group, item)) + \"' \" + ((item.hasChildren || item.items) ? \"aria-controls='\" + groupId + '\"' : '') + \"' \" + (rendering.itemCssAttributes(item.toJSON ? item.toJSON() : item)) + \" role='menuitem'  \" + (item.items ? \"aria-haspopup='true'\" : '') +\n                            \"\" + (item.enabled === false ? \"aria-disabled='true'\" : '') +\n                            kendo.attr(\"uid\") + \"='\" + (item.uid) + \"' \" +\n                            (item.items && item.items.length > 0 ?\n                                (item.expanded ?\n                                    \" aria-expanded='true'\"\n                                    : \" aria-expanded='false'\")\n                                : '') +\n                            \">\" +\n                            \"\" + (this$1$1.templates.itemWrapper(data)) +\n                            (item.hasChildren || item.items ?\n                                (\"\" + (subGroup({ items: item.items, menu: menu, group: { expanded: item.expanded }, groupId: groupId })))\n                                : (item.content || item.contentUrl || contentHtml ?\n                                (\"\" + (data.renderContent(data)))\n                                : '')\n                            ) +\n                            \"</li>\";\n                    }),\n                    scrollButton: template(function (ref) {\n                            var direction = ref.direction;\n\n                            return \"<span class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-menu-scroll-button k-scroll-\" + direction + \"' unselectable='on'>\" +\n                            kendo.ui.icon({ icon: (\"caret-alt-\" + direction), iconClass: \"k-button-icon\" }) +\n                        \"</span>\";\n                }\n                    ),\n                    arrow: template(function (ref) {\n                            var item = ref.item;\n                            var group = ref.group;\n\n                            return (\"<span aria-hidden='true' class='k-menu-expand-arrow'>\" + (kendo.ui.icon({ icon: group.horizontal ? \"caret-alt-down\" : \"caret-alt-right\", iconClass: \"k-menu-expand-arrow-icon\" })) + \"</span>\");\n                }),\n                    sprite: template(function (data) {\n                        var spriteCssClass = fieldAccessor(\"spriteCssClass\")(data);\n                        if (spriteCssClass) {\n                            return (\"<span class='k-sprite \" + spriteCssClass + \"'></span>\");\n                        }\n                        return '';\n                    }),\n                    empty: template(function () { return \"\"; })\n                };\n            },\n\n            renderItem: function(options) {\n                var that = this;\n                options = extend({ menu: that, group: {} }, options);\n\n                var empty = that.templates.empty,\n                    item = options.item;\n\n                return that.templates.item(extend(options, {\n                    sprite: that.templates.sprite,\n                    itemWrapper: that.templates.itemWrapper,\n                    renderContent: that.renderContent,\n                    arrow: item.items || item.content || item[that.options.dataContentField[0]] ? that.templates.arrow : empty,\n                    subGroup: that.renderGroup.bind(that)\n                }, rendering));\n            },\n\n            renderGroup: function(options) {\n                var that = this;\n                var templates = that.templates || options.menu.templates;\n\n                return templates.group(extend({\n                    renderItems: function(options) {\n                        var html = \"\",\n                            i = 0,\n                            items = options.items,\n                            len = items ? items.length : 0,\n                            group = extend({ length: len }, options.group);\n\n                        for (; i < len; i++) {\n                            html += options.menu.renderItem(extend(options, {\n                                group: group,\n                                item: extend({ index: i }, items[i])\n                            }));\n                        }\n\n                        return html;\n                    }\n                }, options, rendering));\n            },\n\n            renderContent: function(options) {\n                return options.menu.templates.content(extend(options, rendering));\n            }\n        });\n\n        var ContextMenu = Menu.extend({\n            init: function(element, options) {\n                var that = this;\n\n                Menu.fn.init.call(that, element, options);\n\n                that.element.attr(ROLE, \"menu\");\n\n                that._marker = kendo.guid().substring(0, 8);\n\n                that.target = $(that.options.target);\n\n                that._popup();\n                that._wire();\n            },\n\n            _initOverflow: function(options) {\n                var that = this;\n                if (options.scrollable && !that._overflowWrapper()) {\n                    that._openedPopups = {};\n\n                    that._popupsWrapper = (that.element.parent().is(childAnimationContainerSelector) ? that.element.closes(animationContainerSelector) : that.element)\n                        .wrap(\"<div class='k-popups-wrapper \" + options.orientation + \"'></div>\").parent();\n\n                    if (that.options.orientation == \"horizontal\") {\n                        removeSpacesBetweenItems(that.element);\n                    }\n\n                    if (options.appendTo) {\n                        options.appendTo = $(options.appendTo);\n                        options.appendTo.append(that._popupsWrapper);\n                    }\n\n                    that._initialHeight = that.element[0].style.height;\n                    that._initialWidth = that.element[0].style.width;\n                }\n            },\n\n            options: {\n                name: \"ContextMenu\",\n                filter: null,\n                showOn: \"contextmenu\",\n                orientation: \"vertical\",\n                alignToAnchor: false,\n                copyAnchorStyles: true,\n                target: \"body\",\n                origin: undefined$1,\n                position: undefined$1\n            },\n\n            events: [\n                OPEN,\n                CLOSE,\n                ACTIVATE,\n                DEACTIVATE,\n                SELECT\n            ],\n\n            setOptions: function(options) {\n                var that = this;\n\n                Menu.fn.setOptions.call(that, options);\n\n                that.target.off(that.showOn + NS + that._marker, that._showProxy);\n\n                if (that.userEvents) {\n                    that.userEvents.destroy();\n                }\n\n                that.target = $(that.options.target);\n                if (options.orientation && that.popup.wrapper[0]) {\n                    that.popup.element.unwrap();\n                }\n\n                that._wire();\n\n                Menu.fn.setOptions.call(this, options);\n            },\n\n            destroy: function() {\n                var that = this;\n\n                that.target.off(that.options.showOn + NS + that._marker);\n                DOCUMENT_ELEMENT.off(kendo.support.mousedown + NS + that._marker, that._closeProxy);\n\n                if (that.userEvents) {\n                    that.userEvents.destroy();\n                }\n\n                Menu.fn.destroy.call(that);\n\n                if (that.popup) {\n                    that.popup.destroy();\n                }\n            },\n\n            open: function(x, y) {\n                var that = this;\n\n                x = $(x)[0];\n\n                if (contains(that.element[0], $(x)[0]) || that._itemHasChildren($(x))) { // call parent open for children elements\n                    Menu.fn.open.call(that, x);\n                } else {\n                    if (that._triggerEvent({ item: that.element, type: OPEN }) === false) {\n                        if (that.popup.visible() && that.options.filter) {\n                            that.popup.close(true);\n                            that.popup.element.kendoStop(true);\n                        }\n\n                        if (!that._triggerFocusOnActivate) {\n                            that._triggerFocusOnActivate = that._focusMenu.bind(that);\n                        }\n                        that.bind(ACTIVATE, that._triggerFocusOnActivate);\n\n                        if (y !== undefined$1) {\n                            var overflowWrapper = that._overflowWrapper();\n                            if (overflowWrapper) {\n                                var offset = overflowWrapper.offset();\n                                x -= offset.left;\n                                y -= offset.top;\n                            }\n                            that.popup.wrapper.hide();\n                            that._configurePopupScrolling(x, y);\n                            that.popup.open(x, y);\n                        } else {\n                            that.popup.options.anchor = (x ? x : that.popup.anchor) || that.target;\n                            that.popup.element.kendoStop(true);\n                            that._configurePopupScrolling();\n                            that.popup.open();\n                        }\n\n                        DOCUMENT_ELEMENT.off(that.popup.downEvent, that.popup._mousedownProxy);\n                        DOCUMENT_ELEMENT\n                            .on(kendo.support.mousedown + NS + that._marker, that._closeProxy);\n                    }\n                }\n\n                return that;\n            },\n\n            _focusMenu: function() {\n                var that = this;\n\n                that.unbind(ACTIVATE, that._triggerFocusOnActivate);\n                that.element.trigger(\"focus\");\n            },\n\n            _configurePopupScrolling: function(x, y) {\n                var that = this;\n                var popup = that.popup;\n                var isHorizontal = that.options.orientation == \"horizontal\";\n\n                if (that.options.scrollable) {\n                    that._wrapPopupElement(popup);\n\n                    popup.element.parent().css({\n                        position: \"\",\n                        height: \"\"\n                    });\n\n                    popup.element.css({\n                        visibility: \"hidden\",\n                        display: \"\",\n                        position: \"\"\n                    });\n\n                    if (isHorizontal) {\n                        that._setPopupWidth(popup, isNaN(x) ? undefined$1 : { isFixed: true, x: x, y: y });\n                    } else {\n                        that._setPopupHeight(popup, isNaN(x) ? undefined$1 : { isFixed: true, x: x, y: y });\n                    }\n\n                    popup.element.css({\n                        visibility: \"\",\n                        display: \"none\",\n                        position: \"absolute\"\n                    });\n\n                    that._initPopupScrollButtons(popup, isHorizontal, true);\n                    popup.element.siblings(scrollButtonSelector).hide();\n                }\n            },\n\n            _setPopupWidth: function(popup, isFixed) {\n                var popupElement = popup.element;\n                var popups = popupElement.add(popupElement.parent(childAnimationContainerSelector));\n\n                popups.width(this._initialWidth || \"\");\n\n                var location = popup._location(isFixed);\n                var windowWidth = $(window).width();\n                var popupOuterWidth = location.width;\n                var popupOffsetLeft = Math.max(location.left, 0);\n                var scrollLeft = isFixed ? 0 : parentsScroll(this._overflowWrapper()[0], \"scrollLeft\");\n                var shadow = kendo.getShadows(popupElement);\n                var maxWidth = windowWidth - shadow.left - shadow.right;\n                var canFit = maxWidth + scrollLeft > popupOuterWidth + popupOffsetLeft;\n\n                if (!canFit) {\n                    popups.css({ overflow: \"hidden\", width: (maxWidth - popupOffsetLeft + scrollLeft) + \"px\" });\n                }\n            },\n\n            close: function() {\n                var that = this;\n\n                if (contains(that.element[0], $(arguments[0])[0]) || that._itemHasChildren(arguments[0])) {\n                    Menu.fn.close.call(that, arguments[0]);\n                } else {\n                    if (that.popup.visible()) {\n                        if (that._triggerEvent({ item: that.element, type: CLOSE }) === false) {\n                            that._removeHoverItem();\n                            that.element.find(\"#\" + that._ariaId).removeAttr(\"id\");\n                            that.popup.close();\n                            DOCUMENT_ELEMENT.off(kendo.support.mousedown + NS + that._marker, that._closeProxy);\n                            that.unbind(SELECT, that._closeTimeoutProxy);\n                            that.popup.options.anchor.focus();\n                        }\n                    }\n                }\n            },\n\n            _showHandler: function(e) {\n                var ev = e, offset,\n                    that = this,\n                    options = that.options,\n                    target = kendo.support.mobileOS ? $(ev.target) : $(ev.currentTarget);\n\n                if (e.event) {\n                    ev = e.event;\n                    ev.pageX = e.x.location;\n                    ev.pageY = e.y.location;\n                }\n\n                if (contains(that.element[0], e.relatedTarget || e.target)) {\n                    return;\n                }\n\n                that._eventOrigin = ev;\n\n                ev.preventDefault();\n                ev.stopImmediatePropagation();\n\n                that.element.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n\n                if ((options.filter && target.is(options.filter)) || !options.filter) {\n                    if (options.alignToAnchor) {\n                        that.popup.options.anchor = ev.currentTarget;\n                        that.open(ev.currentTarget);\n                    } else {\n                        that.popup.options.anchor = ev.currentTarget;\n\n                        if (that._targetChild) {\n                            offset = that.target.offset();\n                            that.open(ev.pageX - offset.left, ev.pageY - offset.top);\n                        } else {\n                            that.open(ev.pageX, ev.pageY);\n                        }\n                    }\n                }\n            },\n\n            _closeHandler: function(e) {\n                var that = this,\n                    target = $(e.relatedTarget || e.target),\n                    sameTarget = target.closest(that.target.selector)[0] == that.target[0],\n                    item = target.closest(itemSelector),\n                    children = that._itemHasChildren(item),\n                    overflowWrapper = that._overflowWrapper(),\n                    containment = contains(that.element[0], target[0]) || (overflowWrapper && contains(overflowWrapper[0], target[0]));\n\n                that._eventOrigin = e;\n\n                var normalClick = e.which !== 3;\n\n                if (that.popup.visible() && ((normalClick && sameTarget) || !sameTarget) && ((that.options.closeOnClick && !children && containment) || !containment)) {\n                    if (containment) {\n                        this.unbind(SELECT, this._closeTimeoutProxy);\n                        that.bind(SELECT, that._closeTimeoutProxy);\n                    } else {\n                        that.close();\n                    }\n                }\n            },\n\n            _wire: function() {\n                var that = this,\n                    options = that.options,\n                    target = that.target;\n\n                that._preventProxy = null;\n                that._showProxy = that._showHandler.bind(that);\n                that._closeProxy = that._closeHandler.bind(that);\n                that._closeTimeoutProxy = that.close.bind(that);\n\n                if (target[0]) {\n                    if (kendo.support.mobileOS && options.showOn == \"contextmenu\") {\n                        that.userEvents = new kendo.UserEvents(target, {\n                            filter: options.filter,\n                            allowSelection: false\n                        });\n\n                        that._preventProxy = function() { return false; };\n\n                        that.userEvents.bind(\"hold\", that._showProxy);\n                    }\n\n                    if (options.filter) {\n                        target.on(options.showOn + NS + that._marker, options.filter, that._preventProxy || that._showProxy);\n                    } else {\n                        target.on(options.showOn + NS + that._marker, that._preventProxy || that._showProxy);\n                    }\n\n                    target.on(\"keydown\", function (e) {\n                        if (e.keyCode === kendo.keys.F10 && e.shiftKey) {\n                            e.preventDefault();\n                            that.open(e.target);\n                        }\n                    });\n                }\n            },\n\n            _triggerEvent: function(e) {\n                var that = this,\n                    anchor = $(that.popup.options.anchor)[0],\n                    origin = that._eventOrigin;\n\n                that._eventOrigin = undefined$1;\n\n                return that.trigger(e.type, extend({ type: e.type, item: e.item || this.element[0], target: anchor }, origin ? { event: origin } : {} ));\n            },\n\n            _popup: function() {\n                var that = this;\n                var overflowWrapper = that._overflowWrapper();\n                var contextMenuElement = that.element.addClass(\"k-context-menu\");\n\n                that._triggerProxy = that._triggerEvent.bind(that);\n\n                that.popup = $(\"<div></div>\")\n                                .append(contextMenuElement)\n                                .kendoPopup({\n                                    origin: that.options.origin,\n                                    position: that.options.position,\n                                    autosize: that.options.orientation === \"horizontal\",\n                                    anchor: that.target || \"body\",\n                                    copyAnchorStyles: that.options.copyAnchorStyles,\n                                    collision: that.options.popupCollision || \"fit\",\n                                    animation: that.options.animation,\n                                    activate: that._triggerProxy,\n                                    deactivate: that._triggerProxy,\n                                    appendTo: overflowWrapper || that.options.appendTo,\n                                    close: !overflowWrapper ? $.noop : function(e) {\n                                        $(getChildPopups(e.sender.element, overflowWrapper)).each(function(i, p) {\n                                            var popup = p.data(KENDOPOPUP);\n                                            if (popup) {\n                                                popup.close(true);\n                                            }\n                                        });\n                                    }\n                                }).data(KENDOPOPUP);\n\n                that._targetChild = contains(that.target[0], that.popup.element[0]);\n            },\n\n            _moveHoverToRoot: function(item, nextItem) {\n                this._moveHover(item, nextItem);\n                this.close();\n            },\n\n            _focus: function(e) {\n                var hoverItem = this._oldHoverItem = this._hoverItem() || [];\n\n                Menu.fn._focus.call(this, e);\n\n                if (activeElement() === e.currentTarget) {\n                    this._moveHover(hoverItem, this.wrapper.children().filter(\":visible\").not(\".k-separator\").first());\n                }\n            }\n        });\n\n        ui.plugin(Menu);\n        ui.plugin(ContextMenu);\n\n    })(window.kendo.jQuery);\n\n}));\n"]}