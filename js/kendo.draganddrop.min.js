/**
 * Copyright 2023 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("kendo.core.js"),require("kendo.userevents.js")):"function"==typeof define&&define.amd?define(["kendo.core.min","kendo.userevents.min"],t):((e="undefined"!=typeof globalThis?globalThis:e||self).kendodraganddrop=e.kendodraganddrop||{},e.kendodraganddrop.js=t())}(this,(function(){return function(e,t){var n,i=window.kendo,r=i.support,o=window.document,a=e(window),s=i.Class,l=i.ui.Widget,c=i.Observable,u=i.UserEvents,d=i.ClickMoveClick,h=e.extend,f=i.getOffset,p={},g={},v={},m=i.elementUnderCursor,_="keyup",x="change",b="dragstart",y="hold",E="drag",T="dragend",k="dragcancel",M="hintDestroyed",C="dragenter",S="dragleave",w="drop";function D(e,t){return parseInt(e.css(t),10)||0}function O(e,t){return Math.min(Math.max(e,t.min),t.max)}function I(e,t){var n=f(e),r=i._outerWidth,o=i._outerHeight,a=n.left+D(e,"borderLeftWidth")+D(e,"paddingLeft"),s=n.top+D(e,"borderTopWidth")+D(e,"paddingTop");return{x:{min:a,max:a+e.width()-r(t,!0)},y:{min:s,max:s+e.height()-o(t,!0)}}}var H,W=c.extend({init:function(t,n){var r=this,o=t[0];r.capture=!1,o.addEventListener?(e.each(i.eventMap.down.split(" "),(function(){o.addEventListener(this,r._press.bind(r),!0)})),e.each(i.eventMap.up.split(" "),(function(){o.addEventListener(this,r._release.bind(r),!0)}))):(e.each(i.eventMap.down.split(" "),(function(){o.attachEvent(this,r._press.bind(r))})),e.each(i.eventMap.up.split(" "),(function(){o.attachEvent(this,r._release.bind(r))}))),c.fn.init.call(r),r.bind(["press","release"],n||{})},captureNext:function(){this.capture=!0},cancelCapture:function(){this.capture=!1},_press:function(e){this.trigger("press"),this.capture&&e.preventDefault()},_release:function(e){var t=this;t.trigger("release"),t.capture&&(e.preventDefault(),t.cancelCapture())}}),z=c.extend({init:function(t){var n=this;c.fn.init.call(n),n.forcedEnabled=!1,e.extend(n,t),n.scale=1,n.horizontal?(n.measure="offsetWidth",n.scrollSize="scrollWidth",n.axis="x"):(n.measure="offsetHeight",n.scrollSize="scrollHeight",n.axis="y")},makeVirtual:function(){e.extend(this,{virtual:!0,forcedEnabled:!0,_virtualMin:0,_virtualMax:0})},virtualSize:function(e,t){this._virtualMin===e&&this._virtualMax===t||(this._virtualMin=e,this._virtualMax=t,this.update())},outOfBounds:function(e){return e>this.max||e<this.min},forceEnabled:function(){this.forcedEnabled=!0},getSize:function(){return this.container[0][this.measure]},getTotal:function(){return this.element[0][this.scrollSize]},rescale:function(e){this.scale=e},update:function(e){var t=this,n=t.virtual?t._virtualMax:t.getTotal(),i=n*t.scale,r=t.getSize();(0!==n||t.forcedEnabled)&&(t.max=t.virtual?-t._virtualMin:0,t.size=r,t.total=i,t.min=Math.min(t.max,r-i),t.minScale=r/n,t.centerOffset=(i-r)/2,t.enabled=t.forcedEnabled||i>r,e||t.trigger(x,t))}}),L=c.extend({init:function(e){var t=this;c.fn.init.call(t),t.x=new z(h({horizontal:!0},e)),t.y=new z(h({horizontal:!1},e)),t.container=e.container,t.forcedMinScale=e.minScale,t.maxScale=e.maxScale||100,t.bind(x,e)},rescale:function(e){this.x.rescale(e),this.y.rescale(e),this.refresh()},centerCoordinates:function(){return{x:Math.min(0,-this.x.centerOffset),y:Math.min(0,-this.y.centerOffset)}},refresh:function(){var e=this;e.x.update(),e.y.update(),e.enabled=e.x.enabled||e.y.enabled,e.minScale=e.forcedMinScale||Math.min(e.x.minScale,e.y.minScale),e.fitScale=Math.max(e.x.minScale,e.y.minScale),e.trigger(x)}}),P=c.extend({init:function(e){h(this,e),c.fn.init.call(this)},outOfBounds:function(){return this.dimension.outOfBounds(this.movable[this.axis])},dragMove:function(e){var t=this,n=t.dimension,i=t.axis,r=t.movable,o=r[i]+e;n.enabled&&((o<n.min&&e<0||o>n.max&&e>0)&&(e*=t.resistance),r.translateAxis(i,e),t.trigger(x,t))}}),U=s.extend({init:function(t){var n,i,r,o,a=this;h(a,{elastic:!0},t),r=a.elastic?.5:0,o=a.movable,a.x=n=new P({axis:"x",dimension:a.dimensions.x,resistance:r,movable:o}),a.y=i=new P({axis:"y",dimension:a.dimensions.y,resistance:r,movable:o}),a.userEvents.bind(["press","move","end","gesturestart","gesturechange"],{gesturestart:function(e){a.gesture=e,a.offset=a.dimensions.container.offset()},press:function(t){e(t.event.target).closest("a").is("[data-navigate-on-press=true]")&&t.sender.cancel()},gesturechange:function(e){var t,r=a.gesture,s=r.center,l=e.center,c=e.distance/r.distance,u=a.dimensions.minScale,d=a.dimensions.maxScale;o.scale<=u&&c<1&&(c+=.8*(1-c)),o.scale*c>=d&&(c=d/o.scale);var h=o.x+a.offset.left,f=o.y+a.offset.top;t={x:(h-s.x)*c+l.x-h,y:(f-s.y)*c+l.y-f},o.scaleWith(c),n.dragMove(t.x),i.dragMove(t.y),a.dimensions.rescale(o.scale),a.gesture=e,e.preventDefault()},move:function(e){e.event.target.tagName.match(/textarea|input/i)||(n.dimension.enabled||i.dimension.enabled?(n.dragMove(e.x.delta),i.dragMove(e.y.delta),e.preventDefault()):e.touch.skip())},end:function(e){e.preventDefault()}})}}),j=r.transitions.prefix+"Transform";H=r.hasHW3D?function(e,t,n){return"translate3d("+e+"px,"+t+"px,0) scale("+n+")"}:function(e,t,n){return"translate("+e+"px,"+t+"px) scale("+n+")"};var A=c.extend({init:function(t){var n=this;c.fn.init.call(n),n.element=e(t),n.element[0].style.webkitTransformOrigin="left top",n.x=0,n.y=0,n.scale=1,n._saveCoordinates(H(n.x,n.y,n.scale))},translateAxis:function(e,t){this[e]+=t,this.refresh()},scaleTo:function(e){this.scale=e,this.refresh()},scaleWith:function(e){this.scale*=e,this.refresh()},translate:function(e){this.x+=e.x,this.y+=e.y,this.refresh()},moveAxis:function(e,t){this[e]=t,this.refresh()},moveTo:function(e){h(this,e),this.refresh()},refresh:function(){var e,t=this,n=t.x,r=t.y;t.round&&(n=Math.round(n),r=Math.round(r)),(e=H(n,r,t.scale))!=t.coordinates&&(i.support.browser.msie&&i.support.browser.version<10?(t.element[0].style.position="absolute",t.element[0].style.left=t.x+"px",t.element[0].style.top=t.y+"px"):t.element[0].style[j]=e,t._saveCoordinates(e),t.trigger(x))},_saveCoordinates:function(e){this.coordinates=e}});function N(e,t){var n,i=t.options.group,r=e[i];if(l.fn.destroy.call(t),r.length>1){for(n=0;n<r.length;n++)if(r[n]==t){r.splice(n,1);break}}else r.length=0,delete e[i]}var V=l.extend({init:function(e,t){var n=this;l.fn.init.call(n,e,t);var i=n.options.group;i in g?g[i].push(n):g[i]=[n]},events:[C,S,w],options:{name:"DropTarget",group:"default"},destroy:function(){N(g,this)},_trigger:function(e,t){var n=p[this.options.group];if(n)return this.trigger(e,h({},t.event,{draggable:n,dropTarget:t.dropTarget}))},_over:function(e){this._trigger(C,e)},_out:function(e){this._trigger(S,e)},_drop:function(e){var t=p[this.options.group];t&&(t.dropped=!this._trigger(w,e))}});V.destroyGroup=function(e){var t,n=g[e]||v[e];if(n){for(t=0;t<n.length;t++)l.fn.destroy.call(n[t]);n.length=0,delete g[e],delete v[e]}},V._cache=g;var B=V.extend({init:function(e,t){var n=this;l.fn.init.call(n,e,t);var i=n.options.group;i in v?v[i].push(n):v[i]=[n]},destroy:function(){N(v,this)},options:{name:"DropTargetArea",group:"default",filter:null}}),$=l.extend({init:function(e,t){var n=this;l.fn.init.call(n,e,t),n._activated=!1,this.options.clickMoveClick&&(n.clickMoveClick=new d(n.element,{global:!0,filter:n.options.filter,start:n._startClickMoveClick.bind(n),move:n._drag.bind(n),end:n._end.bind(n),cancel:n._onCancel.bind(n)})),n.userEvents=new u(n.element,{global:!0,allowSelection:!0,filter:n.options.filter,threshold:n.options.distance,start:n._start.bind(n),hold:n._hold.bind(n),move:n._drag.bind(n),end:n._end.bind(n),cancel:n._onCancel.bind(n),select:n._select.bind(n)}),i.support.touch&&n.element.find(n.options.filter).css("touch-action","none"),n._afterEndHandler=n._afterEnd.bind(n),n._captureEscape=n._captureEscape.bind(n)},events:[y,b,E,T,k,M],options:{name:"Draggable",distance:i.support.touch?0:5,group:"default",cursorOffset:null,axis:null,container:null,filter:null,ignore:null,holdToDrag:!1,autoScroll:!1,dropped:!1,clickMoveClick:!1},cancelHold:function(){this._activated=!1},_captureEscape:function(e){var t=this;e.keyCode===i.keys.ESC&&(t.userEvents.cancel(),t.clickMoveClick&&t.clickMoveClick.cancel(),this._trigger(k,{event:e}))},_updateHint:function(t){var n,i=this,r=i.options,o=i.boundaries,a=r.axis,s=i.options.cursorOffset;s?n={left:t.x.location+s.left,top:t.y.location+s.top}:0!==t.x.delta||0!==t.y.delta?(i.hintOffset.left+=t.x.delta,i.hintOffset.top+=t.y.delta,n=e.extend({},i.hintOffset)):(i.hintOffset.left=t.x.startLocation+t.x.initialDelta,i.hintOffset.top=t.y.startLocation+t.y.initialDelta,n=e.extend({},i.hintOffset)),o&&(n.top=O(n.top,o.y),n.left=O(n.left,o.x)),"x"===a?delete n.top:"y"===a&&delete n.left,i.hint.css(n)},_shouldIgnoreTarget:function(t){var n=this.options.ignore;return n&&e(t).is(n)},_select:function(e){this._shouldIgnoreTarget(e.event.target)||e.preventDefault()},_startClickMoveClick:function(e){this._activated=!0,this._start(e)},_start:function(t){var n=this,r=n.options,a=r.container?e(r.container):null,s=r.hint;if(this._shouldIgnoreTarget(t.touch.initialTouch)||r.holdToDrag&&!n._activated)n.userEvents.cancel();else{if(n.currentTarget=t.target,n.currentTargetOffset=f(n.currentTarget),s){n.hint&&n.hint.stop(!0,!0).remove(),n.hint=i.isFunction(s)?e(s.call(n,n.currentTarget)):s;var l=f(n.currentTarget);n.hintOffset=l,n.hint.css({position:"absolute",zIndex:2e4,left:l.left,top:l.top}).appendTo(o.body),n.angular("compile",(function(){n.hint.removeAttr("ng-repeat");for(var i=e(t.target);!i.data("$$kendoScope")&&i.length;)i=i.parent();return{elements:n.hint.get(),scopeFrom:i.data("$$kendoScope")}}))}p[r.group]=n,n.dropped=!1,a&&(n.boundaries=I(a,n.hint)),e(o).on(_,n._captureEscape),n._trigger(b,t)&&(n.userEvents.cancel(),n.clickMoveClick&&n.clickMoveClick.cancel(),n._afterEnd()),n.userEvents.capture()}},_hold:function(e){this.currentTarget=e.target,this._trigger(y,e)?this.userEvents.cancel():this._activated=!0},_drag:function(t){t.preventDefault();var n=this._elementUnderCursor(t);if(this.options.autoScroll&&this._cursorElement!==n&&(this._scrollableParent=G(n),this._cursorElement=n),this._lastEvent=t,this._processMovement(t,n),this.options.autoScroll&&this._scrollableParent[0]){var i=Q(t.x.location,t.y.location,q(this._scrollableParent));this._scrollCompenstation=e.extend({},this.hintOffset),this._scrollVelocity=i,0===i.y&&0===i.x?(clearInterval(this._scrollInterval),this._scrollInterval=null):this._scrollInterval||(this._scrollInterval=setInterval(this._autoScroll.bind(this),50))}this.hint&&this._updateHint(t)},_processMovement:function(t,i){this._withDropTarget(i,(function(i,r){if(i){if(n){if(r===n.targetElement)return;n._trigger(S,h(t,{dropTarget:e(n.targetElement)}))}i._trigger(C,h(t,{dropTarget:e(r)})),n=h(i,{targetElement:r})}else n&&(n._trigger(S,h(t,{dropTarget:e(n.targetElement)})),n=null)})),this._trigger(E,h(t,{dropTarget:n,elementUnderCursor:i}))},_autoScroll:function(){var e=this._scrollableParent[0],t=this._scrollVelocity,n=this._scrollCompenstation;if(e){var i,r,s=this._elementUnderCursor(this._lastEvent);this._processMovement(this._lastEvent,s);var l=e===F()[0];l?(i=o.body.scrollHeight>a.height(),r=o.body.scrollWidth>a.width()):(i=e.offsetHeight<=e.scrollHeight,r=e.offsetWidth<=e.scrollWidth);var c=e.scrollTop+t.y,u=i&&c>0&&c<e.scrollHeight,d=e.scrollLeft+t.x,h=r&&d>0&&d<e.scrollWidth;u?e.scrollTop+=t.y:i&&c<0&&(e.scrollTop=0),h?e.scrollLeft+=t.x:r&&d<0&&(e.scrollLeft=0),this.hint&&l&&(h||u)&&(u&&(n.top+=t.y),h&&(n.left+=t.x),this.hint.css(n))}},_end:function(t){this._withDropTarget(this._elementUnderCursor(t),(function(i,r){i&&(i._drop(h({},t,{dropTarget:e(r)})),n=null)})),clearInterval(this._scrollInterval),this._scrollInterval=null,this._cancel(this._trigger(T,t))},_onCancel:function(e){this._cancel(),this._trigger(k,{event:e})},_cancel:function(e){var t=this;t._scrollableParent=null,this._cursorElement=null,clearInterval(this._scrollInterval),t._activated=!1,t.hint&&!t.dropped?setTimeout((function(){t.hint.stop(!0,!0),e?t._afterEndHandler():t.hint.animate(t.currentTargetOffset,"fast",t._afterEndHandler)}),0):t._afterEnd()},_trigger:function(e,t){return this.trigger(e,h({},t.event,{x:t.x,y:t.y,currentTarget:this.currentTarget,initialTarget:t.touch?t.touch.initialTouch:null,dropTarget:t.dropTarget,elementUnderCursor:t.elementUnderCursor,clickMoveClick:t.clickMoveClick}))},_elementUnderCursor:function(t){var n=m(t),i=this.hint;return i&&function(t,n){try{return e.contains(t,n)||t==n}catch(e){return!1}}(i[0],n)&&(i.hide(),(n=m(t))||(n=m(t)),i.show()),n},_withDropTarget:function(t,n){var i,o=this.options.group,a=g[o],s=v[o];(a&&a.length||s&&s.length)&&(i=function(t,n,i){for(var o,a,s=0,l=n&&n.length,c=i&&i.length;t&&t.parentNode;){for(s=0;s<l;s++)if((o=n[s]).element[0]===t)return{target:o,targetElement:t};for(s=0;s<c;s++)if(a=i[s],e.contains(a.element[0],t)&&r.matchesSelector.call(t,a.options.filter))return{target:a,targetElement:t};t=t.parentNode}}(t,a,s),i?n(i.target,i.targetElement):n())},destroy:function(){var e=this;l.fn.destroy.call(e),e._afterEnd(),e.userEvents.destroy(),e.clickMoveClick&&e.clickMoveClick.destroy(),this._scrollableParent=null,this._cursorElement=null,clearInterval(this._scrollInterval),e.currentTarget=null},_afterEnd:function(){var t=this;t.hint&&t.hint.remove(),delete p[t.options.group],t.trigger("destroy"),t.trigger(M),e(o).off(_,t._captureEscape)}});function q(e){var t,n,i,r=F()[0];return e[0]===r?{top:n=r.scrollTop,left:i=r.scrollLeft,bottom:n+a.height(),right:i+a.width()}:((t=e.offset()).bottom=t.top+e.height(),t.right=t.left+e.width(),t)}function F(){return e(i.support.browser.edge||i.support.browser.safari?o.body:o.documentElement)}function G(t){var n=F();if(!t||t===o.body||t===o.documentElement)return n;for(var r=e(t)[0];r&&!i.isScrollable(r)&&r!==o.body;)r=r.parentNode;return r===o.body?n:e(r)}function Q(e,t,n){var i={x:0,y:0},r=50;return e-n.left<r?i.x=-(r-(e-n.left)):n.right-e<r&&(i.x=r-(n.right-e)),t-n.top<r?i.y=-(r-(t-n.top)):n.bottom-t<r&&(i.y=r-(n.bottom-t)),i}i.ui.plugin(V),i.ui.plugin(B),i.ui.plugin($),i.TapCapture=W,i.containerBoundaries=I,h(i.ui,{Pane:U,PaneDimensions:L,Movable:A}),i.ui.Draggable.utils={autoScrollVelocity:Q,scrollableViewPort:q,findScrollableParent:G}}(window.kendo.jQuery),kendo}));
//# sourceMappingURL=kendo.draganddrop.min.js.map
