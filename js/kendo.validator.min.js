/**
 * Copyright 2024 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("kendo.core.js")):"function"==typeof define&&define.amd?define(["exports","kendo.core.min"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).kendovalidator=e.kendovalidator||{},e.kendovalidator.js={}))}(this,(function(e){!function(e){let t=window.kendo,a=t.ui.Widget,i=".kendoValidator",r="k-invalid-msg",n=new RegExp(r,"i"),s="k-invalid",o="k-valid",l="k-validation-summary",d="k-text-error",u="k-messagebox k-messagebox-error",c="aria-invalid",m=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/i,h=["http:","https:","ftp:","ftps:"],p=":input:not(:button,[type=submit],[type=reset],[disabled],[readonly])",f=":checkbox:not([disabled],[readonly])",g="[type=number],[type=range]",v="blur",y="name",_="form",k="novalidate",b="validate",x="change",w="validateInput",C=function(e,t){return"string"==typeof t&&(t=new RegExp("^(?:"+t+")$")),t.test(e)},S=function(e,t){return!!e.length&&null!=e[0].attributes[t]};function A(t){return e.parseHTML?e(e.parseHTML(t)):e(t)}function I(a,i){for(var r,s=e(),o=0,l=a.length;o<l;o++)r=a[o],n.test(r.className)&&r.getAttribute(t.attr("for"))===i&&(s=s.add(r));return s}function M(e,t){return!!e&&("string"==typeof e.nodeName&&"LABEL"===e.nodeName&&("string"==typeof e.getAttribute("for")&&"string"==typeof t.getAttribute("id")&&e.getAttribute("for")===t.getAttribute("id")))}t.ui.validator||(t.ui.validator={rules:{},messages:{},allowSubmit:e.noop,validateOnInit:e.noop});var V=({errors:e})=>{let t="<ul>";for(var a=0;a<e.length;a+=1)t+=`<li><a data-field="${e[a].field}" href="#">${e[a].message}</a></li>`;return t+="</ul>",t},E=a.extend({init:function(i,r){var n=this,s=function(a){var i,r=t.ui.validator.ruleResolvers||{},n={};for(i in r)e.extend(!0,n,r[i].resolve(a));return n}(i),o="["+t.attr("validate")+"!=false]";(r=r||{}).rules=e.extend({},t.ui.validator.rules,s.rules,r.rules),r.messages=e.extend({},t.ui.validator.messages,s.messages,r.messages),a.fn.init.call(n,i,r),n._errorTemplate=t.template(n.options.errorTemplate),n._summaryTemplate=t.template(n.options.validationSummary.template||V),n.element.is(_)&&n.element.attr(k,k),n._inputSelector=p+o,n._checkboxSelector=f+o,n._errors={},n._attachEvents(),n._isValidated=!1,n._validateOnInit()&&n.validate()},events:[b,x,w],options:{name:"Validator",errorTemplate:({message:e})=>`<span class="k-form-error">${e}</span>`,messages:{required:"{0} is required",pattern:"{0} is not valid",min:"{0} should be greater than or equal to {1}",max:"{0} should be smaller than or equal to {1}",step:"{0} is not valid",email:"{0} is not valid email",url:"{0} is not valid URL",date:"{0} is not valid date",dateCompare:"End date should be greater than or equal to the start date",captcha:"The text you entered doesn't match the image."},rules:{required:function(e){var t=!e.attr("name")&&!e.is(":checked"),a=e.attr("name"),i=a&&a.indexOf("'")>-1?'"':"'",r=e.attr("name")&&!this.element.find("input[name="+i+e.attr("name")+i+"]:checked").length,n=e.filter("[type=checkbox]").length&&(t||r),s=e.filter("[type=radio]").length&&!this.element.find("input[name="+i+e.attr("name")+i+"]:checked").length,o=e.val();return!(S(e,"required")&&(!o||""===o||0===o.length||n||s))},pattern:function(e){return!e.filter("[type=text],[type=email],[type=url],[type=tel],[type=search],[type=password]").filter("[pattern]").length||""===e.val()||C(e.val(),e.attr("pattern"))},min:function(e){return!e.filter(g+",["+t.attr("type")+"=number]").filter("[min]").length||""===e.val()||(parseFloat(e.attr("min"))||0)<=t.parseFloat(e.val())},max:function(e){return!e.filter(g+",["+t.attr("type")+"=number]").filter("[max]").length||""===e.val()||(parseFloat(e.attr("max"))||0)>=t.parseFloat(e.val())},step:function(e){if(e.filter(g+",["+t.attr("type")+"=number]").filter("[step]").length&&""!==e.val()){var a,i=parseFloat(e.attr("min"))||0,r=t.parseFloat(e.attr("step"))||1,n=parseFloat(e.val()),s=(o=((o=r)+"").split(".")).length>1?o[1].length:0;return s?(a=Math.pow(10,s),Math.floor((n-i)*a)%(r*a)/Math.pow(100,s)==0):(n-i)%r==0}var o;return!0},email:function(e){return function(e,t,a){var i=e.val();return!e.filter(t).length||""===i||C(i,a)}(e,"[type=email],["+t.attr("type")+"=email]",m)},url:function(e){if(e.filter("[type=url],["+t.attr("type")+"=url]").length&&""!==e.val())try{const t=new URL(e.val());return h.includes(t.protocol)}catch{return!1}return!0},date:function(e){return!e.filter("[type^=date],["+t.attr("type")+"=date]").length||""===e.val()||null!==t.parseDate(e.val(),e.attr(t.attr("format")))},captcha:function(e){if(e.filter("["+t.attr("role")+"=captcha]").length){var a=this,i=t.widgetInstance(e),r=function(e){return null!=e};if(e.data("captcha_validating")||r(i.isValid())||!i.getCaptchaId()||(e.data("captcha_validating",!0),a._validating=!0,i.validate().done((function(){a._validating=!1,a._checkElement(e)})).fail((function(e){a._validating=!1,e.error&&"handler_not_defined"===e.error&&window.console.warn("Captcha's validationHandler is not defined! You should either define a proper validation endpoint or declare a callback function to ensure the required behavior.")}))),r(i.isValid()))return e.removeData("captcha_validating"),i.isValid()}return!0}},validateOnBlur:!0,validationSummary:!1},_allowSubmit:function(){return t.ui.validator.allowSubmit(this.element,this.errors())},_validateOnInit:function(){return t.ui.validator.validateOnInit(this.element)},destroy:function(){a.fn.destroy.call(this),this.element.off(i),this.validationSummary&&(this.validationSummary.off(i),this.validationSummary=null)},value:function(){return!!this._isValidated&&0===this.errors().length},_submit:function(e){return!(!this.validate()&&!this._allowSubmit()||this._validating)||(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),!1)},_checkElement:function(e){var t=this.value();this.validateInput(e),this.value()!==t&&this.trigger(x)},_attachEvents:function(){var t=this;t.element.is(_)&&t.element.on("submit"+i,t._submit.bind(t)),t.options.validateOnBlur&&(t.element.is(p)?(t.element.on(v+i,(function(){t._checkElement(t.element)})),t.element.is(f)&&t.element.on("click"+i,(function(){t._checkElement(t.element)}))):(t.element.on(v+i,t._inputSelector,(function(){t._checkElement(e(this))})),t.element.on("click"+i,t._checkboxSelector,(function(){t._checkElement(e(this))}))))},validate:function(){var e,t,a,i=!1,r=this.value();if(this._errors={},this.element.is(p))i=this.validateInput(this.element);else{var n=!1;for(t=0,a=(e=this.element.find(this._inputSelector)).length;t<a;t++)this.validateInput(e.eq(t))||(n=!0);i=!n}return this.options.validationSummary&&!r&&this.showValidationSummary(),this.trigger(b,{valid:i,errors:this.errors()}),r!==i&&this.trigger(x),i},validateInput:function(a){a=e(a),this._isValidated=!0;var i,n,l=this,u=l._errorTemplate,m=l._checkValidity(a),h=m.valid,p="."+r,f=a.attr(y)||"",g=l._findMessageContainer(f).add(a.next(p).filter((function(){var a=e(this);return!a.filter("["+t.attr("for")+"]").length||a.attr(t.attr("for"))===f}))).addClass("k-hidden"),v=h?"":l._extractMessage(a,m.key),_=h?"":A(u({message:(n=v,n.replace(/&amp/g,"&amp;").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">")),field:f})),k=!a.attr(c),b=a.is(".k-input-inner"),x=a.parent(".k-input");if(a.removeAttr(c),a.hasClass("k-hidden")&&(i=t.widgetInstance(a.closest(".k-signature"))),a.is("[type=radio]")&&(i=t.widgetInstance(a.closest(".k-radio-list"))),a.is("[type=checkbox]")&&(i=t.widgetInstance(a.closest(".k-checkbox-list"))),h||a.data("captcha_validating"))delete l._errors[f];else{l._errors[f]=v;var C=g.attr("id");if(l._decorateMessageContainer(_,f),C&&_.attr("id",C),0!==g.length)g.replaceWith(_);else{i=i||t.widgetInstance(a);var S=a.parent().get(0),I=a.next().get(0),V=a.prev().get(0);!i&&a.is("[type=radio]")&&(i=t.widgetInstance(a.closest(".k-radio-list"))),!i&&a.is("[type=checkbox]")&&(i=t.widgetInstance(a.closest(".k-checkbox-list"))),i&&i.wrapper&&(i.element!==i.wrapper||["Signature","RadioGroup","CheckBoxGroup"].indexOf(i.options.name)>-1)?_.insertAfter(i.wrapper):S&&"LABEL"===S.nodeName?_.insertAfter(S):I&&M(I,a[0])?_.insertAfter(I):V&&M(V,a[0])?_.insertAfter(a):b&&x.length?_.insertAfter(x):_.insertAfter(a)}_.removeClass("k-hidden"),a.attr(c,!0)}if(k!==h&&this.trigger(w,{valid:h,input:a,error:v,field:f}),(!(i=i&&"Signature"==i.options.name?i:t.widgetInstance(a))||!i._inputWrapper&&!i.wrapper||a.is("[type=checkbox]")||a.is("[type=radio]"))&&(a.toggleClass(s,!h),a.toggleClass(o,h)),i){var E=i._inputWrapper||i.wrapper,T=i._inputLabel;!E||a.is("[type=checkbox]")||a.is("[type=radio]")||(E.toggleClass(s,!h),E.toggleClass(o,h)),T&&T.toggleClass(d,!h)}if(k!==h){var O=_?_.attr("id"):g.attr("id");l._associateMessageContainer(a,O),this.options.validationSummary&&this.options.validateOnBlur&&this.showValidationSummary()}return h},hideMessages:function(){var e="."+r,t=this.element;this._disassociateMessageContainers(),t.is(p)?t.next(e).addClass("k-hidden"):t.find(e).addClass("k-hidden")},reset:function(){var e=this,t=e.element.find("."+s),a=e.element.find("."+d);e._errors=[],e.hideMessages(),e.hideValidationSummary(),t.removeAttr(c),t.removeClass(s),a.removeClass(d)},_findMessageContainer:function(a){for(var i,r=t.ui.validator.messageLocators,n=e(),s=0,o=this.element.length;s<o;s++)n=n.add(I(this.element[s].getElementsByTagName("*"),a));for(i in r)n=n.add(r[i].locate(this.element,a));return n},_decorateMessageContainer:function(e,a){var i,n=t.ui.validator.messageLocators;for(i in e.addClass(r).attr(t.attr("for"),a||""),e.attr("id")||e.attr("id",a+"-error"),n)n[i].decorate(e,a)},_extractMessage:function(e,a){var i,r=this.options.messages[a],n=e.attr(y);return t.ui.Validator.prototype.options.messages[a]||(i=t.isFunction(r)?r(e):r),r=t.isFunction(r)?r(e):r,t.format(e.attr(t.attr(a+"-msg"))||e.attr("validationMessage")||i||r||e.attr("title")||"",n,e.attr(a)||e.attr(t.attr(a)))},_checkValidity:function(e){var t,a=this.options.rules;for(t in a)if(!a[t].call(this,e))return{valid:!1,key:t};return{valid:!0}},errors:function(){var e,t=[],a=this._errors;for(e in a)t.push(a[e]);return t},setOptions:function(e){e.validationSummary&&this.hideValidationSummary(),t.deepExtend(this.options,e),this.destroy(),this.init(this.element,this.options),this._setEvents(this.options)},_getInputNames:function(){for(var t=this.element.find(this._inputSelector),a=[],i=0,r=t.length;i<r;i++){var n=e(t[i]);S(n,y)&&(-1===a.indexOf(n.attr(y))||0===n.closest(".k-checkbox-list").length&&0===n.closest(".k-radio-list").length)&&a.push(n.attr(y))}return a},_associateMessageContainer:function(e,a){var i=t.getWidgetFocusableElement(e);i&&a&&t.toggleAttribute(i,"aria-describedby",a)},_disassociateMessageContainers:function(){for(var t,a,i=this,n=i.element.find("."+s).addBack(),o=0;o<n.length;o+=1)(t=e(n[o])).is("input")&&(a=i._findMessageContainer(t.attr(y)).add(t.next("."+r)).attr("id"),i._associateMessageContainer(t,a))},_errorsByName:function(){for(var e=this,t=e._getInputNames(),a=[],i=0;i<t.length;i+=1){var r=t[i];e._errors[r]&&a.push({field:r,message:e._errors[r]})}return a},_renderSummary:function(){var t,a=this,r=this.options.validationSummary,n=this.element.prev();return(t=r.container?e(r.container):n&&n.hasClass(l)?n:e("<div />").insertBefore(a.element)).addClass([l,u].join(" ")),t.attr("role","alert"),t.on("click"+i,a._summaryClick.bind(a)),t},_summaryClick:function(a){a.preventDefault();var i,r=e(a.target),n=this.element.find("[name='"+r.data("field")+"']");n.length&&(i=t.getWidgetFocusableElement(n))&&i.trigger("focus")},showValidationSummary:function(){var e,t=this,a=t.validationSummary,i=t._errorsByName();a||(a=t.validationSummary=t._renderSummary()),e=A(t._summaryTemplate({errors:i})),a.html(e),a.toggleClass("k-hidden",!i.length)},hideValidationSummary:function(){var e=this.validationSummary;e&&e.addClass("k-hidden")}});t.ui.plugin(E)}(window.kendo.jQuery);var t=kendo;e.__meta__={id:"validator",name:"Validator",category:"web",description:"The Validator offers an easy way to do a client-side form validation.",depends:["core"]},e.default=t,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=kendo.validator.min.js.map
