/**
 * Copyright 2023 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("kendo.core.js"),require("kendo.fx.js"),require("kendo.mobile.scroller.js"),require("kendo.view.js")):"function"==typeof define&&define.amd?define(["kendo.core.min","kendo.fx.min","kendo.mobile.scroller.min","kendo.view.min"],t):((e="undefined"!=typeof globalThis?globalThis:e||self).kendomobile=e.kendomobile||{},e.kendomobile.view=e.kendomobile.view||{},e.kendomobile.view.js=t())}(this,(function(){return function(e,t){var i=window.kendo,o=i.mobile,n=o.ui,r=i.attr,s=n.Widget,a=i.ViewClone,l="init",h="beforeShow",d="show",c="afterShow",u="beforeHide",p="transitionEnd",f="transitionStart",g="hide",m="destroy",v=i.attrValue,w=i.roleSelector,y=i.directiveSelector,_=i.compileMobileDirective;function b(e){var t,o,r=e.find(w("popover")),s=n.roles;for(t=0,o=r.length;t<o;t++)i.initWidget(r[t],{},s)}function k(e){i.triggeredByInput(e)||e.preventDefault()}var x=s.extend({init:function(t,i){s.fn.init.call(this,t,i),this.params={},e.extend(this,i),this.transition=this.transition||this.defaultTransition,this._id(),this.options.$angular?this._overlay():(this._layout(),this._overlay(),this._scroller(),this._model())},events:[l,h,d,c,u,g,m,f,p],options:{name:"View",title:"",layout:null,getLayout:e.noop,reload:!1,transition:"",defaultTransition:"",useNativeScrolling:!1,stretch:!1,zoom:!1,model:null,modelScope:window,scroller:{},initWidgets:!0},enable:function(e){void 0===e&&(e=!0),e?this.overlay.hide():this.overlay.show()},destroy:function(){this.layout&&this.layout.detach(this),this.trigger(m),s.fn.destroy.call(this),this.scroller&&this.scroller.destroy(),this.options.$angular&&this.element.scope().$destroy(),i.destroy(this.element)},purge:function(){this.destroy(),this.element.remove()},triggerBeforeShow:function(){return!this.trigger(h,{view:this})},triggerBeforeHide:function(){return!this.trigger(u,{view:this})},showStart:function(){var e=this.element;e.css("display",""),this.inited?this._invokeNgController():(this.inited=!0,this.trigger(l,{view:this})),this.layout&&this.layout.attach(this),this._padIfNativeScrolling(),this.trigger(d,{view:this}),i.resize(e)},showEnd:function(){this.trigger(c,{view:this}),this._padIfNativeScrolling()},hideEnd:function(){var e=this;e.element.hide(),e.trigger(g,{view:e}),e.layout&&e.layout.trigger(g,{view:e,layout:e.layout})},beforeTransition:function(e){this.trigger(f,{type:e})},afterTransition:function(e){this.trigger(p,{type:e})},_padIfNativeScrolling:function(){if(o.appLevelNativeScrolling()){var e=i.support.mobileOS&&i.support.mobileOS.android,t=o.application.skin()||"",n=o.application.os.android||t.indexOf("android")>-1,r="flat"===t||t.indexOf("material")>-1,s=!e&&!n||r?"header":"footer",a=!e&&!n||r?"footer":"header";this.content.css({paddingTop:this[s].height(),paddingBottom:this[a].height()})}},contentElement:function(){var e=this;return e.options.stretch?e.content:e.scrollerContent},clone:function(){return new a(this)},_scroller:function(){var t=this;o.appLevelNativeScrolling()||(t.options.stretch?t.content.addClass("km-stretched-view"):(t.content.kendoMobileScroller(e.extend(t.options.scroller,{zoom:t.options.zoom,useNative:t.options.useNativeScrolling})),t.scroller=t.content.data("kendoMobileScroller"),t.scrollerContent=t.scroller.scrollElement),i.support.kineticScrollNeeded&&(e(t.element).on("touchmove",".km-header",k),t.options.useNativeScrolling||t.options.stretch||e(t.element).on("touchmove",".km-content",k)))},_model:function(){var e=this,t=e.element,r=e.options.model;"string"==typeof r&&(r=i.getter(r)(e.options.modelScope)),e.model=r,b(t),e.element.css("display",""),e.options.initWidgets&&(r?i.bind(t,r,n,i.ui,i.dataviz.ui):o.init(t.children())),e.element.css("display","none")},_id:function(){var e=this.element,t=e.attr("id")||"";this.id=v(e,"url")||"#"+t,"#"==this.id&&(this.id=i.guid(),e.attr("id",this.id))},_layout:function(){var e=w("content"),t=this.element;t.addClass("km-view"),this.header=t.children(w("header")).addClass("km-header"),this.footer=t.children(w("footer")).addClass("km-footer"),t.children(e)[0]||t.wrapInner("<div "+r("role")+'="content"></div>'),this.content=t.children(w("content")).addClass("km-content"),this.element.prepend(this.header).append(this.footer),this.layout=this.options.getLayout(this.layout),this.layout&&this.layout.setup(this)},_overlay:function(){this.overlay=e('<div style="height: 100%; width: 100%; position: absolute; top: 0; left: 0; z-index: 20000; display: none"></div>').appendTo(this.element)},_invokeNgController:function(){var e,t;if(this.options.$angular&&(e=this.element.controller(),t=this.options.$angular[0],e)){var i=this._callController.bind(this,e,t);/^\$(digest|apply)$/.test(t.$$phase)?i():t.$apply(i)}},_callController:function(e,t){this.element.injector().invoke(e.constructor,e,{$scope:t})}});function S(t){t.each((function(){i.initWidget(e(this),{},n.roles)}))}var V=s.extend({init:function(e,t){s.fn.init.call(this,e,t),e=this.element,this.header=e.children(this._locate("header")).addClass("km-header"),this.footer=e.children(this._locate("footer")).addClass("km-footer"),this.elements=this.header.add(this.footer),b(e),this.options.$angular||i.mobile.init(this.element.children()),this.element.detach(),this.trigger(l,{layout:this})},_locate:function(e){return this.options.$angular?y(e):w(e)},options:{name:"Layout",id:null,platform:null},events:[l,d,g],setup:function(e){e.header[0]||(e.header=this.header),e.footer[0]||(e.footer=this.footer)},detach:function(e){var t=this;e.header===t.header&&t.header[0]&&e.element.prepend(t.header.detach()[0].cloneNode(!0)),e.footer===t.footer&&t.footer.length&&e.element.append(t.footer.detach()[0].cloneNode(!0))},attach:function(e){var t=this,i=t.currentView;i&&t.detach(i),e.header===t.header&&(t.header.detach(),e.element.children(w("header")).remove(),e.element.prepend(t.header)),e.footer===t.footer&&(t.footer.detach(),e.element.children(w("footer")).remove(),e.element.append(t.footer)),t.trigger(d,{layout:t,view:e}),t.currentView=e}}),C=i.Observable,$=/<body[^>]*>(([\u000a\u000d\u2028\u2029]|.)*)<\/body>/i,L="loadStart",N="loadComplete",T="showStart",E="sameViewRequested",j="viewShow",I="viewTypeDetermined",O="after",R=C.extend({init:function(t){var o,n,r,s,a=this;if(C.fn.init.call(a),e.extend(a,t),a.sandbox=e("<div />"),r=a.container,o=a._hideViews(r),a.rootView=o.first(),!a.rootView[0]&&t.rootNeeded)throw n=r[0]==i.mobile.application.element[0]?'Your kendo mobile application element does not contain any direct child elements with data-role="view" attribute set. Make sure that you instantiate the mobile application using the correct container.':'Your pane element does not contain any direct child elements with data-role="view" attribute set.',new Error(n);a.layouts={},a.viewContainer=new i.ViewContainer(a.container),a.viewContainer.bind("accepted",(function(e){e.view.params=a.params})),a.viewContainer.bind("complete",(function(e){a.trigger(j,{view:e.view})})),a.viewContainer.bind(O,(function(){a.trigger(O)})),this.getLayoutProxy=this._getLayout.bind(this),a._setupLayouts(r),s=r.children(a._locate("modalview drawer")),a.$angular?(a.$angular[0].viewOptions={defaultTransition:a.transition,loader:a.loader,container:a.container,getLayout:a.getLayoutProxy},s.each((function(i,o){_(e(o),t.$angular[0])}))):S(s),this.bind(this.events,t)},events:[T,O,j,L,N,E,I],destroy:function(){for(var e in i.destroy(this.container),this.layouts)this.layouts[e].destroy()},view:function(){return this.viewContainer.view},showView:function(e,t,o){if(""===(e=e.replace(new RegExp("^"+this.remoteViewURLPrefix),""))&&this.remoteViewURLPrefix&&(e="/"),e.replace(/^#/,"")===this.url)return this.trigger(E),!1;this.trigger(T);var n=this,r=function(i){return n.viewContainer.show(i,t,e)},s=n._findViewElement(e),a=i.widgetInstance(s);return n.url=e.replace(/^#/,""),n.params=o,a&&a.reload&&(a.purge(),s=[]),this.trigger(I,{remote:0===s.length,url:e}),s[0]?(a||(a=n._createView(s)),r(a)):(this.serverNavigation?location.href=e:n._loadView(e,r),!0)},append:function(e,t){var i,o,n,s=this.sandbox,a=(t||"").split("?")[0],l=this.container;return $.test(e)&&(e=RegExp.$1),s[0].innerHTML=e,l.append(s.children("script, style")),(n=(i=this._hideViews(s)).first()).length||(i=n=s.wrapInner("<div data-role=view />").children()),a&&n.hide().attr(r("url"),a),this._setupLayouts(s),o=s.children(this._locate("modalview drawer")),l.append(s.children(this._locate("layout modalview drawer")).add(i)),S(o),this._createView(n)},_locate:function(e){return this.$angular?y(e):w(e)},_findViewElement:function(e){var t,i=e.split("?")[0];return i?((t=this.container.children("["+r("url")+"='"+i+"']"))[0]||-1!==i.indexOf("/")||(t=this.container.children("#"===i.charAt(0)?i:"#"+i)),t):this.rootView},_createView:function(e){return this.$angular?_(e,this.$angular[0]):i.initWidget(e,{defaultTransition:this.transition,loader:this.loader,container:this.container,getLayout:this.getLayoutProxy,modelScope:this.modelScope,reload:v(e,"reload")},n.roles)},_getLayout:function(e){return""===e?null:e?this.layouts[e]:this.layouts[this.layout]},_loadView:function(t,o){this._xhr&&this._xhr.abort(),this.trigger(L),this._xhr=e.get(i.absoluteURL(t,this.remoteViewURLPrefix),"html").always(this._xhrComplete.bind(this,o,t))},_xhrComplete:function(e,t,i){var o=!0;if("object"==typeof i&&0===i.status){if(!(i.responseText&&i.responseText.length>0))return;o=!0,i=i.responseText}this.trigger(N),o&&e(this.append(i,t))},_hideViews:function(e){return e.children(this._locate("view splitview")).hide()},_setupLayouts:function(t){var r,s=this;t.children(s._locate("layout")).each((function(){var t=(r=s.$angular?_(e(this),s.$angular[0]):i.initWidget(e(this),{},n.roles)).options.platform;t&&t!==o.application.os.name?r.destroy():s.layouts[r.options.id]=r}))}});i.mobile.ViewEngine=R,n.plugin(x),n.plugin(V)}(window.kendo.jQuery),kendo}));
//# sourceMappingURL=kendo.mobile.view.min.js.map
