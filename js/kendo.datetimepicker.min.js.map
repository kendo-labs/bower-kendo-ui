{"version":3,"file":"kendo.datetimepicker.min.js","sources":["kendo.datetimepicker.js"],"sourcesContent":["(function(f, define){\n    define('kendo.datetimepicker',[ \"kendo.datepicker\", \"kendo.timepicker\", \"kendo.html.button\"], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"datetimepicker\",\n    name: \"DateTimePicker\",\n    category: \"web\",\n    description: \"The DateTimePicker allows the end user to select a value from a calendar or a time drop-down list.\",\n    depends: [ \"datepicker\", \"timepicker\" ]\n};\n\n(function($, undefined) {\n\n    var kendo = window.kendo,\n        TimeView = kendo.TimeView,\n        html = kendo.html,\n        parse = kendo.parseDate,\n        support = kendo.support,\n        activeElement = kendo._activeElement,\n        extractFormat = kendo._extractFormat,\n        calendar = kendo.calendar,\n        isInRange = calendar.isInRange,\n        restrictValue = calendar.restrictValue,\n        isEqualDatePart = calendar.isEqualDatePart,\n        getMilliseconds = TimeView.getMilliseconds,\n        ui = kendo.ui,\n        Widget = ui.Widget,\n        OPEN = \"open\",\n        CLOSE = \"close\",\n        CHANGE = \"change\",\n        ns = \".kendoDateTimePicker\",\n        CLICK = \"click\" + ns,\n        UP = support.mouseAndTouchPresent ? kendo.applyEventMap(\"up\", ns.slice(1)) : CLICK,\n        DISABLED = \"disabled\",\n        READONLY = \"readonly\",\n        FOCUSED = \"k-focus\",\n        HOVER = \"k-hover\",\n        STATEDISABLED = \"k-disabled\",\n        HOVEREVENTS = \"mouseenter\" + ns + \" mouseleave\" + ns,\n        MOUSEDOWN = \"mousedown\" + ns,\n        MONTH = \"month\",\n        SPAN = \"<span/>\",\n        ARIA_ACTIVEDESCENDANT = \"aria-activedescendant\",\n        ARIA_EXPANDED = \"aria-expanded\",\n        ARIA_HIDDEN = \"aria-hidden\",\n        ARIA_OWNS = \"aria-owns\",\n        ARIA_DISABLED = \"aria-disabled\",\n        ARIA_READONLY = \"aria-readonly\",\n        DATE = Date,\n        MIN = new DATE(1800, 0, 1),\n        MAX = new DATE(2099, 11, 31),\n        dateViewParams = { view: \"date\" },\n        timeViewParams = { view: \"time\" },\n        extend = $.extend,\n        SINGLE_POPUP_TEMPLATE = '<div class=\"k-date-tab k-datetime-wrap\">' +\n                                    '<div class=\"k-datetime-buttongroup\">'+\n                                        '<div class=\"k-button-group k-button-group-stretched\">'+\n                                            '<button class=\"k-button #=buttonSize# k-rounded-md k-button-solid k-button-solid-base k-selected k-group-start\">' +\n                                                '<span class=\"k-button-text\">#=messages.date#</span>' +\n                                            '</button>'+\n                                            '<button class=\"k-button #=buttonSize# k-rounded-md k-button-solid k-button-solid-base k-group-end\">' +\n                                                '<span class=\"k-button-text\">#=messages.time#</span>' +\n                                            '</button>'+\n                                        '</div>'+\n                                    '</div>'+\n                                    '<div class=\"k-datetime-selector\">'+\n                                        '<div class=\"k-datetime-calendar-wrap\">'+\n                                        '</div>'+\n                                        '<div class=\"k-datetime-time-wrap\">'+\n                                        '</div>'+\n                                    '</div>'+\n                                    '<div class=\"k-datetime-footer k-action-buttons\">'+\n                                        '<button class=\"k-button #=buttonSize# k-rounded-md k-button-solid k-button-solid-base k-time-cancel\" title=\"Cancel\" aria-label=\"Cancel\">' +\n                                            '<span class=\"k-button-text\">#=messages.cancel#</span>' +\n                                        '</button>'+\n                                        '<button class=\"k-time-accept k-button #=buttonSize# k-rounded-md k-button-solid k-button-solid-primary\" title=\"Set\" aria-label=\"Set\">' +\n                                            '<span class=\"k-button-text\">#=messages.set#</span>' +\n                                        '</button>'+\n                                    '</div>'+\n                                '</div>',\n        STATE_SELECTED = \"k-selected\";\n\n    var DateTimePicker = Widget.extend({\n        init: function(element, options) {\n            var that = this, disabled, initialValue;\n\n            options = options || {};\n            options.componentType = options.componentType || \"classic\";\n            Widget.fn.init.call(that, element, options);\n\n            element = that.element;\n            options = that.options;\n\n            options.disableDates = kendo.calendar.disabled(options.disableDates);\n            options.min = parse(element.attr(\"min\")) || parse(options.min);\n            options.max = parse(element.attr(\"max\")) || parse(options.max);\n\n            if (+options.max != +MAX || +options.min != +MIN) {\n                this._specifiedRange = true;\n            }\n\n            normalize(options);\n\n            that._initialOptions = extend({}, options);\n\n            that._wrapper();\n\n            if(options.singlePopup){\n                that._popup();\n            }\n\n            that._views();\n\n            that._icons();\n\n            that._reset();\n            that._template();\n\n            try {\n                element[0].setAttribute(\"type\", \"text\");\n            } catch(e) {\n                element[0].type = \"text\";\n            }\n\n            element.addClass(\"k-input-inner\")\n                   .attr({\n                       \"role\": \"combobox\",\n                       \"aria-expanded\": false,\n                       \"autocomplete\": \"off\"\n                   });\n\n\n            that._midnight = that._calculateMidnight(options.min, options.max);\n\n            disabled = element.is(\"[disabled]\") || $(that.element).parents(\"fieldset\").is(':disabled');\n            if (disabled) {\n                that.enable(false);\n            } else {\n                that.readonly(element.is(\"[readonly]\"));\n            }\n\n            initialValue = parse(options.value || that.element.val(), options.parseFormats, options.culture);\n\n            that._createDateInput(options);\n\n            that._old = that._update(initialValue || that.element.val());\n            that._oldText = element.val();\n            that._applyCssClasses();\n\n            kendo.notify(that);\n        },\n\n        options: {\n            name: \"DateTimePicker\",\n            value: null,\n            format: \"\",\n            timeFormat: \"\",\n            culture: \"\",\n            parseFormats: [],\n            dates: [],\n            disableDates: null,\n            min: new DATE(MIN),\n            max: new DATE(MAX),\n            interval: 30,\n            height: 200,\n            footer: \"\",\n            start: MONTH,\n            depth: MONTH,\n            animation: {},\n            month : {},\n            ARIATemplate: 'Current focused #=data.valueType# is #=data.text#',\n            dateButtonText: \"Open the date view\",\n            timeButtonText: \"Open the time view\",\n            dateInput: false,\n            weekNumber: false,\n            messages: {\n                set: \"Set\",\n                cancel: \"Cancel\",\n                hour: \"hour\",\n                minute: \"minute\",\n                second: \"second\",\n                millisecond: \"millisecond\",\n                now: \"Now\",\n                date: \"Date\",\n                time: \"Time\",\n                today: \"Today\",\n                weekColumnHeader: \"\"\n            },\n            componentType: \"classic\",\n            size: \"medium\",\n            fillMode: \"solid\",\n            rounded: \"medium\"\n        },\n\n        events: [\n            OPEN,\n            CLOSE,\n            CHANGE\n        ],\n\n        componentTypes: {\n            \"classic\": {\n                singlePopup: false,\n                timeView: {\n                    list: \"list\"\n                }\n            },\n            \"modern\": {\n                singlePopup: true,\n                timeView: {\n                    list: \"scroll\"\n                }\n            }\n        },\n\n        setOptions: function(options) {\n            var that = this,\n                value = that._value,\n                min, max, currentValue;\n\n            Widget.fn.setOptions.call(that, options);\n\n            options = that.options;\n\n            options.min = min = parse(options.min);\n            options.max = max = parse(options.max);\n\n            normalize(options);\n\n            that._midnight = that._calculateMidnight(options.min, options.max);\n\n            currentValue = options.value || that._value || that.dateView._current;\n\n            if (min && !isEqualDatePart(min, currentValue)) {\n                min = new DATE(MIN);\n            }\n\n            if (max && !isEqualDatePart(max, currentValue)) {\n                max = new DATE(MAX);\n            }\n\n            that._dateIcon.off(ns);\n            that._dateIcon.remove();\n            that._timeIcon.off(ns);\n            that._timeIcon.remove();\n\n            that.dateView.setOptions(options);\n\n            that.timeView.setOptions(extend({}, options, {\n                format: options.timeFormat,\n                min: min,\n                max: max\n            }));\n\n            that._icons();\n            that._editable(options);\n            that._createDateInput(options);\n\n            if (!that._dateInput) {\n                that.element.val(kendo.toString(value, options.format, options.culture));\n            }\n\n            if (value) {\n                that._updateARIA(value);\n            }\n        },\n\n        _editable: function(options) {\n            var that = this,\n                element = that.element.off(ns),\n                dateIcon = that._dateIcon.off(ns),\n                timeIcon = that._timeIcon.off(ns),\n                wrapper = that.wrapper.off(ns),\n                readonly = options.readonly,\n                disable = options.disable;\n\n            if (!readonly && !disable) {\n                wrapper\n                    .removeClass(STATEDISABLED)\n                    .on(HOVEREVENTS, that._toggleHover);\n                if(element && element.length) {\n                    element[0].removeAttribute(DISABLED);\n                    element[0].removeAttribute(READONLY, false);\n                    element[0].removeAttribute(ARIA_DISABLED, false);\n                    element[0].removeAttribute(ARIA_READONLY, false);\n                }\n                element.on(\"keydown\" + ns, that._keydown.bind(that))\n                       .on(\"focus\" + ns, function() {\n                           that.wrapper.addClass(FOCUSED);\n                       })\n                       .on(\"focusout\" + ns, function() {\n                           that.wrapper.removeClass(FOCUSED);\n                           if (element.val() !== that._oldText) {\n                               that._change(element.val());\n                               if (!element.val()) {\n                                   that.dateView.current(kendo.calendar.getToday());\n                               }\n                           }\n                           if (that.options.singlePopup) {\n                               return;\n                           }\n                           that.close(\"date\");\n                           that.close(\"time\");\n                       });\n\n               dateIcon.on(MOUSEDOWN, preventDefault)\n                        .on(UP, function(e) {\n                            that.toggle(\"date\");\n                            that._focusElement(e.type);\n                        });\n\n               timeIcon.on(MOUSEDOWN, preventDefault)\n                        .on(UP, function(e) {\n                            that.toggle(\"time\");\n                            that._focusElement(e.type);\n                        });\n\n            } else {\n                wrapper\n                    .addClass(disable ? STATEDISABLED : \"\")\n                    .removeClass(disable ? \"\" : STATEDISABLED);\n\n                element.attr(DISABLED, disable)\n                       .attr(READONLY, readonly)\n                       .attr(ARIA_DISABLED, disable)\n                       .attr(ARIA_READONLY, readonly);\n            }\n        },\n\n        _focusElement: function(eventType) {\n            var element = this.element;\n\n            if ((!support.touch || (support.mouseAndTouchPresent && !(eventType || \"\").match(/touch/i))) && element[0] !== activeElement()) {\n                element.trigger(\"focus\");\n            }\n        },\n\n        readonly: function(readonly) {\n            this._editable({\n                readonly: readonly === undefined ? true : readonly,\n                disable: false\n            });\n        },\n\n        enable: function(enable) {\n            this._editable({\n                readonly: false,\n                disable: !(enable = enable === undefined ? true : enable)\n            });\n        },\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n            that.dateView.destroy();\n            that.timeView.destroy();\n\n            if (that.options.singlePopup) {\n                that.popup.element.off(ns);\n                that.popup.destroy();\n            }\n\n            that.element.off(ns);\n            that._dateIcon.off(ns);\n            that._timeIcon.off(ns);\n            that.wrapper.off(ns);\n\n            if (that._form) {\n                that._form.off(\"reset\", that._resetHandler);\n            }\n        },\n\n        close: function(view) {\n            var that = this;\n\n            if (that.options.singlePopup) {\n                that.popup.close();\n            } else {\n                if (view !== \"time\") {\n                    view = \"date\";\n                }\n\n                that[view + \"View\"].close();\n            }\n\n            setTimeout(function() {\n                that.element.removeAttr(\"aria-activedescendant\");\n            });\n        },\n\n        open: function(view) {\n            var that = this;\n            var popupHovered;\n\n            if (that.options.singlePopup) {\n\n                that.dateView._calendar();\n\n                if (that.timeView.ul.find(\"li\").length < 1) {\n                    that.timeView.bind();\n                }\n\n                // In some cases when the popup is opened resize is triggered which will cause it to close\n                // Setting the below flag will prevent this from happening\n                // Reference: https://github.com/telerik/kendo/pull/7553\n                popupHovered = that.popup._hovered;\n                that.popup._hovered = true;\n\n                that.popup.open();\n\n                if (view === \"time\") {\n                    that._switchToTimeView();\n                } else {\n                    that._switchToDateView();\n                }\n\n                this._dateIcon.toggle(view !== \"time\");\n                this._timeIcon.toggle(view === \"time\");\n\n                setTimeout(function() {\n                    that.popup._hovered = popupHovered;\n                }, 1);\n\n            } else {\n                if (view !== \"time\") {\n                    view = \"date\";\n                }\n\n                this[view + \"View\"].open();\n            }\n        },\n\n        min: function(value) {\n            return this._option(\"min\", value);\n        },\n\n        max: function(value) {\n            return this._option(\"max\", value);\n        },\n\n        toggle: function(view) {\n            if (this.options.singlePopup) {\n                if (this.popup.visible()) {\n                    this.close();\n                } else {\n                    this.open(view);\n                }\n            } else {\n                var secondView = \"timeView\";\n\n                if (view !== \"time\") {\n                    view = \"date\";\n                } else {\n                    secondView = \"dateView\";\n                }\n\n                this[view + \"View\"].toggle();\n                this[secondView].close();\n            }\n\n        },\n\n        value: function(value) {\n            var that = this;\n\n            if (value === undefined) {\n                return that._value;\n            }\n\n            that._old = that._update(value);\n            if (that._old === null) {\n                if (that._dateInput) {\n                    that._dateInput.value(that._old);\n                } else {\n                    that.element.val(\"\");\n                }\n            }\n\n            that._oldText = that.element.val();\n        },\n\n        _change: function(value) {\n            var that = this,\n            oldValue = that.element.val(),\n            dateChanged;\n\n            value = that._update(value);\n            dateChanged = +that._old != +value;\n\n            var valueUpdated = dateChanged && !that._typing;\n            var textFormatted = oldValue !== that.element.val();\n\n            if (valueUpdated || textFormatted) {\n                that.element.trigger(CHANGE);\n            }\n\n            if (dateChanged) {\n                that._old = value;\n                that._oldText = that.element.val();\n\n                that.trigger(CHANGE);\n            }\n\n            that._typing = false;\n        },\n\n        _option: function(option, value) {\n            var that = this;\n            var options = that.options;\n            var timeView = that.timeView;\n            var timeViewOptions = timeView.options;\n            var current = that._value || that._old;\n            var minDateEqual;\n            var maxDateEqual;\n\n            if (value === undefined) {\n                return options[option];\n            }\n\n            value = parse(value, options.parseFormats, options.culture);\n            timeViewOptions.maxSet = false;\n\n            if (!value) {\n                return;\n            }\n\n            if (options.min.getTime() === options.max.getTime()) {\n                timeViewOptions.dates = [];\n            }\n\n            options[option] = new DATE(value.getTime());\n            that.dateView[option](value);\n\n            that._midnight = that._calculateMidnight(options.min, options.max);\n\n            if (current) {\n                minDateEqual = isEqualDatePart(options.min, current);\n                maxDateEqual = isEqualDatePart(options.max, current);\n            }\n\n            if (minDateEqual || maxDateEqual) {\n                timeViewOptions[option] = value;\n\n                if (minDateEqual && !maxDateEqual) {\n                    timeViewOptions.max = lastTimeOption(options.interval);\n                }\n\n                if (maxDateEqual) {\n                    if (that._midnight) {\n                        timeView.dataBind([MAX]);\n                        return;\n                    } else if (!minDateEqual) {\n                        timeViewOptions.min = MIN;\n                        timeViewOptions.maxSet = true;\n                    }\n                }\n            } else {\n                timeViewOptions.max = MAX;\n                timeViewOptions.min = MIN;\n            }\n\n            timeView.bind();\n        },\n\n        _toggleHover: function(e) {\n            $(e.currentTarget).toggleClass(HOVER, e.type === \"mouseenter\");\n        },\n\n        _update: function(value) {\n            var that = this,\n                options = that.options,\n                min = options.min,\n                max = options.max,\n                dates = options.dates,\n                timeView = that.timeView,\n                current = that._value,\n                date = parse(value, options.parseFormats, options.culture),\n                isSameType = (date === null && current === null) || (date instanceof Date && current instanceof Date),\n                rebind, timeViewOptions, old, skip, formattedValue;\n\n            if (options.disableDates && options.disableDates(date)) {\n                date = null;\n                if (!that._old && !that.element.val()) {\n                    value = null;\n                }\n            }\n\n            if (+date === +current && isSameType) {\n                formattedValue = kendo.toString(date, options.format, options.culture);\n\n                if (formattedValue !== value ) {\n                    that.element.val(date === null ? value : formattedValue);\n                    if (value instanceof String) {\n                        that.element.trigger(CHANGE);\n                    }\n                }\n\n                return date;\n            }\n\n            if (date !== null && isEqualDatePart(date, min)) {\n                date = restrictValue(date, min, max);\n            } else if (!isInRange(date, min, max)) {\n                date = null;\n            }\n\n            that._value = date;\n            timeView.value(date);\n            that.dateView.value(date);\n\n            if (date) {\n                old = that._old;\n                timeViewOptions = timeView.options;\n                timeViewOptions.maxSet = false;\n\n                if (dates[0]) {\n                    dates = $.grep(dates, function(d) { return isEqualDatePart(date, d); });\n\n                    if (dates[0]) {\n                        timeView.dataBind(dates);\n                        skip = true;\n                    }\n                }\n\n                if (!skip) {\n                    if (isEqualDatePart(date, min)) {\n                        timeViewOptions.min = min;\n                        timeViewOptions.max = lastTimeOption(options.interval);\n                        rebind = true;\n                    }\n\n                    if (isEqualDatePart(date, max)) {\n                        if (that._midnight) {\n                            timeView.dataBind([MAX]);\n                            skip = true;\n                        } else {\n                            timeViewOptions.max = max;\n                            timeViewOptions.maxSet = true;\n                            if (!rebind) {\n                                timeViewOptions.min = MIN;\n                            }\n                            rebind = true;\n                        }\n                    }\n                }\n\n                if (!skip && ((!old && rebind) || (old && !isEqualDatePart(old, date)))) {\n                    if (!rebind) {\n                        timeViewOptions.max = MAX;\n                        timeViewOptions.min = MIN;\n                    }\n\n                    timeView.bind();\n                }\n            }\n            if (that._dateInput) {\n                if (date) {\n                    that._dateInput.value(date);\n                }\n            } else {\n                that.element.val(kendo.toString(date || value, options.format, options.culture));\n            }\n            that._updateARIA(date);\n\n            return date;\n        },\n\n        _keydown: function(e) {\n            var that = this,\n                dateView = that.dateView,\n                timeView = that.timeView,\n                value = that.element.val(),\n                isDateViewVisible = that.options.singlePopup ? that.popup.visible() : dateView.popup.visible();\n            var stopPropagation = that._dateInput && e.stopImmediatePropagation;\n            if (e.altKey && e.keyCode === kendo.keys.DOWN) {\n                that.toggle(isDateViewVisible ? \"time\" : \"date\");\n            } else if (isDateViewVisible) {\n                dateView.move(e);\n                that._updateARIA(dateView._current);\n            } else if (!that.options.singlePopup && timeView.popup.visible()) {\n                timeView.move(e);\n            } else if (e.keyCode === kendo.keys.ENTER && value !== that._oldText) {\n                that._change(value);\n            } else {\n                that._typing = true;\n                stopPropagation = false;\n            }\n            if (stopPropagation) {\n                e.stopImmediatePropagation();\n            }\n        },\n\n        _views: function() {\n            var that = this,\n                element = that.element,\n                options = that.options,\n                id = element.attr(\"id\"),\n                dateView, timeView,\n                div, ul, msMin,\n                date,\n                timeDiv,\n                omitPopup,\n                timeViewOptions;\n\n            if (options.singlePopup) {\n                options.dateDiv = that.popup.element.find(\".k-datetime-calendar-wrap\");\n                timeDiv = that.popup.element.find(\".k-datetime-time-wrap\");\n                options.omitPopup = omitPopup = true;\n                timeViewOptions = options.timeView;\n            }\n\n            that.dateView = dateView = new kendo.DateView(extend({}, options, {\n                id: id,\n                anchor: that.wrapper,\n                change: function() {\n                    var value = that._applyDateValue();\n\n                    if(options.singlePopup){\n                        if (!that.timeView._currentlySelected) {\n                            that.timeView._currentlySelected = new Date();\n                        }\n                        that.timeView._currentlySelected.setFullYear(value.getFullYear());\n                        that.timeView._currentlySelected.setMonth(value.getMonth());\n                        that.timeView._currentlySelected.setDate(value.getDate());\n                        that._switchToTimeView();\n                        that._toggleIcons();\n                    } else {\n                        that._change(value);\n                        that.close(\"date\");\n                    }\n                },\n                close: function(e) {\n                    if (that.trigger(CLOSE, dateViewParams)) {\n                        e.preventDefault();\n                    } else {\n                        element.attr(ARIA_EXPANDED, false);\n                        div.attr(ARIA_HIDDEN, true);\n\n                        if (!that.options.singlePopup && !timeView.popup.visible()) {\n                            if(element && element.length) {\n                                element[0].removeAttribute(ARIA_OWNS);\n                            }\n                        }\n                    }\n                },\n                open:  function(e) {\n                    if (that.trigger(OPEN, dateViewParams)) {\n                        e.preventDefault();\n                    } else {\n\n                        if (element.val() !== that._oldText) {\n                            date = parse(element.val(), options.parseFormats, options.culture);\n\n                            that.dateView[date ? \"current\" : \"value\"](date);\n                        }\n\n                        div.attr(ARIA_HIDDEN, false);\n                        element.attr(ARIA_EXPANDED, true)\n                               .attr(ARIA_OWNS, dateView._dateViewID);\n\n                        that._updateARIA(date);\n                    }\n                }\n            }));\n            div = dateView.div;\n\n            msMin = options.min.getTime();\n            that.timeView = timeView = new TimeView({\n                id: id,\n                value: options.value,\n                size: options.size,\n                anchor: that.wrapper,\n                animation: options.animation,\n                format: options.timeFormat,\n                culture: options.culture,\n                height: options.componentType === \"modern\" ? null : options.height,\n                interval: options.interval,\n                min: options.componentType === \"modern\" ? options.min : new DATE(MIN),\n                max: options.componentType === \"modern\" ? options.max : new DATE(MAX),\n                dates: msMin === options.max.getTime() ? [new Date(msMin)] : [],\n                parseFormats: options.parseFormats,\n                validateDate: true,\n                change: function(value, trigger) {\n                    value = that._applyTimeValue(value);\n\n                    if (trigger) {\n                        that._timeSelected = true;\n                        that._change(value);\n                    } else {\n                        element.val(kendo.toString(value, options.format, options.culture));\n                        dateView.value(value);\n                        that._updateARIA(value);\n                    }\n                },\n                close: function(e) {\n                    if (that.trigger(CLOSE, timeViewParams)) {\n                        e.preventDefault();\n                    } else {\n                        ul.attr(ARIA_HIDDEN, true);\n                        element.attr(ARIA_EXPANDED, false);\n\n                        if (!dateView.popup.visible()) {\n                            if(element && element.length) {\n                                element[0].removeAttribute(ARIA_OWNS);\n                            }\n                        }\n                    }\n                },\n                open:  function(e) {\n                    if (that.options.componentType !==\"modern\") {\n                        timeView._adjustListWidth();\n                    } else {\n                        that.timeView._updateTitle();\n                    }\n\n                    if (that.trigger(OPEN, timeViewParams)) {\n                        e.preventDefault();\n                    } else {\n                        if (element.val() !== that._oldText) {\n                            date = parse(element.val(), options.parseFormats, options.culture);\n\n                            that.timeView.value(date);\n                        }\n\n                        ul.attr(ARIA_HIDDEN, false);\n                        element.attr(ARIA_EXPANDED, true)\n                               .attr(ARIA_OWNS, timeView._timeViewID);\n\n                        timeView.options.active(timeView.current());\n                    }\n                },\n                active: function(current) {\n                    if(element && element.length) {\n                        element[0].removeAttribute(ARIA_ACTIVEDESCENDANT);\n                    }\n                    if (current) {\n                        element.attr(ARIA_ACTIVEDESCENDANT, timeView._optionID);\n                    }\n                },\n                popup: options.popup,\n                useValueToRender: true,\n                specifiedRange: that._specifiedRange,\n                omitPopup: omitPopup,\n                timeDiv: timeDiv,\n                timeView: timeViewOptions,\n                messages: that.options.messages\n            });\n            ul = timeView.ul;\n        },\n\n        _applyDateValue: function () {\n            var that = this;\n            var options = that.options;\n            var dateView = that.dateView;\n            var value = dateView.calendar.value();\n            var msValue = +value;\n            var msMin = +options.min;\n            var msMax = +options.max;\n            var current, adjustedDate;\n\n            if (msValue === msMin || msValue === msMax) {\n                current = msValue === msMin ? msMin : msMax;\n                current = new DATE(that._value || current);\n                current.setFullYear(value.getFullYear(), value.getMonth(), value.getDate());\n\n                if (isInRange(current, msMin, msMax)) {\n                    value = current;\n                }\n            }\n\n            if (that._value) {\n\n                adjustedDate = kendo.date.setHours(new Date(value), that._value);\n\n                if (isInRange(adjustedDate, msMin, msMax)) {\n                    value = adjustedDate;\n                }\n            }\n\n            return value;\n        },\n\n        _applyTimeValue: function(value){\n            var timeView = this.timeView;\n            var options = this.options;\n\n            value = timeView._parse(value);\n\n            if (value < options.min) {\n                value = new DATE(+options.min);\n                timeView.options.min = value;\n            } else if (value > options.max) {\n                value = new DATE(+options.max);\n                timeView.options.max = value;\n            }\n\n            return value;\n        },\n\n        _icons: function() {\n            var that = this;\n            var element = that.element;\n            var options = that.options;\n            var icons;\n\n            icons = that.wrapper.find(\"button.k-input-button\");\n\n            if (!icons[0]) {\n                that._dateIcon = $(html.renderButton('<button unselectable=\"on\" tabindex=\"-1\" class=\"k-input-button\" aria-label=\"' + options.dateButtonText + '\"></button>', {\n                    icon: \"calendar\",\n                    size: options.size,\n                    fillMode: options.fillMode,\n                    shape: null,\n                    rounded: null\n                })).insertAfter(element);\n                that._timeIcon = $(html.renderButton('<button unselectable=\"on\" tabindex=\"-1\" class=\"k-input-button\" aria-label=\"' + options.timeButtonText + '\"></button>', {\n                    icon: \"clock\",\n                    size: options.size,\n                    fillMode: options.fillMode,\n                    shape: null,\n                    rounded: null\n                })).insertAfter(element);\n            }\n\n            that._dateIcon.attr(\"aria-controls\", that.dateView._dateViewID);\n            that._timeIcon.attr(\"aria-controls\", that.timeView._timeViewID);\n\n            if (options.singlePopup) {\n                that._timeIcon.hide();\n            }\n        },\n\n        _wrapper: function() {\n            var that = this,\n            element = that.element,\n            wrapper;\n\n            wrapper = element.parents(\".k-datetimepicker\");\n\n            if (!wrapper[0]) {\n                wrapper = element.wrap(SPAN).parent();\n            }\n\n            wrapper[0].style.cssText = element[0].style.cssText;\n            element.css({\n                width: \"100%\",\n                height: element[0].style.height\n            });\n\n            that.wrapper = wrapper.addClass(\"k-datetimepicker k-input\")\n                .addClass(element[0].className).removeClass('input-validation-error');\n        },\n\n        _reset: function() {\n            var that = this,\n                element = that.element,\n                formId = element.attr(\"form\"),\n                form = formId ? $(\"#\" + formId) : element.closest(\"form\"),\n                options = that.options,\n                disabledDate = options.disableDates,\n                parseFormats = options.parseFormats.length ? options.parseFormats : null,\n                optionsValue = that._initialOptions.value,\n                initialValue = element[0].defaultValue;\n\n            if (optionsValue && (disabledDate && disabledDate(optionsValue))) {\n                optionsValue = null;\n            }\n\n            if ((!initialValue || !kendo.parseDate(initialValue, parseFormats, options.culture)) && optionsValue) {\n                element.attr(\"value\", kendo.toString(optionsValue, options.format, options.culture));\n            }\n\n            if (form[0]) {\n                that._resetHandler = function() {\n                    that.value(optionsValue || element[0].defaultValue);\n                    that.max(that._initialOptions.max);\n                    that.min(that._initialOptions.min);\n                };\n\n                that._form = form.on(\"reset\", that._resetHandler);\n            }\n        },\n\n        _template: function() {\n            this._ariaTemplate = kendo.template(this.options.ARIATemplate).bind(this);\n        },\n\n        _createDateInput: function(options) {\n            if (this._dateInput) {\n                this._dateInput.destroy();\n                this._dateInput = null;\n            }\n\n            if (options.dateInput ) {\n                this._dateInput = new ui.DateInput(this.element, {\n                    culture: options.culture,\n                    format: options.format,\n                    size: options.size,\n                    fillMode: options.fillMode,\n                    rounded: options.rounded,\n                    min: options.min,\n                    max: options.max,\n                    interval: options.interval\n                });\n            }\n        },\n\n        _calculateMidnight: function(min, max) {\n            return getMilliseconds(min) + getMilliseconds(max) === 0;\n        },\n\n        _updateARIA: function(date) {\n            var that = this;\n            var calendar = that.dateView.calendar;\n\n            if (that.element && that.element.length) {\n                that.element[0].removeAttribute(ARIA_ACTIVEDESCENDANT);\n            }\n\n            if (calendar) {\n                that.element.attr(ARIA_ACTIVEDESCENDANT, calendar._updateAria(that._ariaTemplate, date));\n            }\n        },\n        _popup: function(){\n            var that = this;\n            var options = that.options;\n            var div = $(\"<div></div>\").attr(ARIA_HIDDEN, \"true\")\n                .addClass(\"k-datetime-container k-group k-reset\")\n                .appendTo(document.body);\n\n            div.append(kendo.template(SINGLE_POPUP_TEMPLATE)(extend({}, that.options, {\n                buttonSize: kendo.getValidCssClass(\"k-button-\", \"size\", that.options.size)\n            })));\n            that.popup = new ui.Popup(div, extend(options.popup, options, {\n                name: \"Popup\",\n                isRtl: kendo.support.isRtl(that.wrapper),\n                anchor: that.wrapper,\n                activate: function () {\n                    if (that.options.timeView && that.options.timeView.list === \"scroll\") {\n                        that.timeView.addTranslate();\n                        that.timeView.applyValue(that._value);\n                        that.timeView._updateRanges();\n                    }\n                },\n                open: function(e){\n                    if (that.trigger(OPEN, {view: this.element.find('.k-date-tab').length ? 'date' : 'time', sender: that})) {\n                        e.preventDefault();\n                    }\n                    that.timeView._updateTitle();\n                }\n            }));\n\n            div.on(CLICK + ns, \".k-datetime-buttongroup .k-button\", that._groupChangeClick.bind(that));\n            div.on(CLICK + ns, \".k-datetime-footer button.k-time-cancel\", that._cancelClickHandler.bind(that));\n            div.on(CLICK + ns, \".k-datetime-footer button.k-time-accept\", that._setClickHandler.bind(that));\n        },\n\n        _groupChangeClick: function(e) {\n            preventDefault(e);\n            var button =  $(e.currentTarget);\n            var index = button.index();\n\n            if (index) {\n                this._switchToTimeView();\n            } else {\n                this._switchToDateView();\n            }\n            this._toggleIcons();\n        },\n\n        _switchToDateView: function() {\n            this.popup.element.find(\".k-group-start, .k-group-end\").removeClass(STATE_SELECTED).eq(0).addClass(STATE_SELECTED);\n            this.popup.element.find(\".k-datetime-wrap\").removeClass(\"k-time-tab\").addClass(\"k-date-tab\");\n        },\n\n        _switchToTimeView: function() {\n            this.timeView.addTranslate();\n            this.timeView.applyValue(this._value);\n            this.timeView._updateRanges();\n            this.popup.element.find(\".k-group-start, .k-group-end\").removeClass(STATE_SELECTED).eq(1).addClass(STATE_SELECTED);\n            this.popup.element.find(\".k-datetime-wrap\").removeClass(\"k-date-tab\").addClass(\"k-time-tab\");\n        },\n\n        _toggleIcons: function() {\n            this._dateIcon.toggle();\n            this._timeIcon.toggle();\n        },\n\n        _cancelClickHandler: function (e) {\n            preventDefault(e);\n            if (this._value) {\n                this.value(this._value);\n                this.dateView.value(this._value);\n            }\n            this.popup.close();\n        },\n\n        _setClickHandler: function(e) {\n            preventDefault(e);\n            var value = this._applyDateValue();\n            var time;\n\n            value = value || new Date();\n            time = this.timeView._currentlySelected || value;\n            this.timeView._updateCurrentlySelected();\n            value.setHours(time.getHours());\n            value.setMinutes(time.getMinutes());\n            value.setSeconds(time.getSeconds());\n            value = this._applyTimeValue(value);\n\n            this._change(value);\n            this.popup.close();\n        }\n    });\n\n    function lastTimeOption(interval) {\n        var date = new Date(2100, 0, 1);\n        date.setMinutes(-interval);\n        return date;\n    }\n\n    function preventDefault(e) {\n        e.preventDefault();\n    }\n\n    function normalize(options) {\n        var patterns = kendo.getCulture(options.culture).calendars.standard.patterns,\n            parseFormats = !options.parseFormats.length,\n            timeFormat;\n\n        options.format = extractFormat(options.format || patterns.g);\n        options.timeFormat = timeFormat = extractFormat(options.timeFormat || patterns.t);\n        kendo.DateView.normalize(options);\n\n        if (parseFormats) {\n           options.parseFormats.unshift(\"yyyy-MM-ddTHH:mm:ss\");\n        }\n\n        if ($.inArray(timeFormat, options.parseFormats) === -1) {\n            options.parseFormats.push(timeFormat);\n        }\n    }\n\n    kendo.cssProperties.registerPrefix(\"DateTimePicker\", \"k-input-\");\n\n    kendo.cssProperties.registerValues(\"DateTimePicker\", [{\n        prop: \"rounded\",\n        values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n    }]);\n\n    ui.plugin(DateTimePicker);\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n"],"names":["define","__meta__","id","name","category","description","depends","$","window","kendo","jQuery","undefined","TimeView","html","parse","parseDate","support","activeElement","_activeElement","extractFormat","_extractFormat","calendar","isInRange","restrictValue","isEqualDatePart","getMilliseconds","ui","Widget","OPEN","CLOSE","CHANGE","ns","CLICK","UP","mouseAndTouchPresent","applyEventMap","slice","DISABLED","READONLY","FOCUSED","HOVER","STATEDISABLED","HOVEREVENTS","MOUSEDOWN","MONTH","SPAN","ARIA_ACTIVEDESCENDANT","ARIA_EXPANDED","ARIA_HIDDEN","ARIA_OWNS","ARIA_DISABLED","ARIA_READONLY","DATE","Date","MIN","MAX","dateViewParams","view","timeViewParams","extend","SINGLE_POPUP_TEMPLATE","STATE_SELECTED","DateTimePicker","init","element","options","that","this","disabled","initialValue","componentType","fn","call","disableDates","min","attr","max","_specifiedRange","normalize","_initialOptions","_wrapper","singlePopup","_popup","_views","_icons","_reset","_template","setAttribute","e","type","addClass","role","aria-expanded","autocomplete","_midnight","_calculateMidnight","is","parents","enable","readonly","value","val","parseFormats","culture","_createDateInput","_old","_update","_oldText","_applyCssClasses","notify","format","timeFormat","dates","interval","height","footer","start","depth","animation","month","ARIATemplate","dateButtonText","timeButtonText","dateInput","weekNumber","messages","set","cancel","hour","minute","second","millisecond","now","date","time","today","weekColumnHeader","size","fillMode","rounded","events","componentTypes","classic","timeView","list","modern","setOptions","_value","currentValue","dateView","_current","_dateIcon","off","remove","_timeIcon","_editable","_dateInput","toString","_updateARIA","dateIcon","timeIcon","wrapper","disable","removeClass","on","_toggleHover","length","removeAttribute","_keydown","bind","_change","current","getToday","close","preventDefault","toggle","_focusElement","eventType","touch","match","trigger","destroy","popup","_form","_resetHandler","setTimeout","removeAttr","open","popupHovered","_calendar","ul","find","_hovered","_switchToTimeView","_switchToDateView","_option","visible","secondView","oldValue","dateChanged","valueUpdated","_typing","textFormatted","option","timeViewOptions","minDateEqual","maxDateEqual","maxSet","getTime","lastTimeOption","dataBind","currentTarget","toggleClass","isSameType","rebind","old","skip","formattedValue","String","grep","d","isDateViewVisible","stopPropagation","stopImmediatePropagation","altKey","keyCode","keys","DOWN","move","ENTER","div","msMin","timeDiv","omitPopup","dateDiv","DateView","anchor","change","_applyDateValue","_currentlySelected","setFullYear","getFullYear","setMonth","getMonth","setDate","getDate","_toggleIcons","_dateViewID","validateDate","_applyTimeValue","_timeSelected","_adjustListWidth","_updateTitle","_timeViewID","active","_optionID","useValueToRender","specifiedRange","msValue","msMax","adjustedDate","setHours","_parse","icons","renderButton","icon","shape","insertAfter","hide","wrap","parent","style","cssText","css","width","className","formId","form","closest","disabledDate","optionsValue","defaultValue","_ariaTemplate","template","DateInput","_updateAria","appendTo","document","body","append","buttonSize","getValidCssClass","Popup","isRtl","activate","addTranslate","applyValue","_updateRanges","sender","_groupChangeClick","_cancelClickHandler","_setClickHandler","button","index","eq","_updateCurrentlySelected","getHours","setMinutes","getMinutes","setSeconds","getSeconds","patterns","getCulture","calendars","standard","g","t","unshift","inArray","push","cssProperties","registerPrefix","registerValues","prop","values","roundedValues","concat","plugin","amd","a1","a2","a3"],"mappings":"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"}