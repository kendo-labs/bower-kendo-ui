{"version":3,"file":"kendo.listbox.min.js","names":["factory","define","amd","$","undefined$1","kendo","window","kendoAttr","attr","data","keys","kendoTemplate","template","Widget","ui","DataSource","Selectable","DataBoundWidget","Class","extend","noop","DASH","KENDO_LISTBOX","NS","DOT","DISABLED_STATE_CLASS","SELECTED_STATE_CLASS","ENABLED_ITEM_SELECTOR","ENABLED_ITEMS_SELECTOR","TOOLBAR_CLASS","TOOL_SELECTOR","FOCUSED_CLASS","CLICK","KEYDOWN","outerWidth","_outerWidth","outerHeight","_outerHeight","CHANGE","DATABOUND","ADD","REMOVE","REORDER","MOVE_UP","MOVE_DOWN","TRANSFER_TO","TRANSFER_FROM","TRANSFER_ALL_TO","TRANSFER_ALL_FROM","DRAGGEDCLASS","ID","TABINDEX","DRAGSTART","DRAG","DROP","DRAGEND","RIGHT","BOTTOM","ARIA_ACTIVEDESCENDENT","ARIA_BUSY","ARIA_LABEL","TOOLBAR_POSITION_CLASS_NAMES","getSortedDomIndices","items","map","item","index","isUndefined","value","defaultHint","element","clone","addClass","defaultPlaceholder","ListBox","init","options","that","this","fn","call","_wrapper","_list","_ariaLabel","_getList","hide","dataSource","dataTextField","dataValueField","_templates","_selectable","_dataSource","_createToolbar","_createDraggable","_createNavigatable","destroy","isNaN","_listTabIndex","off","_unbindDataSource","_destroySelectable","_destroyToolbar","wrapper","_target","_draggable","placeholder","setOptions","events","name","autoBind","selectable","draggable","dropSources","connectWith","navigatable","toolbar","position","tools","messages","remove","moveUp","moveDown","transferTo","transferFrom","transferAllTo","transferAllFrom","add","dataItems","i","length","itemsLength","list","_unbindDataChange","_addItem","_bindDataChange","_bindDataSource","_syncElement","dataItem","templates","itemTemplate","r","itemContent","_setItemId","uid","appendTo","_data","push","_addItemAt","_insertElementAt","insertAfter","children","eq","prepend","on","_click","bind","_keyDown","_blur","_getTabIndex","tabindex","removeAttr","removeClass","e","target","currentTarget","oldTarget","activeEl","_activeElement","isContained","contains","is","focus","_getNavigatableItem","key","current","filter","first","UP","prevAll","DOWN","nextAll","_scrollIntoView","parent","itemOffsetTop","offsetTop","contentScrollTop","scrollTop","contentOffsetHeight","clientHeight","bottomDistance","offsetHeight","shouldPreventDefault","keyCode","shiftKey","ctrlKey","_shiftSelecting","DELETE","_executeCommand","preventDefault","clearSelection","hasClass","select","_updateToolbar","_updateAllToolbars","trigger","SPACEBAR","LEFT","F10","find","not","focusElement","hint","Error","Draggable","isFunction","dragstart","_dragstart","dragcancel","_clear","drag","_drag","dragend","_dragend","draggedElement","eventData","draggableEvent","enabled","_findElementUnderCursor","elementUnderCursor","sender","show","_findTarget","node","elementNode","closest","has","listBox","appendToBottom","_searchConnectedListBox","_getElementCenter","center","getOffset","top","left","connectedListBox","closestContainer","originalElement","getKendoListBox","inArray","id","targetCenter","offsetDelta","direction","cursorOffset","x","location","y","Math","round","_movePlaceholder","draggableOptions","before","after","append","draggedItem","placeholderIndex","draggedIndex","offset","reorder","dropped","dataItemAtIndex","at","itemAtIndex","listItem","_removeElement","listItems","_getItems","_removeItem","transport","pop","isNew","_destroyed","uniqueIdAttr","getByUid","html","_dataItems","enabledItems","multiple","clear","enable","_enableItem","setDataSource","Array","isArray","fields","field","create","fetch","_changeHandler","unbind","_dataChangeHandler","refresh","wrap","style","cssText","title","insertBefore","className","css","_innerWrapper","firstChild","parseOptions","getter","ref","view","idx","_setItemIds","_option","dataValue","dataText","option","indexOf","replace","htmlEncode","viewLength","selectableOptions","aria","selectedClass","change","_onSelect","toolbarOptions","toolbarInsertion","join","toolbarElement","ToolBar","commandName","command","CommandFactory","execute","_updateToolStates","listBoxElements","elementsLength","plugin","_commands","register","commandType","match","commands","toLowerCase","ListBoxCommand","getItems","canExecute","RemoveItemsCommand","MoveItemsCommand","moveItems","movedItem","indecesInDom","movedItems","makeArray","sort","itemComparer","moveAction","item1","item2","indexItem1","indexItem2","MoveUpItemsCommand","domIndices","MoveDownItemsCommand","last","TransferItemsCommand","sourceListBox","getSourceListBox","destinationListBox","getDestinationListBox","updatedSelection","getUpdatedSelection","updateSelection","itemFilter","lastEnabledItem","itemToSelect","TransferItemsToCommand","TransferItemsFromCommand","TransferAllItemsToCommand","TransferAllItemsFromCommand","_initTemplates","_createTools","_attachEventHandlers","_aria","_tabindex","_detachEventHandlers","listEl","listBoxLabelledby","listBoxLabel","text","listElId","guid","_onToolClick","tool","toolsLength","toolsMessages","toolList","defaultTools","_executeToolCommand","_focusTool","icon","iconClass","renderButton","targetTool","prev","next","candidate","focusable","buttons","_updateToolState","toolName","jQuery"],"sources":["kendo.listbox.js"],"mappings":"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","sourcesContent":["(function (factory) {\n    typeof define === 'function' && define.amd ? define(['kendo.draganddrop', 'kendo.data', 'kendo.selectable', 'kendo.html.button'], factory) :\n    factory();\n})((function () {\n    var __meta__ = {\n        id: \"listbox\",\n        name: \"ListBox\",\n        category: \"web\",\n        depends: [\"draganddrop\", \"data\", \"selectable\", 'html.button']\n    };\n\n    (function($, undefined$1) {\n        var kendo = window.kendo;\n        var kendoAttr = kendo.attr;\n        var data = kendo.data;\n        var keys = kendo.keys;\n        var kendoTemplate = kendo.template;\n        var Widget = kendo.ui.Widget;\n        var DataSource = data.DataSource;\n        var Selectable = kendo.ui.Selectable;\n        var DataBoundWidget = kendo.ui.DataBoundWidget;\n        var Class = kendo.Class;\n\n        var extend = $.extend;\n        var noop = $.noop;\n\n        var DASH = \"-\";\n        var DOT = \".\";\n        var SPACE = \" \";\n        var HASH = \"#\";\n\n        var KENDO_LISTBOX = \"kendoListBox\";\n        var NS = DOT + KENDO_LISTBOX;\n        var DISABLED_STATE_CLASS = \"k-disabled\";\n        var SELECTED_STATE_CLASS = \"k-selected\";\n        var ENABLED_ITEM_SELECTOR = \".k-list-item:not(.k-disabled)\";\n        var ENABLED_ITEMS_SELECTOR = \".k-list-ul:not(.k-disabled) >\" + ENABLED_ITEM_SELECTOR;\n        var TOOLBAR_CLASS = \"k-listbox-actions\";\n        var TOOL_SELECTOR = \".k-button\";\n        var ENABLED_TOOL_SELECTOR = \"button.k-button:not(.k-disabled)\";\n        var FOCUSED_CLASS = \"k-focus\";\n        var DRAG_CLUE_CLASS = \"k-drag-clue\";\n        var DROP_HINT_CLASS = \"k-drop-hint\";\n        var LIST_CLASS = \"k-list-ul\";\n        var LIST_SELECTOR = \".k-list-ul\";\n\n        var CLICK = \"click\" + NS;\n        var KEYDOWN = \"keydown\" + NS;\n        var BLUR = \"blur\" + NS;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var CHANGE = \"change\";\n        var DATABOUND = \"dataBound\";\n        var ADD = \"add\";\n        var REMOVE = \"remove\";\n        var REORDER = \"reorder\";\n        var MOVE_UP = \"moveUp\";\n        var MOVE_DOWN = \"moveDown\";\n        var TRANSFER_TO = \"transferTo\";\n        var TRANSFER_FROM = \"transferFrom\";\n        var TRANSFER_ALL_TO = \"transferAllTo\";\n        var TRANSFER_ALL_FROM = \"transferAllFrom\";\n        var DRAGGEDCLASS = \"k-ghost\";\n        var UNIQUE_ID = \"uid\";\n        var ID = \"id\";\n        var TABINDEX = \"tabindex\";\n        var COMMAND = \"command\";\n\n        var MOVE_UP_OFFSET = -1;\n        var MOVE_DOWN_OFFSET = 1;\n        var DRAGSTART = \"dragstart\";\n        var DRAG = \"drag\";\n        var DROP = \"drop\";\n        var DRAGEND = \"dragend\";\n        var DEFAULT_FILTER = \"ul.k-list-ul>li.k-list-item\";\n\n        var RIGHT = \"right\";\n        var BOTTOM = \"bottom\";\n\n        var ARIA_ACTIVEDESCENDENT = \"aria-activedescendant\";\n        var ARIA_BUSY = \"aria-busy\";\n        var ARIA_CONTROLS = \"aria-controls\";\n        var ARIA_LABEL = \"aria-label\";\n        var ARIA_LABELLEDBY = \"aria-labelledby\";\n        var ARIA_MULTISELECTABLE = \"aria-multiselectable\";\n\n        var TOOLBAR_POSITION_CLASS_NAMES = [\n            TOOLBAR_CLASS + DASH + \"left\",\n            TOOLBAR_CLASS + DASH + RIGHT,\n            TOOLBAR_CLASS + DASH + \"top\",\n            TOOLBAR_CLASS + DASH + BOTTOM\n        ];\n\n        function getSortedDomIndices(items) {\n            var indices = $.map(items, function(item) {\n                return $(item).index();\n            });\n\n            return indices;\n        }\n\n        function isUndefined(value) {\n            return (typeof value === \"undefined\");\n        }\n\n        function defaultHint(element) {\n            return element.clone()\n                .attr('class', '')\n                .addClass(DRAG_CLUE_CLASS);\n        }\n\n        function defaultPlaceholder() {\n            return $('<li>').addClass(DROP_HINT_CLASS);\n        }\n\n        var ListBox = DataBoundWidget.extend({\n            init: function(element, options) {\n                var that = this;\n                Widget.fn.init.call(that, element, options);\n\n                that._wrapper();\n                that._list();\n                that._ariaLabel(that._getList());\n                element = that.element.attr(\"multiple\", \"multiple\").hide();\n\n                if (element[0] && !that.options.dataSource) {\n                    that.options.dataTextField = that.options.dataTextField || \"text\";\n                    that.options.dataValueField = that.options.dataValueField || \"value\";\n                }\n                that._templates();\n                that._selectable();\n                that._dataSource();\n                that._createToolbar();\n                that._createDraggable();\n                that._createNavigatable();\n            },\n\n            destroy: function() {\n                var that = this;\n\n                DataBoundWidget.fn.destroy.call(that);\n                if (!isNaN(that._listTabIndex)) {\n                    that._getList().off();\n                    that._listTabIndex = null;\n                }\n                that._unbindDataSource();\n                that._destroySelectable();\n                that._destroyToolbar();\n                that.wrapper.off(NS);\n                if (that._target) {\n                    that._target = null;\n                }\n                if (that._draggable) {\n                    that._draggable.destroy();\n                    that.placeholder = null;\n                }\n\n                kendo.destroy(that.element);\n            },\n\n            setOptions: function(options) {\n                Widget.fn.setOptions.call(this, options);\n                this._templates();\n                this._dataSource();\n            },\n\n            events: [\n                CHANGE,\n                DATABOUND,\n                ADD,\n                REMOVE,\n                REORDER,\n                DRAGSTART,\n                DRAG,\n                DROP,\n                DRAGEND\n            ],\n\n            options: {\n                name: \"ListBox\",\n                autoBind: true,\n                template: \"\",\n                dataTextField: \"\",\n                dataValueField: \"\",\n                selectable: \"single\",\n                draggable: null,\n                dropSources: [],\n                connectWith: \"\",\n                navigatable: true,\n                toolbar: {\n                    position: RIGHT,\n                    tools: []\n                },\n                messages: {\n                    tools: {\n                        remove: \"Delete\",\n                        moveUp: \"Move Up\",\n                        moveDown: \"Move Down\",\n                        transferTo: \"Transfer To\",\n                        transferFrom: \"Transfer From\",\n                        transferAllTo: \"Transfer All To\",\n                        transferAllFrom: \"Transfer All From\"\n                    }\n                }\n            },\n\n            add: function(dataItems) {\n                var that = this;\n                var items = dataItems && dataItems.length ? dataItems : [dataItems];\n                var itemsLength = items.length;\n                var list = that._getList();\n                var i;\n\n                that._unbindDataSource();\n                that._unbindDataChange();\n                for (i = 0; i < itemsLength; i++) {\n                    that._addItem(items[i], list);\n                }\n                that._bindDataChange();\n                that._bindDataSource();\n                that._syncElement();\n            },\n\n            _addItem: function(dataItem, list) {\n                var that = this;\n                var item = $(that.templates.itemTemplate({ item: dataItem, r: that.templates.itemContent }));\n\n                that._setItemId(item, dataItem.uid);\n\n                item.appendTo(list);\n\n                if (typeof dataItem === typeof \"\") {\n                    that.dataSource._data.push(dataItem);\n                } else {\n                    that.dataSource.add(dataItem);\n                }\n            },\n\n            _addItemAt: function(dataItem, index) {\n                var that = this;\n                var item = $(that.templates.itemTemplate({ item: dataItem, r: that.templates.itemContent }));\n                that._unbindDataSource();\n                if (typeof dataItem === typeof \"\") {\n                    that._insertElementAt(item, index);\n                    that.dataSource._data.push(dataItem);\n                } else {\n                    that._setItemId(item, dataItem.uid);\n                    that._insertElementAt(item, index);\n                    that.dataSource.add(dataItem);\n                }\n                that._bindDataSource();\n                that._syncElement();\n            },\n\n            _insertElementAt: function(item, index) {\n                var that = this;\n                var list = that._getList();\n\n                if (index > 0) {\n                    $(item).insertAfter(list.children().eq(index - 1));\n                } else {\n                    $(list).prepend(item);\n                }\n            },\n\n            _createNavigatable: function() {\n                var that = this;\n                var options = that.options;\n\n                if (options.navigatable) {\n                    that._getList().on(CLICK, ENABLED_ITEM_SELECTOR, that._click.bind(that))\n                                .on(KEYDOWN, that._keyDown.bind(that))\n                                .on(BLUR, that._blur.bind(that));\n                }\n            },\n\n            _getTabIndex: function() {\n                var that = this;\n                var tabindex;\n\n                if (!isNaN(that._listTabIndex))\n                {\n                    return that._listTabIndex;\n                }\n\n                tabindex = that.element.attr(TABINDEX);\n                that._listTabIndex = !isNaN(tabindex) ? tabindex : 0;\n\n                that.element.removeAttr(TABINDEX);\n\n                return that._listTabIndex;\n            },\n\n            _blur: function() {\n                if (this._target) {\n                    this._target.removeClass(FOCUSED_CLASS);\n                    this._getList().removeAttr(ARIA_ACTIVEDESCENDENT);\n                }\n                this._target = null;\n            },\n\n            _click: function(e) {\n                var that = this;\n                var target = $(e.currentTarget);\n                var oldTarget = that._target;\n                var list = that._getList();\n                var activeEl = kendo._activeElement();\n                var isContained = $.contains(list, activeEl);\n\n                if (oldTarget) {\n                    oldTarget.removeClass(FOCUSED_CLASS);\n                }\n\n                that._target = target;\n                target.addClass(FOCUSED_CLASS);\n                list.attr(ARIA_ACTIVEDESCENDENT, target.attr(ID));\n\n                if (list[0] !== activeEl && (!isContained || !isInputElement(activeEl))) {\n                    that.focus();\n                }\n            },\n\n            _getNavigatableItem: function(key) {\n                var that = this;\n                var current;\n\n                if (!that._target) {\n                    current = that.items().filter(ENABLED_ITEM_SELECTOR).first();\n                } else {\n                    current = that._target;\n                }\n\n                if (key === keys.UP && that._target) {\n                    current = that._target.prevAll(ENABLED_ITEM_SELECTOR).first();\n                }\n\n                if (key === keys.DOWN && that._target) {\n                    current = that._target.nextAll(ENABLED_ITEM_SELECTOR).first();\n                }\n\n                return current.length ? current : null;\n            },\n\n            _scrollIntoView: function(item) {\n                if (!item) {\n                    return;\n                }\n\n                if (item[0]) {\n                    item = item[0];\n                }\n\n                var list = this._getList().parent()[0];\n                var itemOffsetTop = item.offsetTop;\n                var contentScrollTop = list.scrollTop;\n                var contentOffsetHeight = list.clientHeight;\n                var bottomDistance = itemOffsetTop + item.offsetHeight;\n\n                if (contentScrollTop > itemOffsetTop) {\n                    contentScrollTop = itemOffsetTop;\n                } else if (bottomDistance > (contentScrollTop + contentOffsetHeight)) {\n                    contentScrollTop = (bottomDistance - contentOffsetHeight);\n                }\n\n                list.scrollTop = contentScrollTop;\n            },\n\n            _keyDown: function(e) {\n                var that = this;\n                var key = e.keyCode;\n                var current = that._getNavigatableItem(key);\n                var shouldPreventDefault;\n\n                if (!(e.shiftKey && !e.ctrlKey && (key === keys.DOWN || key === keys.UP))) {\n                    that._shiftSelecting = false;\n                }\n\n                if (key == keys.DELETE) {\n                    that._executeCommand(REMOVE);\n                    if (that._target) {\n                        that._target.removeClass(FOCUSED_CLASS);\n                        that._getList().removeAttr(ARIA_ACTIVEDESCENDENT);\n                        that._target = null;\n                    }\n                    shouldPreventDefault = true;\n                } else if (key === keys.DOWN || key === keys.UP) {\n                    if (!current) {\n                        e.preventDefault();\n                        return;\n                    }\n\n                    if (e.shiftKey && !e.ctrlKey) {\n                        if (that._target) {\n                            that._target.removeClass(FOCUSED_CLASS);\n                        }\n\n                        if (!that._shiftSelecting) {\n                            that.clearSelection();\n                            that._shiftSelecting = true;\n                        }\n                        if (that._target && current.hasClass(\"k-selected\")) {\n                            that._target.removeClass(SELECTED_STATE_CLASS);\n                        } else if (that.options.selectable == \"single\") {\n                            that.select(current);\n                        } else {\n                            that.select(current.add(that._target));\n                        }\n\n                        that._updateToolbar();\n                        that._updateAllToolbars();\n                        that.trigger(CHANGE);\n                    } else if (e.shiftKey && e.ctrlKey) {\n                        that._executeCommand(key === keys.DOWN ? MOVE_DOWN : MOVE_UP);\n                        that._scrollIntoView(that._target);\n                        e.preventDefault();\n                        return;\n                    } else if (!e.shiftKey && !e.ctrlKey) {\n                        if (that._target) {\n                            that._target.removeClass(FOCUSED_CLASS);\n                        }\n\n                        if (that.options.selectable === \"multiple\") {\n                            that.clearSelection();\n                        }\n\n                        that.select(current);\n                        that._updateToolbar();\n                        that._updateAllToolbars();\n                        that.trigger(CHANGE);\n                    }\n\n                    if (current && that._target && that._target[0] !== current[0]) {\n                        that._target.removeClass(FOCUSED_CLASS);\n                    }\n\n                    that._target = current;\n\n                    if (that._target) {\n                        that._target.addClass(FOCUSED_CLASS);\n                        that._scrollIntoView(that._target);\n                        that._getList().attr(ARIA_ACTIVEDESCENDENT, that._target.attr(ID));\n                    } else {\n                        that._getList().removeAttr(ARIA_ACTIVEDESCENDENT);\n                    }\n                    shouldPreventDefault = true;\n                } else if (key == keys.SPACEBAR) {\n                    if (e.ctrlKey && that._target) {\n                        if (that._target.hasClass(SELECTED_STATE_CLASS)) {\n                            that._target.removeClass(SELECTED_STATE_CLASS);\n                        } else {\n                            that.select(that._target);\n                        }\n\n                        that.trigger(CHANGE);\n                    } else {\n                       that.clearSelection();\n                       that.select(that._target);\n                       that.trigger(CHANGE);\n                    }\n\n                    that._updateToolbar();\n                    that._updateAllToolbars();\n                    shouldPreventDefault = true;\n                } else if (e.ctrlKey && key == keys.RIGHT) {\n                    if (e.shiftKey) {\n                       that._executeCommand(TRANSFER_ALL_TO);\n                    } else {\n                       that._executeCommand(TRANSFER_TO);\n                    }\n\n                    that._target = that.select().length ? that.select() : null;\n                    shouldPreventDefault = true;\n                } else if (e.ctrlKey && key == keys.LEFT) {\n                    if (e.shiftKey) {\n                       that._executeCommand(TRANSFER_ALL_FROM);\n                    } else {\n                       that._executeCommand(TRANSFER_FROM);\n                    }\n                    shouldPreventDefault = true;\n                } else if (key === keys.F10) {\n                    if (that.toolbar) {\n                        that.toolbar.element.find(TOOL_SELECTOR).not(\"[tabindex=-1]\").trigger(\"focus\");\n\n                        shouldPreventDefault = true;\n                    }\n                }\n\n                if (shouldPreventDefault) {\n                    e.preventDefault();\n                }\n            },\n\n            focus: function() {\n                kendo.focusElement(this._getList());\n            },\n\n            _createDraggable: function() {\n                var that = this;\n                var draggable = that.options.draggable;\n                var hint;\n\n                if (draggable) {\n                    hint = draggable.hint;\n                    if (!that.options.selectable) {\n                        throw new Error(\"Dragging requires selection to be enabled\");\n                    }\n\n                    if (!hint) {\n                        hint = defaultHint;\n                    }\n\n                    that._draggable = new kendo.ui.Draggable(that.wrapper, {\n                        filter: draggable.filter ? draggable.filter : DEFAULT_FILTER,\n                        hint: kendo.isFunction(hint) ? hint : $(hint),\n                        dragstart: that._dragstart.bind(that),\n                        dragcancel: that._clear.bind(that),\n                        drag: that._drag.bind(that),\n                        dragend: that._dragend.bind(that)\n                    });\n                }\n            },\n\n            _dragstart: function(e) {\n                var that = this;\n                var draggedElement = that.draggedElement = e.currentTarget;\n                var placeholder = that.options.draggable.placeholder;\n                var dataItem = that.dataItem(draggedElement);\n                var eventData = { dataItems: dataItem, items: $(draggedElement), draggableEvent: e };\n\n                if (that.options.draggable.enabled === false) {\n                    e.preventDefault();\n                    return;\n                }\n\n                if (!placeholder) {\n                    placeholder = defaultPlaceholder;\n                }\n\n                that.placeholder = kendo.isFunction(placeholder) ? $(placeholder.call(that, draggedElement)) : $(placeholder);\n\n                if (draggedElement.is(DOT + DISABLED_STATE_CLASS)) {\n                    e.preventDefault();\n                } else {\n                    if (that.trigger(DRAGSTART, eventData)) {\n                        e.preventDefault();\n                    } else {\n                        that.clearSelection();\n                        that.select(draggedElement);\n                        draggedElement.addClass(DRAGGEDCLASS);\n                    }\n                }\n            },\n\n            _clear: function() {\n                this.draggedElement.removeClass(DRAGGEDCLASS);\n                this.placeholder.remove();\n            },\n\n            _findElementUnderCursor: function(e) {\n                var elementUnderCursor = kendo.elementUnderCursor(e);\n                var draggable = e.sender;\n\n                if ($.contains(draggable.hint[0], elementUnderCursor) || draggable.hint[0] === elementUnderCursor) {\n                    draggable.hint.hide();\n                    elementUnderCursor = kendo.elementUnderCursor(e);\n                    draggable.hint.show();\n                }\n\n                return elementUnderCursor;\n            },\n\n            _findTarget: function(e) {\n                var that = this;\n                var element = that._findElementUnderCursor(e);\n                var elementNode = $(element);\n                var list = that._getList();\n                var items;\n                var node;\n\n                if ($.contains(list[0], element)) {\n                    items = that.items();\n                    element = elementNode.is(\"li\") ? element : elementNode.closest(\"li\")[0];\n                    node = items.filter(element)[0] || items.has(element)[0];\n                    if (node) {\n                        node = $(node);\n                        return !node.hasClass(DISABLED_STATE_CLASS) ? { element: node, listBox: that } : null;\n                    } else {\n                        return null;\n                    }\n                } else if (list[0] == element || list.parent()[0] == element) {\n                    return { element: $(list), appendToBottom: true, listBox: that };\n                } else {\n                    return that._searchConnectedListBox(elementNode);\n                }\n            },\n\n            _getElementCenter: function(element) {\n                var center = element.length ? kendo.getOffset(element) : null;\n                if (center) {\n                    center.top += outerHeight(element) / 2;\n                    center.left += outerWidth(element) / 2;\n                }\n\n                return center;\n            },\n\n            _searchConnectedListBox: function(element) {\n                var connectedListBox;\n                var items;\n                var node;\n                var originalElement = element;\n                var closestContainer;\n\n                if (element.hasClass(\"k-list-scroller k-selectable\")) {\n                    closestContainer = element;\n                } else {\n                    closestContainer = element.closest(\".k-list-scroller.k-selectable\");\n                }\n\n                if (closestContainer.length) {\n                    connectedListBox = closestContainer.parent().find(\"[data-role='listbox']\").getKendoListBox();\n                } else {\n                    return null;\n                }\n\n                if (connectedListBox && $.inArray(this.element[0].id, connectedListBox.options.dropSources) !== -1) {\n                    items = connectedListBox.items();\n                    element = element.is(\"li\") ? element[0] : element.closest(\"li\")[0];\n                    node = items.filter(element)[0] || items.has(element)[0];\n                    if (node) {\n                        node = $(node);\n                        return !node.hasClass(DISABLED_STATE_CLASS) ? { element: node, listBox: connectedListBox } : null;\n                    } else if (!items.length ||\n                                originalElement.hasClass(\"k-list-scroller k-selectable\") ||\n                                originalElement.hasClass(\"k-list-content\")) {\n                        return { element: connectedListBox._getList(), listBox: connectedListBox, appendToBottom: true };\n                    } else {\n                        return null;\n                    }\n                }\n                return null;\n            },\n\n            _drag: function(e) {\n                var that = this;\n                var draggedElement = that.draggedElement;\n                var target = that._findTarget(e);\n                var cursorOffset = { left: e.x.location, top: e.y.location };\n                var dataItem = that.dataItem(draggedElement);\n                var eventData = { dataItems: [dataItem], items: $(draggedElement), draggableEvent: e };\n                var targetCenter;\n                var offsetDelta;\n                var direction;\n\n                if (that.trigger(DRAG, eventData)) {\n                    e.preventDefault();\n                    return;\n                }\n\n                if (target) {\n                    targetCenter = this._getElementCenter(target.element);\n\n                    offsetDelta = {\n                        left: Math.round(cursorOffset.left - targetCenter.left),\n                        top: Math.round(cursorOffset.top - targetCenter.top)\n                    };\n\n                    if (target.appendToBottom) {\n                        that._movePlaceholder(target, null , draggedElement);\n                        return;\n                    }\n\n                    if (offsetDelta.top < 0) {\n                        direction = \"prev\";\n                    } else if (offsetDelta.top > 0) {\n                        direction = \"next\";\n                    }\n\n                    if (direction) {\n                        if (target.element[0] != that.placeholder[0]) {\n                            that._movePlaceholder(target, direction, draggedElement);\n                        }\n                    }\n                 }\n                 else if (that.placeholder.parent().length) {\n                    that.placeholder.remove();\n                 }\n            },\n\n            _movePlaceholder: function(target, direction, draggedElement) {\n                var that = this;\n                var placeholder = that.placeholder;\n                var draggableOptions = target.listBox.options.draggable;\n\n                if (placeholder.parent().length) {\n                    that.placeholder.remove();\n                    if (draggableOptions && draggableOptions.placeholder) {\n                        that.placeholder = kendo.isFunction(draggableOptions.placeholder) ? $(draggableOptions.placeholder.call(that, draggedElement)) : $(draggableOptions.placeholder);\n                    } else {\n                        that.placeholder = $(defaultPlaceholder.call(that, draggedElement));\n                    }\n                }\n\n                if (!direction) {\n                    target.element.append(that.placeholder);\n                } else if (direction === \"prev\") {\n                    target.element.before(that.placeholder);\n                } else if (direction === \"next\") {\n                    target.element.after(that.placeholder);\n                }\n            },\n\n            _dragend: function(e) {\n                var that = this;\n                var draggedItem = that.draggedElement;\n                var items = that.items();\n                var placeholderIndex = items.not(that.draggedElement).index(that.placeholder);\n                var draggedIndex = items.not(that.placeholder).index(that.draggedElement);\n                var dataItem = that.dataItem(draggedItem);\n                var eventData = { dataItems: [dataItem], items: $(draggedItem) };\n                var connectedListBox = that.placeholder.closest(\".k-listbox\").find(\"[data-role='listbox']\").getKendoListBox();\n\n                if (that.trigger(DROP, extend({}, eventData, { draggableEvent: e }))) {\n                    e.preventDefault();\n                    this._clear();\n                    return;\n                }\n\n                if (placeholderIndex >= 0) {\n                    if (placeholderIndex !== draggedIndex && !that.trigger(REORDER, extend({}, eventData, { offset: placeholderIndex - draggedIndex }))) {\n                        draggedItem.removeClass(DRAGGEDCLASS);\n                        that.reorder(draggedItem, placeholderIndex);\n                    }\n                } else if (connectedListBox) {\n                    if (!that.trigger(REMOVE, eventData)) {\n                        that.remove($(draggedItem));\n                    }\n\n                    if (!connectedListBox.trigger(ADD, eventData)) {\n                        connectedListBox._addItemAt(dataItem, connectedListBox.items().index(that.placeholder));\n                    }\n                }\n\n                that._clear();\n                that._draggable.dropped = true;\n\n                that.trigger(DRAGEND, extend({}, eventData, { draggableEvent: e }));\n\n                that._updateToolbar();\n                that._updateAllToolbars();\n            },\n\n            reorder: function(item, index) {\n                var that = this;\n                var dataSource = that.dataSource;\n                var dataItem = that.dataItem(item);\n                var dataItemAtIndex = dataSource.at(index);\n                var itemAtIndex = that.items()[index];\n                var listItem = $(item);\n\n                if (dataItem && itemAtIndex && dataItemAtIndex) {\n                    that._removeElement(listItem);\n                    that._insertElementAt(listItem, index);\n                    that._updateToolbar();\n                }\n            },\n\n            remove: function(items) {\n                var that = this;\n                var listItems = that._getItems(items);\n                var itemsLength = listItems.length;\n                var i;\n\n                that._unbindDataSource();\n                that._unbindDataChange();\n                for (i = 0; i < itemsLength; i++) {\n                    that._removeItem($(listItems[i]));\n                }\n                that._bindDataChange();\n                that._bindDataSource();\n                that._syncElement();\n                that._updateToolbar();\n                that._updateAllToolbars();\n            },\n\n            _removeItem: function(item) {\n                var that = this;\n                var dataSource = that.dataSource;\n                var dataItem = that.dataItem(item);\n                var transport = dataSource.transport;\n\n                if (!dataItem || !dataSource) {\n                    return;\n                }\n                if (typeof dataItem === typeof \"\") {\n                    var data = dataSource._data;\n                    for (var i = 0; i < data.length; i++) {\n                        if (dataItem === data[i]) {\n                            data[i] = data[data.length - 1];\n                            data.pop();\n                            break;\n                        }\n                    }\n                } else {\n                    dataSource.remove(dataItem);\n                    if (transport && (transport.destroy || (transport.options || {}).destroy) &&\n                        (!dataItem.isNew || !dataItem.isNew())) {\n                        dataSource._destroyed.push(dataItem);\n                    }\n                }\n                that._removeElement(item);\n            },\n\n            _removeElement: function(item) {\n                kendo.destroy(item);\n                $(item).off().remove();\n            },\n\n            dataItem: function(element) {\n                var uniqueIdAttr = kendoAttr(UNIQUE_ID);\n                var uid = $(element).attr(uniqueIdAttr) || $(element).closest(\"[\" + uniqueIdAttr + \"]\").attr(uniqueIdAttr);\n                if (uid) {\n                    return this.dataSource.getByUid(uid);\n                }\n                else {\n                    return $(element).find(\".k-list-item-text\").html();\n                }\n            },\n\n            _dataItems: function(items) {\n                var dataItems = [];\n                var listItems = $(items);\n                var itemsLength = listItems.length;\n                var i;\n\n                for (i = 0; i < itemsLength; i++) {\n                    dataItems.push(this.dataItem(listItems.eq(i)));\n                }\n\n                return dataItems;\n            },\n\n            items: function() {\n                var list = this._getList();\n                return list.children();\n            },\n\n            select: function(items) {\n                var that = this;\n                var selectable = that.selectable;\n                var enabledItems;\n\n                if (isUndefined(items)) {\n                    return selectable.value();\n                }\n\n                enabledItems = that.items().filter(items).filter(ENABLED_ITEMS_SELECTOR);\n\n                if (!selectable.options.multiple) {\n                    selectable.clear();\n                    enabledItems = enabledItems.first();\n                }\n\n                return selectable.value(enabledItems);\n            },\n\n            clearSelection: function() {\n                var that = this;\n                var selectable = that.selectable;\n\n                if (selectable) {\n                    selectable.clear();\n                }\n            },\n\n            enable: function(items, enable) {\n                var that = this;\n                var enabled = isUndefined(enable) ? true : !!enable;\n                var listItems = that._getItems(items);\n                var itemsLength = listItems.length;\n                var i;\n\n                for (i = 0; i < itemsLength; i++) {\n                    that._enableItem($(listItems[i]), enabled);\n                }\n\n                that._updateAllToolbars();\n            },\n\n            _enableItem: function(item, enable) {\n                var that = this;\n                var dataItem = that.dataItem(item);\n\n                if (dataItem) {\n                    if (enable) {\n                        $(item).removeClass(DISABLED_STATE_CLASS);\n                    } else {\n                        $(item)\n                            .addClass(DISABLED_STATE_CLASS)\n                            .removeClass(SELECTED_STATE_CLASS);\n                    }\n                }\n            },\n\n            setDataSource: function(dataSource) {\n                var that = this;\n\n                that.options.dataSource = dataSource;\n\n                that._dataSource();\n            },\n\n            _dataSource: function() {\n                var that = this;\n                var options = that.options;\n                var dataSource = options.dataSource || {};\n\n                dataSource = Array.isArray(dataSource) ? { data: dataSource } : dataSource;\n                dataSource.select = that.element;\n                dataSource.fields = [\n                    { field: options.dataTextField },\n                    { field: options.dataValueField }];\n\n                that._unbindDataSource();\n                that.dataSource = DataSource.create(dataSource);\n                that._bindDataSource();\n\n                if (that.options.autoBind) {\n                    that.wrapper.attr(ARIA_BUSY, true);\n                    that.dataSource.fetch();\n                }\n            },\n\n            _bindDataChange: function() {\n                var dataSource = this.dataSource;\n                if (dataSource._data && dataSource._changeHandler) {\n                    dataSource._data.bind(CHANGE, dataSource._changeHandler);\n                    dataSource._data.trigger(CHANGE);\n                }\n            },\n\n            _unbindDataChange: function() {\n                var dataSource = this.dataSource;\n                if (dataSource._data && dataSource._changeHandler) {\n                    dataSource._data.unbind(CHANGE, dataSource._changeHandler);\n                }\n            },\n\n            _bindDataSource: function() {\n                var that = this;\n                var dataSource = that.dataSource;\n\n                that._dataChangeHandler = that.refresh.bind(that);\n\n                if (dataSource) {\n                    dataSource.bind(CHANGE, that._dataChangeHandler);\n                }\n            },\n\n            _unbindDataSource: function() {\n                var that = this;\n                var dataSource = that.dataSource;\n\n                if (dataSource) {\n                    dataSource.unbind(CHANGE, that._dataChangeHandler);\n                }\n            },\n\n            _wrapper: function() {\n                var that = this,\n                    element = that.element,\n                    wrapper = element.parent(\"div.k-listbox\");\n\n                if (!wrapper[0]) {\n                    wrapper = element.wrap('<div class=\"k-listbox\" unselectable=\"on\" />').parent();\n                    wrapper[0].style.cssText = element[0].style.cssText;\n                    wrapper[0].title = element[0].title;\n                    $('<div class=\"k-list-scroller\"><div class=\"k-list k-list-md\"><div class=\"k-list-content\"></div></div></div>').insertBefore(element);\n                }\n\n                that.wrapper = wrapper.addClass(element[0].className).css(\"display\", \"\");\n                that._innerWrapper = $(wrapper[0].firstChild);\n            },\n\n            _list: function() {\n                var that = this,\n                    list = $(\"<ul class='\" + LIST_CLASS + \"' role='listbox'></ul>\"),\n                    selectable = that.options.selectable,\n                    selectableOptions = Selectable.parseOptions(selectable);\n\n                if (selectableOptions.multiple) {\n                    list.attr(ARIA_MULTISELECTABLE, \"true\");\n                }\n\n                list.appendTo(that.wrapper.find(\".k-list-content\"));\n\n                if (that.options.navigatable) {\n                    that._getList().attr(TABINDEX, that._getTabIndex());\n                }\n            },\n\n            _templates: function() {\n                var that = this;\n                var options = this.options;\n                var template;\n\n                if (options.template && typeof options.template == \"string\") {\n                    template = kendo.template(options.template);\n                } else if (!options.template) {\n                    template = kendo.template(function (data) { return (\"\" + (kendo.getter(options.dataTextField)(data))); });\n                } else {\n                    template = options.template;\n                }\n\n                that.templates = {\n                    itemTemplate: kendo.template(function (ref) {\n                            var item = ref.item;\n                            var r = ref.r;\n\n                            return (\"<li class='k-list-item' role='option' aria-selected='false'><span class='k-list-item-text'>\" + (r(item)) + \"</span></li>\");\n                }\n                    ),\n                    itemContent: template,\n                    toolbar: (\"<div role='toolbar' class='\" + TOOLBAR_CLASS + \"'></div>\")\n                };\n            },\n\n            refresh: function() {\n                var that = this;\n                var view = that.dataSource.view();\n                var template = that.templates.itemTemplate;\n                var html = \"\";\n\n                for (var idx = 0; idx < view.length; idx++) {\n                    html += template({ item: view[idx], r: that.templates.itemContent });\n                }\n                that._getList().html(html);\n                that._setItemIds();\n                that._createToolbar();\n                that._syncElement();\n                that._updateToolbar();\n                that._updateAllToolbars();\n                that.trigger(DATABOUND);\n\n                that.wrapper.attr(ARIA_BUSY, false);\n            },\n\n            _syncElement: function() {\n                var options = \"\";\n                var view = this.dataSource.view();\n                for (var idx = 0; idx < view.length; idx++) {\n                    options += this._option(view[idx][this.options.dataValueField] || view[idx], view[idx][this.options.dataTextField] || view[idx], true);\n                }\n                this.element.html(options);\n            },\n\n            _option: function(dataValue, dataText) {\n                var option = \"<option\";\n\n                if (dataValue !== undefined$1) {\n                    dataValue += \"\";\n\n                    if (dataValue.indexOf('\"') !== -1) {\n                        dataValue = dataValue.replace(/\"/g, \"&quot;\");\n                    }\n\n                    option += ' value=\"' + dataValue + '\"';\n                }\n                option += \" selected>\";\n\n                if (dataText !== undefined$1) {\n                    option += kendo.htmlEncode(dataText);\n                }\n\n                return option += \"</option>\";\n            },\n\n            _setItemId: function(item, id) {\n                if (!item.length) {\n                    return;\n                }\n\n                item.attr(kendoAttr(UNIQUE_ID), id).attr(ID, id);\n            },\n\n            _setItemIds: function() {\n                var that = this;\n                var items = that.items();\n                var view = that.dataSource.view();\n                var viewLength = view.length;\n                var i;\n\n                for (i = 0; i < viewLength; i++) {\n                    that._setItemId(items.eq(i), view[i].uid);\n                }\n            },\n\n            _selectable: function() {\n                var that = this;\n                var selectable = that.options.selectable;\n                var selectableOptions = Selectable.parseOptions(selectable);\n\n                that.selectable = new Selectable(that._innerWrapper, {\n                    aria: true,\n                    selectedClass: \"k-selected\",\n                    multiple: selectableOptions.multiple,\n                    filter: ENABLED_ITEM_SELECTOR,\n                    change: that._onSelect.bind(that)\n                });\n            },\n\n            _onSelect: function() {\n                var that = this;\n\n                that._updateToolbar();\n                that._updateAllToolbars();\n                that.trigger(CHANGE);\n            },\n\n            _destroySelectable: function() {\n                var that = this;\n\n                if (that.selectable && that.selectable.element) {\n                    that.selectable.destroy();\n                    that.selectable = null;\n                }\n            },\n\n            _getList: function() {\n                return this.wrapper.find(LIST_SELECTOR);\n            },\n\n            _getItems: function(items) {\n                return this.items().filter(items);\n            },\n\n            _createToolbar: function() {\n                var that = this;\n                var toolbarOptions = that.options.toolbar;\n                var position = toolbarOptions.position || RIGHT;\n                var toolbarInsertion = position === BOTTOM ? \"insertAfter\" : \"insertBefore\";\n                var tools = toolbarOptions.tools || [];\n                var messages = that.options.messages;\n\n                that._destroyToolbar();\n                that.wrapper.removeClass(TOOLBAR_POSITION_CLASS_NAMES.join(SPACE));\n\n                if (tools.length && tools.length > 0) {\n                    var toolbarElement = $(that.templates.toolbar)[toolbarInsertion](that._innerWrapper);\n                    that.toolbar = new ToolBar(toolbarElement, extend({}, toolbarOptions, { listBox: that, messages: messages }));\n                    that.wrapper.addClass(TOOLBAR_CLASS + DASH + position);\n                }\n            },\n\n            _destroyToolbar: function() {\n                var that = this;\n\n                if (that.toolbar) {\n                    that.toolbar.destroy();\n                    that.toolbar = null;\n                }\n            },\n\n            _executeCommand: function(commandName) {\n                var that = this;\n                var command = CommandFactory.current.create(commandName, { listBox: that });\n\n                if (command) {\n                    command.execute();\n                    that._updateToolbar();\n                    that._updateAllToolbars();\n                }\n            },\n\n            _updateToolbar: function() {\n                var toolbar = this.toolbar;\n\n                if (toolbar) {\n                    toolbar._updateToolStates();\n                }\n            },\n\n            _updateAllToolbars: function() {\n                var listBoxElements = $(\"select[data-role='listbox']\");\n                var elementsLength = listBoxElements.length;\n                var listBox;\n                var i;\n\n                for (i = 0; i < elementsLength; i++) {\n                    listBox = $(listBoxElements[i]).data(KENDO_LISTBOX);\n\n                    if (listBox) {\n                        listBox._updateToolbar();\n                    }\n                }\n            }\n        });\n\n        kendo.ui.plugin(ListBox);\n\n        var CommandFactory = Class.extend({\n            init: function() {\n                this._commands = [];\n            },\n\n            register: function(commandName, commandType) {\n                this._commands.push({\n                    commandName: commandName,\n                    commandType: commandType\n                });\n            },\n\n            create: function(commandName, options) {\n                var commands = this._commands;\n                var itemsLength = commands.length;\n                var name = commandName ? commandName.toLowerCase() : \"\";\n                var match;\n                var command;\n                var i;\n\n                for (i = 0; i < itemsLength; i++) {\n                    command = commands[i];\n\n                    if (command.commandName.toLowerCase() === name) {\n                        match = command;\n                        break;\n                    }\n                }\n\n                if (match) {\n                    return new match.commandType(options);\n                }\n            }\n        });\n        CommandFactory.current = new CommandFactory();\n\n        var ListBoxCommand = Class.extend({\n            init: function(options) {\n                var that = this;\n\n                that.options = extend({}, that.options, options);\n                that.listBox = that.options.listBox;\n            },\n\n            options: {\n                listBox: null\n            },\n\n            getItems: function() {\n                return $(this.listBox.select());\n            },\n\n            execute: noop,\n            canExecute: noop\n        });\n\n        var RemoveItemsCommand = ListBoxCommand.extend({\n            execute: function() {\n                var that = this;\n                var listBox = that.listBox;\n                var items = that.getItems();\n\n                if (!listBox.trigger(REMOVE, { dataItems: listBox._dataItems(items), items: items })) {\n                    listBox.remove(items);\n                }\n            },\n\n            canExecute: function() {\n                return this.listBox.select().length > 0;\n            }\n        });\n        CommandFactory.current.register(REMOVE, RemoveItemsCommand);\n\n        var MoveItemsCommand = ListBoxCommand.extend({\n            execute: function() {\n                var that = this;\n\n                if (that.canExecute()) {\n                    that.moveItems();\n                }\n            },\n\n            canExecute: noop,\n\n            moveItems: function() {\n                var that = this;\n                var listBox = that.listBox;\n                var options = that.options;\n                var items = that.getItems();\n                var offset = options.offset;\n                var indecesInDom = getSortedDomIndices(items);\n                var movedItems = $.makeArray(items.sort(that.itemComparer));\n                var moveAction = options.moveAction;\n                var movedItem;\n\n                if (!listBox.trigger(REORDER, { dataItems: listBox._dataItems(movedItems), items: $(movedItems), offset: offset })) {\n                    while (movedItems.length > 0 && indecesInDom.length > 0) {\n                        movedItem = movedItems[moveAction]();\n\n                        listBox.reorder(movedItem, indecesInDom[moveAction]() + offset);\n                    }\n                }\n            },\n\n            options: {\n                offset: 0,\n                moveAction: \"pop\"\n            },\n\n            itemComparer: function(item1, item2) {\n                var indexItem1 = $(item1).index();\n                var indexItem2 = $(item2).index();\n\n                if (indexItem1 === indexItem2) {\n                    return 0;\n                } else {\n                    return (indexItem1 > indexItem2 ? 1 : (-1));\n                }\n            }\n        });\n\n        var MoveUpItemsCommand = MoveItemsCommand.extend({\n            options: {\n                offset: MOVE_UP_OFFSET,\n                moveAction: \"shift\"\n            },\n\n            canExecute: function() {\n                var items = this.getItems();\n                var domIndices = getSortedDomIndices(items);\n\n                return (domIndices.length > 0 && domIndices[0] > 0);\n            }\n        });\n        CommandFactory.current.register(MOVE_UP, MoveUpItemsCommand);\n\n        var MoveDownItemsCommand = MoveItemsCommand.extend({\n            options: {\n                offset: MOVE_DOWN_OFFSET,\n                moveAction: \"pop\"\n            },\n\n            canExecute: function() {\n                var that = this;\n                var items = that.getItems();\n                var domIndices = getSortedDomIndices(items);\n\n                return (domIndices.length > 0 && $(domIndices).last()[0] < (that.listBox.items().length - 1));\n            }\n        });\n        CommandFactory.current.register(MOVE_DOWN, MoveDownItemsCommand);\n\n        var TransferItemsCommand = ListBoxCommand.extend({\n            options: {\n                filter: ENABLED_ITEM_SELECTOR\n            },\n\n            execute: function() {\n                var that = this;\n                var sourceListBox = that.getSourceListBox();\n                var items = that.getItems().filter(that.options.filter);\n                var dataItems = sourceListBox ? sourceListBox._dataItems(items) : [];\n                var destinationListBox = that.getDestinationListBox();\n                var updatedSelection = that.getUpdatedSelection(items);\n\n                if (destinationListBox && items.length > 0) {\n                    if (!destinationListBox.trigger(ADD, { dataItems: dataItems, items: items })) {\n                        destinationListBox.add(dataItems);\n                    }\n\n                    if (!sourceListBox.trigger(REMOVE, { dataItems: dataItems, items: items })) {\n                        sourceListBox.remove(items);\n                        that.updateSelection(updatedSelection);\n                    }\n                }\n            },\n\n            getUpdatedSelection: function(items) {\n\n                if (items.length !== 1) {\n                    return null;\n                }\n                var that = this;\n                var itemFilter = that.options.filter;\n                var sourceListBox = that.getSourceListBox();\n                var lastEnabledItem = sourceListBox ? sourceListBox.items().filter(itemFilter).last() : null;\n                var containsLastItem = $(items).filter(lastEnabledItem).length > 0;\n                var itemToSelect = containsLastItem ? $(items).prevAll(itemFilter)[0] : $(items).nextAll(itemFilter)[0];\n\n                if (itemToSelect) {\n                    return itemToSelect;\n                } else {\n                    return null;\n                }\n            },\n\n            updateSelection: function(item) {\n                var sourceListBox = this.getSourceListBox();\n\n                if (sourceListBox && item) {\n                    sourceListBox.select($(item));\n                    sourceListBox.selectable.trigger(CHANGE);\n                    sourceListBox._scrollIntoView(item);\n                }\n            },\n\n            getSourceListBox: noop,\n            getDestinationListBox: noop\n        });\n\n        var TransferItemsToCommand = TransferItemsCommand.extend({\n            canExecute: function() {\n                var sourceListBox = this.getSourceListBox();\n\n                return (sourceListBox ? sourceListBox.select().length > 0 : false);\n            },\n\n            getSourceListBox: function() {\n                return this.listBox;\n            },\n\n            getDestinationListBox: function() {\n                var sourceListBox = this.getSourceListBox();\n                return sourceListBox && sourceListBox.options.connectWith ? $(HASH + sourceListBox.options.connectWith).data(KENDO_LISTBOX) : null;\n            },\n\n            getItems: function() {\n                var sourceListBox = this.getSourceListBox();\n                return sourceListBox ? $(sourceListBox.select()) : $();\n            }\n        });\n        CommandFactory.current.register(TRANSFER_TO, TransferItemsToCommand);\n\n        var TransferItemsFromCommand = TransferItemsCommand.extend({\n            canExecute: function() {\n                var sourceListBox = this.getSourceListBox();\n\n                return (sourceListBox ? sourceListBox.select().length > 0 : false);\n            },\n\n            getSourceListBox: function() {\n                var destinationListBox = this.getDestinationListBox();\n                return (destinationListBox && destinationListBox.options.connectWith) ? $(HASH + destinationListBox.options.connectWith).data(KENDO_LISTBOX) : null;\n            },\n\n            getDestinationListBox: function() {\n                return this.listBox;\n            },\n\n            getItems: function() {\n                var sourceListBox = this.getSourceListBox();\n                return sourceListBox ? $(sourceListBox.select()) : $();\n            }\n        });\n        CommandFactory.current.register(TRANSFER_FROM, TransferItemsFromCommand);\n\n        var TransferAllItemsToCommand = TransferItemsToCommand.extend({\n            canExecute: function() {\n                var sourceListBox = this.getSourceListBox();\n\n                return (sourceListBox ? sourceListBox.wrapper.find(ENABLED_ITEMS_SELECTOR).length > 0 : false);\n            },\n\n            getItems: function() {\n                var sourceListBox = this.getSourceListBox();\n                return sourceListBox ? sourceListBox.items() : $();\n            },\n\n            getUpdatedSelection: noop,\n            updateSelection: noop\n        });\n        CommandFactory.current.register(TRANSFER_ALL_TO, TransferAllItemsToCommand);\n\n        var TransferAllItemsFromCommand = TransferItemsFromCommand.extend({\n            canExecute: function() {\n                var sourceListBox = this.getSourceListBox();\n\n                return (sourceListBox ? sourceListBox.wrapper.find(ENABLED_ITEMS_SELECTOR).length > 0 : false);\n            },\n\n            getItems: function() {\n                var sourceListBox = this.getSourceListBox();\n                return sourceListBox ? sourceListBox.items() : $();\n            },\n\n            getUpdatedSelection: noop,\n            updateSelection: noop\n        });\n        CommandFactory.current.register(TRANSFER_ALL_FROM, TransferAllItemsFromCommand);\n\n        var ToolBar = Class.extend({\n            init: function(element, options) {\n                var that = this;\n\n                that.element = $(element).addClass(TOOLBAR_CLASS);\n                that.options = extend({}, that.options, options);\n                that.listBox = that.options.listBox;\n\n                that._initTemplates();\n                that._createTools();\n                that._updateToolStates();\n                that._attachEventHandlers();\n                that._aria();\n                that._tabindex();\n            },\n\n            destroy: function() {\n                var that = this;\n\n                that._detachEventHandlers();\n                kendo.destroy(that.element);\n                that.element.remove();\n                that.element = null;\n            },\n\n            options: {\n                position: RIGHT,\n                tools: []\n            },\n\n            _aria: function() {\n                var listEl = this.listBox._getList(),\n                    listBoxLabelledby = listEl.attr(ARIA_LABELLEDBY),\n                    listBoxLabel = listBoxLabelledby ? $(\"#\" + listBoxLabelledby).text() : listEl.attr(ARIA_LABEL),\n                    listElId = listEl.attr(\"id\") || kendo.guid();\n\n                listEl.attr(\"id\", listElId);\n                this.element.attr(ARIA_CONTROLS, listElId);\n\n                if (listBoxLabel) {\n                    this.element.attr(ARIA_LABEL, listBoxLabel + \" toolbar.\");\n                }\n            },\n\n            _attachEventHandlers: function() {\n                var that = this;\n\n                that.element\n                    .on(CLICK, ENABLED_TOOL_SELECTOR, that._onToolClick.bind(that))\n                    .on(KEYDOWN, that._keyDown.bind(that));\n            },\n            _createTools: function() {\n                var that = this;\n                var tools = that.options.tools;\n                var toolsLength = tools.length;\n                var toolsMessages = that.options.messages.tools;\n                var toolList = that.element;\n                var tool;\n                var i;\n\n                for (i = 0; i < toolsLength; i++) {\n                    tool = extend({}, ToolBar.defaultTools[tools[i]], { text: toolsMessages[tools[i]] });\n\n                    if (tool) {\n                        toolList.append($(that.templates.tool(tool)));\n                    }\n                }\n\n                that.element.append(toolList);\n            },\n\n            _detachEventHandlers: function() {\n                this.element.off(NS).find(\"*\").off(NS);\n            },\n\n            _executeToolCommand: function(command) {\n                var that = this;\n                var listBox = that.listBox;\n\n                if (listBox) {\n                    listBox._executeCommand(command);\n                }\n            },\n\n            _focusTool: function() {\n                this.element.find(TOOL_SELECTOR).not(\"[tabindex=-1]\").trigger(\"focus\");\n            },\n\n            _initTemplates: function() {\n                this.templates = {\n                    tool: kendoTemplate( function (ref) {\n                            var icon = ref.icon;\n                            var iconClass = ref.iconClass;\n                            var command = ref.command;\n                            var text = ref.text;\n\n                            return kendo.html.renderButton((\"<button data-command='\" + command + \"' title='\" + text + \"' aria-label='\" + text + \"'></button>\"), { icon: icon, iconClass: iconClass });\n                })\n                };\n            },\n\n            _keyDown: function(e) {\n                var key = e.keyCode,\n                    target = $(e.target),\n                    targetTool = target.is(TOOL_SELECTOR) ? target : target.closest(\"li\");\n\n                if (key === kendo.keys.UP || key === kendo.keys.LEFT) {\n                    e.preventDefault();\n                    if (targetTool.prev().length) {\n                        this._tabindex(targetTool.prev());\n                    }\n                    this._focusTool();\n                } else if (key === kendo.keys.DOWN || key === kendo.keys.RIGHT) {\n                    e.preventDefault();\n                    if (targetTool.next()) {\n                        this._tabindex(targetTool.next());\n                    }\n                    this._focusTool();\n                }\n            },\n\n            _onToolClick: function(e) {\n                e.preventDefault();\n\n                this._executeToolCommand($(e.currentTarget).data(COMMAND));\n                this._focusTool();\n            },\n\n            _tabindex: function(candidate) {\n                var buttons = this.element.find(TOOL_SELECTOR),\n                    focusable;\n\n                if (candidate && candidate.length) {\n                    focusable = candidate;\n                } else {\n                    focusable = buttons.first();\n                }\n\n                buttons.attr(TABINDEX, -1);\n                focusable.removeAttr(TABINDEX);\n            },\n\n            _updateToolStates: function() {\n                var that = this;\n                var tools = that.options.tools;\n                var toolsLength = tools.length;\n                var i;\n                var focusable = that.element.find(TOOL_SELECTOR).not(\"[tabindex=-1]\");\n\n                for (i = 0; i < toolsLength; i++) {\n                    that._updateToolState(tools[i]);\n                }\n\n                that._tabindex(focusable);\n            },\n\n            _updateToolState: function(toolName) {\n                var that = this;\n                var command = CommandFactory.current.create(toolName, { listBox: that.listBox });\n                var tool = that.element.find(\"[data-command='\" + toolName + \"']\");\n                var toolElement = tool[0];\n\n                if (toolElement && command && command.canExecute) {\n                    if (command.canExecute()) {\n                        tool.removeClass(DISABLED_STATE_CLASS).removeAttr(TABINDEX);\n                    } else {\n                        tool.addClass(DISABLED_STATE_CLASS).attr(TABINDEX, \"-1\");\n                    }\n                }\n            }\n        });\n\n        ToolBar.defaultTools = {\n            remove: {\n                command: REMOVE,\n                icon: \"x\"\n            },\n            moveUp: {\n                command: MOVE_UP,\n                icon: \"caret-alt-up\"\n            },\n            moveDown: {\n                command: MOVE_DOWN,\n                icon: \"caret-alt-down\"\n            },\n            transferTo: {\n                command: TRANSFER_TO,\n                icon: \"caret-alt-right\"\n            },\n            transferFrom: {\n                command: TRANSFER_FROM,\n                icon: \"caret-alt-left\"\n            },\n            transferAllTo: {\n                command: TRANSFER_ALL_TO,\n                icon: \"caret-double-alt-right\"\n            },\n            transferAllFrom: {\n                command: TRANSFER_ALL_FROM,\n                icon: \"caret-double-alt-left\"\n            }\n        };\n\n        extend(ListBox, {\n            ToolBar: ToolBar\n        });\n\n        function isInputElement(element) {\n            return $(element).is(\":button,a,:input,a>.k-icon,a>.k-svg-icon,textarea,span.k-select,span.k-icon,span.k-svg-icon,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdownlist\");\n        }\n\n    })(window.kendo.jQuery);\n\n}));\n"]}