{"version":3,"file":"kendo.listbox.min.js","names":["global","factory","exports","module","require","define","amd","globalThis","self","kendolistbox","js","this","$","undefined$1","kendo","window","kendoAttr","attr","data","keys","kendoTemplate","template","Widget","ui","DataSource","Selectable","DataBoundWidget","Class","extend","noop","DASH","KENDO_LISTBOX","NS","DISABLED_STATE_CLASS","SELECTED_STATE_CLASS","ENABLED_ITEM_SELECTOR","ENABLED_ITEMS_SELECTOR","TOOLBAR_CLASS","TOOL_SELECTOR","FOCUSED_CLASS","CLICK","KEYDOWN","BLUR","outerWidth","_outerWidth","outerHeight","_outerHeight","CHANGE","DATABOUND","ADD","REMOVE","REORDER","MOVE_UP","MOVE_DOWN","TRANSFER_TO","TRANSFER_FROM","TRANSFER_ALL_TO","TRANSFER_ALL_FROM","CARET_ALT_RIGHT","CARET_ALT_LEFT","CARET_ALT_DOUBLE_RIGHT","CARET_ALT_DOUBLE_LEFT","DRAGGEDCLASS","ID","TABINDEX","DRAGSTART","DRAG","DROP","DRAGEND","RIGHT","ARIA_ACTIVEDESCENDENT","ARIA_BUSY","ARIA_LABEL","TOOLBAR_POSITION_CLASS_NAMES","getSortedDomIndices","items","map","item","index","isUndefined","value","defaultHint","element","clone","addClass","defaultPlaceholder","ListBox","init","options","that","fn","call","_wrapper","_list","_ariaLabel","_getList","hide","dataSource","dataTextField","dataValueField","_templates","_selectable","_dataSource","_createToolbar","_createDraggable","_createNavigatable","destroy","isNaN","_listTabIndex","off","_unbindDataSource","_destroySelectable","_destroyToolbar","wrapper","_target","_draggable","placeholder","setOptions","events","name","autoBind","selectable","draggable","dropSources","connectWith","navigatable","toolbar","position","tools","messages","remove","moveUp","moveDown","transferTo","transferFrom","transferAllTo","transferAllFrom","add","dataItems","i","length","itemsLength","list","_unbindDataChange","_addItem","_bindDataChange","_bindDataSource","_syncElement","dataItem","templates","itemTemplate","r","itemContent","_setItemId","uid","appendTo","_data","push","_addItemAt","_insertElementAt","insertAfter","children","eq","prepend","on","_click","bind","_keyDown","_blur","_getTabIndex","tabindex","removeAttr","removeClass","e","target","currentTarget","oldTarget","activeEl","_activeElement","isContained","contains","is","focus","_getNavigatableItem","key","current","filter","first","UP","prevAll","DOWN","nextAll","_scrollIntoView","parent","itemOffsetTop","offsetTop","contentScrollTop","scrollTop","contentOffsetHeight","clientHeight","bottomDistance","offsetHeight","shouldPreventDefault","keyCode","shiftKey","ctrlKey","_shiftSelecting","DELETE","_executeCommand","preventDefault","clearSelection","hasClass","select","_updateToolbar","_updateAllToolbars","trigger","SPACEBAR","LEFT","F10","find","not","focusElement","hint","Error","Draggable","isFunction","dragstart","_dragstart","dragcancel","_clear","drag","_drag","dragend","_dragend","draggedElement","eventData","draggableEvent","enabled","_findElementUnderCursor","elementUnderCursor","sender","show","_findTarget","node","elementNode","closest","has","listBox","appendToBottom","_searchConnectedListBox","_getElementCenter","center","getOffset","top","left","connectedListBox","closestContainer","originalElement","getKendoListBox","inArray","id","targetCenter","offsetDelta","direction","cursorOffset","x","location","y","Math","round","_movePlaceholder","draggableOptions","before","after","append","draggedItem","placeholderIndex","draggedIndex","offset","reorder","dropped","dataItemAtIndex","at","itemAtIndex","listItem","_removeElement","listItems","_getItems","_removeItem","transport","pop","isNew","_destroyed","uniqueIdAttr","getByUid","html","_dataItems","enabledItems","multiple","clear","enable","_enableItem","setDataSource","Array","isArray","fields","field","create","fetch","_changeHandler","unbind","_dataChangeHandler","refresh","wrap","style","cssText","title","insertBefore","className","css","_innerWrapper","firstChild","parseOptions","getter","ref","view","idx","_setItemIds","_option","dataValue","dataText","option","indexOf","replace","htmlEncode","viewLength","selectableOptions","aria","selectedClass","change","_onSelect","toolbarOptions","join","toolbarElement","ToolBar","commandName","command","CommandFactory","execute","_updateToolStates","listBoxElements","elementsLength","plugin","_commands","register","commandType","match","commands","toLowerCase","ListBoxCommand","getItems","canExecute","RemoveItemsCommand","MoveItemsCommand","moveItems","movedItem","indecesInDom","movedItems","makeArray","sort","itemComparer","moveAction","item1","item2","indexItem1","indexItem2","MoveUpItemsCommand","domIndices","MoveDownItemsCommand","last","TransferItemsCommand","sourceListBox","getSourceListBox","destinationListBox","getDestinationListBox","updatedSelection","getUpdatedSelection","updateSelection","itemFilter","lastEnabledItem","itemToSelect","TransferItemsToCommand","TransferItemsFromCommand","TransferAllItemsToCommand","TransferAllItemsFromCommand","_initTemplates","_createTools","_attachEventHandlers","_aria","_tabindex","_detachEventHandlers","listEl","listBoxLabelledby","listBoxLabel","text","listElId","guid","_onToolClick","tool","isRtl","support","toolsLength","toolsMessages","toolList","defaultTools","deepExtend","icon","_executeToolCommand","_focusTool","iconClass","renderButton","targetTool","prev","next","candidate","focusable","buttons","_updateToolState","toolName","jQuery"],"sources":["kendo.listbox.js"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('kendo.draganddrop.js'), require('kendo.data.js'), require('kendo.selectable.js'), require('kendo.html.button.js')) :\n    typeof define === 'function' && define.amd ? define(['kendo.draganddrop', 'kendo.data', 'kendo.selectable', 'kendo.html.button'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, (global.kendolistbox = global.kendolistbox || {}, global.kendolistbox.js = factory()));\n})(this, (function () {\n    var __meta__ = {\n        id: \"listbox\",\n        name: \"ListBox\",\n        category: \"web\",\n        depends: [\"draganddrop\", \"data\", \"selectable\", 'html.button']\n    };\n\n    (function($, undefined$1) {\n        var kendo = window.kendo;\n        var kendoAttr = kendo.attr;\n        var data = kendo.data;\n        var keys = kendo.keys;\n        var kendoTemplate = kendo.template;\n        var Widget = kendo.ui.Widget;\n        var DataSource = data.DataSource;\n        var Selectable = kendo.ui.Selectable;\n        var DataBoundWidget = kendo.ui.DataBoundWidget;\n        var Class = kendo.Class;\n\n        var extend = $.extend;\n        var noop = $.noop;\n\n        var DASH = \"-\";\n        var DOT = \".\";\n        var SPACE = \" \";\n        var HASH = \"#\";\n\n        var KENDO_LISTBOX = \"kendoListBox\";\n        var NS = DOT + KENDO_LISTBOX;\n        var DISABLED_STATE_CLASS = \"k-disabled\";\n        var SELECTED_STATE_CLASS = \"k-selected\";\n        var ENABLED_ITEM_SELECTOR = \".k-list-item:not(.k-disabled)\";\n        var ENABLED_ITEMS_SELECTOR = \".k-list-ul:not(.k-disabled) >\" + ENABLED_ITEM_SELECTOR;\n        var TOOLBAR_CLASS = \"k-listbox-actions\";\n        var TOOL_SELECTOR = \".k-button\";\n        var ENABLED_TOOL_SELECTOR = \"button.k-button:not(.k-disabled)\";\n        var FOCUSED_CLASS = \"k-focus\";\n        var DRAG_CLUE_CLASS = \"k-drag-clue\";\n        var DROP_HINT_CLASS = \"k-drop-hint\";\n        var LIST_CLASS = \"k-list-ul\";\n        var LIST_SELECTOR = \".k-list-ul\";\n\n        var CLICK = \"click\" + NS;\n        var KEYDOWN = \"keydown\" + NS;\n        var BLUR = \"blur\" + NS;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var CHANGE = \"change\";\n        var DATABOUND = \"dataBound\";\n        var ADD = \"add\";\n        var REMOVE = \"remove\";\n        var REORDER = \"reorder\";\n        var MOVE_UP = \"moveUp\";\n        var MOVE_DOWN = \"moveDown\";\n        var TRANSFER_TO = \"transferTo\";\n        var TRANSFER_FROM = \"transferFrom\";\n        var TRANSFER_ALL_TO = \"transferAllTo\";\n        var TRANSFER_ALL_FROM = \"transferAllFrom\";\n        var CARET_ALT_RIGHT = \"caret-alt-right\";\n        var CARET_ALT_LEFT = \"caret-alt-left\";\n        var CARET_ALT_DOUBLE_RIGHT = \"caret-double-alt-right\";\n        var CARET_ALT_DOUBLE_LEFT = \"caret-double-alt-left\";\n        var DRAGGEDCLASS = \"k-ghost\";\n        var UNIQUE_ID = \"uid\";\n        var ID = \"id\";\n        var TABINDEX = \"tabindex\";\n        var COMMAND = \"command\";\n\n        var MOVE_UP_OFFSET = -1;\n        var MOVE_DOWN_OFFSET = 1;\n        var DRAGSTART = \"dragstart\";\n        var DRAG = \"drag\";\n        var DROP = \"drop\";\n        var DRAGEND = \"dragend\";\n        var DEFAULT_FILTER = \"ul.k-list-ul>li.k-list-item\";\n\n        var RIGHT = \"right\";\n        var BOTTOM = \"bottom\";\n\n        var ARIA_ACTIVEDESCENDENT = \"aria-activedescendant\";\n        var ARIA_BUSY = \"aria-busy\";\n        var ARIA_CONTROLS = \"aria-controls\";\n        var ARIA_LABEL = \"aria-label\";\n        var ARIA_LABELLEDBY = \"aria-labelledby\";\n        var ARIA_MULTISELECTABLE = \"aria-multiselectable\";\n\n        var TOOLBAR_POSITION_CLASS_NAMES = [\n            TOOLBAR_CLASS + DASH + \"left\",\n            TOOLBAR_CLASS + DASH + RIGHT,\n            TOOLBAR_CLASS + DASH + \"top\",\n            TOOLBAR_CLASS + DASH + BOTTOM\n        ];\n\n        function getSortedDomIndices(items) {\n            var indices = $.map(items, function(item) {\n                return $(item).index();\n            });\n\n            return indices;\n        }\n\n        function isUndefined(value) {\n            return (typeof value === \"undefined\");\n        }\n\n        function defaultHint(element) {\n            return element.clone()\n                .attr('class', '')\n                .addClass(DRAG_CLUE_CLASS);\n        }\n\n        function defaultPlaceholder() {\n            return $('<li>').addClass(DROP_HINT_CLASS);\n        }\n\n        var ListBox = DataBoundWidget.extend({\n            init: function(element, options) {\n                var that = this;\n                Widget.fn.init.call(that, element, options);\n\n                that._wrapper();\n                that._list();\n                that._ariaLabel(that._getList());\n                element = that.element.attr(\"multiple\", \"multiple\").hide();\n\n                if (element[0] && !that.options.dataSource) {\n                    that.options.dataTextField = that.options.dataTextField || \"text\";\n                    that.options.dataValueField = that.options.dataValueField || \"value\";\n                }\n                that._templates();\n                that._selectable();\n                that._dataSource();\n                that._createToolbar();\n                that._createDraggable();\n                that._createNavigatable();\n            },\n\n            destroy: function() {\n                var that = this;\n\n                DataBoundWidget.fn.destroy.call(that);\n                if (!isNaN(that._listTabIndex)) {\n                    that._getList().off();\n                    that._listTabIndex = null;\n                }\n                that._unbindDataSource();\n                that._destroySelectable();\n                that._destroyToolbar();\n                that.wrapper.off(NS);\n                if (that._target) {\n                    that._target = null;\n                }\n                if (that._draggable) {\n                    that._draggable.destroy();\n                    that.placeholder = null;\n                }\n\n                kendo.destroy(that.element);\n            },\n\n            setOptions: function(options) {\n                Widget.fn.setOptions.call(this, options);\n                this._templates();\n                this._dataSource();\n            },\n\n            events: [\n                CHANGE,\n                DATABOUND,\n                ADD,\n                REMOVE,\n                REORDER,\n                DRAGSTART,\n                DRAG,\n                DROP,\n                DRAGEND\n            ],\n\n            options: {\n                name: \"ListBox\",\n                autoBind: true,\n                template: \"\",\n                dataTextField: \"\",\n                dataValueField: \"\",\n                selectable: \"single\",\n                draggable: null,\n                dropSources: [],\n                connectWith: \"\",\n                navigatable: true,\n                toolbar: {\n                    position: RIGHT,\n                    tools: []\n                },\n                messages: {\n                    tools: {\n                        remove: \"Delete\",\n                        moveUp: \"Move Up\",\n                        moveDown: \"Move Down\",\n                        transferTo: \"Transfer To\",\n                        transferFrom: \"Transfer From\",\n                        transferAllTo: \"Transfer All To\",\n                        transferAllFrom: \"Transfer All From\"\n                    }\n                }\n            },\n\n            add: function(dataItems) {\n                var that = this;\n                var items = dataItems && dataItems.length ? dataItems : [dataItems];\n                var itemsLength = items.length;\n                var list = that._getList();\n                var i;\n\n                that._unbindDataSource();\n                that._unbindDataChange();\n                for (i = 0; i < itemsLength; i++) {\n                    that._addItem(items[i], list);\n                }\n                that._bindDataChange();\n                that._bindDataSource();\n                that._syncElement();\n            },\n\n            _addItem: function(dataItem, list) {\n                var that = this;\n                var item = $(that.templates.itemTemplate({ item: dataItem, r: that.templates.itemContent }));\n\n                that._setItemId(item, dataItem.uid);\n\n                item.appendTo(list);\n\n                if (typeof dataItem === typeof \"\") {\n                    that.dataSource._data.push(dataItem);\n                } else {\n                    that.dataSource.add(dataItem);\n                }\n            },\n\n            _addItemAt: function(dataItem, index) {\n                var that = this;\n                var item = $(that.templates.itemTemplate({ item: dataItem, r: that.templates.itemContent }));\n                that._unbindDataSource();\n                if (typeof dataItem === typeof \"\") {\n                    that._insertElementAt(item, index);\n                    that.dataSource._data.push(dataItem);\n                } else {\n                    that._setItemId(item, dataItem.uid);\n                    that._insertElementAt(item, index);\n                    that.dataSource.add(dataItem);\n                }\n                that._bindDataSource();\n                that._syncElement();\n            },\n\n            _insertElementAt: function(item, index) {\n                var that = this;\n                var list = that._getList();\n\n                if (index > 0) {\n                    $(item).insertAfter(list.children().eq(index - 1));\n                } else {\n                    $(list).prepend(item);\n                }\n            },\n\n            _createNavigatable: function() {\n                var that = this;\n                var options = that.options;\n\n                if (options.navigatable) {\n                    that._getList().on(CLICK, ENABLED_ITEM_SELECTOR, that._click.bind(that))\n                                .on(KEYDOWN, that._keyDown.bind(that))\n                                .on(BLUR, that._blur.bind(that));\n                }\n            },\n\n            _getTabIndex: function() {\n                var that = this;\n                var tabindex;\n\n                if (!isNaN(that._listTabIndex))\n                {\n                    return that._listTabIndex;\n                }\n\n                tabindex = that.element.attr(TABINDEX);\n                that._listTabIndex = !isNaN(tabindex) ? tabindex : 0;\n\n                that.element.removeAttr(TABINDEX);\n\n                return that._listTabIndex;\n            },\n\n            _blur: function() {\n                if (this._target) {\n                    this._target.removeClass(FOCUSED_CLASS);\n                    this._getList().removeAttr(ARIA_ACTIVEDESCENDENT);\n                }\n                this._target = null;\n            },\n\n            _click: function(e) {\n                var that = this;\n                var target = $(e.currentTarget);\n                var oldTarget = that._target;\n                var list = that._getList();\n                var activeEl = kendo._activeElement();\n                var isContained = $.contains(list, activeEl);\n\n                if (oldTarget) {\n                    oldTarget.removeClass(FOCUSED_CLASS);\n                }\n\n                that._target = target;\n                target.addClass(FOCUSED_CLASS);\n                list.attr(ARIA_ACTIVEDESCENDENT, target.attr(ID));\n\n                if (list[0] !== activeEl && (!isContained || !isInputElement(activeEl))) {\n                    that.focus();\n                }\n            },\n\n            _getNavigatableItem: function(key) {\n                var that = this;\n                var current;\n\n                if (!that._target) {\n                    current = that.items().filter(ENABLED_ITEM_SELECTOR).first();\n                } else {\n                    current = that._target;\n                }\n\n                if (key === keys.UP && that._target) {\n                    current = that._target.prevAll(ENABLED_ITEM_SELECTOR).first();\n                }\n\n                if (key === keys.DOWN && that._target) {\n                    current = that._target.nextAll(ENABLED_ITEM_SELECTOR).first();\n                }\n\n                return current.length ? current : null;\n            },\n\n            _scrollIntoView: function(item) {\n                if (!item) {\n                    return;\n                }\n\n                if (item[0]) {\n                    item = item[0];\n                }\n\n                var list = this._getList().parent()[0];\n                var itemOffsetTop = item.offsetTop;\n                var contentScrollTop = list.scrollTop;\n                var contentOffsetHeight = list.clientHeight;\n                var bottomDistance = itemOffsetTop + item.offsetHeight;\n\n                if (contentScrollTop > itemOffsetTop) {\n                    contentScrollTop = itemOffsetTop;\n                } else if (bottomDistance > (contentScrollTop + contentOffsetHeight)) {\n                    contentScrollTop = (bottomDistance - contentOffsetHeight);\n                }\n\n                list.scrollTop = contentScrollTop;\n            },\n\n            _keyDown: function(e) {\n                var that = this;\n                var key = e.keyCode;\n                var current = that._getNavigatableItem(key);\n                var shouldPreventDefault;\n\n                if (!(e.shiftKey && !e.ctrlKey && (key === keys.DOWN || key === keys.UP))) {\n                    that._shiftSelecting = false;\n                }\n\n                if (key == keys.DELETE) {\n                    that._executeCommand(REMOVE);\n                    if (that._target) {\n                        that._target.removeClass(FOCUSED_CLASS);\n                        that._getList().removeAttr(ARIA_ACTIVEDESCENDENT);\n                        that._target = null;\n                    }\n                    shouldPreventDefault = true;\n                } else if (key === keys.DOWN || key === keys.UP) {\n                    if (!current) {\n                        e.preventDefault();\n                        return;\n                    }\n\n                    if (e.shiftKey && !e.ctrlKey) {\n                        if (that._target) {\n                            that._target.removeClass(FOCUSED_CLASS);\n                        }\n\n                        if (!that._shiftSelecting) {\n                            that.clearSelection();\n                            that._shiftSelecting = true;\n                        }\n                        if (that._target && current.hasClass(\"k-selected\")) {\n                            that._target.removeClass(SELECTED_STATE_CLASS);\n                        } else if (that.options.selectable == \"single\") {\n                            that.select(current);\n                        } else {\n                            that.select(current.add(that._target));\n                        }\n\n                        that._updateToolbar();\n                        that._updateAllToolbars();\n                        that.trigger(CHANGE);\n                    } else if (e.shiftKey && e.ctrlKey) {\n                        that._executeCommand(key === keys.DOWN ? MOVE_DOWN : MOVE_UP);\n                        that._scrollIntoView(that._target);\n                        e.preventDefault();\n                        return;\n                    } else if (!e.shiftKey && !e.ctrlKey) {\n                        if (that._target) {\n                            that._target.removeClass(FOCUSED_CLASS);\n                        }\n\n                        if (that.options.selectable === \"multiple\") {\n                            that.clearSelection();\n                        }\n\n                        that.select(current);\n                        that._updateToolbar();\n                        that._updateAllToolbars();\n                        that.trigger(CHANGE);\n                    }\n\n                    if (current && that._target && that._target[0] !== current[0]) {\n                        that._target.removeClass(FOCUSED_CLASS);\n                    }\n\n                    that._target = current;\n\n                    if (that._target) {\n                        that._target.addClass(FOCUSED_CLASS);\n                        that._scrollIntoView(that._target);\n                        that._getList().attr(ARIA_ACTIVEDESCENDENT, that._target.attr(ID));\n                    } else {\n                        that._getList().removeAttr(ARIA_ACTIVEDESCENDENT);\n                    }\n                    shouldPreventDefault = true;\n                } else if (key == keys.SPACEBAR) {\n                    if (e.ctrlKey && that._target) {\n                        if (that._target.hasClass(SELECTED_STATE_CLASS)) {\n                            that._target.removeClass(SELECTED_STATE_CLASS);\n                        } else {\n                            that.select(that._target);\n                        }\n\n                        that.trigger(CHANGE);\n                    } else {\n                       that.clearSelection();\n                       that.select(that._target);\n                       that.trigger(CHANGE);\n                    }\n\n                    that._updateToolbar();\n                    that._updateAllToolbars();\n                    shouldPreventDefault = true;\n                } else if (e.ctrlKey && key == keys.RIGHT) {\n                    if (e.shiftKey) {\n                       that._executeCommand(TRANSFER_ALL_TO);\n                    } else {\n                       that._executeCommand(TRANSFER_TO);\n                    }\n\n                    that._target = that.select().length ? that.select() : null;\n                    shouldPreventDefault = true;\n                } else if (e.ctrlKey && key == keys.LEFT) {\n                    if (e.shiftKey) {\n                       that._executeCommand(TRANSFER_ALL_FROM);\n                    } else {\n                       that._executeCommand(TRANSFER_FROM);\n                    }\n                    shouldPreventDefault = true;\n                } else if (key === keys.F10) {\n                    if (that.toolbar) {\n                        that.toolbar.element.find(TOOL_SELECTOR).not(\"[tabindex=-1]\").trigger(\"focus\");\n\n                        shouldPreventDefault = true;\n                    }\n                }\n\n                if (shouldPreventDefault) {\n                    e.preventDefault();\n                }\n            },\n\n            focus: function() {\n                kendo.focusElement(this._getList());\n            },\n\n            _createDraggable: function() {\n                var that = this;\n                var draggable = that.options.draggable;\n                var hint;\n\n                if (draggable) {\n                    hint = draggable.hint;\n                    if (!that.options.selectable) {\n                        throw new Error(\"Dragging requires selection to be enabled\");\n                    }\n\n                    if (!hint) {\n                        hint = defaultHint;\n                    }\n\n                    that._draggable = new kendo.ui.Draggable(that.wrapper, {\n                        filter: draggable.filter ? draggable.filter : DEFAULT_FILTER,\n                        hint: kendo.isFunction(hint) ? hint : $(hint),\n                        dragstart: that._dragstart.bind(that),\n                        dragcancel: that._clear.bind(that),\n                        drag: that._drag.bind(that),\n                        dragend: that._dragend.bind(that)\n                    });\n                }\n            },\n\n            _dragstart: function(e) {\n                var that = this;\n                var draggedElement = that.draggedElement = e.currentTarget;\n                var placeholder = that.options.draggable.placeholder;\n                var dataItem = that.dataItem(draggedElement);\n                var eventData = { dataItems: dataItem, items: $(draggedElement), draggableEvent: e };\n\n                if (that.options.draggable.enabled === false) {\n                    e.preventDefault();\n                    return;\n                }\n\n                if (!placeholder) {\n                    placeholder = defaultPlaceholder;\n                }\n\n                that.placeholder = kendo.isFunction(placeholder) ? $(placeholder.call(that, draggedElement)) : $(placeholder);\n\n                if (draggedElement.is(DOT + DISABLED_STATE_CLASS)) {\n                    e.preventDefault();\n                } else {\n                    if (that.trigger(DRAGSTART, eventData)) {\n                        e.preventDefault();\n                    } else {\n                        that.clearSelection();\n                        that.select(draggedElement);\n                        draggedElement.addClass(DRAGGEDCLASS);\n                    }\n                }\n            },\n\n            _clear: function() {\n                this.draggedElement.removeClass(DRAGGEDCLASS);\n                this.placeholder.remove();\n            },\n\n            _findElementUnderCursor: function(e) {\n                var elementUnderCursor = kendo.elementUnderCursor(e);\n                var draggable = e.sender;\n\n                if ($.contains(draggable.hint[0], elementUnderCursor) || draggable.hint[0] === elementUnderCursor) {\n                    draggable.hint.hide();\n                    elementUnderCursor = kendo.elementUnderCursor(e);\n                    draggable.hint.show();\n                }\n\n                return elementUnderCursor;\n            },\n\n            _findTarget: function(e) {\n                var that = this;\n                var element = that._findElementUnderCursor(e);\n                var elementNode = $(element);\n                var list = that._getList();\n                var items;\n                var node;\n\n                if ($.contains(list[0], element)) {\n                    items = that.items();\n                    element = elementNode.is(\"li\") ? element : elementNode.closest(\"li\")[0];\n                    node = items.filter(element)[0] || items.has(element)[0];\n                    if (node) {\n                        node = $(node);\n                        return !node.hasClass(DISABLED_STATE_CLASS) ? { element: node, listBox: that } : null;\n                    } else {\n                        return null;\n                    }\n                } else if (list[0] == element || list.parent()[0] == element) {\n                    return { element: $(list), appendToBottom: true, listBox: that };\n                } else {\n                    return that._searchConnectedListBox(elementNode);\n                }\n            },\n\n            _getElementCenter: function(element) {\n                var center = element.length ? kendo.getOffset(element) : null;\n                if (center) {\n                    center.top += outerHeight(element) / 2;\n                    center.left += outerWidth(element) / 2;\n                }\n\n                return center;\n            },\n\n            _searchConnectedListBox: function(element) {\n                var connectedListBox;\n                var items;\n                var node;\n                var originalElement = element;\n                var closestContainer;\n\n                if (element.hasClass(\"k-list-scroller k-selectable\")) {\n                    closestContainer = element;\n                } else {\n                    closestContainer = element.closest(\".k-list-scroller.k-selectable\");\n                }\n\n                if (closestContainer.length) {\n                    connectedListBox = closestContainer.parent().find(\"[data-role='listbox']\").getKendoListBox();\n                } else {\n                    return null;\n                }\n\n                if (connectedListBox && $.inArray(this.element[0].id, connectedListBox.options.dropSources) !== -1) {\n                    items = connectedListBox.items();\n                    element = element.is(\"li\") ? element[0] : element.closest(\"li\")[0];\n                    node = items.filter(element)[0] || items.has(element)[0];\n                    if (node) {\n                        node = $(node);\n                        return !node.hasClass(DISABLED_STATE_CLASS) ? { element: node, listBox: connectedListBox } : null;\n                    } else if (!items.length ||\n                                originalElement.hasClass(\"k-list-scroller k-selectable\") ||\n                                originalElement.hasClass(\"k-list-content\")) {\n                        return { element: connectedListBox._getList(), listBox: connectedListBox, appendToBottom: true };\n                    } else {\n                        return null;\n                    }\n                }\n                return null;\n            },\n\n            _drag: function(e) {\n                var that = this;\n                var draggedElement = that.draggedElement;\n                var target = that._findTarget(e);\n                var cursorOffset = { left: e.x.location, top: e.y.location };\n                var dataItem = that.dataItem(draggedElement);\n                var eventData = { dataItems: [dataItem], items: $(draggedElement), draggableEvent: e };\n                var targetCenter;\n                var offsetDelta;\n                var direction;\n\n                if (that.trigger(DRAG, eventData)) {\n                    e.preventDefault();\n                    return;\n                }\n\n                if (target) {\n                    targetCenter = this._getElementCenter(target.element);\n\n                    offsetDelta = {\n                        left: Math.round(cursorOffset.left - targetCenter.left),\n                        top: Math.round(cursorOffset.top - targetCenter.top)\n                    };\n\n                    if (target.appendToBottom) {\n                        that._movePlaceholder(target, null , draggedElement);\n                        return;\n                    }\n\n                    if (offsetDelta.top < 0) {\n                        direction = \"prev\";\n                    } else if (offsetDelta.top > 0) {\n                        direction = \"next\";\n                    }\n\n                    if (direction) {\n                        if (target.element[0] != that.placeholder[0]) {\n                            that._movePlaceholder(target, direction, draggedElement);\n                        }\n                    }\n                 }\n                 else if (that.placeholder.parent().length) {\n                    that.placeholder.remove();\n                 }\n            },\n\n            _movePlaceholder: function(target, direction, draggedElement) {\n                var that = this;\n                var placeholder = that.placeholder;\n                var draggableOptions = target.listBox.options.draggable;\n\n                if (placeholder.parent().length) {\n                    that.placeholder.remove();\n                    if (draggableOptions && draggableOptions.placeholder) {\n                        that.placeholder = kendo.isFunction(draggableOptions.placeholder) ? $(draggableOptions.placeholder.call(that, draggedElement)) : $(draggableOptions.placeholder);\n                    } else {\n                        that.placeholder = $(defaultPlaceholder.call(that, draggedElement));\n                    }\n                }\n\n                if (!direction) {\n                    target.element.append(that.placeholder);\n                } else if (direction === \"prev\") {\n                    target.element.before(that.placeholder);\n                } else if (direction === \"next\") {\n                    target.element.after(that.placeholder);\n                }\n            },\n\n            _dragend: function(e) {\n                var that = this;\n                var draggedItem = that.draggedElement;\n                var items = that.items();\n                var placeholderIndex = items.not(that.draggedElement).index(that.placeholder);\n                var draggedIndex = items.not(that.placeholder).index(that.draggedElement);\n                var dataItem = that.dataItem(draggedItem);\n                var eventData = { dataItems: [dataItem], items: $(draggedItem) };\n                var connectedListBox = that.placeholder.closest(\".k-listbox\").find(\"[data-role='listbox']\").getKendoListBox();\n\n                if (that.trigger(DROP, extend({}, eventData, { draggableEvent: e }))) {\n                    e.preventDefault();\n                    this._clear();\n                    return;\n                }\n\n                if (placeholderIndex >= 0) {\n                    if (placeholderIndex !== draggedIndex && !that.trigger(REORDER, extend({}, eventData, { offset: placeholderIndex - draggedIndex }))) {\n                        draggedItem.removeClass(DRAGGEDCLASS);\n                        that.reorder(draggedItem, placeholderIndex);\n                    }\n                } else if (connectedListBox) {\n                    if (!that.trigger(REMOVE, eventData)) {\n                        that.remove($(draggedItem));\n                    }\n\n                    if (!connectedListBox.trigger(ADD, eventData)) {\n                        connectedListBox._addItemAt(dataItem, connectedListBox.items().index(that.placeholder));\n                    }\n                }\n\n                that._clear();\n                that._draggable.dropped = true;\n\n                that.trigger(DRAGEND, extend({}, eventData, { draggableEvent: e }));\n\n                that._updateToolbar();\n                that._updateAllToolbars();\n            },\n\n            reorder: function(item, index) {\n                var that = this;\n                var dataSource = that.dataSource;\n                var dataItem = that.dataItem(item);\n                var dataItemAtIndex = dataSource.at(index);\n                var itemAtIndex = that.items()[index];\n                var listItem = $(item);\n\n                if (dataItem && itemAtIndex && dataItemAtIndex) {\n                    that._removeElement(listItem);\n                    that._insertElementAt(listItem, index);\n                    that._updateToolbar();\n                }\n            },\n\n            remove: function(items) {\n                var that = this;\n                var listItems = that._getItems(items);\n                var itemsLength = listItems.length;\n                var i;\n\n                that._unbindDataSource();\n                that._unbindDataChange();\n                for (i = 0; i < itemsLength; i++) {\n                    that._removeItem($(listItems[i]));\n                }\n                that._bindDataChange();\n                that._bindDataSource();\n                that._syncElement();\n                that._updateToolbar();\n                that._updateAllToolbars();\n            },\n\n            _removeItem: function(item) {\n                var that = this;\n                var dataSource = that.dataSource;\n                var dataItem = that.dataItem(item);\n                var transport = dataSource.transport;\n\n                if (!dataItem || !dataSource) {\n                    return;\n                }\n                if (typeof dataItem === typeof \"\") {\n                    var data = dataSource._data;\n                    for (var i = 0; i < data.length; i++) {\n                        if (dataItem === data[i]) {\n                            data[i] = data[data.length - 1];\n                            data.pop();\n                            break;\n                        }\n                    }\n                } else {\n                    dataSource.remove(dataItem);\n                    if (transport && (transport.destroy || (transport.options || {}).destroy) &&\n                        (!dataItem.isNew || !dataItem.isNew())) {\n                        dataSource._destroyed.push(dataItem);\n                    }\n                }\n                that._removeElement(item);\n            },\n\n            _removeElement: function(item) {\n                kendo.destroy(item);\n                $(item).off().remove();\n            },\n\n            dataItem: function(element) {\n                var uniqueIdAttr = kendoAttr(UNIQUE_ID);\n                var uid = $(element).attr(uniqueIdAttr) || $(element).closest(\"[\" + uniqueIdAttr + \"]\").attr(uniqueIdAttr);\n                if (uid) {\n                    return this.dataSource.getByUid(uid);\n                }\n                else {\n                    return $(element).find(\".k-list-item-text\").html();\n                }\n            },\n\n            _dataItems: function(items) {\n                var dataItems = [];\n                var listItems = $(items);\n                var itemsLength = listItems.length;\n                var i;\n\n                for (i = 0; i < itemsLength; i++) {\n                    dataItems.push(this.dataItem(listItems.eq(i)));\n                }\n\n                return dataItems;\n            },\n\n            items: function() {\n                var list = this._getList();\n                return list.children();\n            },\n\n            select: function(items) {\n                var that = this;\n                var selectable = that.selectable;\n                var enabledItems;\n\n                if (isUndefined(items)) {\n                    return selectable.value();\n                }\n\n                enabledItems = that.items().filter(items).filter(ENABLED_ITEMS_SELECTOR);\n\n                if (!selectable.options.multiple) {\n                    selectable.clear();\n                    enabledItems = enabledItems.first();\n                }\n\n                return selectable.value(enabledItems);\n            },\n\n            clearSelection: function() {\n                var that = this;\n                var selectable = that.selectable;\n\n                if (selectable) {\n                    selectable.clear();\n                }\n            },\n\n            enable: function(items, enable) {\n                var that = this;\n                var enabled = isUndefined(enable) ? true : !!enable;\n                var listItems = that._getItems(items);\n                var itemsLength = listItems.length;\n                var i;\n\n                for (i = 0; i < itemsLength; i++) {\n                    that._enableItem($(listItems[i]), enabled);\n                }\n\n                that._updateAllToolbars();\n            },\n\n            _enableItem: function(item, enable) {\n                var that = this;\n                var dataItem = that.dataItem(item);\n\n                if (dataItem) {\n                    if (enable) {\n                        $(item).removeClass(DISABLED_STATE_CLASS);\n                    } else {\n                        $(item)\n                            .addClass(DISABLED_STATE_CLASS)\n                            .removeClass(SELECTED_STATE_CLASS);\n                    }\n                }\n            },\n\n            setDataSource: function(dataSource) {\n                var that = this;\n\n                that.options.dataSource = dataSource;\n\n                that._dataSource();\n            },\n\n            _dataSource: function() {\n                var that = this;\n                var options = that.options;\n                var dataSource = options.dataSource || {};\n\n                dataSource = Array.isArray(dataSource) ? { data: dataSource } : dataSource;\n                dataSource.select = that.element;\n                dataSource.fields = [\n                    { field: options.dataTextField },\n                    { field: options.dataValueField }];\n\n                that._unbindDataSource();\n                that.dataSource = DataSource.create(dataSource);\n                that._bindDataSource();\n\n                if (that.options.autoBind) {\n                    that.wrapper.attr(ARIA_BUSY, true);\n                    that.dataSource.fetch();\n                }\n            },\n\n            _bindDataChange: function() {\n                var dataSource = this.dataSource;\n                if (dataSource._data && dataSource._changeHandler) {\n                    dataSource._data.bind(CHANGE, dataSource._changeHandler);\n                    dataSource._data.trigger(CHANGE);\n                }\n            },\n\n            _unbindDataChange: function() {\n                var dataSource = this.dataSource;\n                if (dataSource._data && dataSource._changeHandler) {\n                    dataSource._data.unbind(CHANGE, dataSource._changeHandler);\n                }\n            },\n\n            _bindDataSource: function() {\n                var that = this;\n                var dataSource = that.dataSource;\n\n                that._dataChangeHandler = that.refresh.bind(that);\n\n                if (dataSource) {\n                    dataSource.bind(CHANGE, that._dataChangeHandler);\n                }\n            },\n\n            _unbindDataSource: function() {\n                var that = this;\n                var dataSource = that.dataSource;\n\n                if (dataSource) {\n                    dataSource.unbind(CHANGE, that._dataChangeHandler);\n                }\n            },\n\n            _wrapper: function() {\n                var that = this,\n                    element = that.element,\n                    wrapper = element.parent(\"div.k-listbox\");\n\n                if (!wrapper[0]) {\n                    wrapper = element.wrap('<div class=\"k-listbox\" unselectable=\"on\" />').parent();\n                    wrapper[0].style.cssText = element[0].style.cssText;\n                    wrapper[0].title = element[0].title;\n                    $('<div class=\"k-list-scroller\"><div class=\"k-list k-list-md\"><div class=\"k-list-content\"></div></div></div>').insertBefore(element);\n                }\n\n                that.wrapper = wrapper.addClass(element[0].className).css(\"display\", \"\");\n                that._innerWrapper = $(wrapper[0].firstChild);\n            },\n\n            _list: function() {\n                var that = this,\n                    list = $(\"<ul class='\" + LIST_CLASS + \"' role='listbox'></ul>\"),\n                    selectable = that.options.selectable,\n                    selectableOptions = Selectable.parseOptions(selectable);\n\n                if (selectableOptions.multiple) {\n                    list.attr(ARIA_MULTISELECTABLE, \"true\");\n                }\n\n                list.appendTo(that.wrapper.find(\".k-list-content\"));\n\n                if (that.options.navigatable) {\n                    that._getList().attr(TABINDEX, that._getTabIndex());\n                }\n            },\n\n            _templates: function() {\n                var that = this;\n                var options = this.options;\n                var template;\n\n                if (options.template && typeof options.template == \"string\") {\n                    template = kendo.template(options.template);\n                } else if (!options.template) {\n                    template = kendo.template(function (data) { return (\"\" + (kendo.getter(options.dataTextField)(data))); });\n                } else {\n                    template = options.template;\n                }\n\n                that.templates = {\n                    itemTemplate: kendo.template(function (ref) {\n                            var item = ref.item;\n                            var r = ref.r;\n\n                            return (\"<li class='k-list-item' role='option' aria-selected='false'><span class='k-list-item-text'>\" + (r(item)) + \"</span></li>\");\n                }\n                    ),\n                    itemContent: template,\n                    toolbar: (\"<div role='toolbar' class='\" + TOOLBAR_CLASS + \"'></div>\")\n                };\n            },\n\n            refresh: function() {\n                var that = this;\n                var view = that.dataSource.view();\n                var template = that.templates.itemTemplate;\n                var html = \"\";\n\n                for (var idx = 0; idx < view.length; idx++) {\n                    html += template({ item: view[idx], r: that.templates.itemContent });\n                }\n                that._getList().html(html);\n                that._setItemIds();\n                if (!that.toolbar) {\n                    that._createToolbar();\n                }\n                that._syncElement();\n                that._updateToolbar();\n                that._updateAllToolbars();\n                that.trigger(DATABOUND);\n\n                that.wrapper.attr(ARIA_BUSY, false);\n            },\n\n            _syncElement: function() {\n                var options = \"\";\n                var view = this.dataSource.view();\n                for (var idx = 0; idx < view.length; idx++) {\n                    options += this._option(view[idx][this.options.dataValueField] || view[idx], view[idx][this.options.dataTextField] || view[idx], true);\n                }\n                this.element.html(options);\n            },\n\n            _option: function(dataValue, dataText) {\n                var option = \"<option\";\n\n                if (dataValue !== undefined$1) {\n                    dataValue += \"\";\n\n                    if (dataValue.indexOf('\"') !== -1) {\n                        dataValue = dataValue.replace(/\"/g, \"&quot;\");\n                    }\n\n                    option += ' value=\"' + dataValue + '\"';\n                }\n                option += \" selected>\";\n\n                if (dataText !== undefined$1) {\n                    option += kendo.htmlEncode(dataText);\n                }\n\n                return option += \"</option>\";\n            },\n\n            _setItemId: function(item, id) {\n                if (!item.length) {\n                    return;\n                }\n\n                item.attr(kendoAttr(UNIQUE_ID), id).attr(ID, id);\n            },\n\n            _setItemIds: function() {\n                var that = this;\n                var items = that.items();\n                var view = that.dataSource.view();\n                var viewLength = view.length;\n                var i;\n\n                for (i = 0; i < viewLength; i++) {\n                    that._setItemId(items.eq(i), view[i].uid);\n                }\n            },\n\n            _selectable: function() {\n                var that = this;\n                var selectable = that.options.selectable;\n                var selectableOptions = Selectable.parseOptions(selectable);\n\n                that.selectable = new Selectable(that._innerWrapper, {\n                    aria: true,\n                    selectedClass: \"k-selected\",\n                    multiple: selectableOptions.multiple,\n                    filter: ENABLED_ITEM_SELECTOR,\n                    change: that._onSelect.bind(that)\n                });\n            },\n\n            _onSelect: function() {\n                var that = this;\n\n                that._updateToolbar();\n                that._updateAllToolbars();\n                that.trigger(CHANGE);\n            },\n\n            _destroySelectable: function() {\n                var that = this;\n\n                if (that.selectable && that.selectable.element) {\n                    that.selectable.destroy();\n                    that.selectable = null;\n                }\n            },\n\n            _getList: function() {\n                return this.wrapper.find(LIST_SELECTOR);\n            },\n\n            _getItems: function(items) {\n                return this.items().filter(items);\n            },\n\n            _createToolbar: function() {\n                var that = this;\n                var toolbarOptions = that.options.toolbar;\n                var position = toolbarOptions.position || RIGHT;\n                var tools = toolbarOptions.tools || [];\n                var messages = that.options.messages;\n\n                that._destroyToolbar();\n                that.wrapper.removeClass(TOOLBAR_POSITION_CLASS_NAMES.join(SPACE));\n\n                if (tools.length && tools.length > 0) {\n                    var toolbarElement = $(that.templates.toolbar).insertBefore(that._innerWrapper);\n                    that.toolbar = new ToolBar(toolbarElement, extend({}, toolbarOptions, { listBox: that, messages: messages }));\n                    that.wrapper.addClass(TOOLBAR_CLASS + DASH + position);\n                }\n            },\n\n            _destroyToolbar: function() {\n                var that = this;\n\n                if (that.toolbar) {\n                    that.toolbar.destroy();\n                    that.toolbar = null;\n                }\n            },\n\n            _executeCommand: function(commandName) {\n                var that = this;\n                var command = CommandFactory.current.create(commandName, { listBox: that });\n\n                if (command) {\n                    command.execute();\n                    that._updateToolbar();\n                    that._updateAllToolbars();\n                }\n            },\n\n            _updateToolbar: function() {\n                var toolbar = this.toolbar;\n\n                if (toolbar) {\n                    toolbar._updateToolStates();\n                }\n            },\n\n            _updateAllToolbars: function() {\n                var listBoxElements = $(\"select[data-role='listbox']\");\n                var elementsLength = listBoxElements.length;\n                var listBox;\n                var i;\n\n                for (i = 0; i < elementsLength; i++) {\n                    listBox = $(listBoxElements[i]).data(KENDO_LISTBOX);\n\n                    if (listBox) {\n                        listBox._updateToolbar();\n                    }\n                }\n            }\n        });\n\n        kendo.ui.plugin(ListBox);\n\n        var CommandFactory = Class.extend({\n            init: function() {\n                this._commands = [];\n            },\n\n            register: function(commandName, commandType) {\n                this._commands.push({\n                    commandName: commandName,\n                    commandType: commandType\n                });\n            },\n\n            create: function(commandName, options) {\n                var commands = this._commands;\n                var itemsLength = commands.length;\n                var name = commandName ? commandName.toLowerCase() : \"\";\n                var match;\n                var command;\n                var i;\n\n                for (i = 0; i < itemsLength; i++) {\n                    command = commands[i];\n\n                    if (command.commandName.toLowerCase() === name) {\n                        match = command;\n                        break;\n                    }\n                }\n\n                if (match) {\n                    return new match.commandType(options);\n                }\n            }\n        });\n        CommandFactory.current = new CommandFactory();\n\n        var ListBoxCommand = Class.extend({\n            init: function(options) {\n                var that = this;\n\n                that.options = extend({}, that.options, options);\n                that.listBox = that.options.listBox;\n            },\n\n            options: {\n                listBox: null\n            },\n\n            getItems: function() {\n                return $(this.listBox.select());\n            },\n\n            execute: noop,\n            canExecute: noop\n        });\n\n        var RemoveItemsCommand = ListBoxCommand.extend({\n            execute: function() {\n                var that = this;\n                var listBox = that.listBox;\n                var items = that.getItems();\n\n                if (!listBox.trigger(REMOVE, { dataItems: listBox._dataItems(items), items: items })) {\n                    listBox.remove(items);\n                }\n            },\n\n            canExecute: function() {\n                return this.listBox.select().length > 0;\n            }\n        });\n        CommandFactory.current.register(REMOVE, RemoveItemsCommand);\n\n        var MoveItemsCommand = ListBoxCommand.extend({\n            execute: function() {\n                var that = this;\n\n                if (that.canExecute()) {\n                    that.moveItems();\n                }\n            },\n\n            canExecute: noop,\n\n            moveItems: function() {\n                var that = this;\n                var listBox = that.listBox;\n                var options = that.options;\n                var items = that.getItems();\n                var offset = options.offset;\n                var indecesInDom = getSortedDomIndices(items);\n                var movedItems = $.makeArray(items.sort(that.itemComparer));\n                var moveAction = options.moveAction;\n                var movedItem;\n\n                if (!listBox.trigger(REORDER, { dataItems: listBox._dataItems(movedItems), items: $(movedItems), offset: offset })) {\n                    while (movedItems.length > 0 && indecesInDom.length > 0) {\n                        movedItem = movedItems[moveAction]();\n\n                        listBox.reorder(movedItem, indecesInDom[moveAction]() + offset);\n                    }\n                }\n            },\n\n            options: {\n                offset: 0,\n                moveAction: \"pop\"\n            },\n\n            itemComparer: function(item1, item2) {\n                var indexItem1 = $(item1).index();\n                var indexItem2 = $(item2).index();\n\n                if (indexItem1 === indexItem2) {\n                    return 0;\n                } else {\n                    return (indexItem1 > indexItem2 ? 1 : (-1));\n                }\n            }\n        });\n\n        var MoveUpItemsCommand = MoveItemsCommand.extend({\n            options: {\n                offset: MOVE_UP_OFFSET,\n                moveAction: \"shift\"\n            },\n\n            canExecute: function() {\n                var items = this.getItems();\n                var domIndices = getSortedDomIndices(items);\n\n                return (domIndices.length > 0 && domIndices[0] > 0);\n            }\n        });\n        CommandFactory.current.register(MOVE_UP, MoveUpItemsCommand);\n\n        var MoveDownItemsCommand = MoveItemsCommand.extend({\n            options: {\n                offset: MOVE_DOWN_OFFSET,\n                moveAction: \"pop\"\n            },\n\n            canExecute: function() {\n                var that = this;\n                var items = that.getItems();\n                var domIndices = getSortedDomIndices(items);\n\n                return (domIndices.length > 0 && $(domIndices).last()[0] < (that.listBox.items().length - 1));\n            }\n        });\n        CommandFactory.current.register(MOVE_DOWN, MoveDownItemsCommand);\n\n        var TransferItemsCommand = ListBoxCommand.extend({\n            options: {\n                filter: ENABLED_ITEM_SELECTOR\n            },\n\n            execute: function() {\n                var that = this;\n                var sourceListBox = that.getSourceListBox();\n                var items = that.getItems().filter(that.options.filter);\n                var dataItems = sourceListBox ? sourceListBox._dataItems(items) : [];\n                var destinationListBox = that.getDestinationListBox();\n                var updatedSelection = that.getUpdatedSelection(items);\n\n                if (destinationListBox && items.length > 0) {\n                    if (!destinationListBox.trigger(ADD, { dataItems: dataItems, items: items })) {\n                        destinationListBox.add(dataItems);\n                    }\n\n                    if (!sourceListBox.trigger(REMOVE, { dataItems: dataItems, items: items })) {\n                        sourceListBox.remove(items);\n                        that.updateSelection(updatedSelection);\n                    }\n                }\n            },\n\n            getUpdatedSelection: function(items) {\n\n                if (items.length !== 1) {\n                    return null;\n                }\n                var that = this;\n                var itemFilter = that.options.filter;\n                var sourceListBox = that.getSourceListBox();\n                var lastEnabledItem = sourceListBox ? sourceListBox.items().filter(itemFilter).last() : null;\n                var containsLastItem = $(items).filter(lastEnabledItem).length > 0;\n                var itemToSelect = containsLastItem ? $(items).prevAll(itemFilter)[0] : $(items).nextAll(itemFilter)[0];\n\n                if (itemToSelect) {\n                    return itemToSelect;\n                } else {\n                    return null;\n                }\n            },\n\n            updateSelection: function(item) {\n                var sourceListBox = this.getSourceListBox();\n\n                if (sourceListBox && item) {\n                    sourceListBox.select($(item));\n                    sourceListBox.selectable.trigger(CHANGE);\n                    sourceListBox._scrollIntoView(item);\n                }\n            },\n\n            getSourceListBox: noop,\n            getDestinationListBox: noop\n        });\n\n        var TransferItemsToCommand = TransferItemsCommand.extend({\n            canExecute: function() {\n                var sourceListBox = this.getSourceListBox();\n\n                return (sourceListBox ? sourceListBox.select().length > 0 : false);\n            },\n\n            getSourceListBox: function() {\n                return this.listBox;\n            },\n\n            getDestinationListBox: function() {\n                var sourceListBox = this.getSourceListBox();\n                return sourceListBox && sourceListBox.options.connectWith ? $(HASH + sourceListBox.options.connectWith).data(KENDO_LISTBOX) : null;\n            },\n\n            getItems: function() {\n                var sourceListBox = this.getSourceListBox();\n                return sourceListBox ? $(sourceListBox.select()) : $();\n            }\n        });\n        CommandFactory.current.register(TRANSFER_TO, TransferItemsToCommand);\n\n        var TransferItemsFromCommand = TransferItemsCommand.extend({\n            canExecute: function() {\n                var sourceListBox = this.getSourceListBox();\n\n                return (sourceListBox ? sourceListBox.select().length > 0 : false);\n            },\n\n            getSourceListBox: function() {\n                var destinationListBox = this.getDestinationListBox();\n                return (destinationListBox && destinationListBox.options.connectWith) ? $(HASH + destinationListBox.options.connectWith).data(KENDO_LISTBOX) : null;\n            },\n\n            getDestinationListBox: function() {\n                return this.listBox;\n            },\n\n            getItems: function() {\n                var sourceListBox = this.getSourceListBox();\n                return sourceListBox ? $(sourceListBox.select()) : $();\n            }\n        });\n        CommandFactory.current.register(TRANSFER_FROM, TransferItemsFromCommand);\n\n        var TransferAllItemsToCommand = TransferItemsToCommand.extend({\n            canExecute: function() {\n                var sourceListBox = this.getSourceListBox();\n\n                return (sourceListBox ? sourceListBox.wrapper.find(ENABLED_ITEMS_SELECTOR).length > 0 : false);\n            },\n\n            getItems: function() {\n                var sourceListBox = this.getSourceListBox();\n                return sourceListBox ? sourceListBox.items() : $();\n            },\n\n            getUpdatedSelection: noop,\n            updateSelection: noop\n        });\n        CommandFactory.current.register(TRANSFER_ALL_TO, TransferAllItemsToCommand);\n\n        var TransferAllItemsFromCommand = TransferItemsFromCommand.extend({\n            canExecute: function() {\n                var sourceListBox = this.getSourceListBox();\n\n                return (sourceListBox ? sourceListBox.wrapper.find(ENABLED_ITEMS_SELECTOR).length > 0 : false);\n            },\n\n            getItems: function() {\n                var sourceListBox = this.getSourceListBox();\n                return sourceListBox ? sourceListBox.items() : $();\n            },\n\n            getUpdatedSelection: noop,\n            updateSelection: noop\n        });\n        CommandFactory.current.register(TRANSFER_ALL_FROM, TransferAllItemsFromCommand);\n\n        var ToolBar = Class.extend({\n            init: function(element, options) {\n                var that = this;\n\n                that.element = $(element).addClass(TOOLBAR_CLASS);\n                that.options = extend({}, that.options, options);\n                that.listBox = that.options.listBox;\n\n                that._initTemplates();\n                that._createTools();\n                that._updateToolStates();\n                that._attachEventHandlers();\n                that._aria();\n                that._tabindex();\n            },\n\n            destroy: function() {\n                var that = this;\n\n                that._detachEventHandlers();\n                kendo.destroy(that.element);\n                that.element.remove();\n                that.element = null;\n            },\n\n            options: {\n                position: RIGHT,\n                tools: []\n            },\n\n            _aria: function() {\n                var listEl = this.listBox._getList(),\n                    listBoxLabelledby = listEl.attr(ARIA_LABELLEDBY),\n                    listBoxLabel = listBoxLabelledby ? $(\"#\" + listBoxLabelledby).text() : listEl.attr(ARIA_LABEL),\n                    listElId = listEl.attr(\"id\") || kendo.guid();\n\n                listEl.attr(\"id\", listElId);\n                this.element.attr(ARIA_CONTROLS, listElId);\n\n                if (listBoxLabel) {\n                    this.element.attr(ARIA_LABEL, listBoxLabel + \" toolbar.\");\n                }\n            },\n\n            _attachEventHandlers: function() {\n                var that = this;\n\n                that.element\n                    .on(CLICK, ENABLED_TOOL_SELECTOR, that._onToolClick.bind(that))\n                    .on(KEYDOWN, that._keyDown.bind(that));\n            },\n            _createTools: function() {\n                var that = this;\n                var isRtl = kendo.support.isRtl(that.element);\n                var tools = that.options.tools;\n                var toolsLength = tools.length;\n                var toolsMessages = that.options.messages.tools;\n                var toolList = that.element;\n                var tool;\n                var i;\n\n                ToolBar.defaultTools = kendo.deepExtend({}, ToolBar.defaultTools, {\n                    transferTo: {\n                        icon: isRtl ? CARET_ALT_LEFT : CARET_ALT_RIGHT\n                    },\n                    transferFrom: {\n                        icon: isRtl ? CARET_ALT_RIGHT : CARET_ALT_LEFT\n                    },\n                    transferAllTo: {\n                        icon: isRtl ? CARET_ALT_DOUBLE_LEFT : CARET_ALT_DOUBLE_RIGHT\n                    },\n                    transferAllFrom: {\n                        icon: isRtl ? CARET_ALT_DOUBLE_RIGHT : CARET_ALT_DOUBLE_LEFT\n                    }\n                });\n\n                for (i = 0; i < toolsLength; i++) {\n                    tool = extend({}, ToolBar.defaultTools[tools[i]], { text: toolsMessages[tools[i]] });\n\n                    if (tool) {\n                        toolList.append($(that.templates.tool(tool)));\n                    }\n                }\n\n                that.element.append(toolList);\n            },\n\n            _detachEventHandlers: function() {\n                this.element.off(NS).find(\"*\").off(NS);\n            },\n\n            _executeToolCommand: function(command) {\n                var that = this;\n                var listBox = that.listBox;\n\n                if (listBox) {\n                    listBox._executeCommand(command);\n                }\n            },\n\n            _focusTool: function() {\n                this.element.find(TOOL_SELECTOR).not(\"[tabindex=-1]\").trigger(\"focus\");\n            },\n\n            _initTemplates: function() {\n                this.templates = {\n                    tool: kendoTemplate( function (ref) {\n                            var icon = ref.icon;\n                            var iconClass = ref.iconClass;\n                            var command = ref.command;\n                            var text = ref.text;\n\n                            return kendo.html.renderButton((\"<button data-command='\" + command + \"' title='\" + text + \"' aria-label='\" + text + \"'></button>\"), { icon: icon, iconClass: iconClass });\n                })\n                };\n            },\n\n            _keyDown: function(e) {\n                var key = e.keyCode,\n                    target = $(e.target),\n                    targetTool = target.is(TOOL_SELECTOR) ? target : target.closest(\"li\");\n\n                if (key === kendo.keys.UP || key === kendo.keys.LEFT) {\n                    e.preventDefault();\n                    if (targetTool.prev().length) {\n                        this._tabindex(targetTool.prev());\n                    }\n                    this._focusTool();\n                } else if (key === kendo.keys.DOWN || key === kendo.keys.RIGHT) {\n                    e.preventDefault();\n                    if (targetTool.next()) {\n                        this._tabindex(targetTool.next());\n                    }\n                    this._focusTool();\n                }\n            },\n\n            _onToolClick: function(e) {\n                e.preventDefault();\n\n                var tool = $(e.currentTarget);\n                this._tabindex(tool);\n                this._executeToolCommand(tool.data(COMMAND));\n                this._focusTool();\n            },\n\n            _tabindex: function(candidate) {\n                var buttons = this.element.find(TOOL_SELECTOR),\n                    focusable;\n\n                if (candidate && candidate.length) {\n                    focusable = candidate;\n                } else {\n                    focusable = buttons.first();\n                }\n\n                buttons.attr(TABINDEX, -1);\n                focusable.removeAttr(TABINDEX);\n            },\n\n            _updateToolStates: function() {\n                var that = this;\n                var tools = that.options.tools;\n                var toolsLength = tools.length;\n                var i;\n                var focusable = that.element.find(TOOL_SELECTOR).not(\"[tabindex=-1]\");\n\n                for (i = 0; i < toolsLength; i++) {\n                    that._updateToolState(tools[i]);\n                }\n\n                that._tabindex(focusable);\n            },\n\n            _updateToolState: function(toolName) {\n                var that = this;\n                var command = CommandFactory.current.create(toolName, { listBox: that.listBox });\n                var tool = that.element.find(\"[data-command='\" + toolName + \"']\");\n                var toolElement = tool[0];\n\n                if (toolElement && command && command.canExecute) {\n                    if (command.canExecute()) {\n                        tool.removeClass(DISABLED_STATE_CLASS).removeAttr(TABINDEX);\n                    } else {\n                        tool.addClass(DISABLED_STATE_CLASS).attr(TABINDEX, \"-1\");\n                    }\n                }\n            }\n        });\n\n        ToolBar.defaultTools = {\n            remove: {\n                command: REMOVE,\n                icon: \"x\"\n            },\n            moveUp: {\n                command: MOVE_UP,\n                icon: \"caret-alt-up\"\n            },\n            moveDown: {\n                command: MOVE_DOWN,\n                icon: \"caret-alt-down\"\n            },\n            transferTo: {\n                command: TRANSFER_TO,\n                icon: CARET_ALT_RIGHT\n            },\n            transferFrom: {\n                command: TRANSFER_FROM,\n                icon: CARET_ALT_LEFT\n            },\n            transferAllTo: {\n                command: TRANSFER_ALL_TO,\n                icon: CARET_ALT_DOUBLE_RIGHT\n            },\n            transferAllFrom: {\n                command: TRANSFER_ALL_FROM,\n                icon: CARET_ALT_DOUBLE_LEFT\n            }\n        };\n\n        extend(ListBox, {\n            ToolBar: ToolBar\n        });\n\n        function isInputElement(element) {\n            return $(element).is(\":button,a,:input,a>.k-icon,a>.k-svg-icon,textarea,span.k-select,span.k-icon,span.k-svg-icon,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdownlist\");\n        }\n\n    })(window.kendo.jQuery);\n    var kendo$1 = kendo;\n\n    return kendo$1;\n\n}));\n"]}