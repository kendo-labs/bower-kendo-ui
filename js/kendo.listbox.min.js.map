{"version":3,"file":"kendo.listbox.min.js","names":["global","factory","exports","module","require","define","amd","globalThis","self","kendolistbox","js","this","$","undefined$1","kendo","window","kendoAttr","attr","data","keys","kendoTemplate","template","Widget","ui","DataSource","Selectable","DataBoundWidget","Class","extend","noop","DASH","KENDO_LISTBOX","NS","DISABLED_STATE_CLASS","SELECTED_STATE_CLASS","ENABLED_ITEM_SELECTOR","ENABLED_ITEMS_SELECTOR","TOOLBAR_CLASS","TOOL_SELECTOR","FOCUSED_CLASS","CLICK","KEYDOWN","BLUR","outerWidth","_outerWidth","outerHeight","_outerHeight","CHANGE","DATABOUND","ADD","REMOVE","REORDER","MOVE_UP","MOVE_DOWN","TRANSFER_TO","TRANSFER_FROM","TRANSFER_ALL_TO","TRANSFER_ALL_FROM","CARET_ALT_RIGHT","CARET_ALT_LEFT","CARET_ALT_DOUBLE_RIGHT","CARET_ALT_DOUBLE_LEFT","DRAGGEDCLASS","ID","TABINDEX","DRAGSTART","DRAG","DROP","DRAGEND","RIGHT","BOTTOM","ARIA_ACTIVEDESCENDENT","ARIA_BUSY","ARIA_LABEL","TOOLBAR_POSITION_CLASS_NAMES","getSortedDomIndices","items","map","item","index","isUndefined","value","defaultHint","element","clone","addClass","defaultPlaceholder","ListBox","init","options","that","fn","call","_wrapper","_list","_ariaLabel","_getList","hide","dataSource","dataTextField","dataValueField","_templates","_selectable","_dataSource","_createToolbar","_createDraggable","_createNavigatable","destroy","isNaN","_listTabIndex","off","_unbindDataSource","_destroySelectable","_destroyToolbar","wrapper","_target","_draggable","placeholder","setOptions","events","name","autoBind","selectable","draggable","dropSources","connectWith","navigatable","toolbar","position","tools","messages","remove","moveUp","moveDown","transferTo","transferFrom","transferAllTo","transferAllFrom","add","dataItems","i","length","itemsLength","list","_unbindDataChange","_addItem","_bindDataChange","_bindDataSource","_syncElement","dataItem","templates","itemTemplate","r","itemContent","_setItemId","uid","appendTo","_data","push","_addItemAt","_insertElementAt","insertAfter","children","eq","prepend","on","_click","bind","_keyDown","_blur","_getTabIndex","tabindex","removeAttr","removeClass","e","target","currentTarget","oldTarget","activeEl","_activeElement","isContained","contains","is","focus","_getNavigatableItem","key","current","filter","first","UP","prevAll","DOWN","nextAll","_scrollIntoView","parent","itemOffsetTop","offsetTop","contentScrollTop","scrollTop","contentOffsetHeight","clientHeight","bottomDistance","offsetHeight","shouldPreventDefault","keyCode","shiftKey","ctrlKey","_shiftSelecting","DELETE","_executeCommand","preventDefault","clearSelection","hasClass","select","_updateToolbar","_updateAllToolbars","trigger","SPACEBAR","LEFT","F10","find","not","focusElement","hint","Error","Draggable","isFunction","dragstart","_dragstart","dragcancel","_clear","drag","_drag","dragend","_dragend","draggedElement","eventData","draggableEvent","enabled","_findElementUnderCursor","elementUnderCursor","sender","show","_findTarget","node","elementNode","closest","has","listBox","appendToBottom","_searchConnectedListBox","_getElementCenter","center","getOffset","top","left","connectedListBox","closestContainer","originalElement","getKendoListBox","inArray","id","targetCenter","offsetDelta","direction","cursorOffset","x","location","y","Math","round","_movePlaceholder","draggableOptions","before","after","append","draggedItem","placeholderIndex","draggedIndex","offset","reorder","dropped","dataItemAtIndex","at","itemAtIndex","listItem","_removeElement","listItems","_getItems","_removeItem","transport","pop","isNew","_destroyed","uniqueIdAttr","getByUid","html","_dataItems","enabledItems","multiple","clear","enable","_enableItem","setDataSource","Array","isArray","fields","field","create","fetch","_changeHandler","unbind","_dataChangeHandler","refresh","wrap","style","cssText","title","insertBefore","className","css","_innerWrapper","firstChild","parseOptions","getter","ref","view","idx","_setItemIds","_option","dataValue","dataText","option","indexOf","replace","htmlEncode","viewLength","selectableOptions","aria","selectedClass","change","_onSelect","toolbarOptions","toolbarInsertion","join","toolbarElement","ToolBar","commandName","command","CommandFactory","execute","_updateToolStates","listBoxElements","elementsLength","plugin","_commands","register","commandType","match","commands","toLowerCase","ListBoxCommand","getItems","canExecute","RemoveItemsCommand","MoveItemsCommand","moveItems","movedItem","indecesInDom","movedItems","makeArray","sort","itemComparer","moveAction","item1","item2","indexItem1","indexItem2","MoveUpItemsCommand","domIndices","MoveDownItemsCommand","last","TransferItemsCommand","sourceListBox","getSourceListBox","destinationListBox","getDestinationListBox","updatedSelection","getUpdatedSelection","updateSelection","itemFilter","lastEnabledItem","itemToSelect","TransferItemsToCommand","TransferItemsFromCommand","TransferAllItemsToCommand","TransferAllItemsFromCommand","_initTemplates","_createTools","_attachEventHandlers","_aria","_tabindex","_detachEventHandlers","listEl","listBoxLabelledby","listBoxLabel","text","listElId","guid","_onToolClick","tool","isRtl","support","toolsLength","toolsMessages","toolList","defaultTools","deepExtend","icon","_executeToolCommand","_focusTool","iconClass","renderButton","targetTool","prev","next","candidate","focusable","buttons","_updateToolState","toolName","jQuery"],"sources":["kendo.listbox.js"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('kendo.draganddrop.js'), require('kendo.data.js'), require('kendo.selectable.js'), require('kendo.html.button.js')) :\n    typeof define === 'function' && define.amd ? define(['kendo.draganddrop', 'kendo.data', 'kendo.selectable', 'kendo.html.button'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, (global.kendolistbox = global.kendolistbox || {}, global.kendolistbox.js = factory()));\n})(this, (function () {\n    var __meta__ = {\n        id: \"listbox\",\n        name: \"ListBox\",\n        category: \"web\",\n        depends: [\"draganddrop\", \"data\", \"selectable\", 'html.button']\n    };\n\n    (function($, undefined$1) {\n        var kendo = window.kendo;\n        var kendoAttr = kendo.attr;\n        var data = kendo.data;\n        var keys = kendo.keys;\n        var kendoTemplate = kendo.template;\n        var Widget = kendo.ui.Widget;\n        var DataSource = data.DataSource;\n        var Selectable = kendo.ui.Selectable;\n        var DataBoundWidget = kendo.ui.DataBoundWidget;\n        var Class = kendo.Class;\n\n        var extend = $.extend;\n        var noop = $.noop;\n\n        var DASH = \"-\";\n        var DOT = \".\";\n        var SPACE = \" \";\n        var HASH = \"#\";\n\n        var KENDO_LISTBOX = \"kendoListBox\";\n        var NS = DOT + KENDO_LISTBOX;\n        var DISABLED_STATE_CLASS = \"k-disabled\";\n        var SELECTED_STATE_CLASS = \"k-selected\";\n        var ENABLED_ITEM_SELECTOR = \".k-list-item:not(.k-disabled)\";\n        var ENABLED_ITEMS_SELECTOR = \".k-list-ul:not(.k-disabled) >\" + ENABLED_ITEM_SELECTOR;\n        var TOOLBAR_CLASS = \"k-listbox-actions\";\n        var TOOL_SELECTOR = \".k-button\";\n        var ENABLED_TOOL_SELECTOR = \"button.k-button:not(.k-disabled)\";\n        var FOCUSED_CLASS = \"k-focus\";\n        var DRAG_CLUE_CLASS = \"k-drag-clue\";\n        var DROP_HINT_CLASS = \"k-drop-hint\";\n        var LIST_CLASS = \"k-list-ul\";\n        var LIST_SELECTOR = \".k-list-ul\";\n\n        var CLICK = \"click\" + NS;\n        var KEYDOWN = \"keydown\" + NS;\n        var BLUR = \"blur\" + NS;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var CHANGE = \"change\";\n        var DATABOUND = \"dataBound\";\n        var ADD = \"add\";\n        var REMOVE = \"remove\";\n        var REORDER = \"reorder\";\n        var MOVE_UP = \"moveUp\";\n        var MOVE_DOWN = \"moveDown\";\n        var TRANSFER_TO = \"transferTo\";\n        var TRANSFER_FROM = \"transferFrom\";\n        var TRANSFER_ALL_TO = \"transferAllTo\";\n        var TRANSFER_ALL_FROM = \"transferAllFrom\";\n        var CARET_ALT_RIGHT = \"caret-alt-right\";\n        var CARET_ALT_LEFT = \"caret-alt-left\";\n        var CARET_ALT_DOUBLE_RIGHT = \"caret-double-alt-right\";\n        var CARET_ALT_DOUBLE_LEFT = \"caret-double-alt-left\";\n        var DRAGGEDCLASS = \"k-ghost\";\n        var UNIQUE_ID = \"uid\";\n        var ID = \"id\";\n        var TABINDEX = \"tabindex\";\n        var COMMAND = \"command\";\n\n        var MOVE_UP_OFFSET = -1;\n        var MOVE_DOWN_OFFSET = 1;\n        var DRAGSTART = \"dragstart\";\n        var DRAG = \"drag\";\n        var DROP = \"drop\";\n        var DRAGEND = \"dragend\";\n        var DEFAULT_FILTER = \"ul.k-list-ul>li.k-list-item\";\n\n        var RIGHT = \"right\";\n        var BOTTOM = \"bottom\";\n\n        var ARIA_ACTIVEDESCENDENT = \"aria-activedescendant\";\n        var ARIA_BUSY = \"aria-busy\";\n        var ARIA_CONTROLS = \"aria-controls\";\n        var ARIA_LABEL = \"aria-label\";\n        var ARIA_LABELLEDBY = \"aria-labelledby\";\n        var ARIA_MULTISELECTABLE = \"aria-multiselectable\";\n\n        var TOOLBAR_POSITION_CLASS_NAMES = [\n            TOOLBAR_CLASS + DASH + \"left\",\n            TOOLBAR_CLASS + DASH + RIGHT,\n            TOOLBAR_CLASS + DASH + \"top\",\n            TOOLBAR_CLASS + DASH + BOTTOM\n        ];\n\n        function getSortedDomIndices(items) {\n            var indices = $.map(items, function(item) {\n                return $(item).index();\n            });\n\n            return indices;\n        }\n\n        function isUndefined(value) {\n            return (typeof value === \"undefined\");\n        }\n\n        function defaultHint(element) {\n            return element.clone()\n                .attr('class', '')\n                .addClass(DRAG_CLUE_CLASS);\n        }\n\n        function defaultPlaceholder() {\n            return $('<li>').addClass(DROP_HINT_CLASS);\n        }\n\n        var ListBox = DataBoundWidget.extend({\n            init: function(element, options) {\n                var that = this;\n                Widget.fn.init.call(that, element, options);\n\n                that._wrapper();\n                that._list();\n                that._ariaLabel(that._getList());\n                element = that.element.attr(\"multiple\", \"multiple\").hide();\n\n                if (element[0] && !that.options.dataSource) {\n                    that.options.dataTextField = that.options.dataTextField || \"text\";\n                    that.options.dataValueField = that.options.dataValueField || \"value\";\n                }\n                that._templates();\n                that._selectable();\n                that._dataSource();\n                that._createToolbar();\n                that._createDraggable();\n                that._createNavigatable();\n            },\n\n            destroy: function() {\n                var that = this;\n\n                DataBoundWidget.fn.destroy.call(that);\n                if (!isNaN(that._listTabIndex)) {\n                    that._getList().off();\n                    that._listTabIndex = null;\n                }\n                that._unbindDataSource();\n                that._destroySelectable();\n                that._destroyToolbar();\n                that.wrapper.off(NS);\n                if (that._target) {\n                    that._target = null;\n                }\n                if (that._draggable) {\n                    that._draggable.destroy();\n                    that.placeholder = null;\n                }\n\n                kendo.destroy(that.element);\n            },\n\n            setOptions: function(options) {\n                Widget.fn.setOptions.call(this, options);\n                this._templates();\n                this._dataSource();\n            },\n\n            events: [\n                CHANGE,\n                DATABOUND,\n                ADD,\n                REMOVE,\n                REORDER,\n                DRAGSTART,\n                DRAG,\n                DROP,\n                DRAGEND\n            ],\n\n            options: {\n                name: \"ListBox\",\n                autoBind: true,\n                template: \"\",\n                dataTextField: \"\",\n                dataValueField: \"\",\n                selectable: \"single\",\n                draggable: null,\n                dropSources: [],\n                connectWith: \"\",\n                navigatable: true,\n                toolbar: {\n                    position: RIGHT,\n                    tools: []\n                },\n                messages: {\n                    tools: {\n                        remove: \"Delete\",\n                        moveUp: \"Move Up\",\n                        moveDown: \"Move Down\",\n                        transferTo: \"Transfer To\",\n                        transferFrom: \"Transfer From\",\n                        transferAllTo: \"Transfer All To\",\n                        transferAllFrom: \"Transfer All From\"\n                    }\n                }\n            },\n\n            add: function(dataItems) {\n                var that = this;\n                var items = dataItems && dataItems.length ? dataItems : [dataItems];\n                var itemsLength = items.length;\n                var list = that._getList();\n                var i;\n\n                that._unbindDataSource();\n                that._unbindDataChange();\n                for (i = 0; i < itemsLength; i++) {\n                    that._addItem(items[i], list);\n                }\n                that._bindDataChange();\n                that._bindDataSource();\n                that._syncElement();\n            },\n\n            _addItem: function(dataItem, list) {\n                var that = this;\n                var item = $(that.templates.itemTemplate({ item: dataItem, r: that.templates.itemContent }));\n\n                that._setItemId(item, dataItem.uid);\n\n                item.appendTo(list);\n\n                if (typeof dataItem === typeof \"\") {\n                    that.dataSource._data.push(dataItem);\n                } else {\n                    that.dataSource.add(dataItem);\n                }\n            },\n\n            _addItemAt: function(dataItem, index) {\n                var that = this;\n                var item = $(that.templates.itemTemplate({ item: dataItem, r: that.templates.itemContent }));\n                that._unbindDataSource();\n                if (typeof dataItem === typeof \"\") {\n                    that._insertElementAt(item, index);\n                    that.dataSource._data.push(dataItem);\n                } else {\n                    that._setItemId(item, dataItem.uid);\n                    that._insertElementAt(item, index);\n                    that.dataSource.add(dataItem);\n                }\n                that._bindDataSource();\n                that._syncElement();\n            },\n\n            _insertElementAt: function(item, index) {\n                var that = this;\n                var list = that._getList();\n\n                if (index > 0) {\n                    $(item).insertAfter(list.children().eq(index - 1));\n                } else {\n                    $(list).prepend(item);\n                }\n            },\n\n            _createNavigatable: function() {\n                var that = this;\n                var options = that.options;\n\n                if (options.navigatable) {\n                    that._getList().on(CLICK, ENABLED_ITEM_SELECTOR, that._click.bind(that))\n                                .on(KEYDOWN, that._keyDown.bind(that))\n                                .on(BLUR, that._blur.bind(that));\n                }\n            },\n\n            _getTabIndex: function() {\n                var that = this;\n                var tabindex;\n\n                if (!isNaN(that._listTabIndex))\n                {\n                    return that._listTabIndex;\n                }\n\n                tabindex = that.element.attr(TABINDEX);\n                that._listTabIndex = !isNaN(tabindex) ? tabindex : 0;\n\n                that.element.removeAttr(TABINDEX);\n\n                return that._listTabIndex;\n            },\n\n            _blur: function() {\n                if (this._target) {\n                    this._target.removeClass(FOCUSED_CLASS);\n                    this._getList().removeAttr(ARIA_ACTIVEDESCENDENT);\n                }\n                this._target = null;\n            },\n\n            _click: function(e) {\n                var that = this;\n                var target = $(e.currentTarget);\n                var oldTarget = that._target;\n                var list = that._getList();\n                var activeEl = kendo._activeElement();\n                var isContained = $.contains(list, activeEl);\n\n                if (oldTarget) {\n                    oldTarget.removeClass(FOCUSED_CLASS);\n                }\n\n                that._target = target;\n                target.addClass(FOCUSED_CLASS);\n                list.attr(ARIA_ACTIVEDESCENDENT, target.attr(ID));\n\n                if (list[0] !== activeEl && (!isContained || !isInputElement(activeEl))) {\n                    that.focus();\n                }\n            },\n\n            _getNavigatableItem: function(key) {\n                var that = this;\n                var current;\n\n                if (!that._target) {\n                    current = that.items().filter(ENABLED_ITEM_SELECTOR).first();\n                } else {\n                    current = that._target;\n                }\n\n                if (key === keys.UP && that._target) {\n                    current = that._target.prevAll(ENABLED_ITEM_SELECTOR).first();\n                }\n\n                if (key === keys.DOWN && that._target) {\n                    current = that._target.nextAll(ENABLED_ITEM_SELECTOR).first();\n                }\n\n                return current.length ? current : null;\n            },\n\n            _scrollIntoView: function(item) {\n                if (!item) {\n                    return;\n                }\n\n                if (item[0]) {\n                    item = item[0];\n                }\n\n                var list = this._getList().parent()[0];\n                var itemOffsetTop = item.offsetTop;\n                var contentScrollTop = list.scrollTop;\n                var contentOffsetHeight = list.clientHeight;\n                var bottomDistance = itemOffsetTop + item.offsetHeight;\n\n                if (contentScrollTop > itemOffsetTop) {\n                    contentScrollTop = itemOffsetTop;\n                } else if (bottomDistance > (contentScrollTop + contentOffsetHeight)) {\n                    contentScrollTop = (bottomDistance - contentOffsetHeight);\n                }\n\n                list.scrollTop = contentScrollTop;\n            },\n\n            _keyDown: function(e) {\n                var that = this;\n                var key = e.keyCode;\n                var current = that._getNavigatableItem(key);\n                var shouldPreventDefault;\n\n                if (!(e.shiftKey && !e.ctrlKey && (key === keys.DOWN || key === keys.UP))) {\n                    that._shiftSelecting = false;\n                }\n\n                if (key == keys.DELETE) {\n                    that._executeCommand(REMOVE);\n                    if (that._target) {\n                        that._target.removeClass(FOCUSED_CLASS);\n                        that._getList().removeAttr(ARIA_ACTIVEDESCENDENT);\n                        that._target = null;\n                    }\n                    shouldPreventDefault = true;\n                } else if (key === keys.DOWN || key === keys.UP) {\n                    if (!current) {\n                        e.preventDefault();\n                        return;\n                    }\n\n                    if (e.shiftKey && !e.ctrlKey) {\n                        if (that._target) {\n                            that._target.removeClass(FOCUSED_CLASS);\n                        }\n\n                        if (!that._shiftSelecting) {\n                            that.clearSelection();\n                            that._shiftSelecting = true;\n                        }\n                        if (that._target && current.hasClass(\"k-selected\")) {\n                            that._target.removeClass(SELECTED_STATE_CLASS);\n                        } else if (that.options.selectable == \"single\") {\n                            that.select(current);\n                        } else {\n                            that.select(current.add(that._target));\n                        }\n\n                        that._updateToolbar();\n                        that._updateAllToolbars();\n                        that.trigger(CHANGE);\n                    } else if (e.shiftKey && e.ctrlKey) {\n                        that._executeCommand(key === keys.DOWN ? MOVE_DOWN : MOVE_UP);\n                        that._scrollIntoView(that._target);\n                        e.preventDefault();\n                        return;\n                    } else if (!e.shiftKey && !e.ctrlKey) {\n                        if (that._target) {\n                            that._target.removeClass(FOCUSED_CLASS);\n                        }\n\n                        if (that.options.selectable === \"multiple\") {\n                            that.clearSelection();\n                        }\n\n                        that.select(current);\n                        that._updateToolbar();\n                        that._updateAllToolbars();\n                        that.trigger(CHANGE);\n                    }\n\n                    if (current && that._target && that._target[0] !== current[0]) {\n                        that._target.removeClass(FOCUSED_CLASS);\n                    }\n\n                    that._target = current;\n\n                    if (that._target) {\n                        that._target.addClass(FOCUSED_CLASS);\n                        that._scrollIntoView(that._target);\n                        that._getList().attr(ARIA_ACTIVEDESCENDENT, that._target.attr(ID));\n                    } else {\n                        that._getList().removeAttr(ARIA_ACTIVEDESCENDENT);\n                    }\n                    shouldPreventDefault = true;\n                } else if (key == keys.SPACEBAR) {\n                    if (e.ctrlKey && that._target) {\n                        if (that._target.hasClass(SELECTED_STATE_CLASS)) {\n                            that._target.removeClass(SELECTED_STATE_CLASS);\n                        } else {\n                            that.select(that._target);\n                        }\n\n                        that.trigger(CHANGE);\n                    } else {\n                       that.clearSelection();\n                       that.select(that._target);\n                       that.trigger(CHANGE);\n                    }\n\n                    that._updateToolbar();\n                    that._updateAllToolbars();\n                    shouldPreventDefault = true;\n                } else if (e.ctrlKey && key == keys.RIGHT) {\n                    if (e.shiftKey) {\n                       that._executeCommand(TRANSFER_ALL_TO);\n                    } else {\n                       that._executeCommand(TRANSFER_TO);\n                    }\n\n                    that._target = that.select().length ? that.select() : null;\n                    shouldPreventDefault = true;\n                } else if (e.ctrlKey && key == keys.LEFT) {\n                    if (e.shiftKey) {\n                       that._executeCommand(TRANSFER_ALL_FROM);\n                    } else {\n                       that._executeCommand(TRANSFER_FROM);\n                    }\n                    shouldPreventDefault = true;\n                } else if (key === keys.F10) {\n                    if (that.toolbar) {\n                        that.toolbar.element.find(TOOL_SELECTOR).not(\"[tabindex=-1]\").trigger(\"focus\");\n\n                        shouldPreventDefault = true;\n                    }\n                }\n\n                if (shouldPreventDefault) {\n                    e.preventDefault();\n                }\n            },\n\n            focus: function() {\n                kendo.focusElement(this._getList());\n            },\n\n            _createDraggable: function() {\n                var that = this;\n                var draggable = that.options.draggable;\n                var hint;\n\n                if (draggable) {\n                    hint = draggable.hint;\n                    if (!that.options.selectable) {\n                        throw new Error(\"Dragging requires selection to be enabled\");\n                    }\n\n                    if (!hint) {\n                        hint = defaultHint;\n                    }\n\n                    that._draggable = new kendo.ui.Draggable(that.wrapper, {\n                        filter: draggable.filter ? draggable.filter : DEFAULT_FILTER,\n                        hint: kendo.isFunction(hint) ? hint : $(hint),\n                        dragstart: that._dragstart.bind(that),\n                        dragcancel: that._clear.bind(that),\n                        drag: that._drag.bind(that),\n                        dragend: that._dragend.bind(that)\n                    });\n                }\n            },\n\n            _dragstart: function(e) {\n                var that = this;\n                var draggedElement = that.draggedElement = e.currentTarget;\n                var placeholder = that.options.draggable.placeholder;\n                var dataItem = that.dataItem(draggedElement);\n                var eventData = { dataItems: dataItem, items: $(draggedElement), draggableEvent: e };\n\n                if (that.options.draggable.enabled === false) {\n                    e.preventDefault();\n                    return;\n                }\n\n                if (!placeholder) {\n                    placeholder = defaultPlaceholder;\n                }\n\n                that.placeholder = kendo.isFunction(placeholder) ? $(placeholder.call(that, draggedElement)) : $(placeholder);\n\n                if (draggedElement.is(DOT + DISABLED_STATE_CLASS)) {\n                    e.preventDefault();\n                } else {\n                    if (that.trigger(DRAGSTART, eventData)) {\n                        e.preventDefault();\n                    } else {\n                        that.clearSelection();\n                        that.select(draggedElement);\n                        draggedElement.addClass(DRAGGEDCLASS);\n                    }\n                }\n            },\n\n            _clear: function() {\n                this.draggedElement.removeClass(DRAGGEDCLASS);\n                this.placeholder.remove();\n            },\n\n            _findElementUnderCursor: function(e) {\n                var elementUnderCursor = kendo.elementUnderCursor(e);\n                var draggable = e.sender;\n\n                if ($.contains(draggable.hint[0], elementUnderCursor) || draggable.hint[0] === elementUnderCursor) {\n                    draggable.hint.hide();\n                    elementUnderCursor = kendo.elementUnderCursor(e);\n                    draggable.hint.show();\n                }\n\n                return elementUnderCursor;\n            },\n\n            _findTarget: function(e) {\n                var that = this;\n                var element = that._findElementUnderCursor(e);\n                var elementNode = $(element);\n                var list = that._getList();\n                var items;\n                var node;\n\n                if ($.contains(list[0], element)) {\n                    items = that.items();\n                    element = elementNode.is(\"li\") ? element : elementNode.closest(\"li\")[0];\n                    node = items.filter(element)[0] || items.has(element)[0];\n                    if (node) {\n                        node = $(node);\n                        return !node.hasClass(DISABLED_STATE_CLASS) ? { element: node, listBox: that } : null;\n                    } else {\n                        return null;\n                    }\n                } else if (list[0] == element || list.parent()[0] == element) {\n                    return { element: $(list), appendToBottom: true, listBox: that };\n                } else {\n                    return that._searchConnectedListBox(elementNode);\n                }\n            },\n\n            _getElementCenter: function(element) {\n                var center = element.length ? kendo.getOffset(element) : null;\n                if (center) {\n                    center.top += outerHeight(element) / 2;\n                    center.left += outerWidth(element) / 2;\n                }\n\n                return center;\n            },\n\n            _searchConnectedListBox: function(element) {\n                var connectedListBox;\n                var items;\n                var node;\n                var originalElement = element;\n                var closestContainer;\n\n                if (element.hasClass(\"k-list-scroller k-selectable\")) {\n                    closestContainer = element;\n                } else {\n                    closestContainer = element.closest(\".k-list-scroller.k-selectable\");\n                }\n\n                if (closestContainer.length) {\n                    connectedListBox = closestContainer.parent().find(\"[data-role='listbox']\").getKendoListBox();\n                } else {\n                    return null;\n                }\n\n                if (connectedListBox && $.inArray(this.element[0].id, connectedListBox.options.dropSources) !== -1) {\n                    items = connectedListBox.items();\n                    element = element.is(\"li\") ? element[0] : element.closest(\"li\")[0];\n                    node = items.filter(element)[0] || items.has(element)[0];\n                    if (node) {\n                        node = $(node);\n                        return !node.hasClass(DISABLED_STATE_CLASS) ? { element: node, listBox: connectedListBox } : null;\n                    } else if (!items.length ||\n                                originalElement.hasClass(\"k-list-scroller k-selectable\") ||\n                                originalElement.hasClass(\"k-list-content\")) {\n                        return { element: connectedListBox._getList(), listBox: connectedListBox, appendToBottom: true };\n                    } else {\n                        return null;\n                    }\n                }\n                return null;\n            },\n\n            _drag: function(e) {\n                var that = this;\n                var draggedElement = that.draggedElement;\n                var target = that._findTarget(e);\n                var cursorOffset = { left: e.x.location, top: e.y.location };\n                var dataItem = that.dataItem(draggedElement);\n                var eventData = { dataItems: [dataItem], items: $(draggedElement), draggableEvent: e };\n                var targetCenter;\n                var offsetDelta;\n                var direction;\n\n                if (that.trigger(DRAG, eventData)) {\n                    e.preventDefault();\n                    return;\n                }\n\n                if (target) {\n                    targetCenter = this._getElementCenter(target.element);\n\n                    offsetDelta = {\n                        left: Math.round(cursorOffset.left - targetCenter.left),\n                        top: Math.round(cursorOffset.top - targetCenter.top)\n                    };\n\n                    if (target.appendToBottom) {\n                        that._movePlaceholder(target, null , draggedElement);\n                        return;\n                    }\n\n                    if (offsetDelta.top < 0) {\n                        direction = \"prev\";\n                    } else if (offsetDelta.top > 0) {\n                        direction = \"next\";\n                    }\n\n                    if (direction) {\n                        if (target.element[0] != that.placeholder[0]) {\n                            that._movePlaceholder(target, direction, draggedElement);\n                        }\n                    }\n                 }\n                 else if (that.placeholder.parent().length) {\n                    that.placeholder.remove();\n                 }\n            },\n\n            _movePlaceholder: function(target, direction, draggedElement) {\n                var that = this;\n                var placeholder = that.placeholder;\n                var draggableOptions = target.listBox.options.draggable;\n\n                if (placeholder.parent().length) {\n                    that.placeholder.remove();\n                    if (draggableOptions && draggableOptions.placeholder) {\n                        that.placeholder = kendo.isFunction(draggableOptions.placeholder) ? $(draggableOptions.placeholder.call(that, draggedElement)) : $(draggableOptions.placeholder);\n                    } else {\n                        that.placeholder = $(defaultPlaceholder.call(that, draggedElement));\n                    }\n                }\n\n                if (!direction) {\n                    target.element.append(that.placeholder);\n                } else if (direction === \"prev\") {\n                    target.element.before(that.placeholder);\n                } else if (direction === \"next\") {\n                    target.element.after(that.placeholder);\n                }\n            },\n\n            _dragend: function(e) {\n                var that = this;\n                var draggedItem = that.draggedElement;\n                var items = that.items();\n                var placeholderIndex = items.not(that.draggedElement).index(that.placeholder);\n                var draggedIndex = items.not(that.placeholder).index(that.draggedElement);\n                var dataItem = that.dataItem(draggedItem);\n                var eventData = { dataItems: [dataItem], items: $(draggedItem) };\n                var connectedListBox = that.placeholder.closest(\".k-listbox\").find(\"[data-role='listbox']\").getKendoListBox();\n\n                if (that.trigger(DROP, extend({}, eventData, { draggableEvent: e }))) {\n                    e.preventDefault();\n                    this._clear();\n                    return;\n                }\n\n                if (placeholderIndex >= 0) {\n                    if (placeholderIndex !== draggedIndex && !that.trigger(REORDER, extend({}, eventData, { offset: placeholderIndex - draggedIndex }))) {\n                        draggedItem.removeClass(DRAGGEDCLASS);\n                        that.reorder(draggedItem, placeholderIndex);\n                    }\n                } else if (connectedListBox) {\n                    if (!that.trigger(REMOVE, eventData)) {\n                        that.remove($(draggedItem));\n                    }\n\n                    if (!connectedListBox.trigger(ADD, eventData)) {\n                        connectedListBox._addItemAt(dataItem, connectedListBox.items().index(that.placeholder));\n                    }\n                }\n\n                that._clear();\n                that._draggable.dropped = true;\n\n                that.trigger(DRAGEND, extend({}, eventData, { draggableEvent: e }));\n\n                that._updateToolbar();\n                that._updateAllToolbars();\n            },\n\n            reorder: function(item, index) {\n                var that = this;\n                var dataSource = that.dataSource;\n                var dataItem = that.dataItem(item);\n                var dataItemAtIndex = dataSource.at(index);\n                var itemAtIndex = that.items()[index];\n                var listItem = $(item);\n\n                if (dataItem && itemAtIndex && dataItemAtIndex) {\n                    that._removeElement(listItem);\n                    that._insertElementAt(listItem, index);\n                    that._updateToolbar();\n                }\n            },\n\n            remove: function(items) {\n                var that = this;\n                var listItems = that._getItems(items);\n                var itemsLength = listItems.length;\n                var i;\n\n                that._unbindDataSource();\n                that._unbindDataChange();\n                for (i = 0; i < itemsLength; i++) {\n                    that._removeItem($(listItems[i]));\n                }\n                that._bindDataChange();\n                that._bindDataSource();\n                that._syncElement();\n                that._updateToolbar();\n                that._updateAllToolbars();\n            },\n\n            _removeItem: function(item) {\n                var that = this;\n                var dataSource = that.dataSource;\n                var dataItem = that.dataItem(item);\n                var transport = dataSource.transport;\n\n                if (!dataItem || !dataSource) {\n                    return;\n                }\n                if (typeof dataItem === typeof \"\") {\n                    var data = dataSource._data;\n                    for (var i = 0; i < data.length; i++) {\n                        if (dataItem === data[i]) {\n                            data[i] = data[data.length - 1];\n                            data.pop();\n                            break;\n                        }\n                    }\n                } else {\n                    dataSource.remove(dataItem);\n                    if (transport && (transport.destroy || (transport.options || {}).destroy) &&\n                        (!dataItem.isNew || !dataItem.isNew())) {\n                        dataSource._destroyed.push(dataItem);\n                    }\n                }\n                that._removeElement(item);\n            },\n\n            _removeElement: function(item) {\n                kendo.destroy(item);\n                $(item).off().remove();\n            },\n\n            dataItem: function(element) {\n                var uniqueIdAttr = kendoAttr(UNIQUE_ID);\n                var uid = $(element).attr(uniqueIdAttr) || $(element).closest(\"[\" + uniqueIdAttr + \"]\").attr(uniqueIdAttr);\n                if (uid) {\n                    return this.dataSource.getByUid(uid);\n                }\n                else {\n                    return $(element).find(\".k-list-item-text\").html();\n                }\n            },\n\n            _dataItems: function(items) {\n                var dataItems = [];\n                var listItems = $(items);\n                var itemsLength = listItems.length;\n                var i;\n\n                for (i = 0; i < itemsLength; i++) {\n                    dataItems.push(this.dataItem(listItems.eq(i)));\n                }\n\n                return dataItems;\n            },\n\n            items: function() {\n                var list = this._getList();\n                return list.children();\n            },\n\n            select: function(items) {\n                var that = this;\n                var selectable = that.selectable;\n                var enabledItems;\n\n                if (isUndefined(items)) {\n                    return selectable.value();\n                }\n\n                enabledItems = that.items().filter(items).filter(ENABLED_ITEMS_SELECTOR);\n\n                if (!selectable.options.multiple) {\n                    selectable.clear();\n                    enabledItems = enabledItems.first();\n                }\n\n                return selectable.value(enabledItems);\n            },\n\n            clearSelection: function() {\n                var that = this;\n                var selectable = that.selectable;\n\n                if (selectable) {\n                    selectable.clear();\n                }\n            },\n\n            enable: function(items, enable) {\n                var that = this;\n                var enabled = isUndefined(enable) ? true : !!enable;\n                var listItems = that._getItems(items);\n                var itemsLength = listItems.length;\n                var i;\n\n                for (i = 0; i < itemsLength; i++) {\n                    that._enableItem($(listItems[i]), enabled);\n                }\n\n                that._updateAllToolbars();\n            },\n\n            _enableItem: function(item, enable) {\n                var that = this;\n                var dataItem = that.dataItem(item);\n\n                if (dataItem) {\n                    if (enable) {\n                        $(item).removeClass(DISABLED_STATE_CLASS);\n                    } else {\n                        $(item)\n                            .addClass(DISABLED_STATE_CLASS)\n                            .removeClass(SELECTED_STATE_CLASS);\n                    }\n                }\n            },\n\n            setDataSource: function(dataSource) {\n                var that = this;\n\n                that.options.dataSource = dataSource;\n\n                that._dataSource();\n            },\n\n            _dataSource: function() {\n                var that = this;\n                var options = that.options;\n                var dataSource = options.dataSource || {};\n\n                dataSource = Array.isArray(dataSource) ? { data: dataSource } : dataSource;\n                dataSource.select = that.element;\n                dataSource.fields = [\n                    { field: options.dataTextField },\n                    { field: options.dataValueField }];\n\n                that._unbindDataSource();\n                that.dataSource = DataSource.create(dataSource);\n                that._bindDataSource();\n\n                if (that.options.autoBind) {\n                    that.wrapper.attr(ARIA_BUSY, true);\n                    that.dataSource.fetch();\n                }\n            },\n\n            _bindDataChange: function() {\n                var dataSource = this.dataSource;\n                if (dataSource._data && dataSource._changeHandler) {\n                    dataSource._data.bind(CHANGE, dataSource._changeHandler);\n                    dataSource._data.trigger(CHANGE);\n                }\n            },\n\n            _unbindDataChange: function() {\n                var dataSource = this.dataSource;\n                if (dataSource._data && dataSource._changeHandler) {\n                    dataSource._data.unbind(CHANGE, dataSource._changeHandler);\n                }\n            },\n\n            _bindDataSource: function() {\n                var that = this;\n                var dataSource = that.dataSource;\n\n                that._dataChangeHandler = that.refresh.bind(that);\n\n                if (dataSource) {\n                    dataSource.bind(CHANGE, that._dataChangeHandler);\n                }\n            },\n\n            _unbindDataSource: function() {\n                var that = this;\n                var dataSource = that.dataSource;\n\n                if (dataSource) {\n                    dataSource.unbind(CHANGE, that._dataChangeHandler);\n                }\n            },\n\n            _wrapper: function() {\n                var that = this,\n                    element = that.element,\n                    wrapper = element.parent(\"div.k-listbox\");\n\n                if (!wrapper[0]) {\n                    wrapper = element.wrap('<div class=\"k-listbox\" unselectable=\"on\" />').parent();\n                    wrapper[0].style.cssText = element[0].style.cssText;\n                    wrapper[0].title = element[0].title;\n                    $('<div class=\"k-list-scroller\"><div class=\"k-list k-list-md\"><div class=\"k-list-content\"></div></div></div>').insertBefore(element);\n                }\n\n                that.wrapper = wrapper.addClass(element[0].className).css(\"display\", \"\");\n                that._innerWrapper = $(wrapper[0].firstChild);\n            },\n\n            _list: function() {\n                var that = this,\n                    list = $(\"<ul class='\" + LIST_CLASS + \"' role='listbox'></ul>\"),\n                    selectable = that.options.selectable,\n                    selectableOptions = Selectable.parseOptions(selectable);\n\n                if (selectableOptions.multiple) {\n                    list.attr(ARIA_MULTISELECTABLE, \"true\");\n                }\n\n                list.appendTo(that.wrapper.find(\".k-list-content\"));\n\n                if (that.options.navigatable) {\n                    that._getList().attr(TABINDEX, that._getTabIndex());\n                }\n            },\n\n            _templates: function() {\n                var that = this;\n                var options = this.options;\n                var template;\n\n                if (options.template && typeof options.template == \"string\") {\n                    template = kendo.template(options.template);\n                } else if (!options.template) {\n                    template = kendo.template(function (data) { return (\"\" + (kendo.getter(options.dataTextField)(data))); });\n                } else {\n                    template = options.template;\n                }\n\n                that.templates = {\n                    itemTemplate: kendo.template(function (ref) {\n                            var item = ref.item;\n                            var r = ref.r;\n\n                            return (\"<li class='k-list-item' role='option' aria-selected='false'><span class='k-list-item-text'>\" + (r(item)) + \"</span></li>\");\n                }\n                    ),\n                    itemContent: template,\n                    toolbar: (\"<div role='toolbar' class='\" + TOOLBAR_CLASS + \"'></div>\")\n                };\n            },\n\n            refresh: function() {\n                var that = this;\n                var view = that.dataSource.view();\n                var template = that.templates.itemTemplate;\n                var html = \"\";\n\n                for (var idx = 0; idx < view.length; idx++) {\n                    html += template({ item: view[idx], r: that.templates.itemContent });\n                }\n                that._getList().html(html);\n                that._setItemIds();\n                that._createToolbar();\n                that._syncElement();\n                that._updateToolbar();\n                that._updateAllToolbars();\n                that.trigger(DATABOUND);\n\n                that.wrapper.attr(ARIA_BUSY, false);\n            },\n\n            _syncElement: function() {\n                var options = \"\";\n                var view = this.dataSource.view();\n                for (var idx = 0; idx < view.length; idx++) {\n                    options += this._option(view[idx][this.options.dataValueField] || view[idx], view[idx][this.options.dataTextField] || view[idx], true);\n                }\n                this.element.html(options);\n            },\n\n            _option: function(dataValue, dataText) {\n                var option = \"<option\";\n\n                if (dataValue !== undefined$1) {\n                    dataValue += \"\";\n\n                    if (dataValue.indexOf('\"') !== -1) {\n                        dataValue = dataValue.replace(/\"/g, \"&quot;\");\n                    }\n\n                    option += ' value=\"' + dataValue + '\"';\n                }\n                option += \" selected>\";\n\n                if (dataText !== undefined$1) {\n                    option += kendo.htmlEncode(dataText);\n                }\n\n                return option += \"</option>\";\n            },\n\n            _setItemId: function(item, id) {\n                if (!item.length) {\n                    return;\n                }\n\n                item.attr(kendoAttr(UNIQUE_ID), id).attr(ID, id);\n            },\n\n            _setItemIds: function() {\n                var that = this;\n                var items = that.items();\n                var view = that.dataSource.view();\n                var viewLength = view.length;\n                var i;\n\n                for (i = 0; i < viewLength; i++) {\n                    that._setItemId(items.eq(i), view[i].uid);\n                }\n            },\n\n            _selectable: function() {\n                var that = this;\n                var selectable = that.options.selectable;\n                var selectableOptions = Selectable.parseOptions(selectable);\n\n                that.selectable = new Selectable(that._innerWrapper, {\n                    aria: true,\n                    selectedClass: \"k-selected\",\n                    multiple: selectableOptions.multiple,\n                    filter: ENABLED_ITEM_SELECTOR,\n                    change: that._onSelect.bind(that)\n                });\n            },\n\n            _onSelect: function() {\n                var that = this;\n\n                that._updateToolbar();\n                that._updateAllToolbars();\n                that.trigger(CHANGE);\n            },\n\n            _destroySelectable: function() {\n                var that = this;\n\n                if (that.selectable && that.selectable.element) {\n                    that.selectable.destroy();\n                    that.selectable = null;\n                }\n            },\n\n            _getList: function() {\n                return this.wrapper.find(LIST_SELECTOR);\n            },\n\n            _getItems: function(items) {\n                return this.items().filter(items);\n            },\n\n            _createToolbar: function() {\n                var that = this;\n                var toolbarOptions = that.options.toolbar;\n                var position = toolbarOptions.position || RIGHT;\n                var toolbarInsertion = position === BOTTOM ? \"insertAfter\" : \"insertBefore\";\n                var tools = toolbarOptions.tools || [];\n                var messages = that.options.messages;\n\n                that._destroyToolbar();\n                that.wrapper.removeClass(TOOLBAR_POSITION_CLASS_NAMES.join(SPACE));\n\n                if (tools.length && tools.length > 0) {\n                    var toolbarElement = $(that.templates.toolbar)[toolbarInsertion](that._innerWrapper);\n                    that.toolbar = new ToolBar(toolbarElement, extend({}, toolbarOptions, { listBox: that, messages: messages }));\n                    that.wrapper.addClass(TOOLBAR_CLASS + DASH + position);\n                }\n            },\n\n            _destroyToolbar: function() {\n                var that = this;\n\n                if (that.toolbar) {\n                    that.toolbar.destroy();\n                    that.toolbar = null;\n                }\n            },\n\n            _executeCommand: function(commandName) {\n                var that = this;\n                var command = CommandFactory.current.create(commandName, { listBox: that });\n\n                if (command) {\n                    command.execute();\n                    that._updateToolbar();\n                    that._updateAllToolbars();\n                }\n            },\n\n            _updateToolbar: function() {\n                var toolbar = this.toolbar;\n\n                if (toolbar) {\n                    toolbar._updateToolStates();\n                }\n            },\n\n            _updateAllToolbars: function() {\n                var listBoxElements = $(\"select[data-role='listbox']\");\n                var elementsLength = listBoxElements.length;\n                var listBox;\n                var i;\n\n                for (i = 0; i < elementsLength; i++) {\n                    listBox = $(listBoxElements[i]).data(KENDO_LISTBOX);\n\n                    if (listBox) {\n                        listBox._updateToolbar();\n                    }\n                }\n            }\n        });\n\n        kendo.ui.plugin(ListBox);\n\n        var CommandFactory = Class.extend({\n            init: function() {\n                this._commands = [];\n            },\n\n            register: function(commandName, commandType) {\n                this._commands.push({\n                    commandName: commandName,\n                    commandType: commandType\n                });\n            },\n\n            create: function(commandName, options) {\n                var commands = this._commands;\n                var itemsLength = commands.length;\n                var name = commandName ? commandName.toLowerCase() : \"\";\n                var match;\n                var command;\n                var i;\n\n                for (i = 0; i < itemsLength; i++) {\n                    command = commands[i];\n\n                    if (command.commandName.toLowerCase() === name) {\n                        match = command;\n                        break;\n                    }\n                }\n\n                if (match) {\n                    return new match.commandType(options);\n                }\n            }\n        });\n        CommandFactory.current = new CommandFactory();\n\n        var ListBoxCommand = Class.extend({\n            init: function(options) {\n                var that = this;\n\n                that.options = extend({}, that.options, options);\n                that.listBox = that.options.listBox;\n            },\n\n            options: {\n                listBox: null\n            },\n\n            getItems: function() {\n                return $(this.listBox.select());\n            },\n\n            execute: noop,\n            canExecute: noop\n        });\n\n        var RemoveItemsCommand = ListBoxCommand.extend({\n            execute: function() {\n                var that = this;\n                var listBox = that.listBox;\n                var items = that.getItems();\n\n                if (!listBox.trigger(REMOVE, { dataItems: listBox._dataItems(items), items: items })) {\n                    listBox.remove(items);\n                }\n            },\n\n            canExecute: function() {\n                return this.listBox.select().length > 0;\n            }\n        });\n        CommandFactory.current.register(REMOVE, RemoveItemsCommand);\n\n        var MoveItemsCommand = ListBoxCommand.extend({\n            execute: function() {\n                var that = this;\n\n                if (that.canExecute()) {\n                    that.moveItems();\n                }\n            },\n\n            canExecute: noop,\n\n            moveItems: function() {\n                var that = this;\n                var listBox = that.listBox;\n                var options = that.options;\n                var items = that.getItems();\n                var offset = options.offset;\n                var indecesInDom = getSortedDomIndices(items);\n                var movedItems = $.makeArray(items.sort(that.itemComparer));\n                var moveAction = options.moveAction;\n                var movedItem;\n\n                if (!listBox.trigger(REORDER, { dataItems: listBox._dataItems(movedItems), items: $(movedItems), offset: offset })) {\n                    while (movedItems.length > 0 && indecesInDom.length > 0) {\n                        movedItem = movedItems[moveAction]();\n\n                        listBox.reorder(movedItem, indecesInDom[moveAction]() + offset);\n                    }\n                }\n            },\n\n            options: {\n                offset: 0,\n                moveAction: \"pop\"\n            },\n\n            itemComparer: function(item1, item2) {\n                var indexItem1 = $(item1).index();\n                var indexItem2 = $(item2).index();\n\n                if (indexItem1 === indexItem2) {\n                    return 0;\n                } else {\n                    return (indexItem1 > indexItem2 ? 1 : (-1));\n                }\n            }\n        });\n\n        var MoveUpItemsCommand = MoveItemsCommand.extend({\n            options: {\n                offset: MOVE_UP_OFFSET,\n                moveAction: \"shift\"\n            },\n\n            canExecute: function() {\n                var items = this.getItems();\n                var domIndices = getSortedDomIndices(items);\n\n                return (domIndices.length > 0 && domIndices[0] > 0);\n            }\n        });\n        CommandFactory.current.register(MOVE_UP, MoveUpItemsCommand);\n\n        var MoveDownItemsCommand = MoveItemsCommand.extend({\n            options: {\n                offset: MOVE_DOWN_OFFSET,\n                moveAction: \"pop\"\n            },\n\n            canExecute: function() {\n                var that = this;\n                var items = that.getItems();\n                var domIndices = getSortedDomIndices(items);\n\n                return (domIndices.length > 0 && $(domIndices).last()[0] < (that.listBox.items().length - 1));\n            }\n        });\n        CommandFactory.current.register(MOVE_DOWN, MoveDownItemsCommand);\n\n        var TransferItemsCommand = ListBoxCommand.extend({\n            options: {\n                filter: ENABLED_ITEM_SELECTOR\n            },\n\n            execute: function() {\n                var that = this;\n                var sourceListBox = that.getSourceListBox();\n                var items = that.getItems().filter(that.options.filter);\n                var dataItems = sourceListBox ? sourceListBox._dataItems(items) : [];\n                var destinationListBox = that.getDestinationListBox();\n                var updatedSelection = that.getUpdatedSelection(items);\n\n                if (destinationListBox && items.length > 0) {\n                    if (!destinationListBox.trigger(ADD, { dataItems: dataItems, items: items })) {\n                        destinationListBox.add(dataItems);\n                    }\n\n                    if (!sourceListBox.trigger(REMOVE, { dataItems: dataItems, items: items })) {\n                        sourceListBox.remove(items);\n                        that.updateSelection(updatedSelection);\n                    }\n                }\n            },\n\n            getUpdatedSelection: function(items) {\n\n                if (items.length !== 1) {\n                    return null;\n                }\n                var that = this;\n                var itemFilter = that.options.filter;\n                var sourceListBox = that.getSourceListBox();\n                var lastEnabledItem = sourceListBox ? sourceListBox.items().filter(itemFilter).last() : null;\n                var containsLastItem = $(items).filter(lastEnabledItem).length > 0;\n                var itemToSelect = containsLastItem ? $(items).prevAll(itemFilter)[0] : $(items).nextAll(itemFilter)[0];\n\n                if (itemToSelect) {\n                    return itemToSelect;\n                } else {\n                    return null;\n                }\n            },\n\n            updateSelection: function(item) {\n                var sourceListBox = this.getSourceListBox();\n\n                if (sourceListBox && item) {\n                    sourceListBox.select($(item));\n                    sourceListBox.selectable.trigger(CHANGE);\n                    sourceListBox._scrollIntoView(item);\n                }\n            },\n\n            getSourceListBox: noop,\n            getDestinationListBox: noop\n        });\n\n        var TransferItemsToCommand = TransferItemsCommand.extend({\n            canExecute: function() {\n                var sourceListBox = this.getSourceListBox();\n\n                return (sourceListBox ? sourceListBox.select().length > 0 : false);\n            },\n\n            getSourceListBox: function() {\n                return this.listBox;\n            },\n\n            getDestinationListBox: function() {\n                var sourceListBox = this.getSourceListBox();\n                return sourceListBox && sourceListBox.options.connectWith ? $(HASH + sourceListBox.options.connectWith).data(KENDO_LISTBOX) : null;\n            },\n\n            getItems: function() {\n                var sourceListBox = this.getSourceListBox();\n                return sourceListBox ? $(sourceListBox.select()) : $();\n            }\n        });\n        CommandFactory.current.register(TRANSFER_TO, TransferItemsToCommand);\n\n        var TransferItemsFromCommand = TransferItemsCommand.extend({\n            canExecute: function() {\n                var sourceListBox = this.getSourceListBox();\n\n                return (sourceListBox ? sourceListBox.select().length > 0 : false);\n            },\n\n            getSourceListBox: function() {\n                var destinationListBox = this.getDestinationListBox();\n                return (destinationListBox && destinationListBox.options.connectWith) ? $(HASH + destinationListBox.options.connectWith).data(KENDO_LISTBOX) : null;\n            },\n\n            getDestinationListBox: function() {\n                return this.listBox;\n            },\n\n            getItems: function() {\n                var sourceListBox = this.getSourceListBox();\n                return sourceListBox ? $(sourceListBox.select()) : $();\n            }\n        });\n        CommandFactory.current.register(TRANSFER_FROM, TransferItemsFromCommand);\n\n        var TransferAllItemsToCommand = TransferItemsToCommand.extend({\n            canExecute: function() {\n                var sourceListBox = this.getSourceListBox();\n\n                return (sourceListBox ? sourceListBox.wrapper.find(ENABLED_ITEMS_SELECTOR).length > 0 : false);\n            },\n\n            getItems: function() {\n                var sourceListBox = this.getSourceListBox();\n                return sourceListBox ? sourceListBox.items() : $();\n            },\n\n            getUpdatedSelection: noop,\n            updateSelection: noop\n        });\n        CommandFactory.current.register(TRANSFER_ALL_TO, TransferAllItemsToCommand);\n\n        var TransferAllItemsFromCommand = TransferItemsFromCommand.extend({\n            canExecute: function() {\n                var sourceListBox = this.getSourceListBox();\n\n                return (sourceListBox ? sourceListBox.wrapper.find(ENABLED_ITEMS_SELECTOR).length > 0 : false);\n            },\n\n            getItems: function() {\n                var sourceListBox = this.getSourceListBox();\n                return sourceListBox ? sourceListBox.items() : $();\n            },\n\n            getUpdatedSelection: noop,\n            updateSelection: noop\n        });\n        CommandFactory.current.register(TRANSFER_ALL_FROM, TransferAllItemsFromCommand);\n\n        var ToolBar = Class.extend({\n            init: function(element, options) {\n                var that = this;\n\n                that.element = $(element).addClass(TOOLBAR_CLASS);\n                that.options = extend({}, that.options, options);\n                that.listBox = that.options.listBox;\n\n                that._initTemplates();\n                that._createTools();\n                that._updateToolStates();\n                that._attachEventHandlers();\n                that._aria();\n                that._tabindex();\n            },\n\n            destroy: function() {\n                var that = this;\n\n                that._detachEventHandlers();\n                kendo.destroy(that.element);\n                that.element.remove();\n                that.element = null;\n            },\n\n            options: {\n                position: RIGHT,\n                tools: []\n            },\n\n            _aria: function() {\n                var listEl = this.listBox._getList(),\n                    listBoxLabelledby = listEl.attr(ARIA_LABELLEDBY),\n                    listBoxLabel = listBoxLabelledby ? $(\"#\" + listBoxLabelledby).text() : listEl.attr(ARIA_LABEL),\n                    listElId = listEl.attr(\"id\") || kendo.guid();\n\n                listEl.attr(\"id\", listElId);\n                this.element.attr(ARIA_CONTROLS, listElId);\n\n                if (listBoxLabel) {\n                    this.element.attr(ARIA_LABEL, listBoxLabel + \" toolbar.\");\n                }\n            },\n\n            _attachEventHandlers: function() {\n                var that = this;\n\n                that.element\n                    .on(CLICK, ENABLED_TOOL_SELECTOR, that._onToolClick.bind(that))\n                    .on(KEYDOWN, that._keyDown.bind(that));\n            },\n            _createTools: function() {\n                var that = this;\n                var isRtl = kendo.support.isRtl(that.element);\n                var tools = that.options.tools;\n                var toolsLength = tools.length;\n                var toolsMessages = that.options.messages.tools;\n                var toolList = that.element;\n                var tool;\n                var i;\n\n                ToolBar.defaultTools = kendo.deepExtend({}, ToolBar.defaultTools, {\n                    transferTo: {\n                        icon: isRtl ? CARET_ALT_LEFT : CARET_ALT_RIGHT\n                    },\n                    transferFrom: {\n                        icon: isRtl ? CARET_ALT_RIGHT : CARET_ALT_LEFT\n                    },\n                    transferAllTo: {\n                        icon: isRtl ? CARET_ALT_DOUBLE_LEFT : CARET_ALT_DOUBLE_RIGHT\n                    },\n                    transferAllFrom: {\n                        icon: isRtl ? CARET_ALT_DOUBLE_RIGHT : CARET_ALT_DOUBLE_LEFT\n                    }\n                });\n\n                for (i = 0; i < toolsLength; i++) {\n                    tool = extend({}, ToolBar.defaultTools[tools[i]], { text: toolsMessages[tools[i]] });\n\n                    if (tool) {\n                        toolList.append($(that.templates.tool(tool)));\n                    }\n                }\n\n                that.element.append(toolList);\n            },\n\n            _detachEventHandlers: function() {\n                this.element.off(NS).find(\"*\").off(NS);\n            },\n\n            _executeToolCommand: function(command) {\n                var that = this;\n                var listBox = that.listBox;\n\n                if (listBox) {\n                    listBox._executeCommand(command);\n                }\n            },\n\n            _focusTool: function() {\n                this.element.find(TOOL_SELECTOR).not(\"[tabindex=-1]\").trigger(\"focus\");\n            },\n\n            _initTemplates: function() {\n                this.templates = {\n                    tool: kendoTemplate( function (ref) {\n                            var icon = ref.icon;\n                            var iconClass = ref.iconClass;\n                            var command = ref.command;\n                            var text = ref.text;\n\n                            return kendo.html.renderButton((\"<button data-command='\" + command + \"' title='\" + text + \"' aria-label='\" + text + \"'></button>\"), { icon: icon, iconClass: iconClass });\n                })\n                };\n            },\n\n            _keyDown: function(e) {\n                var key = e.keyCode,\n                    target = $(e.target),\n                    targetTool = target.is(TOOL_SELECTOR) ? target : target.closest(\"li\");\n\n                if (key === kendo.keys.UP || key === kendo.keys.LEFT) {\n                    e.preventDefault();\n                    if (targetTool.prev().length) {\n                        this._tabindex(targetTool.prev());\n                    }\n                    this._focusTool();\n                } else if (key === kendo.keys.DOWN || key === kendo.keys.RIGHT) {\n                    e.preventDefault();\n                    if (targetTool.next()) {\n                        this._tabindex(targetTool.next());\n                    }\n                    this._focusTool();\n                }\n            },\n\n            _onToolClick: function(e) {\n                e.preventDefault();\n\n                this._executeToolCommand($(e.currentTarget).data(COMMAND));\n                this._focusTool();\n            },\n\n            _tabindex: function(candidate) {\n                var buttons = this.element.find(TOOL_SELECTOR),\n                    focusable;\n\n                if (candidate && candidate.length) {\n                    focusable = candidate;\n                } else {\n                    focusable = buttons.first();\n                }\n\n                buttons.attr(TABINDEX, -1);\n                focusable.removeAttr(TABINDEX);\n            },\n\n            _updateToolStates: function() {\n                var that = this;\n                var tools = that.options.tools;\n                var toolsLength = tools.length;\n                var i;\n                var focusable = that.element.find(TOOL_SELECTOR).not(\"[tabindex=-1]\");\n\n                for (i = 0; i < toolsLength; i++) {\n                    that._updateToolState(tools[i]);\n                }\n\n                that._tabindex(focusable);\n            },\n\n            _updateToolState: function(toolName) {\n                var that = this;\n                var command = CommandFactory.current.create(toolName, { listBox: that.listBox });\n                var tool = that.element.find(\"[data-command='\" + toolName + \"']\");\n                var toolElement = tool[0];\n\n                if (toolElement && command && command.canExecute) {\n                    if (command.canExecute()) {\n                        tool.removeClass(DISABLED_STATE_CLASS).removeAttr(TABINDEX);\n                    } else {\n                        tool.addClass(DISABLED_STATE_CLASS).attr(TABINDEX, \"-1\");\n                    }\n                }\n            }\n        });\n\n        ToolBar.defaultTools = {\n            remove: {\n                command: REMOVE,\n                icon: \"x\"\n            },\n            moveUp: {\n                command: MOVE_UP,\n                icon: \"caret-alt-up\"\n            },\n            moveDown: {\n                command: MOVE_DOWN,\n                icon: \"caret-alt-down\"\n            },\n            transferTo: {\n                command: TRANSFER_TO,\n                icon: CARET_ALT_RIGHT\n            },\n            transferFrom: {\n                command: TRANSFER_FROM,\n                icon: CARET_ALT_LEFT\n            },\n            transferAllTo: {\n                command: TRANSFER_ALL_TO,\n                icon: CARET_ALT_DOUBLE_RIGHT\n            },\n            transferAllFrom: {\n                command: TRANSFER_ALL_FROM,\n                icon: CARET_ALT_DOUBLE_LEFT\n            }\n        };\n\n        extend(ListBox, {\n            ToolBar: ToolBar\n        });\n\n        function isInputElement(element) {\n            return $(element).is(\":button,a,:input,a>.k-icon,a>.k-svg-icon,textarea,span.k-select,span.k-icon,span.k-svg-icon,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdownlist\");\n        }\n\n    })(window.kendo.jQuery);\n    var kendo$1 = kendo;\n\n    return kendo$1;\n\n}));\n"]}