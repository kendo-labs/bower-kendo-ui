{"version":3,"file":"kendo.mobile.drawer.min.js","names":["global","factory","exports","module","require","define","amd","globalThis","self","kendomobile","drawer","js","this","$","undefined$1","kendo","window","mobile","os","support","mobileOS","Transition","effects","roleSelector","AXIS","ui","SWIPE_TO_OPEN","ios","majorVersion","appMode","BEFORE_SHOW","INIT","SHOW","HIDE","AFTER_HIDE","NULL_VIEW","enable","noop","Drawer","View","extend","init","element","options","parent","prepend","Widget","fn","call","$angular","_layout","_scroller","_model","userEvents","pane","closest","data","bind","e","_viewShow","hide","UserEvents","fastTap","filter","allowSelection","currentView","container","Error","_attachTransition","visible","preventDefault","swipeToOpen","transition","cancel","_start","_update","_end","leftPositioned","position","addClass","trigger","name","views","swipeToOpenViews","title","events","show","_activate","_show","current","_moveViewTo","view","openFor","destroy","_currentViewIncludedIn","_setAsCurrent","_invokeNgController","length","inArray","id","replace","attr","offset","width","last","moveTo","location","duration","ease","easeOutExpo","that","movable","currentOffset","x","moveAxis","Movable","axis","onEnd","style","cssText","animationFrame","removeClass","sender","Math","abs","velocity","y","triggeredByInput","event","canMoveLeft","canMoveRight","leftSwipe","capture","limitedPosition","newPosition","delta","min","max","stopPropagation","pastHalf","velocityThreshold","plugin","jQuery"],"sources":["kendo.mobile.drawer.js"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('kendo.mobile.view.js'), require('kendo.userevents.js')) :\n    typeof define === 'function' && define.amd ? define(['kendo.mobile.view', 'kendo.userevents'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, (global.kendomobile = global.kendomobile || {}, global.kendomobile.drawer = global.kendomobile.drawer || {}, global.kendomobile.drawer.js = factory()));\n})(this, (function () {\n    var __meta__ = {\n        id: \"mobile.drawer\",\n        name: \"Drawer\",\n        category: \"mobile\",\n        description: \"The Kendo Mobile Drawer widget provides slide to reveal global application toolbox\",\n        depends: [ \"mobile.view\", \"userevents\" ]\n    };\n\n    (function($, undefined$1) {\n        var kendo = window.kendo,\n            mobile = kendo.mobile,\n            os = kendo.support.mobileOS,\n            Transition = kendo.effects.Transition,\n            roleSelector = kendo.roleSelector,\n            AXIS = \"x\",\n            ui = mobile.ui,\n            SWIPE_TO_OPEN = !(os.ios && os.majorVersion == 7 && !os.appMode),\n            BEFORE_SHOW = \"beforeShow\",\n            INIT = \"init\",\n            SHOW = \"show\",\n            HIDE = \"hide\",\n            AFTER_HIDE = \"afterHide\",\n            NULL_VIEW = { enable: $.noop };\n\n        var Drawer = ui.View.extend({\n            init: function(element, options) {\n                // move the drawer to the top, in order to hide it\n                $(element).parent().prepend(element);\n\n                mobile.ui.Widget.fn.init.call(this, element, options);\n\n                if (!this.options.$angular) {\n                    this._layout();\n                    this._scroller();\n                }\n\n                this._model();\n\n                var pane = this.element.closest(roleSelector(\"pane\")).data(\"kendoMobilePane\"),\n                    userEvents;\n\n                if (pane) {\n                    this.pane = pane;\n                    this.pane.bind(\"viewShow\", function(e) {\n                        drawer._viewShow(e);\n                    });\n\n                    this.pane.bind(\"sameViewRequested\", function() {\n                        drawer.hide();\n                    });\n\n                    userEvents = this.userEvents = new kendo.UserEvents(pane.element, {\n                        fastTap: true,\n                        filter: roleSelector(\"view splitview\"),\n                        allowSelection: true\n                    });\n\n                } else {\n                    this.currentView = NULL_VIEW;\n                    var container = $(this.options.container);\n\n                    if (!container) {\n                        throw new Error(\"The drawer needs a container configuration option set.\");\n                    }\n\n                    userEvents = this.userEvents = new kendo.UserEvents(container, { fastTap: true, allowSelection: true });\n                    this._attachTransition(container);\n                }\n\n                var drawer = this;\n\n                var hide = function(e) {\n                    if (drawer.visible) {\n                        drawer.hide();\n                        e.preventDefault();\n                    }\n                };\n\n                if (this.options.swipeToOpen && SWIPE_TO_OPEN) {\n                    userEvents.bind(\"press\", function() { drawer.transition.cancel(); });\n                    userEvents.bind(\"start\", function(e) { drawer._start(e); });\n                    userEvents.bind(\"move\", function(e) { drawer._update(e); });\n                    userEvents.bind(\"end\", function(e) { drawer._end(e); });\n                    userEvents.bind(\"tap\", hide);\n                } else {\n                    userEvents.bind(\"press\", hide);\n                }\n\n                this.leftPositioned = this.options.position === \"left\";\n\n                this.visible = false;\n\n                this.element.hide().addClass(\"km-drawer\").addClass(this.leftPositioned ? \"km-left-drawer\" : \"km-right-drawer\");\n                this.trigger(INIT);\n            },\n\n            options: {\n                name: \"Drawer\",\n                position: \"left\",\n                views: [],\n                swipeToOpenViews: [],\n                swipeToOpen: true,\n                title: \"\",\n                container: null\n            },\n\n            events: [\n                BEFORE_SHOW,\n                HIDE,\n                AFTER_HIDE,\n                INIT,\n                SHOW\n            ],\n\n            show: function() {\n                if (this._activate()) {\n                    this._show();\n                }\n            },\n\n            hide: function() {\n                if (!this.currentView) {\n                    return;\n                }\n\n                this.currentView.enable();\n\n                Drawer.current = null;\n                this._moveViewTo(0);\n                this.trigger(HIDE, { view: this });\n            },\n\n            // Alias in order to support popover/modalview etc. interface\n            openFor: function() {\n                if (this.visible) {\n                    this.hide();\n                } else {\n                    this.show();\n                }\n            },\n\n            destroy: function() {\n                ui.View.fn.destroy.call(this);\n                this.userEvents.destroy();\n            },\n\n            _activate: function() {\n                if (this.visible) {\n                    return true;\n                }\n\n                var visibleOnCurrentView = this._currentViewIncludedIn(this.options.views);\n\n                if (!visibleOnCurrentView || this.trigger(BEFORE_SHOW, { view: this })) {\n                    return false;\n                }\n\n                this._setAsCurrent();\n                this.element.show();\n\n                this.trigger(SHOW, { view: this });\n                this._invokeNgController();\n                return true;\n            },\n\n            _currentViewIncludedIn: function(views) {\n                if (!this.pane || !views.length) {\n                    return true;\n                }\n\n                var view = this.pane.view();\n                return $.inArray(view.id.replace('#', ''), views) > -1 || $.inArray(view.element.attr(\"id\"), views) > -1;\n            },\n\n            _show: function() {\n                this.currentView.enable(false);\n\n                this.visible = true;\n                var offset = this.element.width();\n\n                if (!this.leftPositioned) {\n                    offset = -offset;\n                }\n\n                this._moveViewTo(offset);\n            },\n\n            _setAsCurrent: function() {\n                if (Drawer.last !== this) {\n                    if (Drawer.last) {\n                        Drawer.last.element.hide();\n                    }\n                    this.element.show();\n                }\n\n                Drawer.last = this;\n                Drawer.current = this;\n            },\n\n            _moveViewTo: function(offset) {\n                this.userEvents.cancel();\n                this.transition.moveTo({ location: offset, duration: 400, ease: Transition.easeOutExpo });\n            },\n\n            _viewShow: function(e) {\n                if (this.currentView) {\n                    this.currentView.enable();\n                }\n\n                if (this.currentView === e.view) {\n                    this.hide();\n                    return;\n                }\n\n                this.currentView = e.view;\n                this._attachTransition(e.view.element);\n            },\n\n            _attachTransition: function(element) {\n                var that = this,\n                    movable = this.movable,\n                    currentOffset = movable && movable.x;\n\n\n                if (this.transition) {\n                    this.transition.cancel();\n                    this.movable.moveAxis(\"x\", 0);\n                }\n\n                movable = this.movable = new kendo.ui.Movable(element);\n\n                this.transition = new Transition({\n                    axis: AXIS,\n                    movable: this.movable,\n                    onEnd: function() {\n                        if (movable[AXIS] === 0) {\n                            element[0].style.cssText = \"\";\n                            that.element.hide();\n                            that.trigger(AFTER_HIDE);\n                            that.visible = false;\n                        }\n                    }\n                });\n\n                if (currentOffset) {\n                    element.addClass(\"k-fx-hidden\");\n                    kendo.animationFrame(function() {\n                        element.removeClass(\"k-fx-hidden\");\n                        that.movable.moveAxis(AXIS, currentOffset);\n                        that.hide();\n                    });\n                }\n            },\n\n            _start: function(e) {\n                var userEvents = e.sender;\n\n                // ignore non-horizontal swipes\n                if (Math.abs(e.x.velocity) < Math.abs(e.y.velocity) || kendo.triggeredByInput(e.event) || !this._currentViewIncludedIn(this.options.swipeToOpenViews)) {\n                    userEvents.cancel();\n                    return;\n                }\n\n                var leftPositioned = this.leftPositioned,\n                    visible = this.visible,\n                    canMoveLeft = leftPositioned && visible || !leftPositioned && !Drawer.current,\n                    canMoveRight = !leftPositioned && visible || leftPositioned && !Drawer.current,\n                    leftSwipe = e.x.velocity < 0;\n\n                if ((canMoveLeft && leftSwipe) || (canMoveRight && !leftSwipe)) {\n                    if (this._activate()) {\n                        userEvents.capture();\n                        return;\n                    }\n                }\n\n                userEvents.cancel();\n            },\n\n            _update: function(e) {\n                var movable = this.movable,\n                    newPosition = movable.x + e.x.delta,\n                    limitedPosition;\n\n                if (this.leftPositioned) {\n                    limitedPosition = Math.min(Math.max(0, newPosition), this.element.width());\n                } else {\n                    limitedPosition = Math.max(Math.min(0, newPosition), -this.element.width());\n                }\n\n                this.movable.moveAxis(AXIS, limitedPosition);\n                e.event.preventDefault();\n                e.event.stopPropagation();\n            },\n\n            _end: function(e) {\n                var velocity = e.x.velocity,\n                    pastHalf = Math.abs(this.movable.x) > this.element.width() / 2,\n                    velocityThreshold = 0.8,\n                    shouldShow;\n\n                if (this.leftPositioned) {\n                    shouldShow = velocity > -velocityThreshold && (velocity > velocityThreshold || pastHalf);\n                } else {\n                    shouldShow = velocity < velocityThreshold && (velocity < -velocityThreshold || pastHalf);\n                }\n\n                if (shouldShow) {\n                    this._show();\n                } else {\n                    this.hide();\n                }\n            }\n        });\n\n        ui.plugin(Drawer);\n    })(window.kendo.jQuery);\n    var kendo$1 = kendo;\n\n    return kendo$1;\n\n}));\n"]}