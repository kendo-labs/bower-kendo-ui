{"version":3,"file":"kendo.mobile.drawer.min.js","sources":["kendo.mobile.drawer.js"],"sourcesContent":["(function(f, define){\r\n    define('kendo.mobile.drawer',[ \"kendo.mobile.view\", \"kendo.userevents\" ], f);\r\n})(function(){\r\n\r\nvar __meta__ = { // jshint ignore:line\r\n    id: \"mobile.drawer\",\r\n    name: \"Drawer\",\r\n    category: \"mobile\",\r\n    description: \"The Kendo Mobile Drawer widget provides slide to reveal global application toolbox\",\r\n    depends: [ \"mobile.view\", \"userevents\" ]\r\n};\r\n\r\n(function($, undefined) {\r\n    var kendo = window.kendo,\r\n        mobile = kendo.mobile,\r\n        os = kendo.support.mobileOS,\r\n        Transition = kendo.effects.Transition,\r\n        roleSelector = kendo.roleSelector,\r\n        AXIS = \"x\",\r\n        ui = mobile.ui,\r\n        SWIPE_TO_OPEN = !(os.ios && os.majorVersion == 7 && !os.appMode),\r\n        BEFORE_SHOW = \"beforeShow\",\r\n        INIT = \"init\",\r\n        SHOW = \"show\",\r\n        HIDE = \"hide\",\r\n        AFTER_HIDE = \"afterHide\",\r\n        NULL_VIEW = { enable: $.noop };\r\n\r\n    var Drawer = ui.View.extend({\r\n        init: function(element, options) {\r\n            // move the drawer to the top, in order to hide it\r\n            $(element).parent().prepend(element);\r\n\r\n            mobile.ui.Widget.fn.init.call(this, element, options);\r\n\r\n            if (!this.options.$angular) {\r\n                this._layout();\r\n                this._scroller();\r\n            }\r\n\r\n            this._model();\r\n\r\n            var pane = this.element.closest(roleSelector(\"pane\")).data(\"kendoMobilePane\"),\r\n                userEvents;\r\n\r\n            if (pane) {\r\n                this.pane = pane;\r\n                this.pane.bind(\"viewShow\", function(e) {\r\n                    drawer._viewShow(e);\r\n                });\r\n\r\n                this.pane.bind(\"sameViewRequested\", function() {\r\n                    drawer.hide();\r\n                });\r\n\r\n                userEvents = this.userEvents = new kendo.UserEvents(pane.element, {\r\n                    fastTap: true,\r\n                    filter: roleSelector(\"view splitview\"),\r\n                    allowSelection: true\r\n                });\r\n\r\n            } else {\r\n                this.currentView = NULL_VIEW;\r\n                var container = $(this.options.container);\r\n\r\n                if (!container) {\r\n                    throw new Error(\"The drawer needs a container configuration option set.\");\r\n                }\r\n\r\n                userEvents = this.userEvents = new kendo.UserEvents(container, { fastTap: true, allowSelection: true });\r\n                this._attachTransition(container);\r\n            }\r\n\r\n            var drawer = this;\r\n\r\n            var hide = function(e) {\r\n                if (drawer.visible) {\r\n                    drawer.hide();\r\n                    e.preventDefault();\r\n                }\r\n            };\r\n\r\n            if (this.options.swipeToOpen && SWIPE_TO_OPEN) {\r\n                userEvents.bind(\"press\", function() { drawer.transition.cancel(); });\r\n                userEvents.bind(\"start\", function(e) { drawer._start(e); });\r\n                userEvents.bind(\"move\", function(e) { drawer._update(e); });\r\n                userEvents.bind(\"end\", function(e) { drawer._end(e); });\r\n                userEvents.bind(\"tap\", hide);\r\n            } else {\r\n                userEvents.bind(\"press\", hide);\r\n            }\r\n\r\n            this.leftPositioned = this.options.position === \"left\";\r\n\r\n            this.visible = false;\r\n\r\n            this.element.hide().addClass(\"km-drawer\").addClass(this.leftPositioned ? \"km-left-drawer\" : \"km-right-drawer\");\r\n            this.trigger(INIT);\r\n        },\r\n\r\n        options: {\r\n            name: \"Drawer\",\r\n            position: \"left\",\r\n            views: [],\r\n            swipeToOpenViews: [],\r\n            swipeToOpen: true,\r\n            title: \"\",\r\n            container: null\r\n        },\r\n\r\n        events: [\r\n            BEFORE_SHOW,\r\n            HIDE,\r\n            AFTER_HIDE,\r\n            INIT,\r\n            SHOW\r\n        ],\r\n\r\n        show: function() {\r\n            if (this._activate()) {\r\n                this._show();\r\n            }\r\n        },\r\n\r\n        hide: function() {\r\n            if (!this.currentView) {\r\n                return;\r\n            }\r\n\r\n            this.currentView.enable();\r\n\r\n            Drawer.current = null;\r\n            this._moveViewTo(0);\r\n            this.trigger(HIDE, { view: this });\r\n        },\r\n\r\n        // Alias in order to support popover/modalview etc. interface\r\n        openFor: function() {\r\n            if (this.visible) {\r\n                this.hide();\r\n            } else {\r\n                this.show();\r\n            }\r\n        },\r\n\r\n        destroy: function() {\r\n            ui.View.fn.destroy.call(this);\r\n            this.userEvents.destroy();\r\n        },\r\n\r\n        _activate: function() {\r\n            if (this.visible) {\r\n                return true;\r\n            }\r\n\r\n            var visibleOnCurrentView = this._currentViewIncludedIn(this.options.views);\r\n\r\n            if (!visibleOnCurrentView || this.trigger(BEFORE_SHOW, { view: this })) {\r\n                return false;\r\n            }\r\n\r\n            this._setAsCurrent();\r\n            this.element.show();\r\n\r\n            this.trigger(SHOW, { view: this });\r\n            this._invokeNgController();\r\n            return true;\r\n        },\r\n\r\n        _currentViewIncludedIn: function(views) {\r\n            if (!this.pane || !views.length) {\r\n                return true;\r\n            }\r\n\r\n            var view = this.pane.view();\r\n            return $.inArray(view.id.replace('#', ''), views) > -1 || $.inArray(view.element.attr(\"id\"), views) > -1;\r\n        },\r\n\r\n        _show: function() {\r\n            this.currentView.enable(false);\r\n\r\n            this.visible = true;\r\n            var offset = this.element.width();\r\n\r\n            if (!this.leftPositioned) {\r\n                offset = -offset;\r\n            }\r\n\r\n            this._moveViewTo(offset);\r\n        },\r\n\r\n        _setAsCurrent: function() {\r\n            if (Drawer.last !== this) {\r\n                if (Drawer.last) {\r\n                    Drawer.last.element.hide();\r\n                }\r\n                this.element.show();\r\n            }\r\n\r\n            Drawer.last = this;\r\n            Drawer.current = this;\r\n        },\r\n\r\n        _moveViewTo: function(offset) {\r\n            this.userEvents.cancel();\r\n            this.transition.moveTo({ location: offset, duration: 400, ease: Transition.easeOutExpo });\r\n        },\r\n\r\n        _viewShow: function(e) {\r\n            if (this.currentView) {\r\n                this.currentView.enable();\r\n            }\r\n\r\n            if (this.currentView === e.view) {\r\n                this.hide();\r\n                return;\r\n            }\r\n\r\n            this.currentView = e.view;\r\n            this._attachTransition(e.view.element);\r\n        },\r\n\r\n        _attachTransition: function(element) {\r\n            var that = this,\r\n                movable = this.movable,\r\n                currentOffset = movable && movable.x;\r\n\r\n\r\n            if (this.transition) {\r\n                this.transition.cancel();\r\n                this.movable.moveAxis(\"x\", 0);\r\n            }\r\n\r\n            movable = this.movable = new kendo.ui.Movable(element);\r\n\r\n            this.transition = new Transition({\r\n                axis: AXIS,\r\n                movable: this.movable,\r\n                onEnd: function() {\r\n                    if (movable[AXIS] === 0) {\r\n                        element[0].style.cssText = \"\";\r\n                        that.element.hide();\r\n                        that.trigger(AFTER_HIDE);\r\n                        that.visible = false;\r\n                    }\r\n                }\r\n            });\r\n\r\n            if (currentOffset) {\r\n                element.addClass(\"k-fx-hidden\");\r\n                kendo.animationFrame(function() {\r\n                    element.removeClass(\"k-fx-hidden\");\r\n                    that.movable.moveAxis(AXIS, currentOffset);\r\n                    that.hide();\r\n                });\r\n            }\r\n        },\r\n\r\n        _start: function(e) {\r\n            var userEvents = e.sender;\r\n\r\n            // ignore non-horizontal swipes\r\n            if (Math.abs(e.x.velocity) < Math.abs(e.y.velocity) || kendo.triggeredByInput(e.event) || !this._currentViewIncludedIn(this.options.swipeToOpenViews)) {\r\n                userEvents.cancel();\r\n                return;\r\n            }\r\n\r\n            var leftPositioned = this.leftPositioned,\r\n                visible = this.visible,\r\n                canMoveLeft = leftPositioned && visible || !leftPositioned && !Drawer.current,\r\n                canMoveRight = !leftPositioned && visible || leftPositioned && !Drawer.current,\r\n                leftSwipe = e.x.velocity < 0;\r\n\r\n            if ((canMoveLeft && leftSwipe) || (canMoveRight && !leftSwipe)) {\r\n                if (this._activate()) {\r\n                    userEvents.capture();\r\n                    return;\r\n                }\r\n            }\r\n\r\n            userEvents.cancel();\r\n        },\r\n\r\n        _update: function(e) {\r\n            var movable = this.movable,\r\n                newPosition = movable.x + e.x.delta,\r\n                limitedPosition;\r\n\r\n            if (this.leftPositioned) {\r\n                limitedPosition = Math.min(Math.max(0, newPosition), this.element.width());\r\n            } else {\r\n                limitedPosition = Math.max(Math.min(0, newPosition), -this.element.width());\r\n            }\r\n\r\n            this.movable.moveAxis(AXIS, limitedPosition);\r\n            e.event.preventDefault();\r\n            e.event.stopPropagation();\r\n        },\r\n\r\n        _end: function(e) {\r\n            var velocity = e.x.velocity,\r\n                pastHalf = Math.abs(this.movable.x) > this.element.width() / 2,\r\n                velocityThreshold = 0.8,\r\n                shouldShow;\r\n\r\n            if (this.leftPositioned) {\r\n                shouldShow = velocity > -velocityThreshold && (velocity > velocityThreshold || pastHalf);\r\n            } else {\r\n                shouldShow = velocity < velocityThreshold && (velocity < -velocityThreshold || pastHalf);\r\n            }\r\n\r\n            if(shouldShow) {\r\n                this._show();\r\n            } else {\r\n                this.hide();\r\n            }\r\n        }\r\n    });\r\n\r\n    ui.plugin(Drawer);\r\n})(window.kendo.jQuery);\r\n\r\nreturn window.kendo;\r\n\r\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\r\n\n"],"names":["define","__meta__","id","name","category","description","depends","$","window","kendo","jQuery","undefined","mobile","os","support","mobileOS","Transition","effects","roleSelector","AXIS","ui","SWIPE_TO_OPEN","ios","majorVersion","appMode","BEFORE_SHOW","INIT","SHOW","HIDE","AFTER_HIDE","NULL_VIEW","enable","noop","Drawer","View","extend","init","element","options","parent","prepend","Widget","fn","call","this","$angular","_layout","_scroller","_model","pane","closest","data","userEvents","bind","e","drawer","_viewShow","hide","UserEvents","fastTap","filter","allowSelection","currentView","container","Error","_attachTransition","visible","preventDefault","swipeToOpen","transition","cancel","_start","_update","_end","leftPositioned","position","addClass","trigger","views","swipeToOpenViews","title","events","show","_activate","_show","current","_moveViewTo","view","openFor","destroy","visibleOnCurrentView","_currentViewIncludedIn","_setAsCurrent","_invokeNgController","length","inArray","replace","attr","offset","width","last","moveTo","location","duration","ease","easeOutExpo","that","movable","currentOffset","x","moveAxis","Movable","axis","onEnd","style","cssText","animationFrame","removeClass","sender","Math","abs","velocity","y","triggeredByInput","event","canMoveLeft","canMoveRight","leftSwipe","capture","newPosition","delta","limitedPosition","min","max","stopPropagation","pastHalf","velocityThreshold","shouldShow","plugin","amd","a1","a2","a3"],"mappings":"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"}