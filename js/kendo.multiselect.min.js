/**
 * Copyright 2023 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(e){"function"==typeof define&&define.amd?define(["kendo.list.min","kendo.mobile.scroller.min","kendo.virtuallist.min","kendo.html.chip.min","kendo.html.chiplist.min","kendo.html.button.min"],e):e()}((function(){var e,t,i,s,a,n,l,o,r,u,c,d,p,h,_,f,g,m,v,T,b,w,I,V,y,L,S,x,k,C,D,O,A,B,F,E,M,P,H,K,R,N;e=window.kendo.jQuery,i=window.kendo,s=i.ui,a=s.List,n=i.htmlEncode,l=i.html,o=e.extend({A:65},i.keys),r=i._activeElement,u=i.data.ObservableArray,c="id",d=".k-chip",p="accept",h="filter",_="rebind",f="open",g="close",m="change",v="select",T="deselect",b="aria-disabled",w="aria-readonly",I="aria-expanded",V="aria-hidden",y="aria-activedescendant",L="aria-busy",S="k-focus",x="k-selected",k="k-hidden",C="k-hover",D="k-disabled",O="k-no-click",A="disabled",B="readonly",E="click"+(F=".kendoMultiSelect"),M="mouseenter"+F,P="mouseleave"+F,H=/"/g,K=Array.isArray,R=["font-family","font-size","font-stretch","font-style","font-weight","letter-spacing","text-transform","line-height"],N=a.extend({init:function(t,s){var n,l=this;l.ns=F,a.fn.init.call(l,t,s),l._optionsMap={},l._customOptions={},l._wrapper(),l._tagList(),l._input(),l._textContainer(),l._loader(),l._clearButton(),l._arrowButton(),l._tabindex(l.input),t=l.element.attr("multiple","multiple").hide(),(s=l.options).placeholder||(s.placeholder=t.data("placeholder")),(n=t.attr(c))||(n=i.guid()),n&&(l._tagID=n+"_tag_active",n+="_taglist",l.tagList.attr(c,n)),l._initialOpen=!0,s.label&&this._label(),l._aria(),l._dataSource(),l._ignoreCase(),l._popup(),l._tagTemplate(),l.requireValueMapper(l.options),l._initList(),l._reset(),l._enable(),l._placeholder(),s.autoBind?l.dataSource.fetch():s.value&&l._preselect(s.value),e(l.element).parents("fieldset").is(":disabled")&&l.enable(!1),l._toggleCloseVisibility(),l._applyCssClasses(),i.notify(l)},options:{name:"MultiSelect",tagMode:"multiple",enabled:!0,autoBind:!0,autoClose:!0,highlightFirst:!0,dataTextField:"",dataValueField:"",filter:"startswith",ignoreCase:!0,minLength:1,messages:{singleTag:"item(s) selected",clear:"clear",deleteTag:"delete",noData:"No data found.",downArrow:"select"},enforceMinLength:!1,delay:100,value:null,maxSelectedItems:null,placeholder:"",height:200,animation:{},virtual:!1,itemTemplate:"",tagTemplate:"",groupTemplate:function(e){return n(e)},fixedGroupTemplate:function(e){return n(e)},clearButton:!0,autoWidth:!1,popup:null,size:"medium",fillMode:"solid",rounded:"medium",label:null},events:[f,g,m,v,T,"filtering","dataBinding","dataBound"],setDataSource:function(e){this.options.dataSource=e,this._state="",this._dataSource(),this.persistTagList=!1,this.listView.setDataSource(this.dataSource),this.options.autoBind&&this.dataSource.fetch()},setOptions:function(e){var t=this._listOptions(e);a.fn.setOptions.call(this,e),this.listView.setOptions(t),this._accessors(),this._aria(),this._tagTemplate(),this._placeholder(),this._clearButton(),this._arrowButton()},currentTag:function(e){var i=this;if(e===t)return i._currentTag;i._currentTag&&(i._currentTag.removeClass(S).removeAttr(c),i._currentTag.find(".k-chip-action").attr(V,!0),i.input.removeAttr(y)),e&&(e.addClass(S).attr(c,i._tagID),e.find(".k-chip-action").removeAttr(V),i.input.attr(y,i._tagID)),i._currentTag=e},dataItems:function(){return this.listView.selectedDataItems()},destroy:function(){var e=this,t=e.ns;clearTimeout(e._busy),clearTimeout(e._typingTimeout),e.wrapper.off(t),e.tagList.off(t),e.input.off(t),e._clear.off(t),a.fn.destroy.call(e)},_aria:function(){var e=this,t=e.ul[0].id,i="none"===this.options.filter?"none":"list",s=e.tagList.attr(c);e.input.attr({role:"combobox","aria-expanded":!1,"aria-controls":t,"aria-autocomplete":i,"aria-describedby":s}),e._ariaLabel(e._focused)},_activateItem:function(){this.popup.visible()&&a.fn._activateItem.call(this),this.currentTag(null)},_listOptions:function(t){var s=this,l=a.fn._listOptions.call(s,e.extend(t,{selectedItemChange:s._selectedItemChange.bind(s),selectable:"multiple"})),o=this.options.itemTemplate||this.options.template,r=l.itemTemplate||o||l.template;return r||(r=function(e){return n(i.getter(l.dataTextField)(e))}),l.template=r,l},_setListValue:function(){a.fn._setListValue.call(this,this._initialValues.slice(0))},_listChange:function(e){var i=this.dataSource.flatView(),s=this._optionsMap,a=this._value;this._state===_&&(this._state="");for(var n=0;n<e.added.length;n++)if(s[a(e.added[n].dataItem)]===t){this._render(i);break}this._selectValue(e.added,e.removed)},_selectedItemChange:function(e){var t,i,s=e.items;for(i=0;i<s.length;i++)t=s[i],this.tagList.children(d).eq(t.index).children("span").first().html(this.tagTextTemplate(t.item))},_wrapperMousedown:function(t){var s=this,a="input"!==t.target.nodeName.toLowerCase(),n=e(t.target),l=n.closest(".k-multiselect-toggle-button, .k-chip").children("[class*='-i-caret-alt-down']")[0],o=n.closest("[class*='-i-x']")[0];!a||o&&i.support.mobileOS||!t.cancelable||t.preventDefault(),o||(l&&s.popup.visible()?s.toggle(!1):(s.input[0]!==r()&&a&&s.input.trigger("focus"),1!==s.options.minLength||s.popup.visible()||s.open()))},_inputFocus:function(){this._placeholder(!1,!0),this.wrapper.addClass(S)},_inputFocusout:function(){var e=this;clearTimeout(e._typingTimeout),e.wrapper.removeClass(S),e._placeholder(!e.listView.selectedDataItems()[0],!0),e.close(),e._state===h&&(e._state=p,e.listView.skipUpdate(!0)),e.listView.bound()&&e.listView.isFiltered()&&(e.persistTagList=!0,e._clearFilter()),e.element.trigger("blur")},_removeTag:function(e,i){var s,a=this,n=a._state,l=e.index(),o=a.listView,r=o.value()[l],u=a.listView.selectedDataItems()[l],c=a._customOptions[r],d=o.element[0].children;if(a.trigger(T,{dataItem:u,item:e}))a._close();else{c!==t||n!==p&&n!==h||(c=a._optionsMap[r]);var _=function(){a.currentTag(null),i&&a._change(),a._close()};c===t&&o.select().length?(a.persistTagList=!1,o.select(o.select()[l]).done(_)):((s=a.element[0].children[c])&&(s.selected=!1),o.removeAt(l),o._removedAddedIndexes&&o._removedAddedIndexes.splice(l,1),d[c]&&d[c].classList.remove("k-selected"),"single"!==a.options.tagMode?e.remove():a._updateTagListHTML(),_())}},_tagListClick:function(t){t.preventDefault(),t.stopPropagation();var i=e(t.currentTarget);i.is("[class*='-i-x-circle']")&&this._removeTag(i.closest(d),!0)},_clearValue:function(){var t=this;"single"===t.options.tagMode?t._clearSingleTagValue():t.tagList.children(d).each((function(i,s){t._removeTag(e(s),!1)})),t.input.val(""),t._search(),t._change(),t.focus(),t._hideClear(),t._state===h&&(t._state=p)},_clearSingleTagValue:function(){for(var e=this,t=e.dataItems(),i=e.tagList.children(d),s=e.persistTagList,a=0;a<t.length;a+=1)if(e.trigger(T,{dataItem:t[a],item:i.first()}))return void e._close();s&&(e.persistTagList=!1),e.listView.value([]),e.persistTagList=s},_focusHandler:function(){var e=this.input,t=r();e[0]===t||this.input.trigger("focus")},_editable:function(t){var i=this,s=t.disable,a=t.readonly,n=i.wrapper.off(F),l=i.tagList.off(F),o=i.input.off(F);a||s?(n.toggleClass(D,s).toggleClass(O,a),o.attr(A,s).attr(B,a).attr(b,s).attr(w,a),i.element.prop(A,s)):(n.removeClass(D).removeClass(O).on("mouseenter.kendoMultiSelect mouseleave.kendoMultiSelect",i._toggleHover).on("mousedown"+F+" touchend"+F,i._wrapperMousedown.bind(i)).on(E,i._focusHandler.bind(i)),i.input.on("keydown.kendoMultiSelect",i._keydown.bind(i)).on("paste"+F,i._search.bind(i)).on("input"+F,i._search.bind(i)).on("focus"+F,i._inputFocus.bind(i)).on("focusout"+F,i._inputFocusout.bind(i)),i._clear.on(E+" touchend"+F,i._clearValue.bind(i)),o.prop(A,!1).prop(B,!1).attr(b,!1).attr(w,!1),i.element.prop(A,!1),l.on(M,d,(function(){e(this).addClass(C)})).on(P,d,(function(){e(this).removeClass(C)})).on(E+" touchend"+F,".k-chip .k-icon,.k-chip .k-svg-icon",i._tagListClick.bind(i)))},_close:function(){var e=this;e.options.autoClose?e.close():e.popup.position()},_filterSource:function(e,t){t||(t=this._retrieveData),this._retrieveData=!1,a.fn._filterSource.call(this,e,t)},close:function(){this._activeItem=null,this.input.removeAttr(y),this.popup.close()},open:function(){var t,i=this,s=i.input.val().toLowerCase(),a=i.listView.dataSource.filter();a&&a.filters.length>0&&(t=(a.filters[0].value||"").toString().toLowerCase()),i._request&&(i._retrieveData=!1),i._retrieveData||!i.listView.bound()||i._state===p&&s!==t?(i._open=!0,i._state=_,i.listView.skipUpdate(!0),i.persistTagList=!(i._initialOpen&&!i.listView.bound()),i._filterSource(),i._focusItem()):i._allowOpening()&&(!i._initialOpen||i.options.autoBind||i.options.virtual||!i.options.value||e.isPlainObject(i.options.value[0])||i.value(i.value()||i._initialValues),i.popup._hovered=!0,i._initialOpen=!1,i.popup.open(),i._focusItem())},toggle:function(e){this[(e=e!==t?e:!this.popup.visible())?f:g]()},refresh:function(){this.listView.refresh()},_floatCheck:function(){return!this.listView||!(this.value()&&this.value().length)&&!this.popup.visible()},_listBound:function(){var e=this,t=e.dataSource.flatView();e._render(t),e._renderFooter(),e._renderNoData(),e._toggleNoData(!t.length),e._resizePopup(),e._open&&(e._open=!1,e.toggle(e._allowOpening())),e.popup.position(),e._updateItemFocus(),e._touchScroller&&e._touchScroller.reset(),e._hideBusy(),e.trigger("dataBound")},_updateItemFocus:function(){var e=this,i=e.dataSource.flatView(),s=e.listView.skip(),a=s===t||0===s;i.length&&a&&(e.options.highlightFirst?e.listView.focusFirst():e.listView.focus(-1))},_inputValue:function(){var e=this.input.val();return this.options.placeholder===e&&(e=""),e},value:function(e){var i=this,s=i.listView,a=s.value().slice(),n=i.options.maxSelectedItems,l=s.bound()&&s.isFiltered();if(e===t)return a;i.persistTagList=!1,i.requireValueMapper(i.options,e),e=i._normalizeValues(e),null!==n&&e.length>n&&(e=e.slice(0,n)),l&&i._clearFilter(),s.value(e),i._old=i._valueBeforeCascade=e.slice(),l||i._fetchData(),i._toggleCloseVisibility()},_preselect:function(t,s){var a=this;K(t)||t instanceof i.data.ObservableArray||(t=[t]),(e.isPlainObject(t[0])||t[0]instanceof i.data.ObservableObject||!a.options.dataValueField)&&(a.dataSource.data(t),a.value(s||a._initialValues),a._retrieveData=!0)},_setOption:function(e,t){var i=this.element[0].children[this._optionsMap[e]];i&&(i.selected=t)},_fetchData:function(){var e=this,t=!!e.dataSource.view().length;0===e.listView.value().length||e._request||(e._retrieveData||!e._fetch&&!t)&&(e._fetch=!0,e._retrieveData=!1,e.dataSource.read().done((function(){e._fetch=!1})))},_isBound:function(){return this.listView.bound()&&!this._retrieveData},_dataSource:function(){var e=this,t=e.element,s=e.options,a=s.dataSource||{};(a=K(a)?{data:a}:a).select=t,a.fields=[{field:s.dataTextField},{field:s.dataValueField}],e.dataSource&&e._refreshHandler?e._unbindDataSource():(e._progressHandler=e._showBusy.bind(e),e._errorHandler=e._hideBusy.bind(e)),e.dataSource=i.data.DataSource.create(a).bind("progress",e._progressHandler).bind("error",e._errorHandler)},_reset:function(){var t=this,i=t.element,s=i.attr("form"),a=s?e("#"+s):i.closest("form");a[0]&&(t._resetHandler=function(){setTimeout((function(){t.value(t._initialValues),t._placeholder()}))},t._form=a.on("reset",t._resetHandler))},_initValue:function(){var e=this.options.value||this.element.val();this._old=this._initialValues=this._normalizeValues(e)},_normalizeValues:function(t){var i=this;return null===t?t=[]:t&&e.isPlainObject(t)?t=[i._value(t)]:t&&e.isPlainObject(t[0])?t=e.map(t,(function(e){return i._value(e)})):K(t)||t instanceof u?K(t)&&(t=t.slice()):t=[t],t},_change:function(){var e=this,t=e.value();(function(e,t){var i;if(null===e&&null!==t||null!==e&&null===t)return!1;if((i=e.length)!==t.length)return!1;for(;i--;)if(e[i]!==t[i])return!1;return!0})(t,e._old)||(e._old=t.slice(),e.trigger(m),e.element.trigger(m)),e.popup.position(),e._toggleCloseVisibility()},_click:function(e){var t=this,i=e.item;e.preventDefault(),t._select(i).done((function(){t._activeItem=i,t._change(),t._close()}))},_getActiveItem:function(){return this._activeItem||e(this.listView.items()[this._getSelectedIndices().length-1])||this.listView.focus()},_getSelectedIndices:function(){return this.listView._selectedIndices||this.listView._selectedIndexes},_keydown:function(s){var a,n=this,l=s.keyCode,r=n._currentTag,u=n.listView,c=n.input.val(),h=i.support.isRtl(n.wrapper),_=n.popup.visible(),f=0;if(l!==o.ENTER&&(this._multipleSelection=!1),l===o.DOWN){if(s.preventDefault(),!_)return n.open(),void(u.focus()||u.focusFirst());u.focus()?(!n._activeItem&&s.shiftKey&&(n._activeItem=u.focus(),f=-1),a=u.getElementIndex(n._getActiveItem().first()),u.focusNext(),u.focus()?s.shiftKey&&!n.options.virtual&&(this._multipleSelection=!0,n._selectRange(a,u.getElementIndex(u.focus().first())+f)):u.focusLast()):u.focusFirst()}else if(l===o.UP)_&&(!n._activeItem&&s.shiftKey&&(n._activeItem=u.focus(),f=1),a=u.getElementIndex(n._getActiveItem().first()),u.focusPrev(),u.focus()?s.shiftKey&&!n.options.virtual&&(this._multipleSelection=!0,n._selectRange(a,u.getElementIndex(u.focus().first())+f)):n.close()),s.preventDefault();else if(l===o.LEFT&&!h||l===o.RIGHT&&h)c||(r=r?r.prev(d):n.tagList.children(d).last())[0]&&n.currentTag(r);else if(l===o.RIGHT&&!h||l===o.LEFT&&h)!c&&r&&(r=r.next(d),n.currentTag(r[0]?r:null));else if(s.ctrlKey&&!s.altKey&&l===o.A&&_&&!n.options.virtual)this._multipleSelection=!0,this._getSelectedIndices().length===u.items().length&&(n._activeItem=null),u.items().length&&n._selectRange(0,u.items().length-1);else if(l===o.ENTER&&_){if(!u.focus())return;if(s.preventDefault(),this._multipleSelection&&(this._multipleSelection=!1,u.focus().hasClass(x)))return void n._close();n._select(u.focus()).done((function(){n._change(),n._close()}))}else if(l===o.SPACEBAR&&s.ctrlKey&&_)n._activeItem&&u.focus()&&u.focus()[0]===n._activeItem[0]&&(n._activeItem=null),e(u.focus()).hasClass(x)||(n._activeItem=u.focus()),n._select(u.focus()).done((function(){n._change()})),s.preventDefault();else if(l===o.SPACEBAR&&s.shiftKey&&_&&!n.options.virtual){var g=u.getElementIndex(n._getActiveItem()),m=u.getElementIndex(u.focus());g!==t&&m!==t&&n._selectRange(g,m),s.preventDefault()}else if(l===o.ESC)_?s.preventDefault():(n.tagList.children(d).each((function(t,i){n._removeTag(e(i),!1)})),n._change()),n.close();else if(l===o.HOME)_?u.focus()?(s.ctrlKey&&s.shiftKey&&!n.options.virtual&&n._selectRange(u.getElementIndex(u.focus()[0]),0),u.focusFirst()):n.close():c||(r=n.tagList.children(d).first()[0])&&n.currentTag(e(r));else if(l===o.END)_?u.focus()?(s.ctrlKey&&s.shiftKey&&!n.options.virtual&&n._selectRange(u.getElementIndex(u.focus()[0]),u.element.children().length-1),u.focusLast()):n.close():c||(r=n.tagList.children(d).last()[0])&&n.currentTag(e(r));else if(l!==o.DELETE&&l!==o.BACKSPACE||c)if(!n.popup.visible()||l!==o.PAGEDOWN&&l!==o.PAGEUP)clearTimeout(n._typingTimeout),n._search();else{s.preventDefault();var v=l===o.PAGEDOWN?1:-1;u.scrollWith(v*u.screenHeight())}else{if(n._state=p,"single"===n.options.tagMode)return n._clearSingleTagValue(),n._change(),void n._close();l!==o.BACKSPACE||r||(r=n.tagList.children(d).last()),r&&r[0]&&n._removeTag(r,!0)}},_hideBusy:function(){var e=this;clearTimeout(e._busy),e.input.attr(L,!1),e._loading.addClass(k),e._request=!1,e._busy=null,e._toggleCloseVisibility()},_showBusyHandler:function(){this.input.attr(L,!0),this._loading.removeClass(k),this._hideClear()},_showBusy:function(){var e=this;e._request=!0,e._busy||(e._busy=setTimeout(e._showBusyHandler.bind(e),100))},_placeholder:function(e,s){var a=this,n=a.input,l=r(),o=a.options.placeholder,u=n.val(),c=n[0]===l,d=u.length;c&&!a.options.autoClose&&u!==o||(d=0,u=""),e===t&&(e=!1,n[0]!==l&&(e=!a.listView.selectedDataItems()[0])),a._prev=u,n.toggleClass("k-readonly",e).val(e?o:u),c&&!s&&i.caret(n[0],d,d)},_option:function(e,s,a){var n="<option";return e!==t&&(-1!==(e+="").indexOf('"')&&(e=e.replace(H,"&quot;")),n+=' value="'+e+'"'),a&&(n+=" selected"),n+=">",s!==t&&(n+=i.htmlEncode(s)),n+"</option>"},_render:function(e){var t,i,s,a,n=this.listView.selectedDataItems(),l=this.listView.value(),o=e.length,r="";l.length!==n.length&&(n=this._buildSelectedItems(l));var u={},c={};for(a=0;a<o;a++)i=e[a],s=this._value(i),-1!==(t=this._selectedItemIndex(s,n))&&n.splice(t,1),c[s]=a,r+=this._option(s,this._text(i),-1!==t);if(n.length)for(a=0;a<n.length;a++)i=n[a],u[s=this._value(i)]=o,c[s]=o,o+=1,r+=this._option(s,this._text(i),!0);this._customOptions=u,this._optionsMap=c,this.element.html(r)},_buildSelectedItems:function(e){for(var t,i=this.options.dataValueField,s=this.options.dataTextField,a=[],n=0;n<e.length;n++)(t={})[i]=e[n],t[s]=e[n],a.push(t);return a},_selectedItemIndex:function(e,t){for(var i=this._value,s=0;s<t.length;s++)if(e===i(t[s]))return s;return-1},_search:function(){var e=this;clearTimeout(e._typingTimeout),e._typingTimeout=setTimeout((function(){var t=e._inputValue();e._prev!==t&&(e._prev=t,e.search(t),e._toggleCloseVisibility())}),e.options.delay)},_toggleCloseVisibility:function(){this.value().length||this.input.val()&&this.input.val()!==this.options.placeholder?this._showClear():this._hideClear()},_allowOpening:function(){return this._allowSelection()&&a.fn._allowOpening.call(this)},_allowSelection:function(){var e=this.options.maxSelectedItems;return null===e||e>this.listView.value().length},_angularTagItems:function(t){var i=this;i.angular(t,(function(){return{elements:i.tagList[0].children,data:e.map(i.dataItems(),(function(e){return{dataItem:e}}))}}))},updatePersistTagList:function(e,t){this.persistTagList.added&&this.persistTagList.added.length===t.length&&this.persistTagList.removed&&this.persistTagList.removed.length===e.length?this.persistTagList=!1:(this.listView._removedAddedIndexes=this._old.slice(),this.persistTagList={added:e,removed:t})},_selectValue:function(e,t){var i,s,a,n=this,l=n.dataSource.total(),o=n.tagList,r=n._value;if(this.persistTagList)this.updatePersistTagList(e,t);else{if(n._angularTagItems("cleanup"),"multiple"===n.options.tagMode){for(a=t.length-1;a>-1;a--)i=t[a],o.children(d).length&&(o[0].removeChild(o[0].children[i.position]),n._setOption(r(i.dataItem),!1));for(a=0;a<e.length;a++)s=e[a],n.input.before(n.tagTemplate(s.dataItem)),n._setOption(r(s.dataItem),!0)}else{for((!n._maxTotal||n._maxTotal<l)&&(n._maxTotal=l),this._updateTagListHTML(),a=t.length-1;a>-1;a--)n._setOption(r(t[a].dataItem),!1);for(a=0;a<e.length;a++)n._setOption(r(e[a].dataItem),!0)}n._refreshFloatingLabel(),n._angularTagItems("compile"),n._placeholder()}},_updateTagListHTML:function(){var t=this,i=t.value(),s=t.dataSource.total();t.tagList.children(d).each((function(t,i){e(i).remove()})),i.length&&t.input.before(t.tagTemplate({values:i,dataItems:t.dataItems(),maxTotal:t._maxTotal,currentTotal:s}))},_select:function(t){var i=e.Deferred().resolve();if(!t)return i;var s=this,a=s.listView,n=a.dataItemByIndex(a.getElementIndex(t)),l=t.hasClass("k-selected");return s._state===_&&(s._state=""),s._allowSelection()||l?s.trigger(l?T:v,{dataItem:n,item:t})?(s._close(),i):(s.persistTagList=!1,a.select(t).done((function(){s._placeholder(),s._state===h&&(s._state=p,a.skipUpdate(!0))}))):i},_selectRange:function(t,i){var s,a=this,n=this.listView,l=this.options.maxSelectedItems,o=this._getSelectedIndices().slice(),r=[],u=function(t){n.select(t).done((function(){t.forEach((function(t){var i=n.dataItemByIndex(t),s=n.element.children()[t],l=e(s).hasClass("k-selected");a.trigger(l?v:T,{dataItem:i,item:e(s)})})),a._change()}))};if(o.length-1==i-t)return u(o);if(t<i)for(s=t;s<=i;s++)r.push(s);else for(s=t;s>=i;s--)r.push(s);for(null!==l&&r.length>l&&(r=r.slice(0,l)),s=0;s<r.length;s++){var c=r[s];-1==this._getSelectedIndices().indexOf(c)?o.push(c):o.splice(o.indexOf(c),1)}return o.length?(a.persistTagList=!1,u(o)):void 0},_input:function(){var t=this,i=t.element,s=i[0].accessKey,a=t.tagList.children("input.k-input-inner");a[0]||(a=e('<input class="k-input-inner" />').appendTo(t.tagList)),i.removeAttr("accesskey"),t._focused=t.input=a.attr({autocomplete:"off",title:i[0].title}),s&&t._focused.attr("accesskey",s)},_tagList:function(){var t=this,i=t.options,s=t.wrapper.children(".k-input-values");s[0]||(s=e(l.renderChipList('<div unselectable="on" class="k-input-values k-selection-multiple" />',e.extend({},i))).appendTo(t.wrapper)),t.tagList=s},_tagTemplate:function(){var t,s=this,a=s.options,o=a.tagTemplate,r=a.dataSource,u="multiple"===a.tagMode,c=a.messages.singleTag;s.element[0].length&&!r&&(a.dataTextField=a.dataTextField||"text",a.dataValueField=a.dataValueField||"value"),t=u?function(e){return n(i.getter(a.dataTextField)(e))}:function(e){return e.values.length+" "+c},s.tagTextTemplate=o=o?i.template(o):t,s.tagTemplate=function(t){return l.renderChip('<span unselectable="on"></span>',e.extend({},a,{fillMode:"solid",rounded:"medium",enabled:!s.element.is("[disabled]"),themeColor:"base",text:o(t),attr:{unselectable:"on"},removable:u,removableAttr:{unselectable:"on","aria-hidden":!0,"aria-label":s.options.messages.deleteTag,title:s.options.messages.deleteTag},icon:u?"":"caret-alt-down",iconAttr:{unselectable:"on","aria-hidden":!0,"aria-label":"open"}}))}},_loader:function(){this._loading=e('<span class="k-icon k-i-loading k-input-loading-icon k-hidden"></span>').insertAfter(this.tagList)},_clearButton:function(){a.fn._clearButton.call(this),this.options.clearButton&&(this._clear.insertAfter(this.tagList),this.wrapper.addClass("k-multiselect-clearable"))},_arrowButton:function(){var t=this.options.messages.downArrow,i=e(l.renderButton('<button type="button" aria-label="'+t+'" class="k-input-button k-multiselect-toggle-button"></button>',e.extend({},this.options,{icon:"caret-alt-down"})));this._arrow&&(this._arrow.remove(),this._arrow=null),this.options.downArrow&&(this._arrow=i.attr({tabIndex:-1}),this._arrow.appendTo(this.wrapper))},_textContainer:function(){var t=i.getComputedStyles(this.input[0],R);t.position="absolute",t.visibility="hidden",t.top=-3333,t.left=-3333,this._span=e("<span/>").css(t).appendTo(this.wrapper)},_wrapper:function(){var e=this.element,t=e.parent("span.k-multiselect");t[0]||((t=e.wrap('<span class="k-multiselect k-input" unselectable="on" />').parent())[0].style.cssText=e[0].style.cssText),this.wrapper=t.addClass(e[0].className).removeClass("input-validation-error").css("display","")},_closeHandler:function(e){this.trigger(g)?e.preventDefault():(this.input.attr(I,!1),this.ul.attr(V,!0))},_openHandler:function(e){this._adjustListWidth(),this.trigger(f)?e.preventDefault():(this.input.attr(I,!0),this.ul.attr(V,!1))}}),s.plugin(N),i.cssProperties.registerPrefix("MultiSelect","k-input-"),i.cssProperties.registerValues("MultiSelect",[{prop:"rounded",values:i.cssProperties.roundedValues.concat([["full","full"]])}])}));
//# sourceMappingURL=kendo.multiselect.min.js.map
