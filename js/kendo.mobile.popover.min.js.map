{"version":3,"file":"kendo.mobile.popover.min.js","sources":["kendo.mobile.popover.js"],"sourcesContent":["(function(f, define) {\n    define('kendo.mobile.popover',[ \"kendo.popup\", \"kendo.mobile.pane\" ], f);\n})(function() {\n\nvar __meta__ = {\n    id: \"mobile.popover\",\n    name: \"PopOver\",\n    category: \"mobile\",\n    description: \"The mobile PopOver widget represents a transient view which is displayed when the user taps on a navigational widget or area on the screen. \",\n    depends: [ \"popup\", \"mobile.pane\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        mobile = kendo.mobile,\n        ui = mobile.ui,\n        HIDE = \"hide\",\n        OPEN = \"open\",\n        CLOSE = \"close\",\n        WRAPPER = '<div class=\"km-popup-wrapper\"></div>',\n        ARROW = '<div class=\"km-popup-arrow\"></div>',\n        OVERLAY = '<div class=\"km-popup-overlay\"></div>',\n        DIRECTION_CLASSES = \"km-up km-down km-left km-right\",\n        Widget = ui.Widget,\n        DIRECTIONS = {\n            \"down\": {\n                origin: \"bottom center\",\n                position: \"top center\"\n            },\n            \"up\": {\n                origin: \"top center\",\n                position: \"bottom center\"\n            },\n            \"left\": {\n                origin: \"center left\",\n                position: \"center right\",\n                collision: \"fit flip\"\n            },\n            \"right\": {\n                origin: \"center right\",\n                position: \"center left\",\n                collision: \"fit flip\"\n            }\n        },\n\n        ANIMATION = {\n            animation: {\n                open: {\n                    effects: \"fade:in\",\n                    duration: 0\n                },\n                close: {\n                    effects: \"fade:out\",\n                    duration: 400\n                }\n            }\n        },\n        DIMENSIONS = {\n            \"horizontal\": { offset: \"top\", size: \"height\" },\n            \"vertical\": { offset: \"left\", size: \"width\" }\n        },\n\n        REVERSE = {\n            \"up\": \"down\",\n            \"down\": \"up\",\n            \"left\": \"right\",\n            \"right\": \"left\"\n        };\n\n    var Popup = Widget.extend({\n        init: function(element, options) {\n            var that = this,\n                containerPopup = element.closest(\".km-modalview-wrapper\"),\n                viewport = element.closest(\".km-root\").children('.km-pane').first(),\n                container = containerPopup[0] ? containerPopup : viewport,\n                popupOptions,\n                axis;\n\n            if (options.viewport) {\n                viewport = options.viewport;\n            } else if (!viewport[0]) {\n                viewport = window;\n            }\n\n            if (options.container) {\n                container = options.container;\n            } else if (!container[0]) {\n                container = document.body;\n            }\n\n            popupOptions = {\n                viewport: viewport,\n                copyAnchorStyles: false,\n                autosize: true,\n                open: function() {\n                    that.overlay.show();\n                },\n\n                activate: that._activate.bind(that),\n\n                deactivate: function() {\n                    that.overlay.hide();\n                    if (!that._apiCall) {\n                        that.trigger(HIDE);\n                    }\n\n                    that._apiCall = false;\n                }\n            };\n\n            Widget.fn.init.call(that, element, options);\n\n            element = that.element;\n            options = that.options;\n\n            element.wrap(WRAPPER).addClass(\"km-popup\").show();\n\n            axis = that.options.direction.match(/left|right/) ? \"horizontal\" : \"vertical\";\n\n            that.dimensions = DIMENSIONS[axis];\n\n            that.wrapper = element.parent().css({\n                width: options.width,\n                height: options.height\n            }).addClass(\"km-popup-wrapper km-\" + options.direction).hide();\n\n            that.arrow = $(ARROW).prependTo(that.wrapper).hide();\n\n            that.overlay = $(OVERLAY).appendTo(container).hide();\n            popupOptions.appendTo = that.overlay;\n\n            if (options.className) {\n                that.overlay.addClass(options.className);\n            }\n\n            that.popup = new kendo.ui.Popup(that.wrapper, $.extend(true, popupOptions, ANIMATION, DIRECTIONS[options.direction]));\n        },\n\n        options: {\n            name: \"Popup\",\n            width: 240,\n            height: \"\",\n            direction: \"down\",\n            container: null,\n            viewport: null\n        },\n\n        events: [\n            HIDE\n        ],\n\n        show: function(target) {\n            this.popup.options.anchor = $(target);\n            this.popup.open();\n        },\n\n        hide: function() {\n            this._apiCall = true;\n            this.popup.close();\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n            this.popup.destroy();\n            this.overlay.remove();\n        },\n\n        target: function() {\n            return this.popup.options.anchor;\n        },\n\n        _activate: function() {\n            var that = this,\n                direction = that.options.direction,\n                dimensions = that.dimensions,\n                offset = dimensions.offset,\n                popup = that.popup,\n                anchor = popup.options.anchor,\n                anchorOffset = $(anchor).offset(),\n                elementOffset = $(popup.element).offset(),\n                cssClass = popup.flipped ? REVERSE[direction] : direction,\n                min = that.arrow[dimensions.size]() * 2,\n                max = that.element[dimensions.size]() - that.arrow[dimensions.size](),\n                size = $(anchor)[dimensions.size](),\n                offsetAmount = anchorOffset[offset] - elementOffset[offset] + (size / 2);\n\n            if (offsetAmount < min) {\n                offsetAmount = min;\n            }\n\n            if (offsetAmount > max) {\n                offsetAmount = max;\n            }\n\n            that.wrapper.removeClass(DIRECTION_CLASSES).addClass(\"km-\" + cssClass);\n            that.arrow.css(offset, offsetAmount).show();\n        }\n    });\n\n    var PopOver = Widget.extend({\n        init: function(element, options) {\n            var that = this,\n                popupOptions;\n\n            that.initialOpen = false;\n\n            Widget.fn.init.call(that, element, options);\n\n            popupOptions = $.extend({\n                className: \"km-popover-root\",\n                hide: function() { that.trigger(CLOSE); }\n            }, this.options.popup);\n\n            that.popup = new Popup(that.element, popupOptions);\n            that.popup.overlay.on(\"move\", function(e) {\n                if (e.target == that.popup.overlay[0]) {\n                    e.preventDefault();\n                }\n            });\n\n            that.pane = new ui.Pane(that.element, $.extend(this.options.pane, { $angular: this.options.$angular }));\n\n            kendo.notify(that, ui);\n        },\n\n        options: {\n            name: \"PopOver\",\n            popup: { },\n            pane: { }\n        },\n\n        events: [\n            OPEN,\n            CLOSE\n        ],\n\n        open: function(target) {\n            this.popup.show(target);\n\n            if (!this.initialOpen) {\n                if (!this.pane.navigateToInitial()) {\n                    this.pane.navigate(\"\");\n                }\n\n                this.popup.popup._position();\n                this.initialOpen = true;\n            } else {\n                this.pane.view()._invokeNgController();\n            }\n        },\n\n        openFor: function(target) {\n            this.open(target);\n            this.trigger(OPEN, { target: this.popup.target() });\n        },\n\n        close: function() {\n            this.popup.hide();\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n            this.pane.destroy();\n            this.popup.destroy();\n\n            kendo.destroy(this.element);\n        }\n    });\n\n    ui.plugin(Popup);\n    ui.plugin(PopOver);\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n"],"names":["define","__meta__","id","name","category","description","depends","$","window","kendo","jQuery","undefined","mobile","ui","HIDE","OPEN","CLOSE","WRAPPER","ARROW","OVERLAY","DIRECTION_CLASSES","Widget","DIRECTIONS","down","origin","position","up","left","collision","right","ANIMATION","animation","open","effects","duration","close","DIMENSIONS","horizontal","offset","size","vertical","REVERSE","Popup","extend","init","element","options","that","this","containerPopup","closest","viewport","children","first","container","popupOptions","axis","document","body","copyAnchorStyles","autosize","overlay","show","activate","_activate","bind","deactivate","hide","_apiCall","trigger","fn","call","wrap","addClass","direction","match","dimensions","wrapper","parent","css","width","height","arrow","prependTo","appendTo","className","popup","events","target","anchor","destroy","remove","anchorOffset","elementOffset","cssClass","flipped","min","max","offsetAmount","removeClass","PopOver","initialOpen","on","e","preventDefault","pane","Pane","$angular","notify","navigateToInitial","navigate","_position","view","_invokeNgController","openFor","plugin","amd","a1","a2","a3"],"mappings":"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"}