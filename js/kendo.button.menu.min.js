/**
 * Copyright 2023 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("kendo.core.js"),require("kendo.popup.js"),require("kendo.icons.js")):"function"==typeof define&&define.amd?define(["kendo.core.min","kendo.popup.min","kendo.icons.min"],t):((e="undefined"!=typeof globalThis?globalThis:e||self).kendobutton=e.kendobutton||{},e.kendobutton.menu=e.kendobutton.menu||{},e.kendobutton.menu.js=t())}(this,(function(){return function(e,t){var n=window.kendo,i=n.ui.Widget,o=".kendoButtonMenu",s=n.ui,l=n.keys,r=n.htmlEncode,a=e.extend,u=".",d="id",p="next",c="k-disabled",m="aria-disabled",f="tabindex",g="click",k="menuClick",h="menuOpen",b="menuClose",_="keydown",C="focus",v={down:{origin:"bottom left",position:"top left"},up:{origin:"top left",position:"bottom left"}},y={popup:"k-menu-popup",list:"k-group k-menu-group k-reset",listItem:"k-item k-menu-item",menuItem:"k-menu-item",itemText:"k-menu-link-text",item:"k-link k-menu-link",sprite:"k-sprite",image:"k-image",icon:"k-icon"},x={text:null,icon:null,url:null,attributes:null,enabled:!0,hidden:!1,id:null,imageUrl:null,spriteCssClass:null},I=function(e){var t=e.imageUrl;return t?'<img alt="icon" class="'+y.image+'" src="'+r(t)+'" />':""},w=function(e){var t=e.spriteCssClass;return t?'<span class="'+y.sprite+" "+r(t)+'"></span>':""},B=function(e){var t=e.icon;return""+(t?n.ui.icon(r(t)):"")},E=function(e){var t=e.text;return t?'<span class="'+y.itemText+'">'+r(t)+"</span>":""},H=function(e){var t=e.imageUrl,n=e.spriteCssClass,i=e.icon,o=e.text;return'<span class="'+y.item+'">'+I({imageUrl:t})+w({spriteCssClass:n})+B({icon:i})+E({text:o})+"</span>"},P=function(e){var t=e.url,n=e.imageUrl,i=e.spriteCssClass,o=e.icon,s=e.text,l=e.attributes;return'<a href="'+r(t)+'" '+(l.target?'target="'+l.target+'"':"")+' class="'+y.item+'">'+I({imageUrl:n})+w({spriteCssClass:i})+B({icon:o})+E({text:s})+"</a>"};function T(t,n){var i=n===p?e.fn.next:e.fn.prev,o=n===p?e.fn.first:e.fn.last,s=i.call(t),l=":kendoFocusable";return s.length||(s=o.call(t.parent().find(u+y.menuItem))),s.is(l)||!s.length?s:s.find(l).length?o.call(s.find(l)):T(s,n)}var U=i.extend({init:function(e,t){var n=this;i.fn.init.call(n,e,t),n.mainButton=t.mainButton,n._clickHandlers={},n._renderList(),n._initPopup(),n._attachEvents(),n._applyCssClasses(n.list)},options:{name:"ButtonMenu",direction:"down",element:null,items:[],size:"medium"},events:[k,h,b],_renderList:function(){var t=this,i=t.options.items,o=t.element.addClass(y.popup),s=t.mainButton.attr(d)||n.guid(),l=e('<ul role="menu"></ul>').addClass(y.list);t.list=l.appendTo(o),t.list.attr(d,s+"_buttonmenu"),i.forEach(t._renderListItem.bind(t))},_renderListItem:function(t){var i,o,s=this,l=t.attributes?t.attributes.id:null;i=(t=a({},x,t,{enabled:t.enable&&t.enabled})).id||l||n.guid(),o=e('<li id="'+i+'" role="menuitem" class="'+y.listItem+'">'+s._renderItemButton(t)+"</li>"),t.click&&(s._clickHandlers[i]=t.click),t.attributes&&(delete t.attributes.target,t.attributes.class&&(o.addClass(t.attributes.class),delete t.attributes.class),o.attr(t.attributes)),t.data&&n.isFunction(t.data)&&o.data(t.data(t)),s.list.append(o),s.enable(t.enabled,o),s._hide(t.hidden,o)},_renderItemButton:function(e){var t=this.options;return t.itemTemplate?n.template(t.itemTemplate)(e):e.url?n.template(P)(e):n.template(H)(e)},_initPopup:function(){var e=this,t=e.options,n=t.direction||"down";e._popup=new s.Popup(e.element,a({},t.popup,{anchor:e.mainButton,isRtl:e._isRtl,toggleTarget:t.toggleTarget,copyAnchorStyles:!1,animation:t.animation,open:e._popupOpenHandler.bind(e),close:e._popupCloseHandler.bind(e),activate:e._popupExpandHandler.bind(e)},v[n]))},_popupOpenHandler:function(e){this.trigger(h)?e.preventDefault():this.list.find(u+y.menuItem).attr(f,0)},_popupCloseHandler:function(e){this.trigger(b)&&e.preventDefault(),this.list.find(u+y.menuItem).attr(f,-1)},_popupExpandHandler:function(){this.list.find(":kendoFocusable").first().trigger(C)},adjustPopupWidth:function(e){this.element.addClass("k-split-wrapper"),this.element.css({"min-width":e})},_attachEvents:function(){var e=this;e.list.on(g+o,u+y.menuItem,e._click.bind(e)).on(_+o,u+y.menuItem,e.listItemKeydown.bind(e)),e.mainButton.on(_+o,e._keydown.bind(e))},_keydown:function(t){if(!e(t.target).is(u+c)&&!e(t.target).parents(u+c).length)return t.altKey&&t.keyCode===l.DOWN?(this._popup.open(),void t.preventDefault()):void 0},listItemKeydown:function(t){var n=this,i=e(t.target);t.preventDefault(),t.keyCode===l.ESC||t.keyCode===l.TAB||t.altKey&&t.keyCode===l.UP?(n._popup.close(),n.mainButton.trigger(C)):t.keyCode===l.DOWN?T(i,p).trigger(C):t.keyCode===l.UP?T(i,"prev").trigger(C):i.is(u+c)||t.keyCode!==l.SPACEBAR&&t.keyCode!==l.ENTER?t.keyCode===l.HOME?n.list.find(":kendoFocusable").filter(u+y.menuItem).first().trigger(C):t.keyCode===l.END&&n.list.find(":kendoFocusable").filter(u+y.menuItem).last().trigger(C):i.trigger(g)},_click:function(t){var n=this,i=e(t.target).closest(u+y.menuItem),o=i.attr(d);n._clickHandlers[o]&&n._clickHandlers[o](t),n.trigger(k,{id:o,target:i,type:"menu-click",originalEvent:t})},toggle:function(){this._popup.toggle()},enable:function(e,t){(t=t&&t.length?this.list.find(t):this.items()).toggleClass(c,!e),e?t.removeAttr(m):t.attr(m,!e)},_hide:function(e,t){(t=t&&t.length?this.list.find(t):this.items()).toggleClass("k-hidden",e)},hide:function(e){this._hide(!0,e)},show:function(e){this._hide(!1,e)},close:function(){this._popup.close()},items:function(){return this.list.children(u+y.menuItem)},destroyPopup:function(){var e=this;e._popup&&(e._popup.destroy(),e._popup=null,e.list.off(o),e.list.remove(),e.list=null)},destroy:function(){var e=this;delete e._clickHandlers,e.destroyPopup(),e.mainButton.off(o),i.fn.destroy.call(e)}});n.cssProperties.registerPrefix("ButtonMenu","k-menu-group-"),s.plugin(U)}(window.kendo.jQuery),kendo}));
//# sourceMappingURL=kendo.button.menu.min.js.map
