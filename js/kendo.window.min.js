/**
 * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(define){define("kendo.window.min",["kendo.draganddrop.min","kendo.popup.min"],function(){var i={id:"window",name:"Window",category:"web",description:"The Window widget displays content in a modal or non-modal HTML window.",depends:["draganddrop","popup"],features:[{id:"window-fx",name:"Animation",description:"Support for animation",depends:["fx"]}]},x=window.kendo.jQuery,u=void 0,k=window.kendo,b=k.ui.Widget,z=k.ui.Popup.TabKeyTrap,n=k.ui.Draggable,T=x.isPlainObject,o=k._activeElement,s=k._outerWidth,t=k._outerHeight,l=x.extend,r=x.each,a=k.template,f="body",c,g=".kendoWindow",p=".kendoWindowModal",L=".k-window",W=".k-window-title",w=W+"bar",v=".k-window-content",S=".k-dialog-content",h=".k-resize-handle",m=".k-overlay",O="k-content-frame",e="k-i-loading",d="k-hover",P="k-focus",H="k-window-maximized",M="k-display-inline-flex",I=":visible",C="hidden",D="cursor",E="open",F="activate",R="deactivate",N="close",j="refresh",A,K,B="resizeStart",q,U="resizeEnd",G="dragstart",J="dragend",V="restore",Q,X="error",Y="overflow",$="original-overflow-rule",Z="zIndex",ii=".k-window-actions .k-i-window-minimize,.k-window-actions .k-i-window-maximize",ti=".k-i-pin",ei=".k-i-unpin",ni=ti+","+ei,oi=".k-window-titlebar .k-window-action",ri=".k-window-titlebar .k-i-refresh",si="WindowEventsHandled",ai=/^0[a-z]*$/i,li=k.isLocalUrl,di={small:"k-window-sm",medium:"k-window-md",large:"k-window-lg"};function pi(i){return typeof i!="undefined"}function _(i,t){return parseInt(i.css(t),10)||0}function y(i,t,e){var n;if(i&&isNaN(i)&&i.toString().indexOf("px")<0)n=i;else n=Math.max(Math.min(parseInt(i,10),e===Infinity?e:parseInt(e,10)),t===-Infinity?t:parseInt(t,10));return n}function fi(){return!this.type||this.type.toLowerCase().indexOf("script")>=0}function ci(i){var t={top:i.offsetTop,left:i.offsetLeft},e=i.offsetParent;while(e){t.top+=e.offsetTop;t.left+=e.offsetLeft;var n=x(e).css("overflowX");var o=x(e).css("overflowY");if(o==="auto"||o==="scroll")t.top-=e.scrollTop;if(n==="auto"||n==="scroll")t.left-=e.scrollLeft;e=e.offsetParent}return t}var hi=b.extend({init:function(i,t){var e=this,n,o={},p,f,r,c=false,s,a,h,l,m=t&&t.actions&&!t.actions.length,d;b.fn.init.call(e,i,t);t=e.options;r=t.position;i=e.element;s=t.content;l=x(window);if(m)t.actions=[];e.appendTo=x(t.appendTo);e.containment=t.draggable.containment?x(t.draggable.containment).first():null;if(s&&!T(s))s=t.content={url:s};i.find("script").filter(fi).remove();if(!i.parent().is(e.appendTo)&&!e.containment&&(r.top===u||r.left===u)){if(i.is(I)){o=i.offset();c=true}else{p=i.css("visibility");f=i.css("display");i.css({visibility:C,display:""});if(document.body.contains(i[0]))o=i.offset();else o={top:0,left:0};i.css({visibility:p,display:f})}if(r.top===u)r.top=o.top;if(r.left===u)r.left=o.left}if(!pi(t.visible)||t.visible===null)t.visible=i.is(I);n=e.wrapper=i.closest(L);if(!i.is(".k-window-content")||!n[0]){i.addClass("k-window-content");i.attr("tabindex",0);e._createWindow(i,t);n=e.wrapper=i.closest(L);e.title(e.options.title);e._dimensions()}e.minTop=e.minLeft=-Infinity;e.maxTop=e.maxLeft=Infinity;e._position();if(s)e.refresh(s);if(t.visible)e.toFront(null,!t.modal);a=n.children(v);if(t.visible&&t.modal)e._overlay(n.is(I)).css({opacity:.5});n.on("mouseenter"+g,oi,e._buttonEnter.bind(e)).on("mouseleave"+g,oi,e._buttonLeave.bind(e)).on("click"+g,"> "+oi,e._windowActionHandler.bind(e)).on("keydown"+g,e,e._keydown.bind(e)).on("focus"+g,e._focus.bind(e)).on("blur"+g,e._blur.bind(e));a.on("keydown"+g,e,e._keydownContent.bind(e));h=a.find("."+O)[0];if(h&&!l.data(si)){l.on("blur"+g,function(){var i=x(document.activeElement).parent(v);if(i.length){var t=k.widgetInstance(i);t._focus()}});l.on("focus"+g,function(){x(v).not(S).each(function(i,t){k.widgetInstance(x(t))._blur()})});l.data(si,true)}this._resizable();this._draggable();if(t.pinned&&this.wrapper.is(":visible"))e.pin();d=i.attr("id");if(d){d=d+"_wnd_title";n.attr({role:"dialog","aria-labelledby":d}).children(w).children(W).attr("id",d)}n.add(n.children(".k-resize-handle,"+w)).on(k.support.mousedown+g,e.toFront.bind(e));e.touchScroller=k.touchScroller(i);e._resizeHandler=e._onDocumentResize.bind(e);e._marker=k.guid().substring(0,8);x(window).on("resize"+g+e._marker,e._resizeHandler);if(t.visible){e.trigger(E);e.trigger(F)}k.notify(e);if(this.options.modal){this._tabKeyTrap=new z(n);this._tabKeyTrap.trap();this._tabKeyTrap.shouldTrap=function(){return n.data("isFront")}}},_buttonEnter:function(i){x(i.currentTarget).addClass(d)},_buttonLeave:function(i){x(i.currentTarget).removeClass(d)},_focus:function(){this.wrapper.addClass(P)},_blur:function(){this.wrapper.removeClass(P)},_dimensions:function(){var i=this.wrapper;var t=this.options;var e=t.width;var n=t.height;var o=t.maxHeight;var r=t.size;var s=["minWidth","minHeight","maxWidth","maxHeight"];var a=i.css("box-sizing")=="content-box";var p=a?_(i,"border-left-width")+_(i,"border-right-width"):0;var f=a?_(i,"border-top-width")+_(i,"border-bottom-width"):0;var c=a?_(i,"padding-top"):0;if(this.containment&&!this._isPinned){this._updateBoundaries();t.maxHeight=Math.min(this.containment.height-(f+c),o);t.maxWidth=Math.min(this.containment.width-p,t.maxWidth)}for(var l=0;l<s.length;l++){var d=t[s[l]]||"";if(d!=Infinity)i.css(s[l],d)}if(o!=Infinity)this.element.css("maxHeight",o);if(e)i.outerWidth(y(e,t.minWidth,t.maxWidth));else i.outerWidth("");if(n)i.outerHeight(y(n,t.minHeight,t.maxHeight));else i.outerHeight("");if(!t.visible)i.removeClass(M).hide();if(r&&di[r])i.addClass(di[r])},_position:function(){var i=this.wrapper,t=this.options.position,e,n;this._updateBoundaries();if(this.containment){t.top=t.top||0;t.left=t.left||0;e=t.top.toString().indexOf("%")>0?parseInt(this.containment.height*(parseFloat(t.top)/100),10):t.top;n=t.left.toString().indexOf("%")>0?parseInt(this.containment.width*(parseFloat(t.left)/100),10):t.left;t.top=y(e,this.minTop,this.maxTop);t.left=y(n,this.minLeft,this.maxLeft)}if(t.top&&t.top.toString().indexOf("px")>0)t.top=Number(t.top.replace("px",""));if(t.left&&t.left.toString().indexOf("px")>0)t.left=Number(t.left.replace("px",""));if(t.top===0)t.top=t.top.toString();if(t.left===0)t.left=t.left.toString();i.css({top:t.top||"",left:t.left||""})},_updateBoundaries:function(){var i=this.containment;if(!i)return null;i.width=i.innerWidth();i.height=i.innerHeight();if(parseInt(i.width,10)>i[0].clientWidth)i.width-=k.support.scrollbar();if(parseInt(i.height,10)>i[0].clientHeight)i.height-=k.support.scrollbar();i.position=ci(i[0]);if(this._isPinned){this.minTop=this.minLeft=-Infinity;this.maxTop=this.maxLeft=Infinity}else{this.minTop=i.scrollTop();this.minLeft=i.scrollLeft();this.maxLeft=this.minLeft+i.width-s(this.wrapper,true);this.maxTop=this.minTop+i.height-t(this.wrapper,true)}},_animationOptions:function(i){var t=this.options.animation;var e={open:{effects:{}},close:{hide:true,effects:{}}};return t&&t[i]||e[i]},_resize:function(){k.resize(this.element.children())},_resizable:function(){var i=this.options.resizable;var e=this.wrapper;if(this.resizing){e.off("dblclick"+g).children(h).remove();this.resizing.destroy();this.resizing=null}if(i){e.on("dblclick"+g,w,function(i){if(!x(i.target).closest(".k-window-action").length)this.toggleMaximization()}.bind(this));r("n e s w se sw ne nw".split(" "),function(i,t){e.append(c.resizeHandle(t))});this.resizing=new mi(this)}e=null},_draggable:function(){var i=this.options.draggable;if(this.dragging){this.dragging.destroy();this.dragging=null}if(i)this.dragging=new ui(this,i.dragHandle||w)},_actions:function(){var i=this.options;var t=i.actions;var e=i.pinned;var n=this.wrapper.children(w);var o=n.find(".k-window-actions");var r=["maximize","minimize"];t=x.map(t,function(i){i=e&&i.toLowerCase()==="pin"?"unpin":i;return{name:r.indexOf(i.toLowerCase())>-1?"window-"+i:i}});o.html(k.render(c.action,t))},setOptions:function(i){var t=this;var e=t.options.size;var n=this.containment&&!t._isPinned?this.containment:x(document);var o=JSON.parse(JSON.stringify(i));l(i.position,t.options.position);l(i.position,o.position);t._containerScrollTop=n.scrollTop();t._containerScrollLeft=n.scrollLeft();b.fn.setOptions.call(t,i);var r=t.options.scrollable!==false;t.restore();if(typeof i.title!=="undefined")t.title(i.title);t.wrapper.removeClass(di[e]);t._dimensions();t._position();t._resizable();t._draggable();t._actions();if(typeof i.modal!=="undefined"){var s=t.options.visible!==false;t._enableDocumentScrolling();t._overlay(i.modal&&s)}t.element.css(Y,r?"":"hidden")},events:[E,F,R,N,"minimize","maximize",j,V,B,"resize",U,G,J,"kendoKeydown",X],options:{name:"Window",animation:{open:{effects:{zoom:{direction:"in"},fade:{direction:"in"}},duration:350},close:{effects:{zoom:{direction:"out",properties:{scale:.7}},fade:{direction:"out"}},duration:350,hide:true}},title:"",actions:["Close"],autoFocus:true,modal:false,size:"auto",resizable:true,draggable:true,minWidth:90,minHeight:50,maxWidth:Infinity,maxHeight:Infinity,pinned:false,scrollable:true,position:{},content:null,visible:null,height:null,width:null,appendTo:"body",isMaximized:false,isMinimized:false},_closable:function(){return x.inArray("close",x.map(this.options.actions,function(i){return i.toLowerCase()}))>-1},_keydownContent:function(i){var t=this,e=k.keys,n=i.keyCode;if(n==e.ESC&&t._closable()){i.stopPropagation();t._close(false)}},_keydown:function(i){var t=this,e=t.options,n=k.keys,o=i.keyCode,r=t.wrapper,s,a,l=10,d=e.isMaximized,p=e.isMinimized,f,c,h,m;if(o==n.ESC&&t._closable()){i.stopPropagation();t._close(false)}if(i.target!=i.currentTarget||t._closing)return;if(i.altKey&&o==82)t.refresh();if(i.altKey&&o==80)if(t.options.pinned)t.unpin();else t.pin();if(i.altKey&&o==n.UP){if(p){t.restore();t.wrapper.trigger("focus")}else if(!d){t.maximize();t.wrapper.trigger("focus")}}else if(i.altKey&&o==n.DOWN)if(!p&&!d){t.minimize();t.wrapper.trigger("focus")}else if(d){t.restore();t.wrapper.trigger("focus")}s=k.getOffset(r);if(t.containment&&!t._isPinned)s=t.options.position;if(e.draggable&&!i.ctrlKey&&!i.altKey&&!d){t._updateBoundaries();if(o==n.UP){s.top=y(s.top-l,t.minTop,t.maxTop);a=r.css("top",s.top)}else if(o==n.DOWN){s.top=y(s.top+l,t.minTop,t.maxTop);a=r.css("top",s.top)}else if(o==n.LEFT){s.left=y(s.left-l,t.minLeft,t.maxLeft);a=r.css("left",s.left)}else if(o==n.RIGHT){s.left=y(s.left+l,t.minLeft,t.maxLeft);a=r.css("left",s.left)}}if(e.resizable&&i.ctrlKey&&!d&&!p){if(o==n.UP){a=true;c=r.outerHeight()-l}else if(o==n.DOWN){a=true;if(t.containment&&!t._isPinned)c=Math.min(r.outerHeight()+l,t.containment.height-s.top-_(r,"padding-top")-_(r,"borderBottomWidth")-_(r,"borderTopWidth"));else c=r.outerHeight()+l}if(o==n.LEFT){a=true;f=r.outerWidth()-l}else if(o==n.RIGHT){a=true;if(t.containment&&!t._isPinned)f=Math.min(r.outerWidth()+l,t.containment.width-s.left-_(r,"borderLeftWidth")-_(r,"borderRightWidth"));else f=r.outerWidth()+l}if(a){h=y(f,e.minWidth,e.maxWidth);m=y(c,e.minHeight,e.maxHeight);if(!isNaN(h)){r.outerWidth(h);t.options.width=h+"px"}if(!isNaN(m)){r.outerHeight(m);t.options.height=m+"px"}t.resize()}}if(a)i.preventDefault()},_overlay:function(i){var t=this.containment?this.containment.children(m):this.appendTo.children(m),e=this.wrapper,n=i?"block":"none",o=parseInt(e.css(Z),10)-1;if(!t.length)t=x("<div class='k-overlay' />");t.insertBefore(e[0]).css({zIndex:o,display:n});if(this.options.modal.preventScroll&&!this.containment)this._stopDocumentScrolling();return t},_actionForIcon:function(i){var t=/\bk-i(-\w+)+\b/.exec(i[0].className)[0];return{"k-i-close":"_close","k-i-window-maximize":"maximize","k-i-window-minimize":"minimize","k-i-window-restore":"restore","k-i-refresh":"refresh","k-i-pin":"pin","k-i-unpin":"unpin"}[t]},_windowActionHandler:function(i){if(this._closing)return;var t=x(i.target).closest(".k-window-action").find(".k-icon");var e=this._actionForIcon(t);if(e){i.preventDefault();this[e]();return false}},_modals:function(){var i=this,t=x(L+I),e,n=[];for(var o=0;o<t.length;o+=1){e=i._object(x(t[o]));if(e&&e.options&&e.options.modal&&e.options.visible&&e.options.appendTo===i.options.appendTo&&(!e.containment||i.containment&&e.containment[0]===i.containment[0]))n.push(e.wrapper[0])}n.sort(function(i,t){return i.style.zIndex-t.style.zIndex});i=null;return x(n)},_object:function(i){var t=i.children(v);var e=k.widgetInstance(t);if(e)return e;return u},center:function(){var i=this,t=i.options.position,e=i.wrapper,n=x(window),o=0,r=0,s,a;if(i.options.isMaximized)return i;if(i.options.pinned&&!i._isPinned)i.pin();if(!i.options.pinned){o=n.scrollTop();r=n.scrollLeft()}if(this.containment&&!i.options.pinned){s=this.minTop+(this.maxTop-this.minTop)/2;a=this.minLeft+(this.maxLeft-this.minLeft)/2}else{i._scrollIsAppended=true;a=r+Math.max(0,(n.width()-e.outerWidth())/2);s=o+Math.max(0,(n.height()-e.outerHeight()-_(e,"paddingTop"))/2)}e.css({left:a,top:s});t.top=s;t.left=a;return i},title:function(i){var t=this,e,n=true,o=t.wrapper,r=o.children(w),s=r.children(W);if(!arguments.length)return s.html();if(x.isPlainObject(i)){e=typeof i.text!=="undefined"?i.text:"";n=i.encoded!==false}else e=i;if(e===false){o.addClass("k-window-titleless");o.css("padding-top",0);r.remove()}else if(!r.length){o.prepend(c.titlebar({title:n?k.htmlEncode(e):e}));t._actions();r=o.children(w)}else s.html(n?k.htmlEncode(e):e);t.options.title=e;return t},content:function(i,e){var n=this.wrapper.children(v),t=n.children(".km-scroll-container");n=t[0]?t:n;if(!pi(i))return n.html();this.angular("cleanup",function(){return{elements:n.children()}});k.destroy(this.element.children());n.empty().html(i);this.angular("compile",function(){var i=[];for(var t=n.length;--t>=0;)i.push({dataItem:e});return{elements:n.children(),data:i}});return this},open:function(){var i=this,t=i.wrapper,e=i.options,n=this._animationOptions("open"),o=t.children(v),r,s,a=this.containment&&!i._isPinned,l=a?this.containment:x(document);if(!i.trigger(E)){if(i._closing)t.kendoStop(true,true);i._closing=false;i.toFront();if(e.autoFocus)i.wrapper.trigger("focus");e.visible=true;if(e.modal){s=!!i._modals().length;r=i._overlay(s);r.kendoStop(true,true);if(n.duration&&k.effects.Fade&&!s){var d=k.fx(r).fadeIn();d.duration(n.duration||0);d.endValue(.5);d.play()}else r.css("opacity",.5);r.show();x(window).on("focus"+p,function(){if(t.data("isFront")&&!x(document.activeElement).closest(t).length)i.wrapper.trigger("focus")})}if(!t.is(I)){o.css(Y,C);i.wrapper.find(oi).addClass("k-button-flat");t.addClass(M).kendoStop().kendoAnimate({effects:n.effects,duration:n.duration,complete:this._activate.bind(this)})}}if(e.isMaximized){i._containerScrollTop=l.scrollTop();i._containerScrollLeft=l.scrollLeft();i._stopDocumentScrolling()}if(this.options.pinned&&!this._isPinned)this.pin();return i},_activate:function(){var i=this.options.scrollable!==false;if(this.options.autoFocus)this.wrapper.trigger("focus");this.element.css(Y,i?"":"hidden");k.resize(this.element.children());this.trigger(F)},_removeOverlay:function(i){var t=this._modals();var e=this.options;var n=e.modal&&!t.length;var o=this._animationOptions("close");if(n){if(!i&&o.duration&&k.effects.Fade){var r=k.fx(e.modal?this._overlay(true):x(u)).fadeOut();r.duration(o.duration||0);r.startValue(.5);r.play()}else this._overlay(false).remove();if(e.modal.preventScroll)this._enableDocumentScrolling()}else if(t.length){this._object(t.last())._overlay(true);if(e.modal.preventScroll)this._stopDocumentScrolling()}},_close:function(i){var t=this,n=t.wrapper,e=t.options,o=this._animationOptions("open"),r=this._animationOptions("close"),s=this.containment&&!t._isPinned,a=s?this.containment:x(document),l;if(t._closing)return;l=t.trigger(N,{userTriggered:!i});t._closing=!l;if(n.is(I)&&!l){e.visible=false;x(L).each(function(i,t){var e=x(t).children(v);if(t!=n&&e.find("> ."+O).length>0)e.children(m).remove()});this._removeOverlay();t.wrapper.find(oi).removeClass("k-button-flat");n.kendoStop().kendoAnimate({effects:r.effects||o.effects,reverse:r.reverse===true,duration:r.duration,complete:this._deactivate.bind(this)});x(window).off(p)}if(t.options.isMaximized){t._enableDocumentScrolling();if(t._containerScrollTop&&t._containerScrollTop>0)a.scrollTop(t._containerScrollTop);if(t._containerScrollLeft&&t._containerScrollLeft>0)a.scrollLeft(t._containerScrollLeft)}if(t.options.iframe)t.wrapper.trigger("blur")},_deactivate:function(){var i=this;i.wrapper.removeClass(M).hide().css("opacity","");i.trigger(R);if(i.options.modal){var t=i._object(i._modals().last());if(t)t.toFront()}},close:function(){this._close(true);return this},_actionable:function(i){return x(i).is(oi+","+oi+" .k-icon, :input, a, .k-input, .k-icon, [role='gridcell'], .k-input-value-text")},_shouldFocus:function(i){var t=o(),e=this.wrapper;return this.options.autoFocus&&!x(t).is(e)&&!this._actionable(i)&&(!e.find(t).length||!e.find(i).length)},toFront:function(i,t){var e=this,r=e.wrapper,s=r[0],n=e.containment&&!e._isPinned,o=this._animationOptions("open"),a=+r.css(Z),p=a,f=i&&i.target||null;x(L).each(function(i,t){var e=x(t),n=e.css(Z),o=e.children(v);if(!isNaN(n))a=Math.max(+n,a);r.data("isFront",t==s);if(t!=s&&o.find("."+O).length&&!o.find(m).length)o.append(c.overlay)});if(!r[0].style.zIndex||p<a)r.css(Z,a+2);e.element.find("> .k-overlay").remove();if(e._shouldFocus(f)){if(!t)setTimeout(function(){e.wrapper.focus()},o?o.duration:0);var l=n?e.containment.scrollTop():x(window).scrollTop(),d=parseInt(r.position().top,10);if(!e.options.pinned&&d>0&&d<l)if(l>0)x(window).scrollTop(d);else r.css("top",l)}r=null;return e},toggleMaximization:function(){if(this._closing)return this;return this[this.options.isMaximized?"restore":"maximize"]()},restore:function(){var i=this;var t=i.options;var e=t.minHeight;var n=i.restoreOptions;var o;var r=i.containment&&!i._isPinned?i.containment:x(document);if(!t.isMaximized&&!t.isMinimized)return i;if(e&&e!=Infinity)i.wrapper.css("min-height",e);if(n&&!t.isMaximized){n.height=y(n.height,i.options.minHeight,i.options.maxHeight);o=t.position.top+parseInt(n.height,10)>i.maxTop;if(o){t.position.top=y(t.position.top,i.minTop,i.maxTop-parseInt(n.height,10));l(n,{left:t.position.left,top:t.position.top})}}i.wrapper.css({position:t.pinned?"fixed":"absolute",left:n.left,top:n.top,width:n.width,height:n.height}).removeClass(H).find(".k-window-content,.k-resize-handle").show().end().find(".k-window-titlebar .k-i-window-restore").parent().remove().end().end().find(ii).parent().show().end().end().find(ni).parent().show();if(t.isMaximized)i.wrapper.find(".k-i-window-maximize").parent().trigger("focus");else if(t.isMinimized)i.wrapper.find(".k-i-window-minimize").parent().trigger("focus");i.options.width=n.width;i.options.height=n.height;if(!i.options.modal.preventScroll)i._enableDocumentScrolling();if(i._containerScrollTop&&i._containerScrollTop>0)r.scrollTop(i._containerScrollTop);if(i._containerScrollLeft&&i._containerScrollLeft>0)r.scrollLeft(i._containerScrollLeft);t.isMaximized=t.isMinimized=false;i.wrapper.removeAttr("aria-labelled-by");i.resize();i.trigger(V);return i},_sizingAction:function(i,t){var e=this,n=e.wrapper,o=n[0].style,r=e.options;if(r.isMaximized||r.isMinimized)return e;e.restoreOptions={width:o.width,height:o.height};n.children(h).hide().end().children(w).find(ii).parent().hide().eq(0).before(c.action({name:"window-restore"}));t.call(e);e.wrapper.children(w).find(ni).parent().toggle(i!=="maximize");e.trigger(i);n.find(".k-i-window-restore").parent().trigger("focus");return e},maximize:function(){this._sizingAction("maximize",function(){var i=this,t=i.wrapper,e=this.containment&&!i._isPinned,n=t.position(),o=x(document);l(i.restoreOptions,{left:n.left+(e?this.containment.scrollLeft():0),top:n.top+(e?this.containment.scrollTop():0)});this._containerScrollTop=e?this.containment.scrollTop():o.scrollTop();this._containerScrollLeft=e?this.containment.scrollLeft():o.scrollLeft();i._stopDocumentScrolling();t.css({top:e?this.containment.scrollTop():0,left:e?this.containment.scrollLeft():0,position:e?"absolute":"fixed"}).addClass(H);i.options.isMaximized=true;i._onDocumentResize()});return this},_stopDocumentScrolling:function(){var i=this;var t=i.containment;if(t&&!i._isPinned){i._storeOverflowRule(t);t.css(Y,C);i.wrapper.css({maxWidth:t.innerWidth(),maxHeight:t.innerHeight()});return}var e=x("body");i._storeOverflowRule(e);e.css(Y,C);var n=x("html");i._storeOverflowRule(n);n.css(Y,C)},_enableDocumentScrolling:function(){var i=this;var t=i.containment;if(t&&!i._isPinned){i._restoreOverflowRule(t);i.wrapper.css({maxWidth:t.width,maxHeight:t.height});return}i._restoreOverflowRule(x(document.body));i._restoreOverflowRule(x("html"))},_storeOverflowRule:function(i){if(this._isOverflowStored(i))return;var t=i.get(0).style.overflow;if(typeof t==="string")i.data($,t)},_isOverflowStored:function(i){return typeof i.data($)==="string"},_restoreOverflowRule:function(i){var t=i.data($);if(t!==null&&t!==u){i.css(Y,t);i.removeData($)}else i.css(Y,"")},isMaximized:function(){return this.options.isMaximized},minimize:function(){this._sizingAction("minimize",function(){var i=this;i.wrapper.css({height:"",minHeight:""});i.element.hide();i.options.isMinimized=true});this.wrapper.attr("aria-labelled-by",this.element.attr("aria-labelled-by"));this._updateBoundaries();return this},isMinimized:function(){return this.options.isMinimized},pin:function(){var i=this,t=x(window),e=i.wrapper,n=i.options,o=n.position,r=this.containment?ci(e[0]).top+_(this.containment,"borderTopWidth"):_(e,"top"),s=this.containment?ci(e[0]).left+_(this.containment,"borderLeftWidth"):_(e,"left");if(!i.options.isMaximized){o.top=r;o.left=s;if(i._scrollIsAppended&&(!this.containment||this.containment.css("position")!=="fixed")){o.top-=t.scrollTop();o.left-=t.scrollLeft();i._scrollIsAppended=false}e.css(l(o,{position:"fixed"}));e.children(w).find(ti).addClass("k-i-unpin").removeClass("k-i-pin");i._isPinned=true;i.options.pinned=true;if(this.containment){n.maxWidth=n.maxHeight=Infinity;e.css({maxWidth:"",maxHeight:""})}}},unpin:function(){var i=this,t=x(window),e=i.wrapper,n=i.options,o=i.options.position,r=i.containment,s=parseInt(e.css("top"),10)+t.scrollTop(),a=parseInt(e.css("left"),10)+t.scrollLeft();if(!i.options.isMaximized){i._isPinned=false;i._scrollIsAppended=true;i.options.pinned=false;if(r){i._updateBoundaries();n.maxWidth=Math.min(r.width,n.maxWidth);n.maxHeight=Math.min(r.height-_(e,"padding-top"),n.maxHeight);e.css({maxWidth:n.maxWidth,maxHeight:n.maxHeight});if(s<r.position.top)s=i.minTop;else if(s>r.position.top+r.height)s=i.maxTop;else s=s+r.scrollTop()-(r.position.top+_(r,"border-top-width"));if(a<r.position.left)a=i.minLeft;else if(a>r.position.left+r.width)a=i.maxLeft;else a=a+r.scrollLeft()-(r.position.left+_(r,"border-left-width"))}o.top=y(s,i.minTop,i.maxTop);o.left=y(a,i.minLeft,i.maxLeft);e.css(l(o,{position:""}));e.children(w).find(ei).addClass("k-i-pin").removeClass("k-i-unpin")}},_onDocumentResize:function(){var i=this,t=i.wrapper,e=x(window),n=k.support.zoomLevel(),o=t.css("box-sizing")=="content-box",r,s;if(!i.options.isMaximized)return;var a=o?_(t,"border-left-width")+_(t,"border-right-width"):0;var l=o?_(t,"border-top-width")+_(t,"border-bottom-width"):0;var d=o?_(t,"padding-top"):0;if(i.containment&&!i._isPinned){r=i.containment.innerWidth()-a;s=i.containment.innerHeight()-(l+d)}else{r=e.width()/n-a;s=e.height()/n-(l+d)}t.css({width:r,height:s});i.options.width=r;i.options.height=s;i.resize()},refresh:function(i){var t=this,e=t.options,n=x(t.element),o,r,s;if(!T(i))i={url:i};i=l(e.content,i);r=pi(e.iframe)?e.iframe:i.iframe;s=i.url;if(s){if(!pi(r))r=!li(s);if(!r)t._ajaxRequest(i);else{o=n.find("."+O)[0];if(o)o.src=s||o.src;else n.html(c.contentFrame(l({},e,{content:i})));n.find("."+O).off("load"+g).on("load"+g,this._triggerRefresh.bind(this))}}else{if(i.template)t.content(a(i.template)({}));t.trigger(j)}n.toggleClass("k-window-iframecontent",!!r);return t},_triggerRefresh:function(){this.trigger(j)},_ajaxComplete:function(){clearTimeout(this._loadingIconTimeout);this.wrapper.find(ri).removeClass(e)},_ajaxError:function(i,t){this.trigger(X,{status:t,xhr:i})},_ajaxSuccess:function(e){return function(i){var t=i;if(e)t=a(e)(i||{});this.content(t,i);this.element.prop("scrollTop",0);this.trigger(j)}},_showLoading:function(){this.wrapper.find(ri).addClass(e)},_ajaxRequest:function(i){this._loadingIconTimeout=setTimeout(this._showLoading.bind(this),100);x.ajax(l({type:"GET",dataType:"html",cache:false,error:this._ajaxError.bind(this),complete:this._ajaxComplete.bind(this),success:this._ajaxSuccess(i.template).bind(this)},i))},_destroy:function(){if(this.resizing)this.resizing.destroy();if(this.dragging)this.dragging.destroy();this.wrapper.off(g).children(v).off(g).end().find(".k-resize-handle,.k-window-titlebar").off(g);x(window).off("resize"+g+this._marker);x(window).off(p);x(window).off(g);clearTimeout(this._loadingIconTimeout);b.fn.destroy.call(this);this.unbind(u);k.destroy(this.wrapper)},destroy:function(){this._destroy();if(this.options.modal)this._removeOverlay(true);this.wrapper.empty().remove();this.wrapper=this.appendTo=this.element=x()},_createWindow:function(){var i=this.element,t=this.options,e,n,o=k.support.isRtl(i);if(t.scrollable===false)i.css("overflow","hidden");n=x(c.wrapper(t));e=i.find("iframe:not(.k-content-frame)").map(function(){var i=this.getAttribute("src");this.src="";return i});n.toggleClass("k-rtl",o).attr("tabindex",0).append(i).find("iframe:not(.k-content-frame)").each(function(i){this.src=e[i]});if(this.containment)this.containment.prepend(n);else if(this.appendTo)n.appendTo(this.appendTo);n.find(".k-window-title").css(o?"left":"right",s(n.find(".k-window-actions"))+10);i.css("visibility","").show();i.find("[data-role=editor]").each(function(){var i=x(this).data("kendoEditor");if(i)i.refresh()});n=i=null}});function mi(i){var t=this;t.owner=i;t._preventDragging=false;t._draggable=new n(i.wrapper,{filter:">"+h,group:i.wrapper.id+"-resizing",dragstart:t.dragstart.bind(t),drag:t.drag.bind(t),dragend:t.dragend.bind(t)});t._draggable.userEvents.bind("press",t.addOverlay.bind(t));t._draggable.userEvents.bind("release",t.removeOverlay.bind(t))}function ui(i,t){var e=this;e.owner=i;e._preventDragging=false;e._draggable=new n(i.wrapper,{filter:t,group:i.wrapper.id+"-moving",dragstart:e.dragstart.bind(e),drag:e.drag.bind(e),dragend:e.dragend.bind(e),dragcancel:e.dragcancel.bind(e)});e._draggable.userEvents.stopPropagation=false}return c={wrapper:a("<div class='k-widget k-window'></div>"),action:a("<a role='button' href='\\#' class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button k-window-action' aria-label='#= name #'>"+"<span class='k-button-icon k-icon k-i-#= name.toLowerCase() #'></span>"+"</a>"),titlebar:a("<div class='k-window-titlebar k-hstack'>"+"<span class='k-window-title'>#= title #</span>"+"<div class='k-window-actions k-hstack'></div>"+"</div>"),overlay:"<div class='k-overlay'></div>",contentFrame:a("<iframe frameborder='0' title='#= title #' class='"+O+"' "+"src='#= content.url #'>"+"This page requires frames in order to show content"+"</iframe>"),resizeHandle:a("<div aria-hidden='true' class='k-resize-handle k-resize-#= data #'></div>")},mi.prototype={addOverlay:function(){this.owner.wrapper.append(c.overlay)},removeOverlay:function(){this.owner.wrapper.find(m).remove()},dragstart:function(i){var t=this;var e=t.owner;var n=e.wrapper;t._preventDragging=e.trigger(B);if(t._preventDragging)return;t.elementPadding=parseInt(n.css("padding-top"),10);t.initialPosition=k.getOffset(n,"position");t.resizeDirection=i.currentTarget.prop("className").replace("k-resize-handle k-resize-","");t.initialSize={width:n.outerWidth(),height:n.outerHeight()};e._updateBoundaries();t.containerOffset=e.containment?e.containment.position:k.getOffset(e.appendTo);var o=n.offsetParent();if(o.is("html"))t.containerOffset.top=t.containerOffset.left=0;else{var r=o.css("margin-top");var s=o.css("margin-left");var p=!ai.test(r)||!ai.test(s);if(p){var a=ci(n[0]);var l=a.left-t.containerOffset.left-t.initialPosition.left;var d=a.top-t.containerOffset.top-t.initialPosition.top;t._relativeElMarginLeft=l>1?l:0;t._relativeElMarginTop=d>1?d:0;t.initialPosition.left+=t._relativeElMarginLeft;t.initialPosition.top+=t._relativeElMarginTop}}n.children(h).not(i.currentTarget).hide();x(f).css(D,i.currentTarget.css(D))},drag:function(p){if(this._preventDragging)return;var i=this,t=i.owner,f=t.wrapper,e=t.options,n=e.position,c=i.resizeDirection,o=i.containerOffset,r=i.initialPosition,s=i.initialSize,h=t.containment&&!t._isPinned,m=k.support.isRtl(t.containment),u=h&&m&&t.containment.innerWidth()>t.containment.width?k.support.scrollbar():0,a=h?{top:t.containment.scrollTop(),left:t.containment.scrollLeft()}:{top:0,left:0},l,d,g,w,v=Math.max(p.x.location,0),_=Math.max(p.y.location,0);if(c.indexOf("e")>=0){if(t.containment&&v-s.width>=t.maxLeft-a.left+o.left+u)l=t.maxLeft+u-r.left+s.width-a.left;else l=v-r.left-o.left;f.outerWidth(y(l,e.minWidth,e.maxWidth))}else if(c.indexOf("w")>=0){w=r.left+s.width+o.left;l=y(w-v,e.minWidth,e.maxWidth);n.left=w-l-o.left-u-(i._relativeElMarginLeft||0)+a.left;if(t.containment&&n.left<=t.minLeft){n.left=t.minLeft;l=y(w-u-n.left-o.left+a.left,e.minWidth,e.maxWidth)}f.css({left:n.left,width:l})}var b=_;if(t.options.pinned)b-=x(window).scrollTop();if(c.indexOf("s")>=0){d=b-r.top-i.elementPadding-o.top;if(b-s.height-i.elementPadding>=t.maxTop+o.top-a.top)d=t.maxTop-r.top+s.height-a.top;f.outerHeight(y(d,e.minHeight,e.maxHeight))}else if(c.indexOf("n")>=0){g=r.top+s.height+o.top;d=y(g-b,e.minHeight,e.maxHeight);n.top=g-d-o.top-(i._relativeElMarginTop||0)+a.top;if(n.top<=t.minTop&&t.containment){n.top=t.minTop;d=y(g-n.top-o.top+a.top,e.minHeight,e.maxHeight)}f.css({top:n.top,height:d})}if(l)t.options.width=l+"px";if(d)t.options.height=d+"px";t.resize()},dragend:function(i){if(this._preventDragging)return;var t=this,e=t.owner,n=e.wrapper;n.children(h).not(i.currentTarget).show();x(f).css(D,"");if(e.touchScroller)e.touchScroller.reset();if(i.keyCode==27)n.css(t.initialPosition).css(t.initialSize);e.trigger(U);return false},destroy:function(){if(this._draggable)this._draggable.destroy();this._draggable=this.owner=null}},ui.prototype={dragstart:function(i){var t=this.owner,e=t.options.draggable,n=t.element,o=n.find(".k-window-actions"),r=k.getOffset(t.appendTo);this._preventDragging=t.trigger(G)||!e;if(this._preventDragging||t.isMaximized())return;t.initialWindowPosition=k.getOffset(t.wrapper,"position");t.initialPointerPosition={left:t.options.position.left,top:t.options.position.top};t.startPosition={left:i.x.client-t.initialWindowPosition.left,top:i.y.client-t.initialWindowPosition.top};t._updateBoundaries();if(!t.containment){if(o.length>0)t.minLeft=s(o)+parseInt(o.css("right"),10)-s(n);else t.minLeft=20-s(n);t.minLeft-=r.left;t.minTop=-r.top}x(c.overlay).appendTo(t.wrapper).css({opacity:0});t.wrapper.children(h).hide();x(f).css(D,i.currentTarget.css(D))},drag:function(i){var t=this.owner;var e=t.options.position;var n=t.options.draggable.axis;var o;var r;if(this._preventDragging||t.isMaximized())return;if(!n||n.toLowerCase()==="x"){o=i.x.client-t.startPosition.left;if(t.containment&&!t._isPinned)o+=t.containment.scrollLeft();e.left=y(o,t.minLeft,t.maxLeft)}if(!n||n.toLowerCase()==="y"){r=i.y.client-t.startPosition.top;if(t.containment&&!t._isPinned)r+=t.containment.scrollTop();e.top=y(r,t.minTop,t.maxTop)}if(k.support.transforms)x(t.wrapper).css("transform","translate("+(e.left-t.initialPointerPosition.left)+"px, "+(e.top-t.initialPointerPosition.top)+"px)");else x(t.wrapper).css(e)},_finishDrag:function(){var i=this.owner;i.wrapper.children(h).toggle(!i.options.isMinimized).end().find(m).remove();x(f).css(D,"")},dragcancel:function(i){if(this._preventDragging)return;this._finishDrag();i.currentTarget.closest(L).css(this.owner.initialWindowPosition)},dragend:function(){var i=this.owner;if(this._preventDragging||i.isMaximized())return;x(i.wrapper).css(i.options.position).css("transform","");this._finishDrag();i.trigger(J);return false},destroy:function(){if(this._draggable)this._draggable.destroy();this._draggable=this.owner=null}},k.ui.plugin(hi),window.kendo})}("function"==typeof define&&define.amd?define:function(i,t,e){(e||t)()});
//# sourceMappingURL=kendo.window.min.js.map
