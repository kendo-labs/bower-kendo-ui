/**
 * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(t){"function"==typeof define&&define.amd?define(["kendo.draganddrop.min","kendo.popup.min"],t):t()}((function(){!function(t,i){var e,n=window.kendo,o=n.ui.Widget,r=n.ui.Popup.TabKeyTrap,s=n.ui.Draggable,a=t.isPlainObject,l=n._activeElement,d=n._outerWidth,p=n._outerHeight,c=t.extend,h=t.each,f=n.template,m="body",g=".kendoWindow",u=".kendoWindowModal",w=".k-window",_=".k-window-title",v=_+"bar",b=".k-window-content",x=".k-resize-handle",k=".k-overlay",z="k-content-frame",T="k-i-loading",y="k-hover",L="k-focus",S="k-window-maximized",W="k-display-inline-flex",O=":visible",P="hidden",H="cursor",M="open",C="activate",I="deactivate",D="close",E="refresh",F="resizeStart",R="resizeEnd",N="dragstart",j="dragend",A="restore",K="error",B="overflow",q="original-overflow-rule",U="zIndex",G=".k-window-actions .k-i-window-minimize,.k-window-actions .k-i-window-maximize",J=".k-i-pin",V=".k-i-unpin",Q=J+","+V,X=".k-window-titlebar .k-window-action",Y=".k-window-titlebar .k-i-refresh",$="WindowEventsHandled",Z=/^0[a-z]*$/i,tt=n.isLocalUrl,it={small:"k-window-sm",medium:"k-window-md",large:"k-window-lg"};function et(t){return void 0!==t}function nt(t,i){return parseInt(t.css(i),10)||0}function ot(t,i,e){return t&&isNaN(t)&&t.toString().indexOf("px")<0?t:Math.max(Math.min(parseInt(t,10),e===1/0?e:parseInt(e,10)),i===-1/0?i:parseInt(i,10))}function rt(){return!this.type||this.type.toLowerCase().indexOf("script")>=0}function st(i){for(var e={top:i.offsetTop,left:i.offsetLeft},n=i.offsetParent;n;){e.top+=n.offsetTop,e.left+=n.offsetLeft;var o=t(n).css("overflowX"),r=t(n).css("overflowY");"auto"!==r&&"scroll"!==r||(e.top-=n.scrollTop),"auto"!==o&&"scroll"!==o||(e.left-=n.scrollLeft),n=n.offsetParent}return e}var at=o.extend({init:function(e,s){var l,d,p,c,h,f,m,u,x=this,k={},T=s&&s.actions&&!s.actions.length;o.fn.init.call(x,e,s),c=(s=x.options).position,e=x.element,h=s.content,m=t(window),T&&(s.actions=[]),x.appendTo=t(s.appendTo),x.containment=s.draggable.containment?t(s.draggable.containment).first():null,h&&!a(h)&&(h=s.content={url:h}),e.find("script").filter(rt).remove(),e.parent().is(x.appendTo)||x.containment||c.top!==i&&c.left!==i||(e.is(O)?(k=e.offset(),!0):(d=e.css("visibility"),p=e.css("display"),e.css({visibility:P,display:""}),k=document.body.contains(e[0])?e.offset():{top:0,left:0},e.css({visibility:d,display:p})),c.top===i&&(c.top=k.top),c.left===i&&(c.left=k.left)),et(s.visible)&&null!==s.visible||(s.visible=e.is(O)),l=x.wrapper=e.closest(w),e.is(".k-window-content")&&l[0]||(e.addClass("k-window-content"),e.attr("tabindex",0),x._createWindow(e,s),l=x.wrapper=e.closest(w),x.title(x.options.title),x._dimensions()),x.minTop=x.minLeft=-1/0,x.maxTop=x.maxLeft=1/0,x._position(),h&&x.refresh(h),s.visible&&x.toFront(null,!s.modal),f=l.children(b),s.visible&&s.modal&&x._overlay(l.is(O)).css({opacity:.5}),l.on("mouseenter"+g,X,x._buttonEnter.bind(x)).on("mouseleave"+g,X,x._buttonLeave.bind(x)).on("click"+g,"> "+X,x._windowActionHandler.bind(x)).on("keydown"+g,x,x._keydown.bind(x)).on("focus"+g,x._focus.bind(x)).on("blur"+g,x._blur.bind(x)),f.on("keydown"+g,x,x._keydownContent.bind(x)),f.find("."+z)[0]&&!m.data($)&&(m.on("blur"+g,(function(){var i=t(document.activeElement).parent(b);i.length&&n.widgetInstance(i)._focus()})),m.on("focus"+g,(function(){t(b).not(".k-dialog-content").each((function(i,e){n.widgetInstance(t(e))._blur()}))})),m.data($,!0)),this._resizable(),this._draggable(),s.pinned&&this.wrapper.is(":visible")&&x.pin(),(u=e.attr("id"))&&(u+="_wnd_title",l.attr({role:"dialog","aria-labelledby":u}).children(v).children(_).attr("id",u)),l.add(l.children(".k-resize-handle,"+v)).on(n.support.mousedown+g,x.toFront.bind(x)),x.touchScroller=n.touchScroller(e),x._resizeHandler=x._onDocumentResize.bind(x),x._marker=n.guid().substring(0,8),t(window).on("resize"+g+x._marker,x._resizeHandler),s.visible&&(x.trigger(M),x.trigger(C)),n.notify(x),this.options.modal&&(this._tabKeyTrap=new r(l),this._tabKeyTrap.trap(),this._tabKeyTrap.shouldTrap=function(){return l.data("isFront")})},_buttonEnter:function(i){t(i.currentTarget).addClass(y)},_buttonLeave:function(i){t(i.currentTarget).removeClass(y)},_focus:function(){this.wrapper.addClass(L)},_blur:function(){this.wrapper.removeClass(L)},_dimensions:function(){var t=this.wrapper,i=this.options,e=i.width,n=i.height,o=i.maxHeight,r=i.size,s=["minWidth","minHeight","maxWidth","maxHeight"],a="content-box"==t.css("box-sizing"),l=a?nt(t,"border-left-width")+nt(t,"border-right-width"):0,d=a?nt(t,"border-top-width")+nt(t,"border-bottom-width"):0,p=a?nt(t,"padding-top"):0;this.containment&&!this._isPinned&&(this._updateBoundaries(),i.maxHeight=Math.min(this.containment.height-(d+p),o),i.maxWidth=Math.min(this.containment.width-l,i.maxWidth));for(var c=0;c<s.length;c++){var h=i[s[c]]||"";h!=1/0&&t.css(s[c],h)}o!=1/0&&this.element.css("maxHeight",o),e?t.outerWidth(ot(e,i.minWidth,i.maxWidth)):t.outerWidth(""),n?t.outerHeight(ot(n,i.minHeight,i.maxHeight)):t.outerHeight(""),i.visible||t.removeClass(W).hide(),r&&it[r]&&t.addClass(it[r])},_position:function(){var t,i,e=this.wrapper,n=this.options.position;this._updateBoundaries(),this.containment&&(n.top=n.top||0,n.left=n.left||0,t=n.top.toString().indexOf("%")>0?parseInt(this.containment.height*(parseFloat(n.top)/100),10):n.top,i=n.left.toString().indexOf("%")>0?parseInt(this.containment.width*(parseFloat(n.left)/100),10):n.left,n.top=ot(t,this.minTop,this.maxTop),n.left=ot(i,this.minLeft,this.maxLeft)),n.top&&n.top.toString().indexOf("px")>0&&(n.top=Number(n.top.replace("px",""))),n.left&&n.left.toString().indexOf("px")>0&&(n.left=Number(n.left.replace("px",""))),0===n.top&&(n.top=n.top.toString()),0===n.left&&(n.left=n.left.toString()),e.css({top:n.top||"",left:n.left||""})},_updateBoundaries:function(){var t=this.containment;if(!t)return null;t.width=t.innerWidth(),t.height=t.innerHeight(),parseInt(t.width,10)>t[0].clientWidth&&(t.width-=n.support.scrollbar()),parseInt(t.height,10)>t[0].clientHeight&&(t.height-=n.support.scrollbar()),t.position=st(t[0]),this._isPinned?(this.minTop=this.minLeft=-1/0,this.maxTop=this.maxLeft=1/0):(this.minTop=t.scrollTop(),this.minLeft=t.scrollLeft(),this.maxLeft=this.minLeft+t.width-d(this.wrapper,!0),this.maxTop=this.minTop+t.height-p(this.wrapper,!0))},_animationOptions:function(t){var i=this.options.animation;return i&&i[t]||{open:{effects:{}},close:{hide:!0,effects:{}}}[t]},_resize:function(){n.resize(this.element.children())},_resizable:function(){var i=this.options.resizable,n=this.wrapper;this.resizing&&(n.off("dblclick"+g).children(x).remove(),this.resizing.destroy(),this.resizing=null),i&&(n.on("dblclick"+g,v,function(i){t(i.target).closest(".k-window-action").length||this.toggleMaximization()}.bind(this)),h("n e s w se sw ne nw".split(" "),(function(t,i){n.append(e.resizeHandle(i))})),this.resizing=new lt(this)),n=null},_draggable:function(){var t=this.options.draggable;this.dragging&&(this.dragging.destroy(),this.dragging=null),t&&(this.dragging=new dt(this,t.dragHandle||v))},_actions:function(){var i=this.options,o=i.actions,r=i.pinned,s=this.wrapper.children(v).find(".k-window-actions"),a=["maximize","minimize"];o=t.map(o,(function(t){return t=r&&"pin"===t.toLowerCase()?"unpin":t,{name:a.indexOf(t.toLowerCase())>-1?"window-"+t:t}})),s.html(n.render(e.action,o))},setOptions:function(i){var e=this,n=e.options.size,r=this.containment&&!e._isPinned?this.containment:t(document),s=JSON.parse(JSON.stringify(i));c(i.position,e.options.position),c(i.position,s.position),e._containerScrollTop=r.scrollTop(),e._containerScrollLeft=r.scrollLeft(),o.fn.setOptions.call(e,i);var a=!1!==e.options.scrollable;if(e.restore(),void 0!==i.title&&e.title(i.title),e.wrapper.removeClass(it[n]),e._dimensions(),e._position(),e._resizable(),e._draggable(),e._actions(),void 0!==i.modal){var l=!1!==e.options.visible;e._enableDocumentScrolling(),e._overlay(i.modal&&l)}e.element.css(B,a?"":"hidden")},events:[M,C,I,D,"minimize","maximize",E,A,F,"resize",R,N,j,"kendoKeydown",K],options:{name:"Window",animation:{open:{effects:{zoom:{direction:"in"},fade:{direction:"in"}},duration:350},close:{effects:{zoom:{direction:"out",properties:{scale:.7}},fade:{direction:"out"}},duration:350,hide:!0}},title:"",actions:["Close"],autoFocus:!0,modal:!1,size:"auto",resizable:!0,draggable:!0,minWidth:90,minHeight:50,maxWidth:1/0,maxHeight:1/0,pinned:!1,scrollable:!0,position:{},content:null,visible:null,height:null,width:null,appendTo:"body",isMaximized:!1,isMinimized:!1},_closable:function(){return t.inArray("close",t.map(this.options.actions,(function(t){return t.toLowerCase()})))>-1},_keydownContent:function(t){var i=n.keys;t.keyCode==i.ESC&&this._closable()&&(t.stopPropagation(),this._close(!1))},_keydown:function(t){var i,e,o,r,s,a,l=this,d=l.options,p=n.keys,c=t.keyCode,h=l.wrapper,f=10,m=d.isMaximized,g=d.isMinimized;c==p.ESC&&l._closable()&&(t.stopPropagation(),l._close(!1)),t.target!=t.currentTarget||l._closing||(t.altKey&&82==c&&l.refresh(),t.altKey&&80==c&&(l.options.pinned?l.unpin():l.pin()),t.altKey&&c==p.UP?g?(l.restore(),l.wrapper.trigger("focus")):m||(l.maximize(),l.wrapper.trigger("focus")):t.altKey&&c==p.DOWN&&(g||m?m&&(l.restore(),l.wrapper.trigger("focus")):(l.minimize(),l.wrapper.trigger("focus"))),i=n.getOffset(h),l.containment&&!l._isPinned&&(i=l.options.position),!d.draggable||t.ctrlKey||t.altKey||m||(l._updateBoundaries(),c==p.UP?(i.top=ot(i.top-f,l.minTop,l.maxTop),e=h.css("top",i.top)):c==p.DOWN?(i.top=ot(i.top+f,l.minTop,l.maxTop),e=h.css("top",i.top)):c==p.LEFT?(i.left=ot(i.left-f,l.minLeft,l.maxLeft),e=h.css("left",i.left)):c==p.RIGHT&&(i.left=ot(i.left+f,l.minLeft,l.maxLeft),e=h.css("left",i.left))),d.resizable&&t.ctrlKey&&!m&&!g&&(c==p.UP?(e=!0,r=h.outerHeight()-f):c==p.DOWN&&(e=!0,r=l.containment&&!l._isPinned?Math.min(h.outerHeight()+f,l.containment.height-i.top-nt(h,"padding-top")-nt(h,"borderBottomWidth")-nt(h,"borderTopWidth")):h.outerHeight()+f),c==p.LEFT?(e=!0,o=h.outerWidth()-f):c==p.RIGHT&&(e=!0,o=l.containment&&!l._isPinned?Math.min(h.outerWidth()+f,l.containment.width-i.left-nt(h,"borderLeftWidth")-nt(h,"borderRightWidth")):h.outerWidth()+f),e&&(s=ot(o,d.minWidth,d.maxWidth),a=ot(r,d.minHeight,d.maxHeight),isNaN(s)||(h.outerWidth(s),l.options.width=s+"px"),isNaN(a)||(h.outerHeight(a),l.options.height=a+"px"),l.resize())),e&&t.preventDefault())},_overlay:function(i){var e=this.containment?this.containment.children(k):this.appendTo.children(k),n=this.wrapper,o=i?"block":"none",r=parseInt(n.css(U),10)-1;return e.length||(e=t("<div class='k-overlay' />")),e.insertBefore(n[0]).css({zIndex:r,display:o}),this.options.modal.preventScroll&&!this.containment&&this._stopDocumentScrolling(),e},_actionForIcon:function(t){return{"k-i-close":"_close","k-i-window-maximize":"maximize","k-i-window-minimize":"minimize","k-i-window-restore":"restore","k-i-refresh":"refresh","k-i-pin":"pin","k-i-unpin":"unpin"}[/\bk-i(-\w+)+\b/.exec(t[0].className)[0]]},_windowActionHandler:function(i){if(!this._closing){var e=t(i.target).closest(".k-window-action").find(".k-icon"),n=this._actionForIcon(e);return n?(i.preventDefault(),this[n](),!1):void 0}},_modals:function(){for(var i,e=this,n=t(w+O),o=[],r=0;r<n.length;r+=1)(i=e._object(t(n[r])))&&i.options&&i.options.modal&&i.options.visible&&i.options.appendTo===e.options.appendTo&&(!i.containment||e.containment&&i.containment[0]===e.containment[0])&&o.push(i.wrapper[0]);return o.sort((function(t,i){return t.style.zIndex-i.style.zIndex})),e=null,t(o)},_object:function(t){var e=t.children(b),o=n.widgetInstance(e);return o||i},center:function(){var i,e,n=this,o=n.options.position,r=n.wrapper,s=t(window),a=0,l=0;return n.options.isMaximized||(n.options.pinned&&!n._isPinned&&n.pin(),n.options.pinned||(a=s.scrollTop(),l=s.scrollLeft()),this.containment&&!n.options.pinned?(i=this.minTop+(this.maxTop-this.minTop)/2,e=this.minLeft+(this.maxLeft-this.minLeft)/2):(n._scrollIsAppended=!0,e=l+Math.max(0,(s.width()-r.outerWidth())/2),i=a+Math.max(0,(s.height()-r.outerHeight()-nt(r,"paddingTop"))/2)),r.css({left:e,top:i}),o.top=i,o.left=e),n},title:function(i){var o,r=this,s=!0,a=r.wrapper,l=a.children(v),d=l.children(_);return arguments.length?(t.isPlainObject(i)?(o=void 0!==i.text?i.text:"",s=!1!==i.encoded):o=i,!1===o?(a.addClass("k-window-titleless"),a.css("padding-top",0),l.remove()):l.length?d.html(s?n.htmlEncode(o):o):(a.prepend(e.titlebar({title:s?n.htmlEncode(o):o})),r._actions(),l=a.children(v)),r.options.title=o,r):d.html()},content:function(t,i){var e=this.wrapper.children(b),o=e.children(".km-scroll-container");return e=o[0]?o:e,et(t)?(this.angular("cleanup",(function(){return{elements:e.children()}})),n.destroy(this.element.children()),e.empty().html(t),this.angular("compile",(function(){for(var t=[],n=e.length;--n>=0;)t.push({dataItem:i});return{elements:e.children(),data:t}})),this):e.html()},open:function(){var i,e,o=this,r=o.wrapper,s=o.options,a=this._animationOptions("open"),l=r.children(b),d=this.containment&&!o._isPinned?this.containment:t(document);if(!o.trigger(M)){if(o._closing&&r.kendoStop(!0,!0),o._closing=!1,o.toFront(),s.autoFocus&&o.wrapper.trigger("focus"),s.visible=!0,s.modal){if(e=!!o._modals().length,(i=o._overlay(e)).kendoStop(!0,!0),a.duration&&n.effects.Fade&&!e){var p=n.fx(i).fadeIn();p.duration(a.duration||0),p.endValue(.5),p.play()}else i.css("opacity",.5);i.show(),t(window).on("focus"+u,(function(){r.data("isFront")&&!t(document.activeElement).closest(r).length&&o.wrapper.trigger("focus")}))}r.is(O)||(l.css(B,P),o.wrapper.find(X).addClass("k-button-flat"),r.addClass(W).kendoStop().kendoAnimate({effects:a.effects,duration:a.duration,complete:this._activate.bind(this)}))}return s.isMaximized&&(o._containerScrollTop=d.scrollTop(),o._containerScrollLeft=d.scrollLeft(),o._stopDocumentScrolling()),this.options.pinned&&!this._isPinned&&this.pin(),o},_activate:function(){var t=!1!==this.options.scrollable;this.options.autoFocus&&this.wrapper.trigger("focus"),this.element.css(B,t?"":"hidden"),n.resize(this.element.children()),this.trigger(C)},_removeOverlay:function(e){var o=this._modals(),r=this.options,s=r.modal&&!o.length,a=this._animationOptions("close");if(s){if(!e&&a.duration&&n.effects.Fade){var l=n.fx(r.modal?this._overlay(!0):t(i)).fadeOut();l.duration(a.duration||0),l.startValue(.5),l.play()}else this._overlay(!1).remove();r.modal.preventScroll&&this._enableDocumentScrolling()}else o.length&&(this._object(o.last())._overlay(!0),r.modal.preventScroll&&this._stopDocumentScrolling())},_close:function(i){var e,n=this,o=n.wrapper,r=n.options,s=this._animationOptions("open"),a=this._animationOptions("close"),l=this.containment&&!n._isPinned?this.containment:t(document);n._closing||(e=n.trigger(D,{userTriggered:!i}),n._closing=!e,o.is(O)&&!e&&(r.visible=!1,t(w).each((function(i,e){var n=t(e).children(b);e!=o&&n.find("> ."+z).length>0&&n.children(k).remove()})),this._removeOverlay(),n.wrapper.find(X).removeClass("k-button-flat"),o.kendoStop().kendoAnimate({effects:a.effects||s.effects,reverse:!0===a.reverse,duration:a.duration,complete:this._deactivate.bind(this)}),t(window).off(u)),n.options.isMaximized&&(n._enableDocumentScrolling(),n._containerScrollTop&&n._containerScrollTop>0&&l.scrollTop(n._containerScrollTop),n._containerScrollLeft&&n._containerScrollLeft>0&&l.scrollLeft(n._containerScrollLeft)),n.options.iframe&&n.wrapper.trigger("blur"))},_deactivate:function(){var t=this;if(t.wrapper.removeClass(W).hide().css("opacity",""),t.trigger(I),t.options.modal){var i=t._object(t._modals().last());i&&i.toFront()}},close:function(){return this._close(!0),this},_actionable:function(i){return t(i).is(X+","+X+" .k-icon, :input, a, .k-input, .k-icon, [role='gridcell'], .k-input-value-text")},_shouldFocus:function(i){var e=l(),n=this.wrapper;return this.options.autoFocus&&!t(e).is(n)&&!this._actionable(i)&&(!n.find(e).length||!n.find(i).length)},toFront:function(i,n){var o=this,r=o.wrapper,s=r[0],a=o.containment&&!o._isPinned,l=this._animationOptions("open"),d=+r.css(U),p=d,c=i&&i.target||null;if(t(w).each((function(i,n){var o=t(n),a=o.css(U),l=o.children(b);isNaN(a)||(d=Math.max(+a,d)),r.data("isFront",n==s),n!=s&&l.find("."+z).length&&!l.find(k).length&&l.append(e.overlay)})),(!r[0].style.zIndex||p<d)&&r.css(U,d+2),o.element.find("> .k-overlay").remove(),o._shouldFocus(c)){n||setTimeout((function(){o.wrapper.focus()}),l?l.duration:0);var h=a?o.containment.scrollTop():t(window).scrollTop(),f=parseInt(r.position().top,10);!o.options.pinned&&f>0&&f<h&&(h>0?t(window).scrollTop(f):r.css("top",h))}return r=null,o},toggleMaximization:function(){return this._closing?this:this[this.options.isMaximized?"restore":"maximize"]()},restore:function(){var i=this,e=i.options,n=e.minHeight,o=i.restoreOptions,r=i.containment&&!i._isPinned?i.containment:t(document);return e.isMaximized||e.isMinimized?(n&&n!=1/0&&i.wrapper.css("min-height",n),o&&!e.isMaximized&&(o.height=ot(o.height,i.options.minHeight,i.options.maxHeight),e.position.top+parseInt(o.height,10)>i.maxTop&&(e.position.top=ot(e.position.top,i.minTop,i.maxTop-parseInt(o.height,10)),c(o,{left:e.position.left,top:e.position.top}))),i.wrapper.css({position:e.pinned?"fixed":"absolute",left:o.left,top:o.top,width:o.width,height:o.height}).removeClass(S).find(".k-window-content,.k-resize-handle").show().end().find(".k-window-titlebar .k-i-window-restore").parent().remove().end().end().find(G).parent().show().end().end().find(Q).parent().show(),e.isMaximized?i.wrapper.find(".k-i-window-maximize").parent().trigger("focus"):e.isMinimized&&i.wrapper.find(".k-i-window-minimize").parent().trigger("focus"),i.options.width=o.width,i.options.height=o.height,i.options.modal.preventScroll||i._enableDocumentScrolling(),i._containerScrollTop&&i._containerScrollTop>0&&r.scrollTop(i._containerScrollTop),i._containerScrollLeft&&i._containerScrollLeft>0&&r.scrollLeft(i._containerScrollLeft),e.isMaximized=e.isMinimized=!1,i.wrapper.removeAttr("aria-labelled-by"),i.resize(),i.trigger(A),i):i},_sizingAction:function(t,i){var n=this,o=n.wrapper,r=o[0].style,s=n.options;return s.isMaximized||s.isMinimized||(n.restoreOptions={width:r.width,height:r.height},o.children(x).hide().end().children(v).find(G).parent().hide().eq(0).before(e.action({name:"window-restore"})),i.call(n),n.wrapper.children(v).find(Q).parent().toggle("maximize"!==t),n.trigger(t),o.find(".k-i-window-restore").parent().trigger("focus")),n},maximize:function(){return this._sizingAction("maximize",(function(){var i=this,e=i.wrapper,n=this.containment&&!i._isPinned,o=e.position(),r=t(document);c(i.restoreOptions,{left:o.left+(n?this.containment.scrollLeft():0),top:o.top+(n?this.containment.scrollTop():0)}),this._containerScrollTop=n?this.containment.scrollTop():r.scrollTop(),this._containerScrollLeft=n?this.containment.scrollLeft():r.scrollLeft(),i._stopDocumentScrolling(),e.css({top:n?this.containment.scrollTop():0,left:n?this.containment.scrollLeft():0,position:n?"absolute":"fixed"}).addClass(S),i.options.isMaximized=!0,i._onDocumentResize()})),this},_stopDocumentScrolling:function(){var i=this,e=i.containment;if(e&&!i._isPinned)return i._storeOverflowRule(e),e.css(B,P),void i.wrapper.css({maxWidth:e.innerWidth(),maxHeight:e.innerHeight()});var n=t("body");i._storeOverflowRule(n),n.css(B,P);var o=t("html");i._storeOverflowRule(o),o.css(B,P)},_enableDocumentScrolling:function(){var i=this,e=i.containment;if(e&&!i._isPinned)return i._restoreOverflowRule(e),void i.wrapper.css({maxWidth:e.width,maxHeight:e.height});i._restoreOverflowRule(t(document.body)),i._restoreOverflowRule(t("html"))},_storeOverflowRule:function(t){if(!this._isOverflowStored(t)){var i=t.get(0).style.overflow;"string"==typeof i&&t.data(q,i)}},_isOverflowStored:function(t){return"string"==typeof t.data(q)},_restoreOverflowRule:function(t){var e=t.data(q);null!==e&&e!==i?(t.css(B,e),t.removeData(q)):t.css(B,"")},isMaximized:function(){return this.options.isMaximized},minimize:function(){return this._sizingAction("minimize",(function(){var t=this;t.wrapper.css({height:"",minHeight:""}),t.element.hide(),t.options.isMinimized=!0})),this.wrapper.attr("aria-labelled-by",this.element.attr("aria-labelled-by")),this._updateBoundaries(),this},isMinimized:function(){return this.options.isMinimized},pin:function(){var i=this,e=t(window),n=i.wrapper,o=i.options,r=o.position,s=this.containment?st(n[0]).top+nt(this.containment,"borderTopWidth"):nt(n,"top"),a=this.containment?st(n[0]).left+nt(this.containment,"borderLeftWidth"):nt(n,"left");i.options.isMaximized||(r.top=s,r.left=a,!i._scrollIsAppended||this.containment&&"fixed"===this.containment.css("position")||(r.top-=e.scrollTop(),r.left-=e.scrollLeft(),i._scrollIsAppended=!1),n.css(c(r,{position:"fixed"})),n.children(v).find(J).addClass("k-i-unpin").removeClass("k-i-pin"),i._isPinned=!0,i.options.pinned=!0,this.containment&&(o.maxWidth=o.maxHeight=1/0,n.css({maxWidth:"",maxHeight:""})))},unpin:function(){var i=this,e=t(window),n=i.wrapper,o=i.options,r=i.options.position,s=i.containment,a=parseInt(n.css("top"),10)+e.scrollTop(),l=parseInt(n.css("left"),10)+e.scrollLeft();i.options.isMaximized||(i._isPinned=!1,i._scrollIsAppended=!0,i.options.pinned=!1,s&&(i._updateBoundaries(),o.maxWidth=Math.min(s.width,o.maxWidth),o.maxHeight=Math.min(s.height-nt(n,"padding-top"),o.maxHeight),n.css({maxWidth:o.maxWidth,maxHeight:o.maxHeight}),a=a<s.position.top?i.minTop:a>s.position.top+s.height?i.maxTop:a+s.scrollTop()-(s.position.top+nt(s,"border-top-width")),l=l<s.position.left?i.minLeft:l>s.position.left+s.width?i.maxLeft:l+s.scrollLeft()-(s.position.left+nt(s,"border-left-width"))),r.top=ot(a,i.minTop,i.maxTop),r.left=ot(l,i.minLeft,i.maxLeft),n.css(c(r,{position:""})),n.children(v).find(V).addClass("k-i-pin").removeClass("k-i-unpin"))},_onDocumentResize:function(){var i,e,o=this,r=o.wrapper,s=t(window),a=n.support.zoomLevel(),l="content-box"==r.css("box-sizing");if(o.options.isMaximized){var d=l?nt(r,"border-left-width")+nt(r,"border-right-width"):0,p=l?nt(r,"border-top-width")+nt(r,"border-bottom-width"):0,c=l?nt(r,"padding-top"):0;o.containment&&!o._isPinned?(i=o.containment.innerWidth()-d,e=o.containment.innerHeight()-(p+c)):(i=s.width()/a-d,e=s.height()/a-(p+c)),r.css({width:i,height:e}),o.options.width=i,o.options.height=e,o.resize()}},refresh:function(i){var n,o,r,s=this,l=s.options,d=t(s.element);return a(i)||(i={url:i}),i=c(l.content,i),o=et(l.iframe)?l.iframe:i.iframe,(r=i.url)?(et(o)||(o=!tt(r)),o?((n=d.find("."+z)[0])?n.src=r||n.src:d.html(e.contentFrame(c({},l,{content:i}))),d.find("."+z).off("load"+g).on("load"+g,this._triggerRefresh.bind(this))):s._ajaxRequest(i)):(i.template&&s.content(f(i.template)({})),s.trigger(E)),d.toggleClass("k-window-iframecontent",!!o),s},_triggerRefresh:function(){this.trigger(E)},_ajaxComplete:function(){clearTimeout(this._loadingIconTimeout),this.wrapper.find(Y).removeClass(T)},_ajaxError:function(t,i){this.trigger(K,{status:i,xhr:t})},_ajaxSuccess:function(t){return function(i){var e=i;t&&(e=f(t)(i||{})),this.content(e,i),this.element.prop("scrollTop",0),this.trigger(E)}},_showLoading:function(){this.wrapper.find(Y).addClass(T)},_ajaxRequest:function(i){this._loadingIconTimeout=setTimeout(this._showLoading.bind(this),100),t.ajax(c({type:"GET",dataType:"html",cache:!1,error:this._ajaxError.bind(this),complete:this._ajaxComplete.bind(this),success:this._ajaxSuccess(i.template).bind(this)},i))},_destroy:function(){this.resizing&&this.resizing.destroy(),this.dragging&&this.dragging.destroy(),this.wrapper.off(g).children(b).off(g).end().find(".k-resize-handle,.k-window-titlebar").off(g),t(window).off("resize"+g+this._marker),t(window).off(u),t(window).off(g),clearTimeout(this._loadingIconTimeout),o.fn.destroy.call(this),this.unbind(i),n.destroy(this.wrapper)},destroy:function(){this._destroy(),this.options.modal&&this._removeOverlay(!0),this.wrapper.empty().remove(),this.wrapper=this.appendTo=this.element=t()},_createWindow:function(){var i,o,r=this.element,s=this.options,a=n.support.isRtl(r);!1===s.scrollable&&r.css("overflow","hidden"),o=t(e.wrapper(s)),i=r.find("iframe:not(.k-content-frame)").map((function(){var t=this.getAttribute("src");return this.src="",t})),o.toggleClass("k-rtl",a).attr("tabindex",0).append(r).find("iframe:not(.k-content-frame)").each((function(t){this.src=i[t]})),this.containment?this.containment.prepend(o):this.appendTo&&o.appendTo(this.appendTo),o.find(".k-window-title").css(a?"left":"right",d(o.find(".k-window-actions"))+10),r.css("visibility","").show(),r.find("[data-role=editor]").each((function(){var i=t(this).data("kendoEditor");i&&i.refresh()})),o=r=null}});function lt(t){var i=this;i.owner=t,i._preventDragging=!1,i._draggable=new s(t.wrapper,{filter:">.k-resize-handle",group:t.wrapper.id+"-resizing",dragstart:i.dragstart.bind(i),drag:i.drag.bind(i),dragend:i.dragend.bind(i)}),i._draggable.userEvents.bind("press",i.addOverlay.bind(i)),i._draggable.userEvents.bind("release",i.removeOverlay.bind(i))}function dt(t,i){var e=this;e.owner=t,e._preventDragging=!1,e._draggable=new s(t.wrapper,{filter:i,group:t.wrapper.id+"-moving",dragstart:e.dragstart.bind(e),drag:e.drag.bind(e),dragend:e.dragend.bind(e),dragcancel:e.dragcancel.bind(e)}),e._draggable.userEvents.stopPropagation=!1}e={wrapper:f("<div class='k-widget k-window'></div>"),action:f("<a role='button' href='\\#' class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button k-window-action' aria-label='#= name #'><span class='k-button-icon k-icon k-i-#= name.toLowerCase() #'></span></a>"),titlebar:f("<div class='k-window-titlebar k-hstack'><span class='k-window-title'>#= title #</span><div class='k-window-actions k-hstack'></div></div>"),overlay:"<div class='k-overlay'></div>",contentFrame:f("<iframe frameborder='0' title='#= title #' class='k-content-frame' src='#= content.url #'>This page requires frames in order to show content</iframe>"),resizeHandle:f("<div aria-hidden='true' class='k-resize-handle k-resize-#= data #'></div>")},lt.prototype={addOverlay:function(){this.owner.wrapper.append(e.overlay)},removeOverlay:function(){this.owner.wrapper.find(k).remove()},dragstart:function(i){var e=this,o=e.owner,r=o.wrapper;if(e._preventDragging=o.trigger(F),!e._preventDragging){e.elementPadding=parseInt(r.css("padding-top"),10),e.initialPosition=n.getOffset(r,"position"),e.resizeDirection=i.currentTarget.prop("className").replace("k-resize-handle k-resize-",""),e.initialSize={width:r.outerWidth(),height:r.outerHeight()},o._updateBoundaries(),e.containerOffset=o.containment?o.containment.position:n.getOffset(o.appendTo);var s=r.offsetParent();if(s.is("html"))e.containerOffset.top=e.containerOffset.left=0;else{var a=s.css("margin-top"),l=s.css("margin-left");if(!Z.test(a)||!Z.test(l)){var d=st(r[0]),p=d.left-e.containerOffset.left-e.initialPosition.left,c=d.top-e.containerOffset.top-e.initialPosition.top;e._relativeElMarginLeft=p>1?p:0,e._relativeElMarginTop=c>1?c:0,e.initialPosition.left+=e._relativeElMarginLeft,e.initialPosition.top+=e._relativeElMarginTop}}r.children(x).not(i.currentTarget).hide(),t(m).css(H,i.currentTarget.css(H))}},drag:function(i){if(!this._preventDragging){var e,o,r,s,a=this,l=a.owner,d=l.wrapper,p=l.options,c=p.position,h=a.resizeDirection,f=a.containerOffset,m=a.initialPosition,g=a.initialSize,u=l.containment&&!l._isPinned,w=n.support.isRtl(l.containment),_=u&&w&&l.containment.innerWidth()>l.containment.width?n.support.scrollbar():0,v=u?{top:l.containment.scrollTop(),left:l.containment.scrollLeft()}:{top:0,left:0},b=Math.max(i.x.location,0),x=Math.max(i.y.location,0);h.indexOf("e")>=0?(e=l.containment&&b-g.width>=l.maxLeft-v.left+f.left+_?l.maxLeft+_-m.left+g.width-v.left:b-m.left-f.left,d.outerWidth(ot(e,p.minWidth,p.maxWidth))):h.indexOf("w")>=0&&(e=ot((s=m.left+g.width+f.left)-b,p.minWidth,p.maxWidth),c.left=s-e-f.left-_-(a._relativeElMarginLeft||0)+v.left,l.containment&&c.left<=l.minLeft&&(c.left=l.minLeft,e=ot(s-_-c.left-f.left+v.left,p.minWidth,p.maxWidth)),d.css({left:c.left,width:e}));var k=x;l.options.pinned&&(k-=t(window).scrollTop()),h.indexOf("s")>=0?(o=k-m.top-a.elementPadding-f.top,k-g.height-a.elementPadding>=l.maxTop+f.top-v.top&&(o=l.maxTop-m.top+g.height-v.top),d.outerHeight(ot(o,p.minHeight,p.maxHeight))):h.indexOf("n")>=0&&(o=ot((r=m.top+g.height+f.top)-k,p.minHeight,p.maxHeight),c.top=r-o-f.top-(a._relativeElMarginTop||0)+v.top,c.top<=l.minTop&&l.containment&&(c.top=l.minTop,o=ot(r-c.top-f.top+v.top,p.minHeight,p.maxHeight)),d.css({top:c.top,height:o})),e&&(l.options.width=e+"px"),o&&(l.options.height=o+"px"),l.resize()}},dragend:function(i){if(!this._preventDragging){var e=this,n=e.owner,o=n.wrapper;return o.children(x).not(i.currentTarget).show(),t(m).css(H,""),n.touchScroller&&n.touchScroller.reset(),27==i.keyCode&&o.css(e.initialPosition).css(e.initialSize),n.trigger(R),!1}},destroy:function(){this._draggable&&this._draggable.destroy(),this._draggable=this.owner=null}},dt.prototype={dragstart:function(i){var o=this.owner,r=o.options.draggable,s=o.element,a=s.find(".k-window-actions"),l=n.getOffset(o.appendTo);this._preventDragging=o.trigger(N)||!r,this._preventDragging||o.isMaximized()||(o.initialWindowPosition=n.getOffset(o.wrapper,"position"),o.initialPointerPosition={left:o.options.position.left,top:o.options.position.top},o.startPosition={left:i.x.client-o.initialWindowPosition.left,top:i.y.client-o.initialWindowPosition.top},o._updateBoundaries(),o.containment||(a.length>0?o.minLeft=d(a)+parseInt(a.css("right"),10)-d(s):o.minLeft=20-d(s),o.minLeft-=l.left,o.minTop=-l.top),t(e.overlay).appendTo(o.wrapper).css({opacity:0}),o.wrapper.children(x).hide(),t(m).css(H,i.currentTarget.css(H)))},drag:function(i){var e,o,r=this.owner,s=r.options.position,a=r.options.draggable.axis;this._preventDragging||r.isMaximized()||(a&&"x"!==a.toLowerCase()||(e=i.x.client-r.startPosition.left,r.containment&&!r._isPinned&&(e+=r.containment.scrollLeft()),s.left=ot(e,r.minLeft,r.maxLeft)),a&&"y"!==a.toLowerCase()||(o=i.y.client-r.startPosition.top,r.containment&&!r._isPinned&&(o+=r.containment.scrollTop()),s.top=ot(o,r.minTop,r.maxTop)),n.support.transforms?t(r.wrapper).css("transform","translate("+(s.left-r.initialPointerPosition.left)+"px, "+(s.top-r.initialPointerPosition.top)+"px)"):t(r.wrapper).css(s))},_finishDrag:function(){var i=this.owner;i.wrapper.children(x).toggle(!i.options.isMinimized).end().find(k).remove(),t(m).css(H,"")},dragcancel:function(t){this._preventDragging||(this._finishDrag(),t.currentTarget.closest(w).css(this.owner.initialWindowPosition))},dragend:function(){var i=this.owner;if(!this._preventDragging&&!i.isMaximized())return t(i.wrapper).css(i.options.position).css("transform",""),this._finishDrag(),i.trigger(j),!1},destroy:function(){this._draggable&&this._draggable.destroy(),this._draggable=this.owner=null}},n.ui.plugin(at)}(window.kendo.jQuery)}));
//# sourceMappingURL=kendo.window.min.js.map
