{"version":3,"file":"kendo.mobile.pane.min.js","names":["factory","define","amd","$","kendo","mobile","roleSelector","ui","Widget","ViewEngine","View","Loader","EXTERNAL","HREF","NAVIGATE","VIEW_SHOW","SAME_VIEW_REQUESTED","OS","SKIP_TRANSITION_ON_BACK_BUTTON","WIDGET_RELS","attrValue","Pane","window","jQuery","support","mobileOS","ios","appMode","flatVersion","extend","init","element","options","that","this","fn","call","addClass","collapsible","history","historyCallback","url","params","backButtonPressed","transition","viewEngine","showView","_historyNavigate","length","pop","push","parseQueryStringParams","_historyReplace","loader","loading","container","modelScope","rootNeeded","initial","serverNavigation","remoteViewURLPrefix","root","layout","$angular","showStart","closeActiveDialogs","after","transitionDone","viewShow","e","trigger","loadStart","show","loadComplete","hide","sameViewRequested","viewTypeDetermined","remote","_setPortraitWidth","onResize","_setupAppLinks","find","filter","each","widgetInstance","close","navigateToInitial","navigate","name","portraitWidth","events","append","html","destroy","userEvents","id","replace","bindToRouter","router","bind","attrUrl","pushState","rootView","attr","preventDefault","hideLoading","showLoading","changeLoadingMessage","message","changeMessage","view","width","application","is","css","pressedButtonSelector","ns","buttonSelectors","map","role","join","handler","on","UserEvents","fastTap","tap","event","currentTarget","touch","_mouseup","_appLinkClick","href","which","isDefaultPrevented","pane","link","rel","target","delayedTouchEnd","offsetHeight","setTimeout","match","openFor","stopPropagation","data","wrap","parent","paneContainer","plugin"],"sources":["kendo.mobile.pane.js"],"mappings":"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","sourcesContent":["(function (factory) {\n    typeof define === 'function' && define.amd ? define(['kendo.mobile.view', 'kendo.mobile.loader'], factory) :\n    factory();\n})((function () {\n    var __meta__ = {\n        id: \"mobile.pane\",\n        name: \"Pane\",\n        category: \"mobile\",\n        description: \"Mobile Pane\",\n        depends: [ \"mobile.view\", \"mobile.loader\" ],\n        hidden: true\n    };\n\n    (function($, undefined$1) {\n        var kendo = window.kendo,\n            mobile = kendo.mobile,\n            roleSelector = kendo.roleSelector,\n            ui = mobile.ui,\n            Widget = ui.Widget,\n            ViewEngine = mobile.ViewEngine,\n            View = ui.View,\n            Loader = mobile.ui.Loader,\n\n            EXTERNAL = \"external\",\n            HREF = \"href\",\n            DUMMY_HREF = \"#!\",\n\n            NAVIGATE = \"navigate\",\n            VIEW_SHOW = \"viewShow\",\n            SAME_VIEW_REQUESTED = \"sameViewRequested\",\n            OS = kendo.support.mobileOS,\n            SKIP_TRANSITION_ON_BACK_BUTTON = OS.ios && !OS.appMode && OS.flatVersion >= 700,\n            WIDGET_RELS = /popover|actionsheet|modalview|drawer/,\n            BACK = \"#:back\",\n\n            attrValue = kendo.attrValue;\n\n        var Pane = Widget.extend({\n            init: function(element, options) {\n                var that = this;\n\n                Widget.fn.init.call(that, element, options);\n\n                options = that.options;\n                element = that.element;\n\n                element.addClass(\"km-pane\");\n\n                if (that.options.collapsible) {\n                    element.addClass(\"km-collapsible-pane\");\n                }\n\n                this.history = [];\n\n                this.historyCallback = function(url, params, backButtonPressed) {\n                    var transition = that.transition;\n                    that.transition = null;\n\n                    // swiping back in iOS leaves the app in a very broken state if we perform a transition\n                    if (SKIP_TRANSITION_ON_BACK_BUTTON && backButtonPressed) {\n                        transition = \"none\";\n                    }\n\n                    return that.viewEngine.showView(url, transition, params);\n                };\n\n                this._historyNavigate = function(url) {\n                    if (url === BACK) {\n                        if (that.history.length === 1) {\n                            return;\n                        }\n\n                        that.history.pop();\n                        url = that.history[that.history.length - 1];\n                    } else {\n                        that.history.push(url);\n                    }\n\n                    that.historyCallback(url, kendo.parseQueryStringParams(url));\n                };\n\n                this._historyReplace = function(url) {\n                    var params = kendo.parseQueryStringParams(url);\n                    that.history[that.history.length - 1] = url;\n                    that.historyCallback(url, params);\n                };\n\n                that.loader = new Loader(element, {\n                    loading: that.options.loading\n                });\n\n                that.viewEngine = new ViewEngine({\n                    container: element,\n                    transition: options.transition,\n                    modelScope: options.modelScope,\n                    rootNeeded: !options.initial,\n                    serverNavigation: options.serverNavigation,\n                    remoteViewURLPrefix: options.root || \"\",\n                    layout: options.layout,\n                    $angular: options.$angular,\n                    loader: that.loader,\n\n                    showStart: function() {\n                        that.loader.transition();\n                        that.closeActiveDialogs();\n                    },\n\n                    after: function() {\n                        that.loader.transitionDone();\n                    },\n\n                    viewShow: function(e) {\n                        that.trigger(VIEW_SHOW, e);\n                    },\n\n                    loadStart: function() {\n                        that.loader.show();\n                    },\n\n                    loadComplete: function() {\n                        that.loader.hide();\n                    },\n\n                    sameViewRequested: function() {\n                        that.trigger(SAME_VIEW_REQUESTED);\n                    },\n\n                    viewTypeDetermined: function(e) {\n                        if (!e.remote || !that.options.serverNavigation) {\n                            that.trigger(NAVIGATE, { url: e.url });\n                        }\n                    }\n                });\n\n\n                this._setPortraitWidth();\n\n                kendo.onResize(function() {\n                    that._setPortraitWidth();\n                });\n\n                that._setupAppLinks();\n            },\n\n            closeActiveDialogs: function() {\n                var dialogs = this.element.find(roleSelector(\"actionsheet popover modalview\")).filter(\":visible\");\n                dialogs.each(function() {\n                    kendo.widgetInstance($(this), ui).close();\n                });\n            },\n\n            navigateToInitial: function() {\n                var initial = this.options.initial;\n\n                if (initial) {\n                    this.navigate(initial);\n                }\n\n                return initial;\n            },\n\n            options: {\n                name: \"Pane\",\n                portraitWidth: \"\",\n                transition: \"\",\n                layout: \"\",\n                collapsible: false,\n                initial: null,\n                modelScope: window,\n                loading: \"<h1>Loading...</h1>\"\n            },\n\n            events: [\n                NAVIGATE,\n                VIEW_SHOW,\n                SAME_VIEW_REQUESTED\n            ],\n\n            append: function(html) {\n                return this.viewEngine.append(html);\n            },\n\n            destroy: function() {\n                Widget.fn.destroy.call(this);\n                this.viewEngine.destroy();\n                this.userEvents.destroy();\n            },\n\n            navigate: function(url, transition) {\n                if (url instanceof View) {\n                    url = url.id;\n                }\n\n                this.transition = transition;\n\n                this._historyNavigate(url);\n            },\n\n            replace: function(url, transition) {\n                if (url instanceof View) {\n                    url = url.id;\n                }\n\n                this.transition = transition;\n\n                this._historyReplace(url);\n            },\n\n            bindToRouter: function(router) {\n                var that = this,\n                    history = this.history,\n                    viewEngine = this.viewEngine;\n\n                router.bind(\"init\", function(e) {\n                    var url = e.url,\n                        attrUrl = router.pushState ? url : \"/\";\n\n                    viewEngine.rootView.attr(kendo.attr(\"url\"), attrUrl);\n\n                    // if current is set, then this means that the pane has navigated to a given view - we need to update the router accordingly.\n                    var length = history.length;\n\n                    if (url === \"/\" && length) {\n                        router.navigate(history[length - 1], true);\n                        e.preventDefault(); // prevents from executing routeMissing, by default\n                    }\n                });\n\n                router.bind(\"routeMissing\", function(e) {\n                    if (!that.historyCallback(e.url, e.params, e.backButtonPressed)) {\n                        e.preventDefault();\n                    }\n                });\n\n                router.bind(\"same\", function() {\n                    that.trigger(SAME_VIEW_REQUESTED);\n                });\n\n                that._historyNavigate = function(url) {\n                    router.navigate(url);\n                };\n\n                that._historyReplace = function(url) {\n                    router.replace(url);\n                };\n            },\n\n            hideLoading: function() {\n                this.loader.hide();\n            },\n\n            showLoading: function() {\n                this.loader.show();\n            },\n\n            changeLoadingMessage: function(message) {\n                this.loader.changeMessage(message);\n            },\n\n            view: function() {\n                return this.viewEngine.view();\n            },\n\n            _setPortraitWidth: function() {\n                var width,\n                    portraitWidth = this.options.portraitWidth;\n\n                if (portraitWidth) {\n                    width = kendo.mobile.application.element.is(\".km-vertical\") ? portraitWidth : \"auto\";\n                    this.element.css(\"width\", width);\n                }\n            },\n\n            _setupAppLinks: function() {\n                var that = this,\n                    linkRoles = \"tab\",\n                    pressedButtonSelector = \"[data-\" + kendo.ns + \"navigate-on-press]\",\n\n                    buttonSelectors = $.map([\"button\", \"backbutton\", \"detailbutton\", \"listview-link\"] , function(role) {\n                        return roleSelector(role) + \":not(\" + pressedButtonSelector + \")\";\n                    }).join(\",\");\n\n                this.element.handler(this)\n                    .on(\"down\", roleSelector(linkRoles) + \",\" + pressedButtonSelector, \"_mouseup\")\n                    .on(\"click\", roleSelector(linkRoles) + \",\" + buttonSelectors + \",\" + pressedButtonSelector, \"_appLinkClick\");\n\n                this.userEvents = new kendo.UserEvents(this.element, {\n                    fastTap: true,\n                    filter: buttonSelectors,\n                    tap: function(e) {\n                        e.event.currentTarget = e.touch.currentTarget;\n                        that._mouseup(e.event);\n                    }\n                });\n\n                // remove the ms-touch-action added by the user events, breaks native scrolling in WP8\n                this.element.css('-ms-touch-action', '');\n            },\n\n            _appLinkClick: function(e) {\n                var href = $(e.currentTarget).attr(\"href\");\n                var remote = href && href[0] !== \"#\" && this.options.serverNavigation;\n\n                if (!remote && attrValue($(e.currentTarget), \"rel\") != EXTERNAL) {\n                    e.preventDefault();\n                }\n            },\n\n            _mouseup: function(e) {\n                if (e.which > 1 || e.isDefaultPrevented()) {\n                    return;\n                }\n\n                var pane = this,\n                    link = $(e.currentTarget),\n                    transition = attrValue(link, \"transition\"),\n                    rel = attrValue(link, \"rel\") || \"\",\n                    target = attrValue(link, \"target\"),\n                    href = link.attr(HREF),\n                    delayedTouchEnd = SKIP_TRANSITION_ON_BACK_BUTTON && link[0].offsetHeight === 0,\n                    remote = href && href[0] !== \"#\" && this.options.serverNavigation;\n\n                if (delayedTouchEnd || remote || rel === EXTERNAL || (typeof href === \"undefined\") || href === DUMMY_HREF) {\n                    return;\n                }\n\n                // Prevent iOS address bar progress display for in app navigation\n                link.attr(HREF, DUMMY_HREF);\n                setTimeout(function() { link.attr(HREF, href); });\n\n                if (rel.match(WIDGET_RELS)) {\n                    kendo.widgetInstance($(href), ui).openFor(link);\n                    // if propagation is not stopped and actionsheet is opened from tabstrip,\n                    // the actionsheet is closed immediately.\n                    if (rel === \"actionsheet\" || rel === \"drawer\") {\n                        e.stopPropagation();\n                    }\n                } else {\n                    if (target === \"_top\") {\n                        pane = mobile.application.pane;\n                    }\n                    else if (target) {\n                        pane = $(\"#\" + target).data(\"kendoMobilePane\");\n                    }\n\n                    pane.navigate(href, transition);\n                }\n\n                e.preventDefault();\n            }\n        });\n\n        Pane.wrap = function(element) {\n            if (!element.is(roleSelector(\"view\"))) {\n                element = element.wrap('<div data-' + kendo.ns + 'role=\"view\" data-stretch=\"true\"></div>').parent();\n            }\n\n            var paneContainer = element.wrap('<div class=\"km-pane-wrapper\"><div></div></div>').parent(),\n                pane = new Pane(paneContainer);\n\n            pane.navigate(\"\");\n\n            return pane;\n        };\n        ui.plugin(Pane);\n    })(window.kendo.jQuery);\n\n}));\n"]}